var mR=Object.defineProperty,yR=Object.defineProperties;var vR=Object.getOwnPropertyDescriptors;var _I=Object.getOwnPropertySymbols,_R=Object.getPrototypeOf,wR=Object.prototype.hasOwnProperty,IR=Object.prototype.propertyIsEnumerable,ER=Reflect.get;var wI=(n,e,t)=>e in n?mR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})wR.call(e,t)&&wI(n,t,e[t]);if(_I)for(var t of _I(e))IR.call(e,t)&&wI(n,t,e[t]);return n},fe=(n,e)=>yR(n,vR(e));var Nf=(n,e,t)=>ER(_R(n),t,e);var b=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function II(n,e){return Object.is(n,e)}var qe=null,hu=!1,fu=1,jn=Symbol("SIGNAL");function _e(n){let e=qe;return qe=n,e}function EI(){return qe}var ca={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kf(n){if(hu)throw new Error("");if(qe===null)return;qe.consumerOnSignalRead(n);let e=qe.nextProducerIndex++;if(yu(qe),e<qe.producerNode.length&&qe.producerNode[e]!==n&&aa(qe)){let t=qe.producerNode[e];mu(t,qe.producerIndexOfThis[e])}qe.producerNode[e]!==n&&(qe.producerNode[e]=n,qe.producerIndexOfThis[e]=aa(qe)?TI(n,qe,e):0),qe.producerLastReadVersion[e]=n.version}function bR(){fu++}function bI(n){if(!(aa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===fu)){if(!n.producerMustRecompute(n)&&!Lf(n)){n.dirty=!1,n.lastCleanEpoch=fu;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=fu}}function DI(n){if(n.liveConsumerNode===void 0)return;let e=hu;hu=!0;try{for(let t of n.liveConsumerNode)t.dirty||DR(t)}finally{hu=e}}function CI(){return qe?.consumerAllowSignalWrites!==!1}function DR(n){n.dirty=!0,DI(n),n.consumerMarkedDirty?.(n)}function gu(n){return n&&(n.nextProducerIndex=0),_e(n)}function Ff(n,e){if(_e(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(aa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)mu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Lf(n){yu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(bI(t),r!==t.version))return!0}return!1}function Vf(n){if(yu(n),aa(n))for(let e=0;e<n.producerNode.length;e++)mu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function TI(n,e,t){if(SI(n),n.liveConsumerNode.length===0&&AI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=TI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function mu(n,e){if(SI(n),n.liveConsumerNode.length===1&&AI(n))for(let r=0;r<n.producerNode.length;r++)mu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];yu(i),i.producerIndexOfThis[r]=e}}function aa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function yu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function SI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function AI(n){return n.producerNode!==void 0}function xI(n){let e=Object.create(CR);e.computation=n;let t=()=>{if(bI(e),kf(e),e.value===pu)throw e.error;return e.value};return t[jn]=e,t}var Pf=Symbol("UNSET"),Of=Symbol("COMPUTING"),pu=Symbol("ERRORED"),CR=fe(L({},ca),{value:Pf,dirty:!0,error:null,equal:II,producerMustRecompute(n){return n.value===Pf||n.value===Of},producerRecomputeValue(n){if(n.value===Of)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Of;let t=gu(n),r;try{r=n.computation()}catch(i){r=pu,n.error=i}finally{Ff(n,t)}if(e!==Pf&&e!==pu&&r!==pu&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function TR(){throw new Error}var RI=TR;function MI(){RI()}function NI(n){RI=n}var SR=null;function PI(n){let e=Object.create(kI);e.value=n;let t=()=>(kf(e),e.value);return t[jn]=e,t}function Uf(n,e){CI()||MI(),n.equal(n.value,e)||(n.value=e,AR(n))}function OI(n,e){CI()||MI(),Uf(n,e(n.value))}var kI=fe(L({},ca),{equal:II,value:void 0});function AR(n){n.version++,bR(),DI(n),SR?.()}function re(n){return typeof n=="function"}function cs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var vu=cs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ti(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ve=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(s){e=s instanceof vu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{FI(s)}catch(o){e=e??[],o instanceof vu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new vu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)FI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ti(t,e)}remove(e){let{_finalizers:t}=this;t&&ti(t,e),e instanceof n&&e._removeParent(this)}};Ve.EMPTY=(()=>{let n=new Ve;return n.closed=!0,n})();var jf=Ve.EMPTY;function _u(n){return n instanceof Ve||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function FI(n){re(n)?n():n.unsubscribe()}var rn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var us={setTimeout(n,e,...t){let{delegate:r}=us;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=us;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function wu(n){us.setTimeout(()=>{let{onUnhandledError:e}=rn;if(e)e(n);else throw n})}function ua(){}var LI=Bf("C",void 0,void 0);function VI(n){return Bf("E",void 0,n)}function UI(n){return Bf("N",n,void 0)}function Bf(n,e,t){return{kind:n,value:e,error:t}}var ni=null;function ls(n){if(rn.useDeprecatedSynchronousErrorHandling){let e=!ni;if(e&&(ni={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ni;if(ni=null,t)throw r}}else n()}function jI(n){rn.useDeprecatedSynchronousErrorHandling&&ni&&(ni.errorThrown=!0,ni.error=n)}var ri=class extends Ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,_u(e)&&e.add(this)):this.destination=MR}static create(e,t,r){return new dr(e,t,r)}next(e){this.isStopped?Hf(UI(e),this):this._next(e)}error(e){this.isStopped?Hf(VI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hf(LI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},xR=Function.prototype.bind;function $f(n,e){return xR.call(n,e)}var qf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Iu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Iu(r)}else Iu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Iu(t)}}},dr=class extends ri{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&rn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$f(e.next,s),error:e.error&&$f(e.error,s),complete:e.complete&&$f(e.complete,s)}):i=e}this.destination=new qf(i)}};function Iu(n){rn.useDeprecatedSynchronousErrorHandling?jI(n):wu(n)}function RR(n){throw n}function Hf(n,e){let{onStoppedNotification:t}=rn;t&&us.setTimeout(()=>t(n,e))}var MR={closed:!0,next:ua,error:RR,complete:ua};var ds=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pt(n){return n}function zf(...n){return Gf(n)}function Gf(n){return n.length===0?Pt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var me=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=PR(t)?t:new dr(t,r,i);return ls(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=BI(r),new r((i,s)=>{let o=new dr({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ds](){return this}pipe(...t){return Gf(t)(this)}toPromise(t){return t=BI(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function BI(n){var e;return(e=n??rn.Promise)!==null&&e!==void 0?e:Promise}function NR(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function PR(n){return n&&n instanceof ri||NR(n)&&_u(n)}function Wf(n){return re(n?.lift)}function ye(n){return e=>{if(Wf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(n,e,t,r,i){return new Kf(n,e,t,r,i)}var Kf=class extends ri{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function hs(){return ye((n,e)=>{let t=null;n._refCount++;let r=pe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var fs=class extends me{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Wf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ve;let t=this.getSubject();e.add(this.source.subscribe(pe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ve.EMPTY)}return e}refCount(){return hs()(this)}};var $I=cs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class n extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Eu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $I}next(t){ls(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ls(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ls(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?jf:(this.currentObservers=null,s.push(t),new Ve(()=>{this.currentObservers=null,ti(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new me;return t.source=this,t}}return n.create=(e,t)=>new Eu(e,t),n})(),Eu=class extends et{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:jf}};var tt=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Qf={now(){return(Qf.delegate||Date).now()},delegate:void 0};var bu=class extends Ve{constructor(e,t){super()}schedule(e,t=0){return this}};var la={setInterval(n,e,...t){let{delegate:r}=la;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=la;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ps=class extends bu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return la.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&la.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ti(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var gs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};gs.now=Qf.now;var ms=class extends gs{constructor(e,t=gs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Yf=new ms(ps);var Du=class extends ps{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Cu=class extends ms{};var Zf=new Cu(Du);var Ot=new me(n=>n.complete());function HI(n){return n&&re(n.schedule)}function qI(n){return n[n.length-1]}function Tu(n){return re(qI(n))?n.pop():void 0}function hr(n){return HI(qI(n))?n.pop():void 0}function Jf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function GI(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function c(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function zI(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ii(n){return this instanceof ii?(this.v=n,this):new ii(n)}function WI(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(T){return Promise.resolve(T).then(v,p)}}function a(v,T){r[v]&&(i[v]=function(M){return new Promise(function(R,k){s.push([v,M,R,k])>1||c(v,M)})},T&&(i[v]=T(i[v])))}function c(v,T){try{l(r[v](T))}catch(M){m(s[0][3],M)}}function l(v){v.value instanceof ii?Promise.resolve(v.value.v).then(h,p):m(s[0][2],v)}function h(v){c("next",v)}function p(v){c("throw",v)}function m(v,T){v(T),s.shift(),s.length&&c(s[0][0],s[0][1])}}function KI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof zI=="function"?zI(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Su=n=>n&&typeof n.length=="number"&&typeof n!="function";function Au(n){return re(n?.then)}function xu(n){return re(n[ds])}function Ru(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function Mu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function OR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Nu=OR();function Pu(n){return re(n?.[Nu])}function Ou(n){return WI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ii(t.read());if(i)return yield ii(void 0);yield yield ii(r)}}finally{t.releaseLock()}})}function ku(n){return re(n?.getReader)}function Be(n){if(n instanceof me)return n;if(n!=null){if(xu(n))return kR(n);if(Su(n))return FR(n);if(Au(n))return LR(n);if(Ru(n))return QI(n);if(Pu(n))return VR(n);if(ku(n))return UR(n)}throw Mu(n)}function kR(n){return new me(e=>{let t=n[ds]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function FR(n){return new me(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function LR(n){return new me(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,wu)})}function VR(n){return new me(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function QI(n){return new me(e=>{jR(n,e).catch(t=>e.error(t))})}function UR(n){return QI(Ou(n))}function jR(n,e){var t,r,i,s;return GI(this,void 0,void 0,function*(){try{for(t=KI(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function It(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function fr(n,e=0){return ye((t,r)=>{t.subscribe(pe(r,i=>It(r,n,()=>r.next(i),e),()=>It(r,n,()=>r.complete(),e),i=>It(r,n,()=>r.error(i),e)))})}function pr(n,e=0){return ye((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function YI(n,e){return Be(n).pipe(pr(e),fr(e))}function ZI(n,e){return Be(n).pipe(pr(e),fr(e))}function JI(n,e){return new me(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function XI(n,e){return new me(t=>{let r;return It(t,e,()=>{r=n[Nu](),It(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Fu(n,e){if(!n)throw new Error("Iterable cannot be null");return new me(t=>{It(t,e,()=>{let r=n[Symbol.asyncIterator]();It(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function eE(n,e){return Fu(Ou(n),e)}function tE(n,e){if(n!=null){if(xu(n))return YI(n,e);if(Su(n))return JI(n,e);if(Au(n))return ZI(n,e);if(Ru(n))return Fu(n,e);if(Pu(n))return XI(n,e);if(ku(n))return eE(n,e)}throw Mu(n)}function Ue(n,e){return e?tE(n,e):Be(n)}function se(...n){let e=hr(n);return Ue(n,e)}function ys(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new me(e?i=>e.schedule(r,0,i):r)}function Xf(n){return!!n&&(n instanceof me||re(n.lift)&&re(n.subscribe))}var sn=cs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ep(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let s=new dr({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new sn)}});n.subscribe(s)})}function le(n,e){return ye((t,r)=>{let i=0;t.subscribe(pe(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:BR}=Array;function $R(n,e){return BR(e)?n(...e):n(e)}function Lu(n){return le(e=>$R(n,e))}var{isArray:HR}=Array,{getPrototypeOf:qR,prototype:zR,keys:GR}=Object;function Vu(n){if(n.length===1){let e=n[0];if(HR(e))return{args:e,keys:null};if(WR(e)){let t=GR(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function WR(n){return n&&typeof n=="object"&&qR(n)===zR}function Uu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ju(...n){let e=hr(n),t=Tu(n),{args:r,keys:i}=Vu(n);if(r.length===0)return Ue([],e);let s=new me(KR(r,e,i?o=>Uu(i,o):Pt));return t?s.pipe(Lu(t)):s}function KR(n,e,t=Pt){return r=>{nE(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)nE(e,()=>{let l=Ue(n[c],e),h=!1;l.subscribe(pe(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function nE(n,e,t){n?It(t,n,e):e()}function rE(n,e,t,r,i,s,o,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},v=M=>l<r?T(M):c.push(M),T=M=>{s&&e.next(M),l++;let R=!1;Be(t(M,h++)).subscribe(pe(e,k=>{i?.(k),s?v(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;c.length&&l<r;){let k=c.shift();o?It(e,o,()=>T(k)):T(k)}m()}catch(k){e.error(k)}}))};return n.subscribe(pe(e,v,()=>{p=!0,m()})),()=>{a?.()}}function ze(n,e,t=1/0){return re(e)?ze((r,i)=>le((s,o)=>e(r,s,i,o))(Be(n(r,i))),t):(typeof e=="number"&&(t=e),ye((r,i)=>rE(r,i,n,t)))}function tp(n=1/0){return ze(Pt,n)}function iE(){return tp(1)}function vs(...n){return iE()(Ue(n,hr(n)))}function Bu(n){return new me(e=>{Be(n()).subscribe(e)})}function np(...n){let e=Tu(n),{args:t,keys:r}=Vu(n),i=new me(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let h=0;h<o;h++){let p=!1;Be(t[h]).subscribe(pe(s,m=>{p||(p=!0,l--),a[h]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||s.next(r?Uu(r,a):a),s.complete())}))}});return e?i.pipe(Lu(e)):i}function on(n,e){return ye((t,r)=>{let i=0;t.subscribe(pe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function gr(n){return ye((e,t)=>{let r=null,i=!1,s;r=e.subscribe(pe(t,void 0,void 0,o=>{s=Be(n(o,gr(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function sE(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(pe(o,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function _s(n,e){return re(e)?ze(n,e,1):ze(n,1)}function mr(n){return ye((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Bn(n){return n<=0?()=>Ot:ye((e,t)=>{let r=0;e.subscribe(pe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function rp(n){return le(()=>n)}function $u(n=QR){return ye((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function QR(){return new sn}function da(n){return ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function yn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?on((i,s)=>n(i,s,r)):Pt,Bn(1),t?mr(e):$u(()=>new sn))}function ws(n){return n<=0?()=>Ot:ye((e,t)=>{let r=[];e.subscribe(pe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ip(n,e){let t=arguments.length>=2;return r=>r.pipe(n?on((i,s)=>n(i,s,r)):Pt,ws(1),t?mr(e):$u(()=>new sn))}function sp(n,e){return ye(sE(n,e,arguments.length>=2,!0))}function op(...n){let e=hr(n);return ye((t,r)=>{(e?vs(n,t,e):vs(n,t)).subscribe(r)})}function an(n,e){return ye((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(pe(r,c=>{i?.unsubscribe();let l=0,h=s++;Be(n(c,h)).subscribe(i=pe(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function ap(n){return ye((e,t)=>{Be(n).subscribe(pe(t,()=>t.complete(),ua)),!t.closed&&e.subscribe(t)})}function Ge(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?ye((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(pe(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Pt}var zE="https://g.co/ng/security#xss",W=class extends Error{constructor(e,t){super(hg(e,t)),this.code=e}};function hg(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ea(n){return{toString:n}.toString()}var Hu="__parameters__";function YR(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function GE(n,e,t){return Ea(()=>{let r=YR(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,h){let p=c.hasOwnProperty(Hu)?c[Hu]:Object.defineProperty(c,Hu,{value:[]})[Hu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function ZR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function gt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(gt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function oE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var JR=Se({__forward_ref__:Se});function ba(n){return n.__forward_ref__=ba,n.toString=function(){return gt(this())},n}function pt(n){return WE(n)?n():n}function WE(n){return typeof n=="function"&&n.hasOwnProperty(JR)&&n.__forward_ref__===ba}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function gi(n){return{providers:n.providers||[],imports:n.imports||[]}}function bl(n){return aE(n,QE)||aE(n,YE)}function KE(n){return bl(n)!==null}function aE(n,e){return n.hasOwnProperty(e)?n[e]:null}function XR(n){let e=n&&(n[QE]||n[YE]);return e||null}function cE(n){return n&&(n.hasOwnProperty(uE)||n.hasOwnProperty(eM))?n[uE]:null}var QE=Se({\u0275prov:Se}),uE=Se({\u0275inj:Se}),YE=Se({ngInjectableDef:Se}),eM=Se({ngInjectorDef:Se}),K=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ZE(n){return n&&!!n.\u0275providers}var tM=Se({\u0275cmp:Se}),nM=Se({\u0275dir:Se}),rM=Se({\u0275pipe:Se}),iM=Se({\u0275mod:Se}),Ju=Se({\u0275fac:Se}),pa=Se({__NG_ELEMENT_ID__:Se}),lE=Se({__NG_ENV_ID__:Se});function fg(n){return typeof n=="string"?n:n==null?"":String(n)}function sM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():fg(n)}function oM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new W(-200,n)}function pg(n,e){throw new W(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),Ip;function JE(){return Ip}function Et(n){let e=Ip;return Ip=n,e}function XE(n,e,t){let r=bl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ae.Optional)return null;if(e!==void 0)return e;pg(n,"Injector")}var aM={},ga=aM,Ep="__NG_DI_FLAG__",Xu="ngTempTokenPath",cM="ngTokenPath",uM=/\n/gm,lM="\u0275",dE="__source",Ds;function dM(){return Ds}function yr(n){let e=Ds;return Ds=n,e}function hM(n,e=ae.Default){if(Ds===void 0)throw new W(-203,!1);return Ds===null?XE(n,void 0,e):Ds.get(n,e&ae.Optional?null:void 0,e)}function Z(n,e=ae.Default){return(JE()||hM)(pt(n),e)}function V(n,e=ae.Default){return Z(n,Dl(e))}function Dl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function bp(n){let e=[];for(let t=0;t<n.length;t++){let r=pt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,s=ae.Default;for(let o=0;o<r.length;o++){let a=r[o],c=fM(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(Z(i,s))}else e.push(Z(r))}return e}function eb(n,e){return n[Ep]=e,n.prototype[Ep]=e,n}function fM(n){return n[Ep]}function pM(n,e,t,r){let i=n[Xu];throw e[dE]&&i.unshift(e[dE]),n.message=gM(`
`+n.message,i,t,r),n[cM]=i,n[Xu]=null,n}function gM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==lM?n.slice(2):n;let i=gt(e);if(Array.isArray(e))i=e.map(gt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):gt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(uM,`
  `)}`}var nt=eb(GE("Optional"),8);var gg=eb(GE("SkipSelf"),4);function oi(n,e){let t=n.hasOwnProperty(Ju);return t?n[Ju]:null}function mg(n,e){n.forEach(t=>Array.isArray(t)?mg(t,e):e(t))}function tb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function el(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function mM(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function yM(n,e,t){let r=Da(n,e);return r>=0?n[r|1]=t:(r=~r,mM(n,r,e,t)),r}function cp(n,e){let t=Da(n,e);if(t>=0)return n[t|1]}function Da(n,e){return vM(n,e,1)}function vM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Ts={},Ht=[],Ss=new K(""),nb=new K("",-1),rb=new K(""),tl=class{get(e,t=ga){if(t===ga){let r=new Error(`NullInjectorError: No provider for ${gt(e)}!`);throw r.name="NullInjectorError",r}return t}},ib=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ib||{}),wn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(wn||{}),wr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(wr||{});function _M(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Dp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];IM(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function wM(n){return n===3||n===4||n===6}function IM(n){return n.charCodeAt(0)===64}function ma(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?hE(n,t,i,null,e[++r]):hE(n,t,i,null,null))}}return n}function hE(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var sb="ng-template";function EM(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&_M(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(yg(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function yg(n){return n.type===4&&n.value!==sb}function bM(n,e,t){let r=n.type===4&&!t?sb:n.value;return e===r}function DM(n,e,t){let r=4,i=n.attrs,s=i!==null?SM(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!cn(r)&&!cn(c))return!1;if(o&&cn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!bM(n,c,t)||c===""&&e.length===1){if(cn(r))return!1;o=!0}}else if(r&8){if(i===null||!EM(n,i,c,t)){if(cn(r))return!1;o=!0}}else{let l=e[++a],h=CM(c,i,yg(n),t);if(h===-1){if(cn(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(cn(r))return!1;o=!0}}}}return cn(r)||o}function cn(n){return(n&1)===0}function CM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return AM(e,n)}function TM(n,e,t=!1){for(let r=0;r<e.length;r++)if(DM(n,e[r],t))return!0;return!1}function SM(n){for(let e=0;e<n.length;e++){let t=n[e];if(wM(t))return e}return n.length}function AM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function fE(n,e){return n?":not("+e.trim()+")":e}function xM(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!cn(o)&&(e+=fE(s,i),i=""),r=o,s=s||!cn(r);t++}return i!==""&&(e+=fE(s,i)),e}function RM(n){return n.map(xM).join(",")}function MM(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!cn(i))break;i=s}r++}return{attrs:e,classes:t}}function Dt(n){return Ea(()=>{let e=db(n),t=fe(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ib.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||wn.Emulated,styles:n.styles||Ht,_:null,schemas:n.schemas||null,tView:null,id:""});hb(t);let r=n.dependencies;return t.directiveDefs=gE(r,!1),t.pipeDefs=gE(r,!0),t.id=OM(t),t})}function NM(n){return ai(n)||ab(n)}function PM(n){return n!==null}function mi(n){return Ea(()=>({type:n.type,bootstrap:n.bootstrap||Ht,declarations:n.declarations||Ht,imports:n.imports||Ht,exports:n.exports||Ht,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function pE(n,e){if(n==null)return Ts;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=wr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==wr.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Wt(n){return Ea(()=>{let e=db(n);return hb(e),e})}function ob(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function ai(n){return n[tM]||null}function ab(n){return n[nM]||null}function cb(n){return n[rM]||null}function ub(n){let e=ai(n)||ab(n)||cb(n);return e!==null?e.standalone:!1}function lb(n,e){let t=n[iM]||null;if(!t&&e===!0)throw new Error(`Type ${gt(n)} does not have '\u0275mod' property.`);return t}function db(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ts,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Ht,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pE(n.inputs,e),outputs:pE(n.outputs),debugInfo:null}}function hb(n){n.features?.forEach(e=>e(n))}function gE(n,e){if(!n)return null;let t=e?cb:NM;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(PM)}function OM(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Cn(n){return{\u0275providers:n}}function kM(...n){return{\u0275providers:fb(!0,n),\u0275fromNgModule:!0}}function fb(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return mg(e,o=>{let a=o;Cp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&pb(i,s),t}function pb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];vg(i,s=>{e(s,r)})}}function Cp(n,e,t,r){if(n=pt(n),!n)return!1;let i=null,s=cE(n),o=!s&&ai(n);if(!s&&!o){let c=n.ngModule;if(s=cE(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Cp(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{mg(s.imports,h=>{Cp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&pb(l,e)}if(!a){let l=oi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ht},i),e({provide:rb,useValue:i,multi:!0},i),e({provide:Ss,useValue:()=>Z(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;vg(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function vg(n,e){for(let t of n)ZE(t)&&(t=t.\u0275providers),Array.isArray(t)?vg(t,e):e(t)}var FM=Se({provide:String,useValue:Se});function gb(n){return n!==null&&typeof n=="object"&&FM in n}function LM(n){return!!(n&&n.useExisting)}function VM(n){return!!(n&&n.useFactory)}function As(n){return typeof n=="function"}function UM(n){return!!n.useClass}var Cl=new K(""),Wu={},jM={},up;function _g(){return up===void 0&&(up=new tl),up}var Gt=class{},ya=class extends Gt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sp(e,o=>this.processProvider(o)),this.records.set(nb,Is(void 0,this)),i.has("environment")&&this.records.set(Gt,Is(void 0,this));let s=this.records.get(Cl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(rb,Ht,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=yr(this),r=Et(void 0),i;try{return e()}finally{yr(t),Et(r)}}get(e,t=ga,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(lE))return e[lE](this);r=Dl(r);let i,s=yr(this),o=Et(void 0);try{if(!(r&ae.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=zM(e)&&bl(e);l&&this.injectableDefInScope(l)?c=Is(Tp(e),Wu):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ae.Self?_g():this.parent;return t=r&ae.Optional&&t===ga?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Xu]=a[Xu]||[]).unshift(gt(e)),s)throw a;return pM(a,e,"R3InjectorError",this.source)}else throw a}finally{Et(o),yr(s)}}resolveInjectorInitializers(){let e=_e(null),t=yr(this),r=Et(void 0),i;try{let s=this.get(Ss,Ht,ae.Self);for(let o of s)o()}finally{yr(t),Et(r),_e(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(gt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){e=pt(e);let t=As(e)?e:pt(e&&e.provide),r=$M(e);if(!As(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Is(void 0,Wu,!0),i.factory=()=>bp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=_e(null);try{return t.value===Wu&&(t.value=jM,t.value=t.factory()),typeof t.value=="object"&&t.value&&qM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{_e(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=pt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Tp(n){let e=bl(n),t=e!==null?e.factory:oi(n);if(t!==null)return t;if(n instanceof K)throw new W(204,!1);if(n instanceof Function)return BM(n);throw new W(204,!1)}function BM(n){if(n.length>0)throw new W(204,!1);let t=XR(n);return t!==null?()=>t.factory(n):()=>new n}function $M(n){if(gb(n))return Is(void 0,n.useValue);{let e=mb(n);return Is(e,Wu)}}function mb(n,e,t){let r;if(As(n)){let i=pt(n);return oi(i)||Tp(i)}else if(gb(n))r=()=>pt(n.useValue);else if(VM(n))r=()=>n.useFactory(...bp(n.deps||[]));else if(LM(n))r=()=>Z(pt(n.useExisting));else{let i=pt(n&&(n.useClass||n.provide));if(HM(n))r=()=>new i(...bp(n.deps));else return oi(i)||Tp(i)}return r}function Is(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function HM(n){return!!n.deps}function qM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function zM(n){return typeof n=="function"||typeof n=="object"&&n instanceof K}function Sp(n,e){for(let t of n)Array.isArray(t)?Sp(t,e):t&&ZE(t)?Sp(t.\u0275providers,e):e(t)}function zn(n,e){n instanceof ya&&n.assertNotDestroyed();let t,r=yr(n),i=Et(void 0);try{return e()}finally{yr(r),Et(i)}}function GM(){return JE()!==void 0||dM()!=null}function WM(n){return typeof n=="function"}var Gn=0,de=1,X=2,mt=3,un=4,dn=5,nl=6,rl=7,ln=8,xs=9,In=10,Ke=11,va=12,mE=13,Ls=14,En=15,Rs=16,Es=17,Ms=18,Tl=19,yb=20,vr=21,lp=22,qt=23,bn=25,vb=1;var ci=7,il=8,sl=9,zt=10,ol=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ol||{});function _r(n){return Array.isArray(n)&&typeof n[vb]=="object"}function Wn(n){return Array.isArray(n)&&n[vb]===!0}function _b(n){return(n.flags&4)!==0}function Sl(n){return n.componentOffset>-1}function wg(n){return(n.flags&1)===1}function Ir(n){return!!n.template}function Ap(n){return(n[X]&512)!==0}var xp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function wb(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Vs(){return Ib}function Ib(n){return n.type.prototype.ngOnChanges&&(n.setInput=QM),KM}Vs.ngInherit=!0;function KM(){let n=bb(this),e=n?.current;if(e){let t=n.previous;if(t===Ts)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function QM(n,e,t,r,i){let s=this.declaredInputs[r],o=bb(n)||YM(n,{previous:Ts,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new xp(l&&l.currentValue,t,c===Ts),wb(n,e,i,t)}var Eb="__ngSimpleChanges__";function bb(n){return n[Eb]||null}function YM(n,e){return n[Eb]=e}var yE=null;var vn=function(n,e,t){yE?.(n,e,t)},Db="svg",ZM="math";function Dn(n){for(;Array.isArray(n);)n=n[Gn];return n}function Cb(n,e){return Dn(e[n])}function hn(n,e){return Dn(e[n.index])}function Tb(n,e){return n.data[e]}function JM(n,e){return n[e]}function Dr(n,e){let t=e[n];return _r(t)?t:t[Gn]}function Ig(n){return(n[X]&128)===128}function XM(n){return Wn(n[mt])}function al(n,e){return e==null?null:n[e]}function Sb(n){n[Es]=0}function Ab(n){n[X]&1024||(n[X]|=1024,Ig(n)&&xl(n))}function eN(n,e){for(;n>0;)e=e[Ls],n--;return e}function Al(n){return!!(n[X]&9216||n[qt]?.dirty)}function Rp(n){n[In].changeDetectionScheduler?.notify(8),n[X]&64&&(n[X]|=1024),Al(n)&&xl(n)}function xl(n){n[In].changeDetectionScheduler?.notify(0);let e=ui(n);for(;e!==null&&!(e[X]&8192||(e[X]|=8192,!Ig(e)));)e=ui(e)}function xb(n,e){if((n[X]&256)===256)throw new W(911,!1);n[vr]===null&&(n[vr]=[]),n[vr].push(e)}function tN(n,e){if(n[vr]===null)return;let t=n[vr].indexOf(e);t!==-1&&n[vr].splice(t,1)}function ui(n){let e=n[mt];return Wn(e)?e[mt]:e}var ce={lFrame:Bb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Rb=!1;function nN(){return ce.lFrame.elementDepthCount}function rN(){ce.lFrame.elementDepthCount++}function iN(){ce.lFrame.elementDepthCount--}function Mb(){return ce.bindingsEnabled}function sN(){return ce.skipHydrationRootTNode!==null}function oN(n){return ce.skipHydrationRootTNode===n}function aN(){ce.skipHydrationRootTNode=null}function De(){return ce.lFrame.lView}function Ct(){return ce.lFrame.tView}function Nb(n){return ce.lFrame.contextLView=n,n[ln]}function Pb(n){return ce.lFrame.contextLView=null,n}function Tt(){let n=Ob();for(;n!==null&&n.type===64;)n=n.parent;return n}function Ob(){return ce.lFrame.currentTNode}function cN(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ca(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function kb(){return ce.lFrame.isParent}function uN(){ce.lFrame.isParent=!1}function Fb(){return Rb}function vE(n){Rb=n}function Lb(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function lN(n){return ce.lFrame.bindingIndex=n}function Eg(){return ce.lFrame.bindingIndex++}function dN(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function hN(){return ce.lFrame.inI18n}function fN(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Mp(e)}function pN(){return ce.lFrame.currentDirectiveIndex}function Mp(n){ce.lFrame.currentDirectiveIndex=n}function gN(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Vb(n){ce.lFrame.currentQueryIndex=n}function mN(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[dn]:null}function Ub(n,e,t){if(t&ae.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ae.Host);)if(i=mN(s),i===null||(s=s[Ls],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=ce.lFrame=jb();return r.currentTNode=e,r.lView=n,!0}function bg(n){let e=jb(),t=n[de];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function jb(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?Bb(n):e}function Bb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function $b(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Hb=$b;function Dg(){let n=$b();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function yN(n){return(ce.lFrame.contextLView=eN(n,ce.lFrame.contextLView))[ln]}function Us(){return ce.lFrame.selectedIndex}function li(n){ce.lFrame.selectedIndex=n}function Cg(){let n=ce.lFrame;return Tb(n.tView,n.selectedIndex)}function qb(){ce.lFrame.currentNamespace=Db}function zb(){vN()}function vN(){ce.lFrame.currentNamespace=null}function _N(){return ce.lFrame.currentNamespace}var Gb=!0;function Tg(){return Gb}function Sg(n){Gb=n}function wN(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Ib(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Ag(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Ku(n,e,t){Wb(n,e,3,t)}function Qu(n,e,t,r){(n[X]&3)===t&&Wb(n,e,t,r)}function dp(n,e){let t=n[X];(t&3)===e&&(t&=16383,t+=1,n[X]=t)}function Wb(n,e,t,r){let i=r!==void 0?n[Es]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Es]+=65536),(a<s||s==-1)&&(IN(n,t,e,c),n[Es]=(n[Es]&4294901760)+c+2),c++}function _E(n,e){vn(4,n,e);let t=_e(null);try{e.call(n)}finally{_e(t),vn(5,n,e)}}function IN(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[X]>>14<n[Es]>>16&&(n[X]&3)===e&&(n[X]+=16384,_E(a,s)):_E(a,s)}var Cs=-1,di=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function EN(n){return n instanceof di}function bN(n){return(n.flags&8)!==0}function DN(n){return(n.flags&16)!==0}var hp={},Np=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Dl(r);let i=this.injector.get(e,hp,r);return i!==hp||t===hp?i:this.parentInjector.get(e,t,r)}};function Kb(n){return n!==Cs}function cl(n){return n&32767}function CN(n){return n>>16}function ul(n,e){let t=CN(n),r=e;for(;t>0;)r=r[Ls],t--;return r}var Pp=!0;function ll(n){let e=Pp;return Pp=n,e}var TN=256,Qb=TN-1,Yb=5,SN=0,_n={};function AN(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(pa)&&(r=t[pa]),r==null&&(r=t[pa]=SN++);let i=r&Qb,s=1<<i;e.data[n+(i>>Yb)]|=s}function dl(n,e){let t=Zb(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,fp(r.data,n),fp(e,null),fp(r.blueprint,null));let i=xg(n,e),s=n.injectorIndex;if(Kb(i)){let o=cl(i),a=ul(i,e),c=a[de].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function fp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Zb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function xg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=nD(i),r===null)return Cs;if(t++,i=i[Ls],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Cs}function Op(n,e,t){AN(n,e,t)}function Jb(n,e,t){if(t&ae.Optional||n!==void 0)return n;pg(e,"NodeInjector")}function Xb(n,e,t,r){if(t&ae.Optional&&r===void 0&&(r=null),!(t&(ae.Self|ae.Host))){let i=n[xs],s=Et(void 0);try{return i?i.get(e,r,t&ae.Optional):XE(e,r,t&ae.Optional)}finally{Et(s)}}return Jb(r,e,t)}function eD(n,e,t,r=ae.Default,i){if(n!==null){if(e[X]&2048&&!(r&ae.Self)){let o=PN(n,e,t,r,_n);if(o!==_n)return o}let s=tD(n,e,t,r,_n);if(s!==_n)return s}return Xb(e,t,r,i)}function tD(n,e,t,r,i){let s=MN(t);if(typeof s=="function"){if(!Ub(e,n,r))return r&ae.Host?Jb(i,t,r):Xb(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ae.Optional))pg(t);else return o}finally{Hb()}}else if(typeof s=="number"){let o=null,a=Zb(n,e),c=Cs,l=r&ae.Host?e[En][dn]:null;for((a===-1||r&ae.SkipSelf)&&(c=a===-1?xg(n,e):e[a+8],c===Cs||!IE(r,!1)?a=-1:(o=e[de],a=cl(c),e=ul(c,e)));a!==-1;){let h=e[de];if(wE(s,a,h.data)){let p=xN(a,e,t,o,r,l);if(p!==_n)return p}c=e[a+8],c!==Cs&&IE(r,e[de].data[a+8]===l)&&wE(s,a,e)?(o=h,a=cl(c),e=ul(c,e)):a=-1}}return i}function xN(n,e,t,r,i,s){let o=e[de],a=o.data[n+8],c=r==null?Sl(a)&&Pp:r!=o&&(a.type&3)!==0,l=i&ae.Host&&s===a,h=RN(a,o,t,c,l);return h!==null?Ns(e,o,h,a):_n}function RN(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let T=o[v];if(v<c&&t===T||v>=c&&T.type===t)return v}if(i){let v=o[c];if(v&&Ir(v)&&v.type===t)return c}return null}function Ns(n,e,t,r){let i=n[t],s=e.data;if(EN(i)){let o=i;o.resolving&&oM(sM(s[t]));let a=ll(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Et(o.injectImpl):null,h=Ub(n,r,ae.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&wN(t,s[t],e)}finally{l!==null&&Et(l),ll(a),o.resolving=!1,Hb()}}return i}function MN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(pa)?n[pa]:void 0;return typeof e=="number"?e>=0?e&Qb:NN:e}function wE(n,e,t){let r=1<<n;return!!(t[e+(n>>Yb)]&r)}function IE(n,e){return!(n&ae.Self)&&!(n&ae.Host&&e)}var si=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return eD(this._tNode,this._lView,e,Dl(r),t)}};function NN(){return new si(Tt(),De())}function Ta(n){return Ea(()=>{let e=n.prototype.constructor,t=e[Ju]||kp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Ju]||kp(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function kp(n){return WE(n)?()=>{let e=kp(pt(n));return e&&e()}:oi(n)}function PN(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[X]&2048&&!(o[X]&512);){let a=tD(s,o,t,r|ae.Self,_n);if(a!==_n)return a;let c=s.parent;if(!c){let l=o[yb];if(l){let h=l.get(t,_n,r);if(h!==_n)return h}c=nD(o),o=o[Ls]}s=c}return i}function nD(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[dn]:null}function EE(n,e=null,t=null,r){let i=rD(n,e,t,r);return i.resolveInjectorInitializers(),i}function rD(n,e=null,t=null,r,i=new Set){let s=[t||Ht,kM(n)];return r=r||(typeof n=="object"?void 0:gt(n)),new ya(s,e||_g(),r||null,i)}var bt=class n{static{this.THROW_IF_NOT_FOUND=ga}static{this.NULL=new tl}static create(e,t){if(Array.isArray(e))return EE({name:""},t,e,"");{let r=e.name??"";return EE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=G({token:n,providedIn:"any",factory:()=>Z(nb)})}static{this.__NG_ELEMENT_ID__=-1}};var ON=new K("");ON.__NG_ELEMENT_ID__=n=>{let e=Tt();if(e===null)throw new W(204,!1);if(e.type&2)return e.value;if(n&ae.Optional)return null;throw new W(204,!1)};var kN="ngOriginalError";function pp(n){return n[kN]}var iD=!0,sD=(()=>{class n{static{this.__NG_ELEMENT_ID__=FN}static{this.__NG_ENV_ID__=t=>t}}return n})(),Fp=class extends sD{constructor(e){super(),this._lView=e}onDestroy(e){return xb(this._lView,e),()=>tN(this._lView,e)}};function FN(){return new Fp(De())}var js=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new tt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Lp=class extends et{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,GM()&&(this.destroyRef=V(sD,{optional:!0})??void 0,this.pendingTasks=V(js,{optional:!0})??void 0)}emit(e){let t=_e(null);try{super.next(e)}finally{_e(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ve&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},We=Lp;function hl(...n){}function oD(n){let e,t;function r(){n=hl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function bE(n){return queueMicrotask(()=>n()),()=>{n=hl}}var Rg="isAngularZone",fl=Rg+"_ID",LN=0,be=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new We(!1),this.onMicrotaskEmpty=new We(!1),this.onStable=new We(!1),this.onError=new We(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=iD}=e;if(typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,jN(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Rg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new W(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,VN,hl,hl);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},VN={};function Mg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function UN(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){oD(()=>{n.callbackScheduled=!1,Vp(n),n.isCheckStableRunning=!0,Mg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Vp(n)}function jN(n){let e=()=>{UN(n)},t=LN++;n._inner=n._inner.fork({name:"angular",properties:{[Rg]:!0,[fl]:t,[fl+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(BN(c))return r.invokeTask(s,o,a,c);try{return DE(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),CE(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return DE(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!$N(c)&&e(),CE(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Vp(n),Mg(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Vp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function DE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function CE(n){n._nesting--,Mg(n)}var Up=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new We,this.onMicrotaskEmpty=new We,this.onStable=new We,this.onError=new We}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function BN(n){return aD(n,"__ignore_ng_zone__")}function $N(n){return aD(n,"__scheduler_tick__")}function aD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var $n=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&pp(e);for(;t&&pp(t);)t=pp(t);return t||null}},HN=new K("",{providedIn:"root",factory:()=>{let n=V(be),e=V($n);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function qN(){return Rl(Tt(),De())}function Rl(n,e){return new Cr(hn(n,e))}var Cr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=qN}}return n})();function cD(n){return(n.flags&128)===128}var uD=new Map,zN=0;function GN(){return zN++}function WN(n){uD.set(n[Tl],n)}function jp(n){uD.delete(n[Tl])}var TE="__ngContext__";function hi(n,e){_r(e)?(n[TE]=e[Tl],WN(e)):n[TE]=e}function lD(n){return hD(n[va])}function dD(n){return hD(n[un])}function hD(n){for(;n!==null&&!Wn(n);)n=n[un];return n}var Bp;function fD(n){Bp=n}function KN(){if(Bp!==void 0)return Bp;if(typeof document<"u")return document;throw new W(210,!1)}var Ng=new K("",{providedIn:"root",factory:()=>QN}),QN="ng",Pg=new K(""),Tr=new K("",{providedIn:"platform",factory:()=>"unknown"});var Og=new K("",{providedIn:"root",factory:()=>KN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var YN="h",ZN="b";var JN=()=>null;function kg(n,e,t=!1){return JN(n,e,t)}var pD=!1,XN=new K("",{providedIn:"root",factory:()=>pD});var pl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${zE})`}};function Ml(n){return n instanceof pl?n.changingThisBreaksApplicationSecurity:n}function gD(n,e){let t=eP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${zE})`)}return t===e}function eP(n){return n instanceof pl&&n.getTypeName()||null}var tP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mD(n){return n=String(n),n.match(tP)?n:"unsafe:"+n}var Fg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Fg||{});function Sa(n){let e=nP();return e?e.sanitize(Fg.URL,n)||"":gD(n,"URL")?Ml(n):mD(fg(n))}function nP(){let n=De();return n&&n[In].sanitizer}function yD(n){return n instanceof Function?n():n}var Hn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Hn||{}),rP;function Lg(n,e){return rP(n,e)}function bs(n,e,t,r,i){if(r!=null){let s,o=!1;Wn(r)?s=r:_r(r)&&(o=!0,r=r[Gn]);let a=Dn(r);n===0&&t!==null?i==null?ED(e,t,a):gl(e,t,a,i||null,!0):n===1&&t!==null?gl(e,t,a,i||null,!0):n===2?vP(e,a,o):n===3&&e.destroyNode(a),s!=null&&wP(e,n,s,t,i)}}function iP(n,e){return n.createText(e)}function sP(n,e,t){n.setValue(e,t)}function vD(n,e,t){return n.createElement(e,t)}function oP(n,e){_D(n,e),e[Gn]=null,e[dn]=null}function aP(n,e,t,r,i,s){r[Gn]=i,r[dn]=e,Nl(n,r,t,1,i,s)}function _D(n,e){e[In].changeDetectionScheduler?.notify(9),Nl(n,e,e[Ke],2,null,null)}function cP(n){let e=n[va];if(!e)return gp(n[de],n);for(;e;){let t=null;if(_r(e))t=e[va];else{let r=e[zt];r&&(t=r)}if(!t){for(;e&&!e[un]&&e!==n;)_r(e)&&gp(e[de],e),e=e[mt];e===null&&(e=n),_r(e)&&gp(e[de],e),t=e&&e[un]}e=t}}function uP(n,e,t,r){let i=zt+r,s=t.length;r>0&&(t[i-1][un]=e),r<s-zt?(e[un]=t[i],tb(t,zt+r,e)):(t.push(e),e[un]=null),e[mt]=t;let o=e[Rs];o!==null&&t!==o&&wD(o,e);let a=e[Ms];a!==null&&a.insertView(n),Rp(e),e[X]|=128}function wD(n,e){let t=n[sl],r=e[mt];if(_r(r))n[X]|=ol.HasTransplantedViews;else{let i=r[mt][En];e[En]!==i&&(n[X]|=ol.HasTransplantedViews)}t===null?n[sl]=[e]:t.push(e)}function Vg(n,e){let t=n[sl],r=t.indexOf(e);t.splice(r,1)}function $p(n,e){if(n.length<=zt)return;let t=zt+e,r=n[t];if(r){let i=r[Rs];i!==null&&i!==n&&Vg(i,r),e>0&&(n[t-1][un]=r[un]);let s=el(n,zt+e);oP(r[de],r);let o=s[Ms];o!==null&&o.detachView(s[de]),r[mt]=null,r[un]=null,r[X]&=-129}return r}function ID(n,e){if(!(e[X]&256)){let t=e[Ke];t.destroyNode&&Nl(n,e,t,3,null,null),cP(e)}}function gp(n,e){if(e[X]&256)return;let t=_e(null);try{e[X]&=-129,e[X]|=256,e[qt]&&Vf(e[qt]),dP(n,e),lP(n,e),e[de].type===1&&e[Ke].destroy();let r=e[Rs];if(r!==null&&Wn(e[mt])){r!==e[mt]&&Vg(r,e);let i=e[Ms];i!==null&&i.detachView(n)}jp(e)}finally{_e(t)}}function lP(n,e){let t=n.cleanup,r=e[rl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[rl]=null);let i=e[vr];if(i!==null){e[vr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function dP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof di)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];vn(4,a,c);try{c.call(a)}finally{vn(5,a,c)}}else{vn(4,i,s);try{s.call(i)}finally{vn(5,i,s)}}}}}function hP(n,e,t){return fP(n,e.parent,t)}function fP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Gn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===wn.None||s===wn.Emulated)return null}return hn(r,t)}}function gl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function ED(n,e,t){n.appendChild(e,t)}function SE(n,e,t,r,i){r!==null?gl(n,e,t,r,i):ED(n,e,t)}function bD(n,e){return n.parentNode(e)}function pP(n,e){return n.nextSibling(e)}function gP(n,e,t){return yP(n,e,t)}function mP(n,e,t){return n.type&40?hn(n,t):null}var yP=mP,AE;function Ug(n,e,t,r){let i=hP(n,r,e),s=e[Ke],o=r.parent||e[dn],a=gP(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)SE(s,i,t[c],a,!1);else SE(s,i,t,a,!1);AE!==void 0&&AE(s,r,e,t,i)}function ha(n,e){if(e!==null){let t=e.type;if(t&3)return hn(e,n);if(t&4)return Hp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ha(n,r);{let i=n[e.index];return Wn(i)?Hp(-1,i):Dn(i)}}else{if(t&128)return ha(n,e.next);if(t&32)return Lg(e,n)()||Dn(n[e.index]);{let r=DD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ui(n[En]);return ha(i,r)}else return ha(n,e.next)}}}return null}function DD(n,e){if(e!==null){let r=n[En][dn],i=e.projection;return r.projection[i]}return null}function Hp(n,e){let t=zt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return ha(r,i)}return e[ci]}function vP(n,e,t){n.removeChild(null,e,t)}function jg(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&hi(Dn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)jg(n,e,t.child,r,i,s,!1),bs(e,n,i,a,s);else if(c&32){let l=Lg(t,r),h;for(;h=l();)bs(e,n,i,h,s);bs(e,n,i,a,s)}else c&16?_P(n,e,r,t,i,s):bs(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Nl(n,e,t,r,i,s){jg(t,r,n.firstChild,e,i,s,!1)}function _P(n,e,t,r,i,s){let o=t[En],c=o[dn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];bs(e,n,i,h,s)}else{let l=c,h=o[mt];cD(r)&&(l.flags|=128),jg(n,e,l,h,i,s,!0)}}function wP(n,e,t,r,i){let s=t[ci],o=Dn(t);s!==o&&bs(e,n,r,s,i);for(let a=zt;a<t.length;a++){let c=t[a];Nl(c[de],c,n,e,r,s)}}function IP(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Hn.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Hn.Important),n.setStyle(t,r,i,s))}}function EP(n,e,t){n.setAttribute(e,"style",t)}function CD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function TD(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Dp(n,e,r),i!==null&&CD(n,e,i),s!==null&&EP(n,e,s)}var Sr={};function Pe(n=1){SD(Ct(),De(),Us()+n,!1)}function SD(n,e,t,r){if(!r)if((e[X]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Ku(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Qu(e,s,0,t)}li(t)}function J(n,e=ae.Default){let t=De();if(t===null)return Z(n,e);let r=Tt();return eD(r,t,pt(n),e)}function AD(n,e,t,r,i,s){let o=_e(null);try{let a=null;i&wr.SignalBased&&(a=e[r][jn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&wr.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):wb(e,a,r,s)}finally{_e(o)}}function bP(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)li(~i);else{let s=i,o=t[++r],a=t[++r];fN(o,s);let c=e[s];a(2,c)}}}finally{li(-1)}}function Pl(n,e,t,r,i,s,o,a,c,l,h){let p=e.blueprint.slice();return p[Gn]=i,p[X]=r|4|128|8|64,(l!==null||n&&n[X]&2048)&&(p[X]|=2048),Sb(p),p[mt]=p[Ls]=n,p[ln]=t,p[In]=o||n&&n[In],p[Ke]=a||n&&n[Ke],p[xs]=c||n&&n[xs]||null,p[dn]=s,p[Tl]=GN(),p[nl]=h,p[yb]=l,p[En]=e.type==2?n[En]:p,p}function Ol(n,e,t,r,i){let s=n.data[e];if(s===null)s=DP(n,e,t,r,i),hN()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=cN();s.injectorIndex=o===null?-1:o.injectorIndex}return Ca(s,!0),s}function DP(n,e,t,r,i){let s=Ob(),o=kb(),a=o?s:s&&s.parent,c=n.data[e]=xP(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function xD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function RD(n,e,t,r,i){let s=Us(),o=r&2;try{li(-1),o&&e.length>bn&&SD(n,e,bn,!1),vn(o?2:0,i),t(r,i)}finally{li(s),vn(o?3:1,i)}}function MD(n,e,t){if(_b(e)){let r=_e(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{_e(r)}}}function ND(n,e,t){Mb()&&(kP(n,e,t,hn(t,e)),(t.flags&64)===64&&LD(n,e,t))}function PD(n,e,t=hn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function OD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Bg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Bg(n,e,t,r,i,s,o,a,c,l,h){let p=bn+r,m=p+i,v=CP(p,m),T=typeof l=="function"?l():l;return v[de]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:h}}function CP(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Sr);return t}function TP(n,e,t,r){let s=r.get(XN,pD)||t===wn.ShadowDom,o=n.selectRootElement(e,s);return SP(o),o}function SP(n){AP(n)}var AP=()=>null;function xP(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return sN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function xE(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=wr.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?RE(r,t,l,a,c):RE(r,t,l,a)}return r}function RE(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function RP(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=t?t.get(p):null,v=m?m.inputs:null,T=m?m.outputs:null;c=xE(0,p.inputs,h,c,v),l=xE(1,p.outputs,h,l,T);let M=c!==null&&o!==null&&!yg(e)?qP(c,h,o):null;a.push(M)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function MP(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function $g(n,e,t,r,i,s,o,a){let c=hn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Hg(n,t,h,r,i),Sl(e)&&NP(t,e.index)):e.type&3?(r=MP(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function NP(n,e){let t=Dr(e,n);t[X]&16||(t[X]|=64)}function kD(n,e,t,r){if(Mb()){let i=r===null?null:{"":-1},s=LP(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&FD(n,e,t,o,i,a),i&&VP(t,r,i)}t.mergedAttrs=ma(t.mergedAttrs,t.attrs)}function FD(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Op(dl(t,e),n,r[l].type);jP(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,c=xD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=ma(t.mergedAttrs,h.hostAttrs),BP(n,t,e,c,h),UP(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}RP(n,t,s)}function PP(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;OP(o)!=a&&o.push(a),o.push(t,r,s)}}function OP(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function kP(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Sl(t)&&$P(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||dl(t,e),hi(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=Ns(e,n,a,t);if(hi(l,e),o!==null&&HP(e,a-i,l,c,t,o),Ir(c)){let h=Dr(t.index,e);h[ln]=Ns(e,n,a,t)}}}function LD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=pN();try{li(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Mp(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&FP(c,l)}}finally{li(-1),Mp(o)}}function FP(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function LP(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(TM(e,o.selectors,!1))if(r||(r=[]),Ir(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;qp(n,e,c)}else r.unshift(o),qp(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function qp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function VP(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new W(-301,!1);r.push(e[i],s)}}}function UP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ir(e)&&(t[""]=n)}}function jP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function BP(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=oi(i.type,!0)),o=new di(s,Ir(i),J);n.blueprint[r]=o,t[r]=o,PP(n,e,r,xD(n,t,i.hostVars,Sr),i)}function $P(n,e,t){let r=hn(e,n),i=OD(t),s=n[In].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=kl(n,Pl(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function HP(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],h=o[a++],p=o[a++];AD(r,t,c,l,h,p)}}function qP(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function VD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function UD(n,e){let t=n.contentQueries;if(t!==null){let r=_e(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Vb(s),a.contentQueries(2,e[o],o)}}}finally{_e(r)}}}function kl(n,e){return n[va]?n[mE][un]=e:n[va]=e,n[mE]=e,e}function zp(n,e,t){Vb(0);let r=_e(null);try{e(n,t)}finally{_e(r)}}function zP(n){return n[rl]??=[]}function GP(n){return n.cleanup??=[]}function jD(n,e){let t=n[xs],r=t?t.get($n,null):null;r&&r.handleError(e)}function Hg(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],h=n.data[o];AD(h,l,r,a,c,i)}}function WP(n,e,t){let r=Cb(e,n);sP(n[Ke],r,t)}function KP(n,e){let t=Dr(e,n),r=t[de];QP(r,t);let i=t[Gn];i!==null&&t[nl]===null&&(t[nl]=kg(i,t[xs])),qg(r,t,t[ln])}function QP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function qg(n,e,t){bg(e);try{let r=n.viewQuery;r!==null&&zp(1,r,t);let i=n.template;i!==null&&RD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ms]?.finishViewCreation(n),n.staticContentQueries&&UD(n,e),n.staticViewQueries&&zp(2,n.viewQuery,t);let s=n.components;s!==null&&YP(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[X]&=-5,Dg()}}function YP(n,e){for(let t=0;t<e.length;t++)KP(n,e[t])}function ZP(n,e,t,r){let i=_e(null);try{let s=e.tView,a=n[X]&4096?4096:16,c=Pl(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Rs]=l;let h=n[Ms];return h!==null&&(c[Ms]=h.createEmbeddedView(s)),qg(s,c,t),c}finally{_e(i)}}function ME(n,e){return!e||e.firstChild===null||cD(n)}function JP(n,e,t,r=!0){let i=e[de];if(uP(i,e,n,t),r){let o=Hp(t,n),a=e[Ke],c=bD(a,n[ci]);c!==null&&aP(i,n[dn],a,e,c,o)}let s=e[nl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ml(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Dn(s)),Wn(s)&&XP(s,r);let o=t.type;if(o&8)ml(n,e,t.child,r);else if(o&32){let a=Lg(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=DD(e,t);if(Array.isArray(a))r.push(...a);else{let c=ui(e[En]);ml(c[de],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function XP(n,e){for(let t=zt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&ml(r[de],r,i,e)}n[ci]!==n[Gn]&&e.push(n[ci])}var BD=[];function eO(n){return n[qt]??tO(n)}function tO(n){let e=BD.pop()??Object.create(rO);return e.lView=n,e}function nO(n){n.lView[qt]!==n&&(n.lView=null,BD.push(n))}var rO=fe(L({},ca),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{xl(n.lView)},consumerOnSignalRead(){this.lView[qt]=this}});function iO(n){let e=n[qt]??Object.create(sO);return e.lView=n,e}var sO=fe(L({},ca),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ui(n.lView);for(;e&&!$D(e[de]);)e=ui(e);e&&Ab(e)},consumerOnSignalRead(){this.lView[qt]=this}});function $D(n){return n.type!==2}var oO=100;function HD(n,e=!0,t=0){let r=n[In],i=r.rendererFactory,s=!1;s||i.begin?.();try{aO(n,t)}catch(o){throw e&&jD(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function aO(n,e){let t=Fb();try{vE(!0),Gp(n,e);let r=0;for(;Al(n);){if(r===oO)throw new W(103,!1);r++,Gp(n,1)}}finally{vE(t)}}function cO(n,e,t,r){let i=e[X];if((i&256)===256)return;let s=!1,o=!1;!s&&e[In].inlineEffectRunner?.flush(),bg(e);let a=!0,c=null,l=null;s||($D(n)?(l=eO(e),c=gu(l)):EI()===null?(a=!1,l=iO(e),c=gu(l)):e[qt]&&(Vf(e[qt]),e[qt]=null));try{Sb(e),lN(n.bindingStartIndex),t!==null&&RD(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let v=n.preOrderCheckHooks;v!==null&&Ku(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Qu(e,v,0,null),dp(e,0)}if(o||uO(e),qD(e,0),n.contentQueries!==null&&UD(n,e),!s)if(h){let v=n.contentCheckHooks;v!==null&&Ku(e,v)}else{let v=n.contentHooks;v!==null&&Qu(e,v,1),dp(e,1)}bP(n,e);let p=n.components;p!==null&&GD(e,p,0);let m=n.viewQuery;if(m!==null&&zp(2,m,r),!s)if(h){let v=n.viewCheckHooks;v!==null&&Ku(e,v)}else{let v=n.viewHooks;v!==null&&Qu(e,v,2),dp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[lp]){for(let v of e[lp])v();e[lp]=null}s||(e[X]&=-73)}catch(h){throw s||xl(e),h}finally{l!==null&&(Ff(l,c),a&&nO(l)),Dg()}}function qD(n,e){for(let t=lD(n);t!==null;t=dD(t))for(let r=zt;r<t.length;r++){let i=t[r];zD(i,e)}}function uO(n){for(let e=lD(n);e!==null;e=dD(e)){if(!(e[X]&ol.HasTransplantedViews))continue;let t=e[sl];for(let r=0;r<t.length;r++){let i=t[r];Ab(i)}}}function lO(n,e,t){let r=Dr(e,n);zD(r,t)}function zD(n,e){Ig(n)&&Gp(n,e)}function Gp(n,e){let r=n[de],i=n[X],s=n[qt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Lf(s)),o||=!1,s&&(s.dirty=!1),n[X]&=-9217,o)cO(r,n,r.template,n[ln]);else if(i&8192){qD(n,1);let a=r.components;a!==null&&GD(n,a,1)}}function GD(n,e,t){for(let r=0;r<e.length;r++)lO(n,e[r],t)}function zg(n,e){let t=Fb()?64:1088;for(n[In].changeDetectionScheduler?.notify(e);n;){n[X]|=t;let r=ui(n);if(Ap(n)&&!r)return n;n=r}return null}var fi=class{get rootNodes(){let e=this._lView,t=e[de];return ml(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ln]}set context(e){this._lView[ln]=e}get destroyed(){return(this._lView[X]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[mt];if(Wn(e)){let t=e[il],r=t?t.indexOf(this):-1;r>-1&&($p(e,r),el(t,r))}this._attachedToViewContainer=!1}ID(this._lView[de],this._lView)}onDestroy(e){xb(this._lView,e)}markForCheck(){zg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[X]&=-129}reattach(){Rp(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,HD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ap(this._lView),t=this._lView[Rs];t!==null&&!e&&Vg(t,this._lView),_D(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e;let t=Ap(this._lView),r=this._lView[Rs];r!==null&&!t&&wD(r,this._lView),Rp(this._lView)}},Fl=(()=>{class n{static{this.__NG_ELEMENT_ID__=fO}}return n})(),dO=Fl,hO=class extends dO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=ZP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new fi(i)}};function fO(){return pO(Tt(),De())}function pO(n,e){return n.type&4?new hO(e,n,Rl(n,e)):null}var rW=new RegExp(`^(\\d+)*(${ZN}|${YN})*(.*)`);var gO=()=>null;function NE(n,e){return gO(n,e)}var Ps=class{},Ll=new K("",{providedIn:"root",factory:()=>!1});var WD=new K(""),KD=new K(""),Wp=class{},yl=class{};function mO(n){let e=Error(`No component factory found for ${gt(n)}.`);return e[yO]=n,e}var yO="ngComponent";var Kp=class{resolveComponentFactory(e){throw mO(e)}},Os=class{static{this.NULL=new Kp}},ks=class{},yi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>vO()}}return n})();function vO(){let n=De(),e=Tt(),t=Dr(e.index,n);return(_r(t)?t:n)[Ke]}var _O=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>null})}}return n})();function Qp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=oE(i,a);else if(s==2){let c=a,l=e[++o];r=oE(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var vl=class extends Os{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ai(e);return new _a(t,this.ngModule)}};function PE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:wr.None;e?t.push({propName:o,templateName:r,isSignal:(a&wr.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function wO(n){let e=n.toLowerCase();return e==="svg"?Db:e==="math"?ZM:null}var _a=class extends yl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=PE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return PE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=RM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=_e(null);try{i=i||this.ngModule;let o=i instanceof Gt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Np(e,o):e,c=a.get(ks,null);if(c===null)throw new W(407,!1);let l=a.get(_O,null),h=a.get(Ps,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",T=r?TP(m,r,this.componentDef.encapsulation,a):vD(m,v,wO(v)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let R=null;T!==null&&(R=kg(T,a,!0));let k=Bg(0,null,null,1,0,null,null,null,null,null,null),B=Pl(null,k,null,M,null,null,p,m,a,null,R);bg(B);let F,H,te=null;try{let $=this.componentDef,I,y=null;$.findHostDirectiveDefs?(I=[],y=new Map,$.findHostDirectiveDefs($,I,y),I.push($)):I=[$];let _=IO(B,T);te=EO(_,T,$,I,B,p,m),H=Tb(k,bn),T&&CO(m,$,T,r),t!==void 0&&TO(H,this.ngContentSelectors,t),F=DO(te,$,I,y,B,[SO]),qg(k,B,null)}catch($){throw te!==null&&jp(te),jp(B),$}finally{Dg()}return new Yp(this.componentType,F,Rl(H,B),B,H)}finally{_e(s)}}},Yp=class extends Wp{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new fi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Hg(s[de],s,i,e,t),this.previousInputValues.set(e,t);let o=Dr(this._tNode.index,s);zg(o,1)}}get injector(){return new si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function IO(n,e){let t=n[de],r=bn;return n[r]=e,Ol(t,r,2,"#host",null)}function EO(n,e,t,r,i,s,o){let a=i[de];bO(r,n,e,o);let c=null;e!==null&&(c=kg(e,i[xs]));let l=s.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Pl(i,OD(t),null,h,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&qp(a,n,r.length-1),kl(i,p),i[n.index]=p}function bO(n,e,t,r){for(let i of n)e.mergedAttrs=ma(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Qp(e,e.mergedAttrs,!0),t!==null&&TD(r,t,e))}function DO(n,e,t,r,i,s){let o=Tt(),a=i[de],c=hn(o,i);FD(a,i,o,t,null,r);for(let h=0;h<t.length;h++){let p=o.directiveStart+h,m=Ns(i,a,p,o);hi(m,i)}LD(a,i,o),c&&hi(c,i);let l=Ns(i,a,o.directiveStart+o.componentOffset,o);if(n[ln]=i[ln]=l,s!==null)for(let h of s)h(l,e);return MD(a,o,i),l}function CO(n,e,t,r){if(r)Dp(n,t,["ng-version","18.2.10"]);else{let{attrs:i,classes:s}=MM(e.selectors[0]);i&&Dp(n,t,i),s&&s.length>0&&CD(n,t,s.join(" "))}}function TO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function SO(){let n=Tt();Ag(De()[de],n)}var Bs=(()=>{class n{static{this.__NG_ELEMENT_ID__=AO}}return n})();function AO(){let n=Tt();return RO(n,De())}var xO=Bs,QD=class extends xO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Rl(this._hostTNode,this._hostLView)}get injector(){return new si(this._hostTNode,this._hostLView)}get parentInjector(){let e=xg(this._hostTNode,this._hostLView);if(Kb(e)){let t=ul(e,this._hostLView),r=cl(e),i=t[de].data[r+8];return new si(i,t)}else return new si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=OE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-zt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=NE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,ME(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!WM(e),a;if(o)a=t;else{let T=t||{};a=T.index,r=T.injector,i=T.projectableNodes,s=T.environmentInjector||T.ngModuleRef}let c=o?e:new _a(ai(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let M=(o?l:this.parentInjector).get(Gt,null);M&&(s=M)}let h=ai(c.componentType??{}),p=NE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=c.create(l,i,m,s);return this.insertImpl(v.hostView,a,ME(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(XM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[mt],l=new QD(c,c[dn],c[mt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return JP(o,i,s,r),e.attachToViewContainerRef(),tb(mp(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=OE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=$p(this._lContainer,t);r&&(el(mp(this._lContainer),t),ID(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=$p(this._lContainer,t);return r&&el(mp(this._lContainer),t)!=null?new fi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function OE(n){return n[il]}function mp(n){return n[il]||(n[il]=[])}function RO(n,e){let t,r=e[n.index];return Wn(r)?t=r:(t=VD(r,e,null,n),e[n.index]=t,kl(e,t)),NO(t,e,n,r),new QD(t,n,e)}function MO(n,e){let t=n[Ke],r=t.createComment(""),i=hn(e,n),s=bD(t,i);return gl(t,s,r,pP(t,i),!1),r}var NO=kO,PO=()=>!1;function OO(n,e,t){return PO(n,e,t)}function kO(n,e,t,r){if(n[ci])return;let i;t.type&8?i=Dn(r):i=MO(e,t),n[ci]=i}var kE=new Set;function Aa(n){kE.has(n)||(kE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function FO(n){return typeof n=="function"&&n[jn]!==void 0}function Vl(n,e){Aa("NgSignals");let t=PI(n),r=t[jn];return e?.equal&&(r.equal=e.equal),t.set=i=>Uf(r,i),t.update=i=>OI(r,i),t.asReadonly=LO.bind(t),t}function LO(){let n=this[jn];if(n.readonlyFn===void 0){let e=()=>this();e[jn]=n,n.readonlyFn=e}return n.readonlyFn}function YD(n){return FO(n)&&typeof n.set=="function"}function VO(n){return Object.getPrototypeOf(n.prototype).constructor}function $s(n){let e=VO(n.type),t=!0,r=[n];for(;e;){let i;if(Ir(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new W(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=qu(n.inputs),o.inputTransforms=qu(n.inputTransforms),o.declaredInputs=qu(n.declaredInputs),o.outputs=qu(n.outputs);let a=i.hostBindings;a&&HO(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&BO(n,c),l&&$O(n,l),UO(n,i),ZR(n.outputs,i.outputs),Ir(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===$s&&(t=!1)}}e=Object.getPrototypeOf(e)}jO(r)}function UO(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function jO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ma(i.hostAttrs,t=ma(t,i.hostAttrs))}}function qu(n){return n===Ts?{}:n===Ht?[]:n}function BO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function $O(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function HO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Er=class{},wa=class{};var Zp=class extends Er{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vl(this);let s=lb(e);this._bootstrapComponents=yD(s.bootstrap),this._r3Injector=rD(e,t,[{provide:Er,useValue:this},{provide:Os,useValue:this.componentFactoryResolver},...r],gt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jp=class extends wa{constructor(e){super(),this.moduleType=e}create(e){return new Zp(this.moduleType,e,[])}};var _l=class extends Er{constructor(e){super(),this.componentFactoryResolver=new vl(this),this.instance=null;let t=new ya([...e.providers,{provide:Er,useValue:this},{provide:Os,useValue:this.componentFactoryResolver}],e.parent||_g(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Gg(n,e,t=null){return new _l({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function ZD(n){return Wg(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function qO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Wg(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function JD(n,e,t){return n[e]=t}function br(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function zO(n,e,t,r){let i=br(n,e,t);return br(n,e+1,r)||i}function GO(n,e,t,r,i){let s=zO(n,e,t,r);return br(n,e+2,i)||s}function WO(n){return(n.flags&32)===32}function KO(n,e,t,r,i,s,o,a,c){let l=e.consts,h=Ol(e,n,4,o||null,a||null);kD(e,t,h,al(l,c)),Ag(e,h);let p=h.tView=Bg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function QO(n,e,t,r,i,s,o,a,c,l){let h=t+bn,p=e.firstCreatePass?KO(h,e,n,r,i,s,o,a,c):e.data[h];Ca(p,!1);let m=YO(e,n,p,t);Tg()&&Ug(e,n,m,p),hi(m,n);let v=VD(m,n,m,p);return n[h]=v,kl(n,v),OO(v,p,n),wg(p)&&ND(e,n,p),c!=null&&PD(n,p,l),p}function Ar(n,e,t,r,i,s,o,a){let c=De(),l=Ct(),h=al(l.consts,s);return QO(c,l,n,e,t,r,i,h,o,a),Ar}var YO=ZO;function ZO(n,e,t,r){return Sg(!0),e[Ke].createComment("")}var fa=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(fa||{}),JO=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})(),FE=class n{constructor(){this.ngZone=V(be),this.scheduler=V(Ps),this.errorHandler=V($n,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[fa.EarlyRead,fa.Write,fa.MixedReadWrite,fa.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}};function XD(n,e,t,r){return br(n,Eg(),t)?e+fg(t)+r:Sr}function zu(n,e){return n<<17|e<<2}function pi(n){return n>>17&32767}function XO(n){return(n&2)==2}function ek(n,e){return n&131071|e<<17}function Xp(n){return n|2}function Fs(n){return(n&131068)>>2}function yp(n,e){return n&-131069|e<<2}function tk(n){return(n&1)===1}function eg(n){return n|1}function nk(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=pi(o),c=Fs(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Da(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let m=pi(n[a+1]);n[r+1]=zu(m,a),m!==0&&(n[m+1]=yp(n[m+1],r)),n[a+1]=ek(n[a+1],r)}else n[r+1]=zu(a,0),a!==0&&(n[a+1]=yp(n[a+1],r)),a=r;else n[r+1]=zu(c,0),a===0?a=r:n[c+1]=yp(n[c+1],r),c=r;l&&(n[r+1]=Xp(n[r+1])),LE(n,h,r,!0),LE(n,h,r,!1),rk(e,h,n,r,s),o=zu(a,c),s?e.classBindings=o:e.styleBindings=o}function rk(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Da(s,e)>=0&&(t[r+1]=eg(t[r+1]))}function LE(n,e,t,r){let i=n[t+1],s=e===null,o=r?pi(i):Fs(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];ik(c,e)&&(a=!0,n[o+1]=r?eg(l):Xp(l)),o=r?pi(l):Fs(l)}a&&(n[t+1]=r?Xp(i):eg(i))}function ik(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Da(n,e)>=0:!1}function ut(n,e,t){let r=De(),i=Eg();if(br(r,i,e)){let s=Ct(),o=Cg();$g(s,o,r,n,e,r[Ke],t,!1)}return ut}function VE(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";Hg(n,t,s[o],o,r)}function Kg(n,e){return sk(n,e,null,!0),Kg}function sk(n,e,t,r){let i=De(),s=Ct(),o=dN(2);if(s.firstUpdatePass&&ak(s,n,o,r),e!==Sr&&br(i,o,e)){let a=s.data[Us()];hk(s,a,i,i[Ke],n,i[o+1]=fk(e,t),r,o)}}function ok(n,e){return e>=n.expandoStartIndex}function ak(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Us()],o=ok(n,t);pk(s,r)&&e===null&&!o&&(e=!1),e=ck(i,s,e,r),nk(i,s,e,t,o,r)}}function ck(n,e,t,r){let i=gN(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=vp(null,n,e,t,r),t=Ia(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=vp(i,n,e,t,r),s===null){let c=uk(n,e,r);c!==void 0&&Array.isArray(c)&&(c=vp(null,n,e,c[1],r),c=Ia(c,e.attrs,r),lk(n,e,r,c))}else s=dk(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function uk(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Fs(r)!==0)return n[pi(r)]}function lk(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[pi(i)]=r}function dk(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ia(r,o,t)}return Ia(r,e.attrs,t)}function vp(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ia(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ia(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),yM(n,o,t?!0:e[++s]))}return n===void 0?null:n}function hk(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=tk(l)?UE(c,e,t,i,Fs(l),o):void 0;if(!wl(h)){wl(s)||XO(l)&&(s=UE(c,null,t,i,a,o));let p=Cb(Us(),t);IP(r,o,p,i,s)}}function UE(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=t[i+1];m===Sr&&(m=p?Ht:void 0);let v=p?cp(m,r):h===r?m:void 0;if(l&&!wl(v)&&(v=cp(c,r)),wl(v)&&(a=v,o))return a;let T=n[i+1];i=o?pi(T):Fs(T)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=cp(c,r))}return a}function wl(n){return n!==void 0}function fk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=gt(Ml(n)))),n}function pk(n,e){return(n.flags&(e?8:16))!==0}function gk(n,e,t,r,i,s){let o=e.consts,a=al(o,i),c=Ol(e,n,2,r,a);return kD(e,t,c,al(o,s)),c.attrs!==null&&Qp(c,c.attrs,!1),c.mergedAttrs!==null&&Qp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Y(n,e,t,r){let i=De(),s=Ct(),o=bn+n,a=i[Ke],c=s.firstCreatePass?gk(o,s,i,e,t,r):s.data[o],l=mk(s,i,c,a,e,n);i[o]=l;let h=wg(c);return Ca(c,!0),TD(a,l,c),!WO(c)&&Tg()&&Ug(s,i,l,c),nN()===0&&hi(l,i),rN(),h&&(ND(s,i,c),MD(s,c,i)),r!==null&&PD(i,c),Y}function ne(){let n=Tt();kb()?uN():(n=n.parent,Ca(n,!1));let e=n;oN(e)&&aN(),iN();let t=Ct();return t.firstCreatePass&&(Ag(t,n),_b(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&bN(e)&&VE(t,e,De(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&DN(e)&&VE(t,e,De(),e.stylesWithoutHost,!1),ne}function Re(n,e,t,r){return Y(n,e,t,r),ne(),Re}var mk=(n,e,t,r,i,s)=>(Sg(!0),vD(r,i,_N()));function e0(){return De()}var Il="en-US";var yk=Il;function vk(n){typeof n=="string"&&(yk=n.toLowerCase().replace(/_/g,"-"))}var _k=(n,e,t)=>{};function St(n,e,t,r){let i=De(),s=Ct(),o=Tt();return t0(s,i,i[Ke],o,n,e,r),St}function wk(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[rl],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function t0(n,e,t,r,i,s,o){let a=wg(r),l=n.firstCreatePass&&GP(n),h=e[ln],p=zP(e),m=!0;if(r.type&3||o){let M=hn(r,e),R=o?o(M):M,k=p.length,B=o?H=>o(Dn(H[r.index])):r.index,F=null;if(!o&&a&&(F=wk(n,e,i,r.index)),F!==null){let H=F.__ngLastListenerFn__||F;H.__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,m=!1}else{s=BE(r,e,h,s),_k(M,i,s);let H=t.listen(R,i,s);p.push(s,H),l&&l.push(i,B,k,k+1)}}else s=BE(r,e,h,s);let v=r.outputs,T;if(m&&v!==null&&(T=v[i])){let M=T.length;if(M)for(let R=0;R<M;R+=2){let k=T[R],B=T[R+1],te=e[k][B].subscribe(s),$=p.length;p.push(s,te),l&&l.push(i,r.index,$,-($+1))}}}function jE(n,e,t,r){let i=_e(null);try{return vn(6,e,t),t(r)!==!1}catch(s){return jD(n,s),!1}finally{vn(7,e,t),_e(i)}}function BE(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?Dr(n.index,e):e;zg(o,5);let a=jE(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=jE(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Tn(n=1){return yN(n)}function Qg(n,e,t,r,i){let s=De(),o=XD(s,e,t,r);if(o!==Sr){let a=Ct(),c=Cg();$g(a,c,s,n,o,s[Ke],i,!1)}return Qg}function Ik(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Me(n,e=""){let t=De(),r=Ct(),i=n+bn,s=r.firstCreatePass?Ol(r,i,1,e,null):r.data[i],o=Ek(r,t,s,e,n);t[i]=o,Tg()&&Ug(r,t,o,s),Ca(s,!1)}var Ek=(n,e,t,r,i)=>(Sg(!0),iP(e[Ke],r));function xa(n){return kt("",n,""),xa}function kt(n,e,t){let r=De(),i=XD(r,n,e,t);return i!==Sr&&WP(r,Us(),i),kt}function Yg(n,e,t){YD(e)&&(e=e());let r=De(),i=Eg();if(br(r,i,e)){let s=Ct(),o=Cg();$g(s,o,r,n,e,r[Ke],t,!1)}return Yg}function n0(n,e){let t=YD(n);return t&&n.set(e),t}function Zg(n,e){let t=De(),r=Ct(),i=Tt();return t0(r,t,t[Ke],i,n,e),Zg}function bk(n,e,t){let r=Ct();if(r.firstCreatePass){let i=Ir(n);tg(t,r.data,r.blueprint,i,!0),tg(e,r.data,r.blueprint,i,!1)}}function tg(n,e,t,r,i){if(n=pt(n),Array.isArray(n))for(let s=0;s<n.length;s++)tg(n[s],e,t,r,i);else{let s=Ct(),o=De(),a=Tt(),c=As(n)?n:pt(n.provide),l=mb(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(As(n)||!n.multi){let v=new di(l,i,J),T=wp(c,e,i?h:h+m,p);T===-1?(Op(dl(a,o),s,c),_p(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),o.push(v)):(t[T]=v,o[T]=v)}else{let v=wp(c,e,h+m,p),T=wp(c,e,h,h+m),M=v>=0&&t[v],R=T>=0&&t[T];if(i&&!R||!i&&!M){Op(dl(a,o),s,c);let k=Tk(i?Ck:Dk,t.length,i,r,l);!i&&R&&(t[T].providerFactory=k),_p(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),o.push(k)}else{let k=r0(t[i?T:v],l,!i&&r);_p(s,n,v>-1?v:T,k)}!i&&r&&R&&t[T].componentProviders++}}}function _p(n,e,t,r){let i=As(e),s=UM(e);if(i||s){let c=(s?pt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function r0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function wp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Dk(n,e,t,r){return ng(this.multi,[])}function Ck(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ns(t,t[de],this.providerFactory.index,r);s=a.slice(0,o),ng(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],ng(i,s);return s}function ng(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Tk(n,e,t,r,i){let s=new di(n,t,J);return s.multi=[],s.index=e,s.componentProviders=0,r0(s,i,r&&!t),s}function Jg(n,e=[]){return t=>{t.providersResolver=(r,i)=>bk(r,i?i(n):n,e)}}var Sk=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=fb(!1,t.type),i=r.length>0?Gg([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(Z(Gt))})}}return n})();function Kt(n){Aa("NgStandalone"),n.getStandaloneInjector=e=>e.get(Sk).getOrCreateStandaloneInjector(n)}function i0(n,e,t,r,i,s){return xk(De(),Lb(),n,e,t,r,i,s)}function s0(n,e){let t=n[e];return t===Sr?void 0:t}function Ak(n,e,t,r,i,s){let o=e+t;return br(n,o,i)?JD(n,o+1,s?r.call(s,i):r(i)):s0(n,o+1)}function xk(n,e,t,r,i,s,o,a){let c=e+t;return GO(n,c,i,s,o)?JD(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):s0(n,c+3)}function o0(n,e){let t=Ct(),r,i=n+bn;t.firstCreatePass?(r=Rk(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=oi(r.type,!0)),o,a=Et(J);try{let c=ll(!1),l=s();return ll(c),Ik(t,De(),i,l),l}finally{Et(a)}}function Rk(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function a0(n,e,t){let r=n+bn,i=De(),s=JM(i,r);return Mk(i,r)?Ak(i,Lb(),e,s.transform,t,s):s.transform(t)}function Mk(n,e){return n[de].data[e].pure}var qn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},c0=new qn("18.2.10");var Ul=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var u0=new K("");function vi(n){return!!n&&typeof n.then=="function"}function l0(n){return!!n&&typeof n.subscribe=="function"}var d0=new K(""),h0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=V(d0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(vi(s))t.push(s);else if(l0(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xg=new K("");function Nk(){NI(()=>{throw new W(600,!1)})}function Pk(n){return n.isBoundToModule}var Ok=10;function kk(n,e,t){try{let r=t();return vi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var _i=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(HN),this.afterRenderManager=V(JO),this.zonelessEnabled=V(Ll),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new et,this.afterTick=new et,this.componentTypes=[],this.components=[],this.isStable=V(js).hasPendingTasks.pipe(le(t=>!t)),this._injector=V(Gt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof yl;if(!this._injector.get(h0).done){let m=!i&&ub(t),v=!1;throw new W(405,v)}let o;i?o=t:o=this._injector.get(Os).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=Pk(o)?void 0:this._injector.get(Er),c=r||o.selector,l=o.create(bt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(u0,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Yu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new W(101,!1);let t=_e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,_e(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ks,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<Ok;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)Fk(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Al(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Yu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Xg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Yu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new W(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Yu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Fk(n,e,t,r){if(!t&&!Al(n))return;HD(n,e,t&&!r?0:1)}var rg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},em=(()=>{class n{compileModuleSync(t){return new Jp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=lb(t),s=yD(i.declarations).reduce((o,a)=>{let c=ai(a);return c&&o.push(new _a(c)),o},[]);return new rg(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Lk=(()=>{class n{constructor(){this.zone=V(be),this.changeDetectionScheduler=V(Ps),this.applicationRef=V(_i)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Vk=new K("",{factory:()=>!1});function f0({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new be(fe(L({},g0()),{scheduleInRootZone:t})),[{provide:be,useFactory:n},{provide:Ss,multi:!0,useFactory:()=>{let r=V(Lk,{optional:!0});return()=>r.initialize()}},{provide:Ss,multi:!0,useFactory:()=>{let r=V(Uk);return()=>{r.initialize()}}},e===!0?{provide:WD,useValue:!0}:[],{provide:KD,useValue:t??iD}]}function p0(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=f0({ngZoneFactory:()=>{let i=g0(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Aa("NgZone_CoalesceEvent"),new be(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Cn([{provide:Vk,useValue:!0},{provide:Ll,useValue:!1},r])}function g0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Uk=(()=>{class n{constructor(){this.subscription=new Ve,this.initialized=!1,this.zone=V(be),this.pendingTasks=V(js)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var jk=(()=>{class n{constructor(){this.appRef=V(_i),this.taskService=V(js),this.ngZone=V(be),this.zonelessEnabled=V(Ll),this.disableScheduling=V(WD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ve,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(fl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(KD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Up||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?bE:oD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(fl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,bE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Bk(){return typeof $localize<"u"&&$localize.locale||Il}var tm=new K("",{providedIn:"root",factory:()=>V(tm,ae.Optional|ae.SkipSelf)||Bk()});var ig=new K("");function Gu(n){return!n.moduleRef}function $k(n){let e=Gu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(be);return t.run(()=>{Gu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get($n,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Gu(n)){let s=()=>e.destroy(),o=n.platformInjector.get(ig);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(ig);o.add(s),n.moduleRef.onDestroy(()=>{Yu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return kk(r,t,()=>{let s=e.get(h0);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(tm,Il);if(vk(o||Il),Gu(n)){let a=e.get(_i);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return Hk(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Hk(n,e){let t=n.injector.get(_i);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new W(-403,!1);e.push(n)}var Zu=null;function qk(n=[],e){return bt.create({name:e,providers:[{provide:Cl,useValue:"platform"},{provide:ig,useValue:new Set([()=>Zu=null])},...n]})}function zk(n=[]){if(Zu)return Zu;let e=qk(n);return Zu=e,Nk(),Gk(e),e}function Gk(n){n.get(Pg,null)?.forEach(t=>t())}var wi=(()=>{class n{static{this.__NG_ELEMENT_ID__=Wk}}return n})();function Wk(n){return Kk(Tt(),De(),(n&16)===16)}function Kk(n,e,t){if(Sl(n)&&!t){let r=Dr(n.index,e);return new fi(r,r)}else if(n.type&175){let r=e[En];return new fi(r,e)}return null}var sg=class{constructor(){}supports(e){return ZD(e)}create(e){return new og(e)}},Qk=(n,e)=>e,og=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Qk}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<$E(r,i,s)?t:r,a=$E(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let v=m<s.length?s[m]:s[m]=0,T=v+m;h<=T&&T<l&&(s[m]=v+1)}let p=o.previousIndex;s[p]=h-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ZD(e))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,qO(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new ag(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new El),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new El),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ag=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},cg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},El=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new cg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function $E(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var ug=class{constructor(){}supports(e){return e instanceof Map||Wg(e)}create(){return new lg}},lg=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Wg(e)))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new dg(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},dg=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function HE(){return new nm([new sg])}var nm=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:HE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||HE()),deps:[[n,new gg,new nt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new W(901,!1)}}return n})();function qE(){return new rm([new ug])}var rm=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:qE})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||qE()),deps:[[n,new gg,new nt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new W(901,!1)}}return n})();function m0(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=zk(r),s=[f0({}),{provide:Ps,useExisting:jk},...t||[]],o=new _l({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return $k({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function jl(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Bl(n,e){Aa("NgSignals");let t=xI(n);return e?.equal&&(t[jn].equal=e.equal),t}function xr(n){let e=_e(null);try{return n()}finally{_e(e)}}var b0=null;function Kn(){return b0}function D0(n){b0??=n}var $l=class{};var Qt=new K(""),C0=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(Jk),providedIn:"platform"})}}return n})();var Jk=(()=>{class n extends C0{constructor(){super(),this._doc=V(Qt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kn().getBaseHref(this._doc)}onPopState(t){let r=Kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function T0(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function y0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ii(n){return n&&n[0]!=="?"?"?"+n:n}var ql=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(S0),providedIn:"root"})}}return n})(),Xk=new K(""),S0=(()=>{class n extends ql{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(Qt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return T0(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ii(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ii(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ii(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Z(C0),Z(Xk,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ra=(()=>{class n{constructor(t){this._subject=new We,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=n1(y0(v0(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ii(r))}normalize(t){return n.stripTrailingSlash(t1(this._basePath,v0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ii(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ii(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Ii}static{this.joinWithSlash=T0}static{this.stripTrailingSlash=y0}static{this.\u0275fac=function(r){return new(r||n)(Z(ql))}}static{this.\u0275prov=G({token:n,factory:()=>e1(),providedIn:"root"})}}return n})();function e1(){return new Ra(Z(ql))}function t1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function v0(n){return n.replace(/\/index.html$/,"")}function n1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function A0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var im=/\s+/,_0=[],zl=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=_0,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(im):_0}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(im):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(im).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(J(Cr),J(yi))}}static{this.\u0275dir=Wt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var sm=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Gl=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new sm(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),w0(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);w0(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(J(Bs),J(Fl),J(nm))}}static{this.\u0275dir=Wt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function w0(n,e){n.context.$implicit=e.item}var x0=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new om,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){I0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){I0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(J(Bs),J(Fl))}}static{this.\u0275dir=Wt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),om=class{constructor(){this.$implicit=null,this.ngIf=null}};function I0(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${gt(e)}'.`)}function r1(n,e){return{key:n,value:e}}var R0=(()=>{class n{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=E0}transform(t,r=E0){if(!t||!(t instanceof Map)&&typeof t!="object")return null;this.differ??=this.differs.find(t).create();let i=this.differ.diff(t),s=r!==this.compareFn;return i&&(this.keyValues=[],i.forEachItem(o=>{this.keyValues.push(r1(o.key,o.currentValue))})),(i||s)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}static{this.\u0275fac=function(r){return new(r||n)(J(rm,16))}}static{this.\u0275pipe=ob({name:"keyvalue",type:n,pure:!1,standalone:!0})}}return n})();function E0(n,e){let t=n.key,r=e.key;if(t===r)return 0;if(t===void 0)return 1;if(r===void 0)return-1;if(t===null)return 1;if(r===null)return-1;if(typeof t=="string"&&typeof r=="string")return t<r?-1:1;if(typeof t=="number"&&typeof r=="number")return t-r;if(typeof t=="boolean"&&typeof r=="boolean")return t<r?-1:1;let i=String(t),s=String(r);return i==s?0:i<s?-1:1}var Ei=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mi({type:n})}static{this.\u0275inj=gi({})}}return n})(),M0="browser",i1="server";function am(n){return n===i1}var Hl=class{};var dm=class extends $l{constructor(){super(...arguments),this.supportsDOMEvents=!0}},hm=class n extends dm{static makeCurrent(){D0(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=s1();return t==null?null:o1(t)}resetBaseElement(){Ma=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return A0(document.cookie,e)}},Ma=null;function s1(){return Ma=Ma||document.querySelector("base"),Ma?Ma.getAttribute("href"):null}function o1(n){return new URL(n,document.baseURI).pathname}var a1=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),fm=new K(""),k0=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Z(fm),Z(be))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Wl=class{constructor(e){this._doc=e}},um="ng-app-id",F0=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=am(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${um}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(um),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(um,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Z(Qt),Z(Ng),Z(Og,8),Z(Tr))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),lm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gm=/%COMP%/g,L0="%COMP%",c1=`_nghost-${L0}`,u1=`_ngcontent-${L0}`,l1=!0,d1=new K("",{providedIn:"root",factory:()=>l1});function h1(n){return u1.replace(gm,n)}function f1(n){return c1.replace(gm,n)}function V0(n,e){return e.map(t=>t.replace(gm,n))}var N0=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=am(a),this.defaultRenderer=new Na(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===wn.ShadowDom&&(r=fe(L({},r),{encapsulation:wn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Kl?i.applyToHost(t):i instanceof Pa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case wn.Emulated:s=new Kl(c,l,r,this.appId,h,o,a,p);break;case wn.ShadowDom:return new pm(c,l,t,r,o,a,this.nonce,p);default:s=new Pa(c,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Z(k0),Z(F0),Z(Ng),Z(d1),Z(Qt),Z(Tr),Z(be),Z(Og))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Na=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(lm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(P0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(P0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=lm[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=lm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Hn.DashCase|Hn.Important)?e.style.setProperty(t,r,i&Hn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Hn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Kn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function P0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var pm=class extends Na{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=V0(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Pa=class extends Na{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?V0(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Kl=class extends Pa{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=h1(l),this.hostAttr=f1(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},p1=(()=>{class n extends Wl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Z(Qt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),O0=["alt","control","meta","shift"],g1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},m1={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},y1=(()=>{class n extends Wl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kn().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),O0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=g1[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),O0.forEach(o=>{if(o!==i){let a=m1[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Z(Qt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function U0(n,e){return m0(L({rootComponent:n},v1(e)))}function v1(n){return{appProviders:[...b1,...n?.providers??[]],platformProviders:E1}}function _1(){hm.makeCurrent()}function w1(){return new $n}function I1(){return fD(document),document}var E1=[{provide:Tr,useValue:M0},{provide:Pg,useValue:_1,multi:!0},{provide:Qt,useFactory:I1,deps:[]}];var b1=[{provide:Cl,useValue:"root"},{provide:$n,useFactory:w1,deps:[]},{provide:fm,useClass:p1,multi:!0,deps:[Qt,be,Tr]},{provide:fm,useClass:y1,multi:!0,deps:[Qt]},N0,F0,k0,{provide:ks,useExisting:N0},{provide:Hl,useClass:a1,deps:[]},[]];var j0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Z(Qt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",Ya=Symbol("RouteTitle"),wm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ks(n){return new wm(n)}function T1(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function S1(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Sn(n[t],e[t]))return!1;return!0}function Sn(n,e){let t=n?Im(n):void 0,r=e?Im(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!K0(n[i],e[i]))return!1;return!0}function Im(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function K0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function Q0(n){return n.length>0?n[n.length-1]:null}function Rr(n){return Xf(n)?n:vi(n)?Ue(Promise.resolve(n)):se(n)}var A1={exact:Z0,subset:J0},Y0={exact:x1,subset:R1,ignored:()=>!0};function B0(n,e,t){return A1[t.paths](n.root,e.root,t.matrixParams)&&Y0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function x1(n,e){return Sn(n,e)}function Z0(n,e,t){if(!Di(n.segments,e.segments)||!Zl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Z0(n.children[r],e.children[r],t))return!1;return!0}function R1(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>K0(n[t],e[t]))}function J0(n,e,t){return X0(n,e,e.segments,t)}function X0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Di(i,t)||e.hasChildren()||!Zl(i,t,r))}else if(n.segments.length===t.length){if(!Di(n.segments,t)||!Zl(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!J0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Di(n.segments,i)||!Zl(n.segments,i,r)||!n.children[oe]?!1:X0(n.children[oe],e,s,r)}}function Zl(n,e,t){return e.every((r,i)=>Y0[t](n[i].parameters,r.parameters))}var Yn=class{constructor(e=new Ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ks(this.queryParams),this._queryParamMap}toString(){return P1.serialize(this)}},Ee=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jl(this)}},bi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ks(this.parameters),this._parameterMap}toString(){return tC(this)}};function M1(n,e){return Di(n,e)&&n.every((t,r)=>Sn(t.parameters,e[r].parameters))}function Di(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function N1(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var Wm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new ja,providedIn:"root"})}}return n})(),ja=class{parse(e){let t=new bm(e);return new Yn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Oa(e.root,!0)}`,r=F1(e.queryParams),i=typeof e.fragment=="string"?`#${O1(e.fragment)}`:"";return`${t}${r}${i}`}},P1=new ja;function Jl(n){return n.segments.map(e=>tC(e)).join("/")}function Oa(n,e){if(!n.hasChildren())return Jl(n);if(e){let t=n.children[oe]?Oa(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==oe&&r.push(`${i}:${Oa(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=N1(n,(r,i)=>i===oe?[Oa(n.children[oe],!1)]:[`${i}:${Oa(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${Jl(n)}/${t[0]}`:`${Jl(n)}/(${t.join("//")})`}}function eC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ql(n){return eC(n).replace(/%3B/gi,";")}function O1(n){return encodeURI(n)}function Em(n){return eC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xl(n){return decodeURIComponent(n)}function $0(n){return Xl(n.replace(/\+/g,"%20"))}function tC(n){return`${Em(n.path)}${k1(n.parameters)}`}function k1(n){return Object.entries(n).map(([e,t])=>`;${Em(e)}=${Em(t)}`).join("")}function F1(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Ql(t)}=${Ql(i)}`).join("&"):`${Ql(t)}=${Ql(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var L1=/^[^\/()?;#]+/;function mm(n){let e=n.match(L1);return e?e[0]:""}var V1=/^[^\/()?;=#]+/;function U1(n){let e=n.match(V1);return e?e[0]:""}var j1=/^[^=?&#]+/;function B1(n){let e=n.match(j1);return e?e[0]:""}var $1=/^[^&#]+/;function H1(n){let e=n.match($1);return e?e[0]:""}var bm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new Ee(e,t)),r}parseSegment(){let e=mm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new bi(Xl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=U1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=mm(this.remaining);i&&(r=i,this.capture(r))}e[Xl(t)]=Xl(r)}parseQueryParam(e){let t=B1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=H1(this.remaining);o&&(r=o,this.capture(r))}let i=$0(t),s=$0(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=mm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new W(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=oe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[oe]:new Ee([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function nC(n){return n.segments.length>0?new Ee([],{[oe]:n}):n}function rC(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=rC(i);if(r===oe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Ee(n.segments,e);return q1(t)}function q1(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new Ee(n.segments.concat(e.segments),e.children)}return n}function Ba(n){return n instanceof Yn}function z1(n,e,t=null,r=null){let i=iC(n);return sC(i,e,t,r)}function iC(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new Ee(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=nC(r);return e??i}function sC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return ym(i,i,i,t,r);let s=G1(e);if(s.toRoot())return ym(i,i,new Ee([],{}),t,r);let o=W1(s,i,n),a=o.processChildren?La(o.segmentGroup,o.index,s.commands):aC(o.segmentGroup,o.index,s.commands);return ym(i,o.segmentGroup,a,t,r)}function ed(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function $a(n){return typeof n=="object"&&n!=null&&n.outlets}function ym(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;n===e?o=t:o=oC(n,e,t);let a=nC(rC(o));return new Yn(a,s,i)}function oC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=oC(s,e,t)}),new Ee(n.segments,r)}var td=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ed(r[0]))throw new W(4003,!1);let i=r.find($a);if(i&&i!==Q0(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function G1(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new td(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new td(t,e,r)}var zs=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function W1(n,e,t){if(n.isAbsolute)return new zs(e,!0,0);if(!t)return new zs(e,!1,NaN);if(t.parent===null)return new zs(t,!0,0);let r=ed(n.commands[0])?0:1,i=t.segments.length-1+r;return K1(t,i,n.numberOfDoubleDots)}function K1(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new zs(r,!1,i-s)}function Q1(n){return $a(n[0])?n[0].outlets:{[oe]:n}}function aC(n,e,t){if(n??=new Ee([],{}),n.segments.length===0&&n.hasChildren())return La(n,e,t);let r=Y1(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ee(n.segments.slice(0,r.pathIndex),{});return s.children[oe]=new Ee(n.segments.slice(r.pathIndex),n.children),La(s,0,i)}else return r.match&&i.length===0?new Ee(n.segments,{}):r.match&&!n.hasChildren()?Dm(n,e,t):r.match?La(n,0,i):Dm(n,e,t)}function La(n,e,t){if(t.length===0)return new Ee(n.segments,{});{let r=Q1(t),i={};if(Object.keys(r).some(s=>s!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let s=La(n.children[oe],e,t);return new Ee(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=aC(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ee(n.segments,i)}}function Y1(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if($a(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!q0(c,l,o))return s;r+=2}else{if(!q0(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Dm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if($a(s)){let c=Z1(s.outlets);return new Ee(r,c)}if(i===0&&ed(t[0])){let c=n.segments[e];r.push(new bi(c.path,H0(t[0]))),i++;continue}let o=$a(s)?s.outlets[oe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&ed(a)?(r.push(new bi(o,H0(a))),i+=2):(r.push(new bi(o,{})),i++)}return new Ee(r,{})}function Z1(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Dm(new Ee([],{}),0,r))}),e}function H0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function q0(n,e,t){return n==t.path&&Sn(e,t.parameters)}var Va="imperative",rt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(rt||{}),Yt=class{constructor(e,t){this.id=e,this.url=t}},Ha=class extends Yt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=rt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ci=class extends Yt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=rt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Lt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Lt||{}),Cm=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Cm||{}),Qn=class extends Yt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=rt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ti=class extends Yt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=rt.NavigationSkipped}},qa=class extends Yt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=rt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},nd=class extends Yt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=rt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tm=class extends Yt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=rt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sm=class extends Yt{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=rt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Am=class extends Yt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=rt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xm=class extends Yt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=rt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rm=class{constructor(e){this.route=e,this.type=rt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mm=class{constructor(e){this.route=e,this.type=rt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Nm=class{constructor(e){this.snapshot=e,this.type=rt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pm=class{constructor(e){this.snapshot=e,this.type=rt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Om=class{constructor(e){this.snapshot=e,this.type=rt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},km=class{constructor(e){this.snapshot=e,this.type=rt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var za=class{},Qs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function J1(n,e){return n.providers&&!n._injector&&(n._injector=Gg(n.providers,e,`Route: ${n.path}`)),n._injector??e}function fn(n){return n.outlet||oe}function X1(n,e){let t=n.filter(r=>fn(r)===e);return t.push(...n.filter(r=>fn(r)!==e)),t}function Za(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Fm=class{get injector(){return Za(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ud(this.rootInjector),this.attachRef=null}},ud=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Fm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Z(Gt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Lm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Lm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Vm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Vm(e,this._root).map(t=>t.value)}};function Lm(n,e){if(n===e.value)return e;for(let t of e.children){let r=Lm(n,t);if(r)return r}return null}function Vm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Vm(n,t);if(r.length)return r.unshift(e),r}return[]}var Ft=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function qs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var id=class extends rd{constructor(e,t){super(e),this.snapshot=t,Km(this,e)}toString(){return this.snapshot.toString()}};function cC(n){let e=eF(n),t=new tt([new bi("",{})]),r=new tt({}),i=new tt({}),s=new tt({}),o=new tt(""),a=new At(t,r,s,o,i,oe,n,e.root);return a.snapshot=e.root,new id(new Ft(a,[]),e)}function eF(n){let e={},t={},r={},i="",s=new Gs([],e,r,i,t,oe,n,null,{});return new od("",new Ft(s,[]))}var At=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(le(l=>l[Ya]))??se(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(e=>Ks(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(e=>Ks(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function sd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&lC(i)&&(r.resolve[Ya]=i.title),r}var Gs=class{get title(){return this.data?.[Ya]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ks(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ks(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},od=class extends rd{constructor(e,t){super(t),this.url=e,Km(this,t)}toString(){return uC(this._root)}};function Km(n,e){e.value._routerState=n,e.children.forEach(t=>Km(n,t))}function uC(n){let e=n.children.length>0?` { ${n.children.map(uC).join(", ")} } `:"";return`${n.value}${e}`}function vm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Sn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Sn(e.params,t.params)||n.paramsSubject.next(t.params),S1(e.url,t.url)||n.urlSubject.next(t.url),Sn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Um(n,e){let t=Sn(n.params,e.params)&&M1(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Um(n.parent,e.parent))}function lC(n){return typeof n.title=="string"||n.title===null}var Qm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new We,this.deactivateEvents=new We,this.attachEvents=new We,this.detachEvents=new We,this.parentContexts=V(ud),this.location=V(Bs),this.changeDetector=V(wi),this.inputBinder=V(Ym,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new jm(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Wt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Vs]})}}return n})(),jm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===At?this.route:e===ud?this.childContexts:this.parent.get(e,t)}},Ym=new K("");function tF(n,e,t){let r=Ga(n,e._root,t?t._root:void 0);return new id(r,e)}function Ga(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=nF(n,e,t);return new Ft(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ga(n,a)),o}}let r=rF(e.value),i=e.children.map(s=>Ga(n,s));return new Ft(r,i)}}function nF(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ga(n,r,i);return Ga(n,r)})}function rF(n){return new At(new tt(n.url),new tt(n.params),new tt(n.queryParams),new tt(n.fragment),new tt(n.data),n.outlet,n.component,n)}var Wa=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},dC="ngNavigationCancelingError";function ad(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ba(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=hC(!1,Lt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function hC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[dC]=!0,t.cancellationCode=e,t}function iF(n){return fC(n)&&Ba(n.url)}function fC(n){return!!n&&n[dC]}var sF=(n,e,t,r)=>le(i=>(new Bm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Bm=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),vm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=qs(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=qs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=qs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=qs(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new km(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Pm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(vm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),vm(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},cd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ws=class{constructor(e,t){this.component=e,this.route=t}};function oF(n,e,t){let r=n._root,i=e?e._root:null;return ka(r,i,t,[r.value])}function aF(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Zs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!KE(n)?n:e.get(n):r}function ka(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=qs(e);return n.children.forEach(o=>{cF(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ua(a,t.getContext(o),i)),i}function cF(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=uF(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new cd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ka(n,e,a?a.children:null,r,i):ka(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ws(a.outlet.component,o))}else o&&Ua(e,a,i),i.canActivateChecks.push(new cd(r)),s.component?ka(n,null,a?a.children:null,r,i):ka(n,null,t,r,i);return i}function uF(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Di(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Di(n.url,e.url)||!Sn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Um(n,e)||!Sn(n.queryParams,e.queryParams);case"paramsChange":default:return!Um(n,e)}}function Ua(n,e,t){let r=qs(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ua(o,e.children.getContext(s),t):Ua(o,null,t):Ua(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ws(e.outlet.component,i)):t.canDeactivateChecks.push(new Ws(null,i)):t.canDeactivateChecks.push(new Ws(null,i))}function Ja(n){return typeof n=="function"}function lF(n){return typeof n=="boolean"}function dF(n){return n&&Ja(n.canLoad)}function hF(n){return n&&Ja(n.canActivate)}function fF(n){return n&&Ja(n.canActivateChild)}function pF(n){return n&&Ja(n.canDeactivate)}function gF(n){return n&&Ja(n.canMatch)}function pC(n){return n instanceof sn||n?.name==="EmptyError"}var Yl=Symbol("INITIAL_VALUE");function Ys(){return an(n=>ju(n.map(e=>e.pipe(Bn(1),op(Yl)))).pipe(le(e=>{for(let t of e)if(t!==!0){if(t===Yl)return Yl;if(t===!1||mF(t))return t}return!0}),on(e=>e!==Yl),Bn(1)))}function mF(n){return Ba(n)||n instanceof Wa}function yF(n,e){return ze(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?se(fe(L({},t),{guardsResult:!0})):vF(o,r,i,n).pipe(ze(a=>a&&lF(a)?_F(r,s,n,e):se(a)),le(a=>fe(L({},t),{guardsResult:a})))})}function vF(n,e,t,r){return Ue(n).pipe(ze(i=>DF(i.component,i.route,t,e,r)),yn(i=>i!==!0,!0))}function _F(n,e,t,r){return Ue(e).pipe(_s(i=>vs(IF(i.route.parent,r),wF(i.route,r),bF(n,i.path,t),EF(n,i.route,t))),yn(i=>i!==!0,!0))}function wF(n,e){return n!==null&&e&&e(new Om(n)),se(!0)}function IF(n,e){return n!==null&&e&&e(new Nm(n)),se(!0)}function EF(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(s=>Bu(()=>{let o=Za(e)??t,a=Zs(s,o),c=hF(a)?a.canActivate(e,n):zn(o,()=>a(e,n));return Rr(c).pipe(yn())}));return se(i).pipe(Ys())}function bF(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>aF(o)).filter(o=>o!==null).map(o=>Bu(()=>{let a=o.guards.map(c=>{let l=Za(o.node)??t,h=Zs(c,l),p=fF(h)?h.canActivateChild(r,n):zn(l,()=>h(r,n));return Rr(p).pipe(yn())});return se(a).pipe(Ys())}));return se(s).pipe(Ys())}function DF(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return se(!0);let o=s.map(a=>{let c=Za(e)??i,l=Zs(a,c),h=pF(l)?l.canDeactivate(n,e,t,r):zn(c,()=>l(n,e,t,r));return Rr(h).pipe(yn())});return se(o).pipe(Ys())}function CF(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return se(!0);let s=i.map(o=>{let a=Zs(o,n),c=dF(a)?a.canLoad(e,t):zn(n,()=>a(e,t));return Rr(c)});return se(s).pipe(Ys(),gC(r))}function gC(n){return zf(Ge(e=>{if(typeof e!="boolean")throw ad(n,e)}),le(e=>e===!0))}function TF(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return se(!0);let s=i.map(o=>{let a=Zs(o,n),c=gF(a)?a.canMatch(e,t):zn(n,()=>a(e,t));return Rr(c)});return se(s).pipe(Ys(),gC(r))}var Ka=class{constructor(e){this.segmentGroup=e||null}},Qa=class extends Error{constructor(e){super(),this.urlTree=e}};function Hs(n){return ys(new Ka(n))}function SF(n){return ys(new W(4e3,!1))}function AF(n){return ys(hC(!1,Lt.GuardRejected))}var $m=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[oe])return SF(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:T,title:M}=i,R=zn(s,()=>a({params:v,data:T,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:M}));if(R instanceof Yn)throw new Qa(R);t=R}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Qa(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Yn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ee(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Hm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xF(n,e,t,r,i){let s=mC(n,e,t);return s.matched?(r=J1(e,r),TF(r,e,t,i).pipe(le(o=>o===!0?s:L({},Hm)))):se(s)}function mC(n,e,t){if(e.path==="**")return RF(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},Hm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||T1)(t,n,e);if(!i)return L({},Hm);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function RF(n){return{matched:!0,parameters:n.length>0?Q0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function z0(n,e,t,r){return t.length>0&&PF(n,t,r)?{segmentGroup:new Ee(e,NF(r,new Ee(t,n.children))),slicedSegments:[]}:t.length===0&&OF(n,t,r)?{segmentGroup:new Ee(n.segments,MF(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ee(n.segments,n.children),slicedSegments:t}}function MF(n,e,t,r){let i={};for(let s of t)if(ld(n,e,s)&&!r[fn(s)]){let o=new Ee([],{});i[fn(s)]=o}return L(L({},r),i)}function NF(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&fn(r)!==oe){let i=new Ee([],{});t[fn(r)]=i}return t}function PF(n,e,t){return t.some(r=>ld(n,e,r)&&fn(r)!==oe)}function OF(n,e,t){return t.some(r=>ld(n,e,r))}function ld(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function kF(n,e,t){return e.length===0&&!n.children[t]}var qm=class{};function FF(n,e,t,r,i,s,o="emptyOnly"){return new zm(n,e,t,r,i,o,s).recognize()}var LF=31,zm=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new $m(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}recognize(){let e=z0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(le(({children:t,rootSnapshot:r})=>{let i=new Ft(r,t),s=new od("",i),o=z1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Gs([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(le(r=>({children:r,rootSnapshot:t})),gr(r=>{if(r instanceof Qa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ka?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(le(o=>o instanceof Ft?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ue(s).pipe(_s(o=>{let a=r.children[o],c=X1(t,o);return this.processSegmentGroup(e,c,a,o,i)}),sp((o,a)=>(o.push(...a),o)),mr(null),ip(),ze(o=>{if(o===null)return Hs(r);let a=yC(o);return VF(a),se(a)}))}processSegment(e,t,r,i,s,o,a){return Ue(t).pipe(_s(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(gr(l=>{if(l instanceof Ka)return se(null);throw l}))),yn(c=>!!c),gr(c=>{if(pC(c))return kF(r,i,s)?se(new qm):Hs(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return fn(r)!==o&&(o===oe||!ld(i,s,r))?Hs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Hs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=mC(t,i,s);if(!c)return Hs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>LF&&(this.allowRedirects=!1));let v=new Gs(s,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,G0(i),fn(i),i.component??i._loadedComponent??null,i,W0(i)),T=sd(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(T.params),v.data=Object.freeze(T.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(ze(R=>this.processSegment(e,r,t,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=xF(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(an(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(an(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=c,T=new Gs(m,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,G0(r),fn(r),r.component??r._loadedComponent??null,r,W0(r)),M=sd(T,o,this.paramsInheritanceStrategy);T.params=Object.freeze(M.params),T.data=Object.freeze(M.data);let{segmentGroup:R,slicedSegments:k}=z0(t,m,v,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,T).pipe(le(F=>new Ft(T,F)));if(l.length===0&&k.length===0)return se(new Ft(T,[]));let B=fn(r)===s;return this.processSegment(h,l,R,k,B?oe:s,!0,T).pipe(le(F=>new Ft(T,F instanceof Ft?[F]:[])))}))):Hs(t)))}getChildConfig(e,t,r){return t.children?se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?se({routes:t._loadedRoutes,injector:t._loadedInjector}):CF(e,t,r,this.urlSerializer).pipe(ze(i=>i?this.configLoader.loadChildren(e,t).pipe(Ge(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):AF(t))):se({routes:[],injector:e})}};function VF(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function UF(n){let e=n.value.routeConfig;return e&&e.path===""}function yC(n){let e=[],t=new Set;for(let r of n){if(!UF(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=yC(r.children);e.push(new Ft(r.value,i))}return e.filter(r=>!t.has(r))}function G0(n){return n.data||{}}function W0(n){return n.resolve||{}}function jF(n,e,t,r,i,s){return ze(o=>FF(n,e,t,r,o.extractedUrl,i,s).pipe(le(({state:a,tree:c})=>fe(L({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function BF(n,e){return ze(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return se(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of vC(c))o.add(l);let a=0;return Ue(o).pipe(_s(c=>s.has(c)?$F(c,r,n,e):(c.data=sd(c,c.parent,n).resolve,se(void 0))),Ge(()=>a++),ws(1),ze(c=>a===o.size?se(t):Ot))})}function vC(n){let e=n.children.map(t=>vC(t)).flat();return[n,...e]}function $F(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!lC(i)&&(s[Ya]=i.title),HF(s,n,e,r).pipe(le(o=>(n._resolvedData=o,n.data=sd(n,n.parent,t).resolve,null)))}function HF(n,e,t,r){let i=Im(n);if(i.length===0)return se({});let s={};return Ue(i).pipe(ze(o=>qF(n[o],e,t,r).pipe(yn(),Ge(a=>{if(a instanceof Wa)throw ad(new ja,a);s[o]=a}))),ws(1),rp(s),gr(o=>pC(o)?Ot:ys(o)))}function qF(n,e,t,r){let i=Za(e)??r,s=Zs(n,i),o=s.resolve?s.resolve(e,t):zn(i,()=>s(e,t));return Rr(o)}function _m(n){return an(e=>{let t=n(e);return t?Ue(t).pipe(le(()=>e)):se(e)})}var _C=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[Ya]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(zF),providedIn:"root"})}}return n})(),zF=(()=>{class n extends _C{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Z(j0))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zm=new K("",{providedIn:"root",factory:()=>({})}),GF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Dt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Kt],decls:1,vars:0,template:function(r,i){r&1&&Re(0,"router-outlet")},dependencies:[Qm],encapsulation:2})}}return n})();function Jm(n){let e=n.children&&n.children.map(Jm),t=e?fe(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=GF),t}var Xm=new K(""),WF=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(em)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return se(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Rr(t.loadComponent()).pipe(le(wC),Ge(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),da(()=>{this.componentLoaders.delete(t)})),i=new fs(r,()=>new et).pipe(hs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return se({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=KF(r,this.compiler,t,this.onLoadEndListener).pipe(da(()=>{this.childrenLoaders.delete(r)})),o=new fs(s,()=>new et).pipe(hs());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function KF(n,e,t,r){return Rr(n.loadChildren()).pipe(le(wC),ze(i=>i instanceof wa||Array.isArray(i)?se(i):Ue(e.compileModuleAsync(i))),le(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Xm,[],{optional:!0,self:!0}).flat()),{routes:o.map(Jm),injector:s}}))}function QF(n){return n&&typeof n=="object"&&"default"in n}function wC(n){return QF(n)?n.default:n}var ey=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(YF),providedIn:"root"})}}return n})(),YF=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ZF=new K("");var JF=new K(""),XF=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new et,this.transitionAbortSubject=new et,this.configLoader=V(WF),this.environmentInjector=V(Gt),this.urlSerializer=V(Wm),this.rootContexts=V(ud),this.location=V(Ra),this.inputBindingEnabled=V(Ym,{optional:!0})!==null,this.titleStrategy=V(_C),this.options=V(Zm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(ey),this.createViewTransition=V(ZF,{optional:!0}),this.navigationErrorHandler=V(JF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Rm(i)),r=i=>this.events.next(new Mm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(fe(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new tt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Va,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(on(s=>s.id!==0),le(s=>fe(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),an(s=>{let o=!1,a=!1;return se(s).pipe(an(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Lt.SupersededByNewNavigation),Ot;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?fe(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Ti(c.id,this.urlSerializer.serialize(c.rawUrl),p,Cm.IgnoredSameUrlNavigation)),c.resolve(!1),Ot}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return se(c).pipe(an(p=>{let m=this.transitions?.getValue();return this.events.next(new Ha(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Ot:Promise.resolve(p)}),jF(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=fe(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new nd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:T,extras:M}=c,R=new Ha(p,this.urlSerializer.serialize(m),v,T);this.events.next(R);let k=cC(this.rootComponentType).snapshot;return this.currentTransition=s=fe(L({},c),{targetSnapshot:k,urlAfterRedirects:m,extras:fe(L({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,se(s)}else{let p="";return this.events.next(new Ti(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Cm.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Ot}}),Ge(c=>{let l=new Tm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),le(c=>(this.currentTransition=s=fe(L({},c),{guards:oF(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),yF(this.environmentInjector,c=>this.events.next(c)),Ge(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw ad(this.urlSerializer,c.guardsResult);let l=new Sm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),on(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Lt.GuardRejected),!1)),_m(c=>{if(c.guards.canActivateChecks.length)return se(c).pipe(Ge(l=>{let h=new Am(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),an(l=>{let h=!1;return se(l).pipe(BF(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Lt.NoDataFromResolver)}}))}),Ge(l=>{let h=new xm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),_m(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ge(m=>{h.component=m}),le(()=>{})));for(let m of h.children)p.push(...l(m));return p};return ju(l(c.targetSnapshot.root)).pipe(mr(null),Bn(1))}),_m(()=>this.afterPreactivation()),an(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Ue(h).pipe(le(()=>s)):se(s)}),le(c=>{let l=tF(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=fe(L({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ge(()=>{this.events.next(new za)}),sF(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Bn(1),Ge({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ci(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),ap(this.transitionAbortSubject.pipe(Ge(c=>{throw c}))),da(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Lt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),gr(c=>{if(a=!0,fC(c))this.events.next(new Qn(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),iF(c)?this.events.next(new Qs(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new qa(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let h=zn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Wa){let{message:p,cancellationCode:m}=ad(this.urlSerializer,h);this.events.next(new Qn(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new Qs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Ot}))}))}cancelNavigationTransition(t,r,i){let s=new Qn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eL(n){return n!==Va}var tL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(nL),providedIn:"root"})}}return n})(),Gm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},nL=(()=>{class n extends Gm{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ta(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),IC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(rL),providedIn:"root"})}}return n})(),rL=(()=>{class n extends IC{constructor(){super(...arguments),this.location=V(Ra),this.urlSerializer=V(Wm),this.options=V(Zm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(ey),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Yn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=cC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ha)this.stateMemento=this.createStateMemento();else if(t instanceof Ti)this.rawUrlTree=r.initialUrl;else if(t instanceof nd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof za?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Qn&&(t.code===Lt.GuardRejected||t.code===Lt.NoDataFromResolver)?this.restoreHistory(r):t instanceof qa?this.restoreHistory(r,!0):t instanceof Ci&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Yn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ta(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fa=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Fa||{});function iL(n,e){n.events.pipe(on(t=>t instanceof Ci||t instanceof Qn||t instanceof qa||t instanceof Ti),le(t=>t instanceof Ci||t instanceof Ti?Fa.COMPLETE:(t instanceof Qn?t.code===Lt.Redirect||t.code===Lt.SupersededByNewNavigation:!1)?Fa.REDIRECTING:Fa.FAILED),on(t=>t!==Fa.REDIRECTING),Bn(1)).subscribe(()=>{e()})}function sL(n){throw n}var oL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=V(Ul),this.stateManager=V(IC),this.options=V(Zm,{optional:!0})||{},this.pendingTasks=V(js),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(XF),this.urlSerializer=V(Wm),this.location=V(Ra),this.urlHandlingStrategy=V(ey),this._events=new et,this.errorHandler=this.options.errorHandler||sL,this.navigated=!1,this.routeReuseStrategy=V(tL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(Xm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(Ym,{optional:!0}),this.eventsSubscription=new Ve,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Qn&&r.code!==Lt.Redirect&&r.code!==Lt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ci)this.navigated=!0;else if(r instanceof Qs){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||eL(i.source)},o);this.scheduleNavigation(a,Va,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}uL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Va,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=L({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Jm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=iC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return sC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ba(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Va,null,r)}navigate(t,r={skipLocationChange:!1}){return cL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},oL):r===!1?i=L({},aL):i=r,Ba(t))return B0(this.currentUrlTree,t,i);let s=this.parseUrl(t);return B0(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return iL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cL(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new W(4008,!1)}function uL(n){return!(n instanceof za)&&!(n instanceof Qs)}var lL=new K("");function EC(n,...e){return Cn([{provide:Xm,multi:!0,useValue:n},[],{provide:At,useFactory:dL,deps:[xt]},{provide:Xg,multi:!0,useFactory:hL},e.map(t=>t.\u0275providers)])}function dL(n){return n.routerState.root}function hL(){let n=V(bt);return e=>{let t=n.get(_i);if(e!==t.components[0])return;let r=n.get(xt),i=n.get(fL);n.get(pL)===1&&r.initialNavigation(),n.get(gL,null,ae.Optional)?.setUpPreloading(),n.get(lL,null,ae.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var fL=new K("",{factory:()=>new et}),pL=new K("",{providedIn:"root",factory:()=>1});var gL=new K("");var RC=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(J(yi),J(Cr))}}static{this.\u0275dir=Wt({type:n})}}return n})(),mL=(()=>{class n extends RC{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ta(n)))(i||n)}})()}static{this.\u0275dir=Wt({type:n,features:[$s]})}}return n})(),MC=new K("");var yL={provide:MC,useExisting:ba(()=>gd),multi:!0};function vL(){let n=Kn()?Kn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var _L=new K(""),gd=(()=>{class n extends RC{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!vL())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(J(yi),J(Cr),J(_L,8))}}static{this.\u0275dir=Wt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&St("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Jg([yL]),$s]})}}return n})();var wL=new K(""),IL=new K("");function NC(n){return n!=null}function PC(n){return vi(n)?Ue(n):n}function OC(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function kC(n,e){return e.map(t=>t(n))}function EL(n){return!n.validate}function FC(n){return n.map(e=>EL(e)?e:t=>e.validate(t))}function bL(n){if(!n)return null;let e=n.filter(NC);return e.length==0?null:function(t){return OC(kC(t,e))}}function LC(n){return n!=null?bL(FC(n)):null}function DL(n){if(!n)return null;let e=n.filter(NC);return e.length==0?null:function(t){let r=kC(t,e).map(PC);return np(r).pipe(le(OC))}}function VC(n){return n!=null?DL(FC(n)):null}function bC(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function CL(n){return n._rawValidators}function TL(n){return n._rawAsyncValidators}function ty(n){return n?Array.isArray(n)?n:[n]:[]}function hd(n,e){return Array.isArray(n)?n.includes(e):n===e}function DC(n,e){let t=ty(e);return ty(n).forEach(i=>{hd(t,i)||t.push(i)}),t}function CC(n,e){return ty(e).filter(t=>!hd(n,t))}var fd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=VC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ny=class extends fd{get formDirective(){return null}get path(){return null}},rc=class extends fd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ry=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},SL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},H9=fe(L({},SL),{"[class.ng-submitted]":"isSubmitted"}),UC=(()=>{class n extends ry{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(J(rc,2))}}static{this.\u0275dir=Wt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Kg("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[$s]})}}return n})();var Xa="VALID",dd="INVALID",Xs="PENDING",ec="DISABLED",to=class{},pd=class extends to{constructor(e,t){super(),this.value=e,this.source=t}},tc=class extends to{constructor(e,t){super(),this.pristine=e,this.source=t}},nc=class extends to{constructor(e,t){super(),this.touched=e,this.source=t}},eo=class extends to{constructor(e,t){super(),this.status=e,this.source=t}};function AL(n){return(md(n)?n.validators:n)||null}function xL(n){return Array.isArray(n)?LC(n):n||null}function RL(n,e){return(md(e)?e.asyncValidators:n)||null}function ML(n){return Array.isArray(n)?VC(n):n||null}function md(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var iy=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Bl(()=>this.statusReactive()),this.statusReactive=Vl(void 0),this._pristine=Bl(()=>this.pristineReactive()),this.pristineReactive=Vl(!0),this._touched=Bl(()=>this.touchedReactive()),this.touchedReactive=Vl(!1),this._events=new et,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return xr(this.statusReactive)}set status(e){xr(()=>this.statusReactive.set(e))}get valid(){return this.status===Xa}get invalid(){return this.status===dd}get pending(){return this.status==Xs}get disabled(){return this.status===ec}get enabled(){return this.status!==ec}get pristine(){return xr(this.pristineReactive)}set pristine(e){xr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return xr(this.touchedReactive)}set touched(e){xr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(DC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(DC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CC(e,this._rawAsyncValidators))}hasValidator(e){return hd(this._rawValidators,e)}hasAsyncValidator(e){return hd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(fe(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new nc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new nc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(fe(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new tc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new tc(!0,r))}markAsPending(e={}){this.status=Xs;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new eo(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(fe(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ec,this.errors=null,this._forEachChild(i=>{i.disable(fe(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pd(this.value,r)),this._events.next(new eo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Xa,this._forEachChild(r=>{r.enable(fe(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fe(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xa||this.status===Xs)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pd(this.value,t)),this._events.next(new eo(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(fe(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ec:Xa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Xs,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=PC(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new eo(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new We,this.statusChanges=new We}_calculateStatus(){return this._allControlsDisabled()?ec:this.errors?dd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xs)?Xs:this._anyControlsHaveStatus(dd)?dd:Xa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new tc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new nc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){md(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=xL(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=ML(this._rawAsyncValidators)}};var jC=new K("CallSetDisabledState",{providedIn:"root",factory:()=>sy}),sy="always";function NL(n,e){return[...e.path,n]}function PL(n,e,t=sy){kL(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),FL(n,e),VL(n,e),LL(n,e),OL(n,e)}function TC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function OL(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function kL(n,e){let t=CL(n);e.validator!==null?n.setValidators(bC(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=TL(n);e.asyncValidator!==null?n.setAsyncValidators(bC(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();TC(e._rawValidators,i),TC(e._rawAsyncValidators,i)}function FL(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&BC(n,e)})}function LL(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&BC(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function BC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function VL(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function UL(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function jL(n){return Object.getPrototypeOf(n.constructor)===mL}function BL(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===gd?t=s:jL(s)?r=s:i=s}),i||r||t||null}function SC(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function AC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var $L=class extends iy{constructor(e=null,t,r){super(AL(t),RL(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),md(t)&&(t.nonNullable||t.initialValueIsDefault)&&(AC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){SC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){SC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){AC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var HL={provide:rc,useExisting:ba(()=>oy)},xC=Promise.resolve(),oy=(()=>{class n extends rc{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new $L,this._registered=!1,this.name="",this.update=new We,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=BL(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),UL(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){PL(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){xC.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&jl(r);xC.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?NL(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(J(ny,9),J(wL,10),J(IL,10),J(MC,10),J(wi,8),J(jC,8))}}static{this.\u0275dir=Wt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Jg([HL]),$s,Vs]})}}return n})();var qL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mi({type:n})}static{this.\u0275inj=gi({})}}return n})();var $C=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jC,useValue:t.callSetDisabledState??sy}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mi({type:n})}static{this.\u0275inj=gi({imports:[qL]})}}return n})();var qC=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},GL=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},zC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,v=l&63;c||(v=64,o||(m=64)),r.push(t[h],t[p],t[m],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(qC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):GL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new cy;let m=s<<2|a>>4;if(r.push(m),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},cy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},WL=function(n){let e=qC(n);return zC.encodeByteArray(e,!0)},ic=function(n){return WL(n).replace(/\./g,"")},ly=function(n){try{return zC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function KL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var QL=()=>KL().__FIREBASE_DEFAULTS__,YL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ZL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ly(n[1]);return e&&JSON.parse(e)},vd=()=>{try{return QL()||YL()||ZL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},GC=n=>{var e,t;return(t=(e=vd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},_d=n=>{let e=GC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},dy=()=>{var n;return(n=vd())===null||n===void 0?void 0:n.config},WC=n=>{var e;return(e=vd())===null||e===void 0?void 0:e[`_${n}`]};var yd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function wd(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ic(JSON.stringify(t)),ic(JSON.stringify(o)),""].join(".")}function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function JL(){var n;let e=(n=vd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YC(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ZC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hy(){return!JL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Id(){try{return typeof indexedDB=="object"}catch{return!1}}function JC(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var XL="FirebaseError",Rt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=XL,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zn.prototype.create)}},Zn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?eV(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Rt(i,a,r)}};function eV(n,e){return n.replace(tV,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var tV=/\{\$([^}]+)}/g;function no(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(HC(s)&&HC(o)){if(!no(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function HC(n){return n!==null&&typeof n=="object"}function fy(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function XC(n,e){let t=new uy(n,e);return t.subscribe.bind(t)}var uy=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");nV(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ay),i.error===void 0&&(i.error=ay),i.complete===void 0&&(i.complete=ay);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function nV(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ay(){}var G9=4*60*60*1e3;function Vt(n){return n&&n._delegate?n._delegate:n}var Mt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Si="[DEFAULT]";var py=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new yd;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iV(e))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Si){return this.instances.has(e)}getOptions(e=Si){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Si){return this.component?this.component.multipleInstances?e:Si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function rV(n){return n===Si?void 0:n}function iV(n){return n.instantiationMode==="EAGER"}var Ed=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new py(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var sV=[],he=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(he||{}),oV={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},aV=he.INFO,cV={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},uV=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=cV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Mr=class{constructor(e){this.name=e,this._logLevel=aV,this._logHandler=uV,this._userLogHandler=null,sV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}};var lV=(n,e)=>e.some(t=>n instanceof t),eT,tT;function dV(){return eT||(eT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hV(){return tT||(tT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var nT=new WeakMap,my=new WeakMap,rT=new WeakMap,gy=new WeakMap,vy=new WeakMap;function fV(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(An(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&nT.set(t,n)}).catch(()=>{}),vy.set(e,n),e}function pV(n){if(my.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});my.set(n,e)}var yy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return my.get(n);if(e==="objectStoreNames")return n.objectStoreNames||rT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return An(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function iT(n){yy=n(yy)}function gV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(bd(this),e,...t);return rT.set(r,e.sort?e.sort():[e]),An(r)}:hV().includes(n)?function(...e){return n.apply(bd(this),e),An(nT.get(this))}:function(...e){return An(n.apply(bd(this),e))}}function mV(n){return typeof n=="function"?gV(n):(n instanceof IDBTransaction&&pV(n),lV(n,dV())?new Proxy(n,yy):n)}function An(n){if(n instanceof IDBRequest)return fV(n);if(gy.has(n))return gy.get(n);let e=mV(n);return e!==n&&(gy.set(n,e),vy.set(e,n)),e}var bd=n=>vy.get(n);function oT(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=An(o);return r&&o.addEventListener("upgradeneeded",c=>{r(An(o.result),c.oldVersion,c.newVersion,An(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var yV=["get","getKey","getAll","getAllKeys","count"],vV=["put","add","delete","clear"],_y=new Map;function sT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_y.get(e))return _y.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=vV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yV.includes(t)))return;let s=function(o,...a){return b(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return _y.set(e,s),s}iT(n=>fe(L({},n),{get:(e,t,r)=>sT(e,t)||n.get(e,t,r),has:(e,t)=>!!sT(e,t)||n.has(e,t)}));var Iy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_V(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function _V(n){let e=n.getComponent();return e?.type==="VERSION"}var Ey="@firebase/app",aT="0.10.13";var Jn=new Mr("@firebase/app"),wV="@firebase/app-compat",IV="@firebase/analytics-compat",EV="@firebase/analytics",bV="@firebase/app-check-compat",DV="@firebase/app-check",CV="@firebase/auth",TV="@firebase/auth-compat",SV="@firebase/database",AV="@firebase/data-connect",xV="@firebase/database-compat",RV="@firebase/functions",MV="@firebase/functions-compat",NV="@firebase/installations",PV="@firebase/installations-compat",OV="@firebase/messaging",kV="@firebase/messaging-compat",FV="@firebase/performance",LV="@firebase/performance-compat",VV="@firebase/remote-config",UV="@firebase/remote-config-compat",jV="@firebase/storage",BV="@firebase/storage-compat",$V="@firebase/firestore",HV="@firebase/vertexai-preview",qV="@firebase/firestore-compat",zV="firebase",GV="10.14.1";var by="[DEFAULT]",WV={[Ey]:"fire-core",[wV]:"fire-core-compat",[EV]:"fire-analytics",[IV]:"fire-analytics-compat",[DV]:"fire-app-check",[bV]:"fire-app-check-compat",[CV]:"fire-auth",[TV]:"fire-auth-compat",[SV]:"fire-rtdb",[AV]:"fire-data-connect",[xV]:"fire-rtdb-compat",[RV]:"fire-fn",[MV]:"fire-fn-compat",[NV]:"fire-iid",[PV]:"fire-iid-compat",[OV]:"fire-fcm",[kV]:"fire-fcm-compat",[FV]:"fire-perf",[LV]:"fire-perf-compat",[VV]:"fire-rc",[UV]:"fire-rc-compat",[jV]:"fire-gcs",[BV]:"fire-gcs-compat",[$V]:"fire-fst",[qV]:"fire-fst-compat",[HV]:"fire-vertex","fire-js":"fire-js",[zV]:"fire-js-all"};var sc=new Map,KV=new Map,Dy=new Map;function cT(n,e){try{n.container.addComponent(e)}catch(t){Jn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xn(n){let e=n.name;if(Dy.has(e))return Jn.debug(`There were multiple attempts to register component ${e}.`),!1;Dy.set(e,n);for(let t of sc.values())cT(t,n);for(let t of KV.values())cT(t,n);return!0}function ac(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ro(n){return n.settings!==void 0}var QV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new Zn("app","Firebase",QV);var Cy=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}};var Pr=GV;function Ay(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:by,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Nr.create("bad-app-name",{appName:String(i)});if(t||(t=dy()),!t)throw Nr.create("no-options");let s=sc.get(i);if(s){if(no(t,s.options)&&no(r,s.config))return s;throw Nr.create("duplicate-app",{appName:i})}let o=new Ed(i);for(let c of Dy.values())o.addComponent(c);let a=new Cy(t,r,o);return sc.set(i,a),a}function Ai(n=by){let e=sc.get(n);if(!e&&n===by&&dy())return Ay();if(!e)throw Nr.create("no-app",{appName:n});return e}function Dd(){return Array.from(sc.values())}function ke(n,e,t){var r;let i=(r=WV[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jn.warn(a.join(" "));return}xn(new Mt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var YV="firebase-heartbeat-database",ZV=1,oc="firebase-heartbeat-store",wy=null;function hT(){return wy||(wy=oT(YV,ZV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(oc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Nr.create("idb-open",{originalErrorMessage:n.message})})),wy}function JV(n){return b(this,null,function*(){try{let t=(yield hT()).transaction(oc),r=yield t.objectStore(oc).get(fT(n));return yield t.done,r}catch(e){if(e instanceof Rt)Jn.warn(e.message);else{let t=Nr.create("idb-get",{originalErrorMessage:e?.message});Jn.warn(t.message)}}})}function uT(n,e){return b(this,null,function*(){try{let r=(yield hT()).transaction(oc,"readwrite");yield r.objectStore(oc).put(e,fT(n)),yield r.done}catch(t){if(t instanceof Rt)Jn.warn(t.message);else{let r=Nr.create("idb-set",{originalErrorMessage:t?.message});Jn.warn(r.message)}}})}function fT(n){return`${n.name}!${n.options.appId}`}var XV=1024,eU=30*24*60*60*1e3,Ty=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Sy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=eU}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Jn.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=lT(),{heartbeatsToSend:r,unsentEntries:i}=tU(this._heartbeatsCache.heartbeats),s=ic(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Jn.warn(t),""}})}};function lT(){return new Date().toISOString().substring(0,10)}function tU(n,e=XV){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),dT(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),dT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Sy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return Id()?JC().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield JV(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return uT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return uT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function dT(n){return ic(JSON.stringify({version:2,heartbeats:n})).length}function nU(n){xn(new Mt("platform-logger",e=>new Iy(e),"PRIVATE")),xn(new Mt("heartbeat",e=>new Ty(e),"PRIVATE")),ke(Ey,aT,n),ke(Ey,aT,"esm2017"),ke("fire-js","")}nU("");var rU="firebase",iU="10.14.1";ke(rU,iU,"app");var Or=new qn("ANGULARFIRE2_VERSION");function cc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Mi=(n,e)=>{let t=e?[e]:Dd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ri=class{constructor(){return Mi(sU)}},sU="app-check";function io(){}var Cd=class{zone;delegate;constructor(e,t=Zf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},xy=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",io,{},io,io)),t.pipe(Ge({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ni=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Cd(Zone.current)),this.insideAngular=t.run(()=>new Cd(Zone.current,Yf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Z(be))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Td(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function oU(n){return Td().ngZone.runOutsideAngular(()=>n())}function xi(n){return Td().ngZone.run(()=>n())}function aU(n){return cU(Td())(n)}function cU(n){return function(t){return t=t.lift(new xy(n.ngZone)),t.pipe(pr(n.outsideAngular),fr(n.insideAngular))}}var uU=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),xi(()=>n.apply(void 0,r))},Ut=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=xi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",io,{},io,io))),r[s]=uU(r[s],t));let i=oU(()=>n.apply(this,r));if(!e)if(i instanceof me){let s=Td();return i.pipe(pr(s.outsideAngular),fr(s.insideAngular))}else return xi(()=>i);return i instanceof me?i.pipe(aU):i instanceof Promise?xi(()=>new Promise((s,o)=>i.then(a=>xi(()=>s(a)),a=>xi(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:xi(()=>i)};var Xn=class{constructor(e){return e}},Pi=class{constructor(){return Dd()}};function lU(n){return n&&n.length===1?n[0]:new Xn(Ai())}var Ry=new K("angularfire2._apps"),dU={provide:Xn,useFactory:lU,deps:[[new nt,Ry]]},hU={provide:Pi,deps:[[new nt,Ry]]};function fU(n){return(e,t)=>{let r=t.get(Tr);ke("angularfire",Or.full,"core"),ke("angularfire",Or.full,"app"),ke("angular",c0.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Xn(i)}}function pT(n,...e){return Cn([dU,hU,{provide:Ry,useFactory:fU(n),multi:!0,deps:[be,bt,Ni,...e]}])}var gT=Ut(Ay,!0);function bT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var DT=bT,CT=new Zn("auth","Firebase",bT());var Rd=new Mr("@firebase/auth");function pU(n,...e){Rd.logLevel<=he.WARN&&Rd.warn(`Auth (${Pr}): ${n}`,...e)}function Ad(n,...e){Rd.logLevel<=he.ERROR&&Rd.error(`Auth (${Pr}): ${n}`,...e)}function mT(n,...e){throw $y(n,...e)}function By(n,...e){return $y(n,...e)}function TT(n,e,t){let r=Object.assign(Object.assign({},DT()),{[e]:t});return new Zn("auth","Firebase",r).create(e,{appName:n.name})}function xd(n){return TT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $y(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return CT.create(n,...e)}function Ie(n,e,...t){if(!n)throw $y(e,...t)}function uc(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ad(e),new Error(e)}function Md(n,e){n||uc(e)}function gU(){return yT()==="http:"||yT()==="https:"}function yT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function mU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gU()||YC()||"connection"in navigator)?navigator.onLine:!0}function yU(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ki=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Md(t>e,"Short delay should be less than long delay!"),this.isMobile=KC()||ZC()}get(){return mU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function vU(n,e){Md(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Nd=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;uc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;uc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;uc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var _U={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var wU=new ki(3e4,6e4);function ST(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Fd(s,o,a,c){return b(this,arguments,function*(n,e,t,r,i={}){return AT(n,i,()=>b(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=fy(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:m},l);return QC()||(v.referrerPolicy="no-referrer"),Nd.fetch()(xT(n,n.config.apiHost,t,p),v)}))})}function AT(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},_U),e);try{let i=new Py(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Sd(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sd(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Sd(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Sd(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw TT(n,h,l);mT(n,h)}}catch(i){if(i instanceof Rt)throw i;mT(n,"network-request-failed",{message:String(i)})}})}function xT(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?vU(n.config,i):`${n.config.apiScheme}://${i}`}var Py=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(By(this.auth,"network-request-failed")),wU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Sd(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=By(n,e,r);return i.customData._tokenResponse=t,i}function IU(n,e){return b(this,null,function*(){return Fd(n,"POST","/v1/accounts:delete",e)})}function RT(n,e){return b(this,null,function*(){return Fd(n,"POST","/v1/accounts:lookup",e)})}function lc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Hy(n,e=!1){return b(this,null,function*(){let t=Vt(n),r=yield t.getIdToken(e),i=MT(r);Ie(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:lc(My(i.auth_time)),issuedAtTime:lc(My(i.iat)),expirationTime:lc(My(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function My(n){return Number(n)*1e3}function MT(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ad("JWT malformed, contained fewer than 3 sections"),null;try{let i=ly(t);return i?JSON.parse(i):(Ad("Failed to decode base64 JWT payload"),null)}catch(i){return Ad("Caught error parsing JWT payload as JSON",i?.toString()),null}}function vT(n){let e=MT(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Oy(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Rt&&EU(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function EU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var ky=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var hc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lc(this.lastLoginAt),this.creationTime=lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Pd(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Oy(n,RT(t,{idToken:r}));Ie(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?NT(s.providerUserInfo):[],a=bU(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function qy(n){return b(this,null,function*(){let e=Vt(n);yield Pd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function bU(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function NT(n){return n.map(e=>{var{providerId:t}=e,r=Jf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function DU(n,e){return b(this,null,function*(){let t=yield AT(n,{},()=>b(this,null,function*(){let r=fy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=xT(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Nd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function CU(n,e){return b(this,null,function*(){return Fd(n,"POST","/v2/accounts:revokeToken",ST(n,e))})}var dc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");let t=vT(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield DU(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return uc("not implemented")}};function kr(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var fc=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Jf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ky(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield Oy(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Hy(this,e)}reload(){return qy(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Pd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(ro(this.auth.app))return Promise.reject(xd(this.auth));let e=yield this.getIdToken();return yield Oy(this,IU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=t.photoURL)!==null&&o!==void 0?o:void 0,M=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,k=(l=t.createdAt)!==null&&l!==void 0?l:void 0,B=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:F,emailVerified:H,isAnonymous:te,providerData:$,stsTokenManager:I}=t;Ie(F&&I,e,"internal-error");let y=dc.fromJSON(this.name,I);Ie(typeof F=="string",e,"internal-error"),kr(p,e.name),kr(m,e.name),Ie(typeof H=="boolean",e,"internal-error"),Ie(typeof te=="boolean",e,"internal-error"),kr(v,e.name),kr(T,e.name),kr(M,e.name),kr(R,e.name),kr(k,e.name),kr(B,e.name);let _=new n({uid:F,auth:e,email:m,emailVerified:H,displayName:p,isAnonymous:te,photoURL:T,phoneNumber:v,tenantId:M,stsTokenManager:y,createdAt:k,lastLoginAt:B});return $&&Array.isArray($)&&(_.providerData=$.map(E=>Object.assign({},E))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new dc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Pd(s),s})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];Ie(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?NT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new dc;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new hc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var _T=new Map;function Oi(n){Md(n instanceof Function,"Expected a class definition");let e=_T.get(n);return e?(Md(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,_T.set(n,e),e)}var TU=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Fy=TU;function Ny(n,e,t){return`firebase:${n}:${e}:${t}`}var Od=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ny(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ny("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?fc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(Oi(Fy),e,r);let i=(yield Promise.all(t.map(l=>b(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Oi(Fy),o=Ny(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let p=fc._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>b(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function wT(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NU(e))return"Blackberry";if(PU(e))return"Webos";if(AU(e))return"Safari";if((e.includes("chrome/")||xU(e))&&!e.includes("edge/"))return"Chrome";if(MU(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function SU(n=lt()){return/firefox\//i.test(n)}function AU(n=lt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xU(n=lt()){return/crios\//i.test(n)}function RU(n=lt()){return/iemobile/i.test(n)}function MU(n=lt()){return/android/i.test(n)}function NU(n=lt()){return/blackberry/i.test(n)}function PU(n=lt()){return/webos/i.test(n)}function PT(n,e=[]){let t;switch(n){case"Browser":t=wT(lt());break;case"Worker":t=`${wT(lt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pr}/${r}`}var Ly=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function OU(t){return b(this,arguments,function*(n,e={}){return Fd(n,"GET","/v2/passwordPolicy",ST(n,e))})}var kU=6,Vy=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:kU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Uy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kd(this),this.idTokenSubscription=new kd(this),this.beforeStateQueue=new Ly(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Oi(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Od.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield RT(this,{idToken:e}),r=yield fc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(ro(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield Pd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=yU()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(ro(this.app))return Promise.reject(xd(this));let t=e?Vt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return ro(this.app)?Promise.reject(xd(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ro(this.app)?Promise.reject(xd(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(Oi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield OU(this),t=new Vy(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield CU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Oi(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=yield Od.create(this,[Oi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&pU(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function FU(n){return Vt(n)}var kd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=XC(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var LU={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VU(n){LU=n}function UU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function jU(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Oi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var H6=UU("rcb"),q6=new ki(3e4,6e4);var z6=new ki(2e3,1e4);var G6=10*60*1e3;var W6=new ki(3e4,6e4);var K6=new ki(5e3,15e3);var Q6=encodeURIComponent("fac");var IT="@firebase/auth",ET="1.7.9";var jy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function BU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $U(n){xn(new Mt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PT(n)},l=new Uy(r,i,s,c);return jU(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xn(new Mt("auth-internal",e=>{let t=FU(e.getProvider("auth").getImmediate());return(r=>new jy(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ke(IT,ET,BU(n)),ke(IT,ET,"esm2017")}var HU=5*60,Y6=WC("authIdTokenMaxAge")||HU;function qU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}VU({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=By("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",qU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$U("Browser");var H2="auth";var so=class{constructor(){return Mi(H2)}};var OT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kT={};var Fr,zy;(function(){var n;function e(I,y){function _(){}_.prototype=y.prototype,I.D=y.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(E,D,S){for(var w=Array(arguments.length-2),Ln=2;Ln<arguments.length;Ln++)w[Ln-2]=arguments[Ln];return y.prototype[D].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(D=0;16>D;++D)E[D]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=I.g[0],_=I.g[1],D=I.g[2];var S=I.g[3],w=y+(S^_&(D^S))+E[0]+3614090360&4294967295;y=_+(w<<7&4294967295|w>>>25),w=S+(D^y&(_^D))+E[1]+3905402710&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(_^S&(y^_))+E[2]+606105819&4294967295,D=S+(w<<17&4294967295|w>>>15),w=_+(y^D&(S^y))+E[3]+3250441966&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(S^_&(D^S))+E[4]+4118548399&4294967295,y=_+(w<<7&4294967295|w>>>25),w=S+(D^y&(_^D))+E[5]+1200080426&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(_^S&(y^_))+E[6]+2821735955&4294967295,D=S+(w<<17&4294967295|w>>>15),w=_+(y^D&(S^y))+E[7]+4249261313&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(S^_&(D^S))+E[8]+1770035416&4294967295,y=_+(w<<7&4294967295|w>>>25),w=S+(D^y&(_^D))+E[9]+2336552879&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(_^S&(y^_))+E[10]+4294925233&4294967295,D=S+(w<<17&4294967295|w>>>15),w=_+(y^D&(S^y))+E[11]+2304563134&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(S^_&(D^S))+E[12]+1804603682&4294967295,y=_+(w<<7&4294967295|w>>>25),w=S+(D^y&(_^D))+E[13]+4254626195&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(_^S&(y^_))+E[14]+2792965006&4294967295,D=S+(w<<17&4294967295|w>>>15),w=_+(y^D&(S^y))+E[15]+1236535329&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(D^S&(_^D))+E[1]+4129170786&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^D&(y^_))+E[6]+3225465664&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(S^y))+E[11]+643717713&4294967295,D=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(D^S))+E[0]+3921069994&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^S&(_^D))+E[5]+3593408605&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^D&(y^_))+E[10]+38016083&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(S^y))+E[15]+3634488961&4294967295,D=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(D^S))+E[4]+3889429448&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^S&(_^D))+E[9]+568446438&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^D&(y^_))+E[14]+3275163606&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(S^y))+E[3]+4107603335&4294967295,D=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(D^S))+E[8]+1163531501&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^S&(_^D))+E[13]+2850285829&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^D&(y^_))+E[2]+4243563512&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(S^y))+E[7]+1735328473&4294967295,D=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(D^S))+E[12]+2368359562&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(_^D^S)+E[5]+4294588738&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^D)+E[8]+2272392833&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^_)+E[11]+1839030562&4294967295,D=S+(w<<16&4294967295|w>>>16),w=_+(D^S^y)+E[14]+4259657740&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^S)+E[1]+2763975236&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^D)+E[4]+1272893353&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^_)+E[7]+4139469664&4294967295,D=S+(w<<16&4294967295|w>>>16),w=_+(D^S^y)+E[10]+3200236656&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^S)+E[13]+681279174&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^D)+E[0]+3936430074&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^_)+E[3]+3572445317&4294967295,D=S+(w<<16&4294967295|w>>>16),w=_+(D^S^y)+E[6]+76029189&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^S)+E[9]+3654602809&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^D)+E[12]+3873151461&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^_)+E[15]+530742520&4294967295,D=S+(w<<16&4294967295|w>>>16),w=_+(D^S^y)+E[2]+3299628645&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(D^(_|~S))+E[0]+4096336452&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~D))+E[7]+1126891415&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~_))+E[14]+2878612391&4294967295,D=S+(w<<15&4294967295|w>>>17),w=_+(S^(D|~y))+E[5]+4237533241&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~S))+E[12]+1700485571&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~D))+E[3]+2399980690&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~_))+E[10]+4293915773&4294967295,D=S+(w<<15&4294967295|w>>>17),w=_+(S^(D|~y))+E[1]+2240044497&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~S))+E[8]+1873313359&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~D))+E[15]+4264355552&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~_))+E[6]+2734768916&4294967295,D=S+(w<<15&4294967295|w>>>17),w=_+(S^(D|~y))+E[13]+1309151649&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~S))+E[4]+4149444226&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~D))+E[11]+3174756917&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~_))+E[2]+718787259&4294967295,D=S+(w<<15&4294967295|w>>>17),w=_+(S^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var _=y-this.blockSize,E=this.B,D=this.h,S=0;S<y;){if(D==0)for(;S<=_;)i(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<y;)if(E[D++]=I.charCodeAt(S++),D==this.blockSize){i(this,E),D=0;break}}else for(;S<y;)if(E[D++]=I[S++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var _=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=_&255,_/=256;for(this.u(I),I=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)I[_++]=this.g[y]>>>E&255;return I};function s(I,y){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=y(I)}function o(I,y){this.h=y;for(var _=[],E=!0,D=I.length-1;0<=D;D--){var S=I[D]|0;E&&S==y||(_[D]=S,E=!1)}this.g=_}var a={};function c(I){return-128<=I&&128>I?s(I,function(y){return new o([y|0],0>y?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return R(l(-I));for(var y=[],_=1,E=0;I>=_;E++)y[E]=I/_|0,_*=4294967296;return new o(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return R(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var S=Math.min(8,I.length-D),w=parseInt(I.substring(D,D+S),y);8>S?(S=l(Math.pow(y,S)),E=E.j(S).add(l(w))):(E=E.j(_),E=E.add(l(w)))}return E}var p=c(0),m=c(1),v=c(16777216);n=o.prototype,n.m=function(){if(M(this))return-R(this).m();for(var I=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(M(this))return"-"+R(this).toString(I);for(var y=l(Math.pow(I,6)),_=this,E="";;){var D=H(_,y).g;_=k(_,D.j(y));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=D,T(_))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=k(this,I),M(I)?-1:T(I)?0:1};function R(I){for(var y=I.g.length,_=[],E=0;E<y;E++)_[E]=~I.g[E];return new o(_,~I.h).add(m)}n.abs=function(){return M(this)?R(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0,D=0;D<=y;D++){var S=E+(this.i(D)&65535)+(I.i(D)&65535),w=(S>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=w>>>16,S&=65535,w&=65535,_[D]=w<<16|S}return new o(_,_[_.length-1]&-2147483648?-1:0)};function k(I,y){return I.add(R(y))}n.j=function(I){if(T(this)||T(I))return p;if(M(this))return M(I)?R(this).j(R(I)):R(R(this).j(I));if(M(I))return R(this.j(R(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var S=this.i(E)>>>16,w=this.i(E)&65535,Ln=I.i(D)>>>16,$o=I.i(D)&65535;_[2*E+2*D]+=w*$o,B(_,2*E+2*D),_[2*E+2*D+1]+=S*$o,B(_,2*E+2*D+1),_[2*E+2*D+1]+=w*Ln,B(_,2*E+2*D+1),_[2*E+2*D+2]+=S*Ln,B(_,2*E+2*D+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new o(_,0)};function B(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function H(I,y){if(T(y))throw Error("division by zero");if(T(I))return new F(p,p);if(M(I))return y=H(R(I),y),new F(R(y.g),R(y.h));if(M(y))return y=H(I,R(y)),new F(R(y.g),y.h);if(30<I.g.length){if(M(I)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(I);)_=te(_),E=te(E);var D=$(_,1),S=$(E,1);for(E=$(E,2),_=$(_,2);!T(E);){var w=S.add(E);0>=w.l(I)&&(D=D.add(_),S=w),E=$(E,1),_=$(_,1)}return y=k(I,D.j(y)),new F(D,y)}for(D=p;0<=I.l(y);){for(_=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(_),w=S.j(y);M(w)||0<w.l(I);)_-=E,S=l(_),w=S.j(y);T(S)&&(S=m),D=D.add(S),I=k(I,w)}return new F(D,I)}n.A=function(I){return H(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&I.i(E);return new o(_,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|I.i(E);return new o(_,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^I.i(E);return new o(_,this.h^I.h)};function te(I){for(var y=I.g.length+1,_=[],E=0;E<y;E++)_[E]=I.i(E)<<1|I.i(E-1)>>>31;return new o(_,I.h)}function $(I,y){var _=y>>5;y%=32;for(var E=I.g.length-_,D=[],S=0;S<E;S++)D[S]=0<y?I.i(S+_)>>>y|I.i(S+_+1)<<32-y:I.i(S+_);return new o(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zy=kT.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Fr=kT.Integer=o}).apply(typeof OT<"u"?OT:typeof self<"u"?self:typeof window<"u"?window:{});var Ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},er={};var Gy,q2,oo,Wy,pc,Vd,Ky,Qy,Yy;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ld=="object"&&Ld];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var C=u[g];if(!(C in f))break e;f=f[C]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var f=0,g=!1,C={next:function(){if(!g&&f<u.length){var x=f++;return{value:d(x,u[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function T(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,C,x){for(var O=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)O[Te-2]=arguments[Te];return d.prototype[C].apply(g,O)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function R(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=u.length||0,x=g.length||0;u.length=C+x;for(let O=0;O<x;O++)u[C+O]=g[O]}else u.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function B(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function H(u){return H[" "](u),u}H[" "]=function(){};var te=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function $(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function y(u){let d={};for(let f in u)d[f]=u[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)u[f]=g[f];for(let x=0;x<_.length;x++)f=_[x],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function S(u){a.setTimeout(()=>{throw u},0)}function w(){var u=af;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Ln{constructor(){this.h=this.g=null}add(d,f){let g=$o.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var $o=new k(()=>new Fx,u=>u.reset());class Fx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ho,qo=!1,af=new Ln,vw=()=>{let u=a.Promise.resolve(void 0);Ho=()=>{u.then(Lx)}};var Lx=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(f){S(f)}var d=$o;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}qo=!1};function ar(){this.s=this.s,this.C=this.C}ar.prototype.s=!1,ar.prototype.ma=function(){this.s||(this.s=!0,this.N())},ar.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var Vx=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function zo(u,d){if(st.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(te){e:{try{H(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ux[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&zo.aa.h.call(this)}}T(zo,st);var Ux={2:"touch",3:"pen",4:"mouse"};zo.prototype.h=function(){zo.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Go="closure_listenable_"+(1e6*Math.random()|0),jx=0;function Bx(u,d,f,g,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++jx,this.da=this.fa=!1}function Qc(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Yc(u){this.src=u,this.g={},this.h=0}Yc.prototype.add=function(u,d,f,g,C){var x=u.toString();u=this.g[x],u||(u=this.g[x]=[],this.h++);var O=uf(u,d,g,C);return-1<O?(d=u[O],f||(d.fa=!1)):(d=new Bx(d,this.src,x,!!g,C),d.fa=f,u.push(d)),d};function cf(u,d){var f=d.type;if(f in u.g){var g=u.g[f],C=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=C)&&Array.prototype.splice.call(g,C,1),x&&(Qc(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function uf(u,d,f,g){for(var C=0;C<u.length;++C){var x=u[C];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return C}return-1}var lf="closure_lm_"+(1e6*Math.random()|0),df={};function _w(u,d,f,g,C){if(g&&g.once)return Iw(u,d,f,g,C);if(Array.isArray(d)){for(var x=0;x<d.length;x++)_w(u,d[x],f,g,C);return null}return f=gf(f),u&&u[Go]?u.K(d,f,l(g)?!!g.capture:!!g,C):ww(u,d,f,!1,g,C)}function ww(u,d,f,g,C,x){if(!d)throw Error("Invalid event type");var O=l(C)?!!C.capture:!!C,Te=ff(u);if(Te||(u[lf]=Te=new Yc(u)),f=Te.add(d,f,g,O,x),f.proxy)return f;if(g=$x(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)Vx||(C=O),C===void 0&&(C=!1),u.addEventListener(d.toString(),g,C);else if(u.attachEvent)u.attachEvent(bw(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function $x(){function u(f){return d.call(u.src,u.listener,f)}let d=Hx;return u}function Iw(u,d,f,g,C){if(Array.isArray(d)){for(var x=0;x<d.length;x++)Iw(u,d[x],f,g,C);return null}return f=gf(f),u&&u[Go]?u.L(d,f,l(g)?!!g.capture:!!g,C):ww(u,d,f,!0,g,C)}function Ew(u,d,f,g,C){if(Array.isArray(d))for(var x=0;x<d.length;x++)Ew(u,d[x],f,g,C);else g=l(g)?!!g.capture:!!g,f=gf(f),u&&u[Go]?(u=u.i,d=String(d).toString(),d in u.g&&(x=u.g[d],f=uf(x,f,g,C),-1<f&&(Qc(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete u.g[d],u.h--)))):u&&(u=ff(u))&&(d=u.g[d.toString()],u=-1,d&&(u=uf(d,f,g,C)),(f=-1<u?d[u]:null)&&hf(f))}function hf(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Go])cf(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(bw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=ff(d))?(cf(f,u),f.h==0&&(f.src=null,d[lf]=null)):Qc(u)}}}function bw(u){return u in df?df[u]:df[u]="on"+u}function Hx(u,d){if(u.da)u=!0;else{d=new zo(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&hf(u),u=f.call(g,d)}return u}function ff(u){return u=u[lf],u instanceof Yc?u:null}var pf="__closure_events_fn_"+(1e9*Math.random()>>>0);function gf(u){return typeof u=="function"?u:(u[pf]||(u[pf]=function(d){return u.handleEvent(d)}),u[pf])}function ot(){ar.call(this),this.i=new Yc(this),this.M=this,this.F=null}T(ot,ar),ot.prototype[Go]=!0,ot.prototype.removeEventListener=function(u,d,f,g){Ew(this,u,d,f,g)};function ht(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new st(d,u);else if(d instanceof st)d.target=d.target||u;else{var C=d;d=new st(g,u),E(d,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var O=d.g=f[x];C=Zc(O,g,!0,d)&&C}if(O=d.g=u,C=Zc(O,g,!0,d)&&C,C=Zc(O,g,!1,d)&&C,f)for(x=0;x<f.length;x++)O=d.g=f[x],C=Zc(O,g,!1,d)&&C}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)Qc(f[g]);delete u.g[d],u.h--}}this.F=null},ot.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},ot.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function Zc(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,x=0;x<d.length;++x){var O=d[x];if(O&&!O.da&&O.capture==f){var Te=O.listener,Xe=O.ha||O.src;O.fa&&cf(u.i,O),C=Te.call(Xe,g)!==!1&&C}}return C&&!g.defaultPrevented}function Dw(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Cw(u){u.g=Dw(()=>{u.g=null,u.i&&(u.i=!1,Cw(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class qx extends ar{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Cw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wo(u){ar.call(this),this.h=u,this.g={}}T(Wo,ar);var Tw=[];function Sw(u){$(u.g,function(d,f){this.g.hasOwnProperty(f)&&hf(d)},u),u.g={}}Wo.prototype.N=function(){Wo.aa.N.call(this),Sw(this)},Wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mf=a.JSON.stringify,zx=a.JSON.parse,Gx=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function yf(){}yf.prototype.h=null;function Aw(u){return u.h||(u.h=u.i())}function xw(){}var Ko={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vf(){st.call(this,"d")}T(vf,st);function _f(){st.call(this,"c")}T(_f,st);var Zr={},Rw=null;function Jc(){return Rw=Rw||new ot}Zr.La="serverreachability";function Mw(u){st.call(this,Zr.La,u)}T(Mw,st);function Qo(u){let d=Jc();ht(d,new Mw(d))}Zr.STAT_EVENT="statevent";function Nw(u,d){st.call(this,Zr.STAT_EVENT,u),this.stat=d}T(Nw,st);function ft(u){let d=Jc();ht(d,new Nw(d,u))}Zr.Ma="timingevent";function Pw(u,d){st.call(this,Zr.Ma,u),this.size=d}T(Pw,st);function Yo(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Zo(){this.g=!0}Zo.prototype.xa=function(){this.g=!1};function Wx(u,d,f,g,C,x){u.info(function(){if(u.g)if(x)for(var O="",Te=x.split("&"),Xe=0;Xe<Te.length;Xe++){var we=Te[Xe].split("=");if(1<we.length){var at=we[0];we=we[1];var ct=at.split("_");O=2<=ct.length&&ct[1]=="type"?O+(at+"="+we+"&"):O+(at+"=redacted&")}}else O=null;else O=x;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+O})}function Kx(u,d,f,g,C,x,O){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+x+" "+O})}function is(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+Yx(u,f)+(g?" "+g:"")})}function Qx(u,d){u.info(function(){return"TIMEOUT: "+d})}Zo.prototype.info=function(){};function Yx(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var O=1;O<C.length;O++)C[O]=""}}}}return mf(f)}catch{return d}}var Xc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ow={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wf;function eu(){}T(eu,yf),eu.prototype.g=function(){return new XMLHttpRequest},eu.prototype.i=function(){return{}},wf=new eu;function cr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new Wo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kw}function kw(){this.i=null,this.g="",this.h=!1}var Fw={},If={};function Ef(u,d,f){u.L=1,u.v=iu(Vn(d)),u.m=f,u.P=!0,Lw(u,null)}function Lw(u,d){u.F=Date.now(),tu(u),u.A=Vn(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),Zw(f.i,"t",g),u.C=0,f=u.j.J,u.h=new kw,u.g=gI(u.j,f?d:null,!u.m),0<u.O&&(u.M=new qx(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(Tw[0]=C.toString()),C=Tw);for(var x=0;x<C.length;x++){var O=_w(f,C[x],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Qo(),Wx(u.i,u.u,u.A,u.l,u.R,u.m)}cr.prototype.ca=function(u){u=u.target;let d=this.M;d&&Un(u)==3?d.j():this.Y(u)},cr.prototype.Y=function(u){try{if(u==this.g)e:{let ct=Un(this.g);var d=this.g.Ba();let as=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||iI(this.g)))){this.J||ct!=4||d==7||(d==8||0>=as?Qo(3):Qo(2)),bf(this);var f=this.g.Z();this.X=f;t:if(Vw(this)){var g=iI(this.g);u="";var C=g.length,x=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jr(this),Jo(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(x&&d==C-1)});g.length=0,this.h.g+=u,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,Kx(this.i,this.u,this.A,this.l,this.R,ct,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,Xe=this.g;if((Te=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Te)){var we=Te;break t}}we=null}if(f=we)is(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Df(this,f);else{this.o=!1,this.s=3,ft(12),Jr(this),Jo(this);break e}}if(this.P){f=!0;let nn;for(;!this.J&&this.C<O.length;)if(nn=Zx(this,O),nn==If){ct==4&&(this.s=4,ft(14),f=!1),is(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==Fw){this.s=4,ft(15),is(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else is(this.i,this.l,nn,null),Df(this,nn);if(Vw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||O.length!=0||this.h.h||(this.s=1,ft(16),f=!1),this.o=this.o&&f,!f)is(this.i,this.l,O,"[Invalid Chunked Response]"),Jr(this),Jo(this);else if(0<O.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Rf(at),at.M=!0,ft(11))}}else is(this.i,this.l,O,null),Df(this,O);ct==4&&Jr(this),this.o&&!this.J&&(ct==4?dI(this.j,this):(this.o=!1,tu(this)))}else pR(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Jr(this),Jo(this)}}}catch{}finally{}};function Vw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Zx(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?If:(f=Number(d.substring(f,g)),isNaN(f)?Fw:(g+=1,g+f>d.length?If:(d=d.slice(g,g+f),u.C=g+f,d)))}cr.prototype.cancel=function(){this.J=!0,Jr(this)};function tu(u){u.S=Date.now()+u.I,Uw(u,u.I)}function Uw(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Yo(m(u.ba,u),d)}function bf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}cr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Qx(this.i,this.A),this.L!=2&&(Qo(),ft(17)),Jr(this),this.s=2,Jo(this)):Uw(this,this.S-u)};function Jo(u){u.j.G==0||u.J||dI(u.j,u)}function Jr(u){bf(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Sw(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Df(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Cf(f.h,u))){if(!u.K&&Cf(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)uu(f),au(f);else break e;xf(f),ft(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Yo(m(f.Za,f),6e3));if(1>=$w(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ei(f,11)}else if((u.K||f.g==u)&&uu(f),!B(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let we=C[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let at=we[3];at!=null&&(f.la=at,f.j.info("VER="+f.la));let ct=we[4];ct!=null&&(f.Aa=ct,f.j.info("SVER="+f.Aa));let as=we[5];as!=null&&typeof as=="number"&&0<as&&(g=1.5*as,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let nn=u.g;if(nn){let du=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(du){var x=g.h;x.g||du.indexOf("spdy")==-1&&du.indexOf("quic")==-1&&du.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Tf(x,x.h),x.h=null))}if(g.D){let Mf=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mf&&(g.ya=Mf,Ne(g.I,g.D,Mf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=u;if(g.qa=pI(g,g.J?g.ia:null,g.W),O.K){Hw(g.h,O);var Te=O,Xe=g.L;Xe&&(Te.I=Xe),Te.B&&(bf(Te),tu(Te)),g.g=O}else uI(g);0<f.i.length&&cu(f)}else we[0]!="stop"&&we[0]!="close"||ei(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?ei(f,7):Af(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}Qo(4)}catch{}}var Jx=class{constructor(u,d){this.g=u,this.map=d}};function jw(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function $w(u){return u.h?1:u.g?u.g.size:0}function Cf(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Tf(u,d){u.g?u.g.add(d):u.h=d}function Hw(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}jw.prototype.cancel=function(){if(this.i=qw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function qw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function Xx(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function eR(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function zw(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=eR(u),g=Xx(u),C=g.length,x=0;x<C;x++)d.call(void 0,g[x],f&&f[x],u)}var Gw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tR(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),C=null;if(0<=g){var x=u[f].substring(0,g);C=u[f].substring(g+1)}else x=u[f];d(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Xr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Xr){this.h=u.h,nu(this,u.j),this.o=u.o,this.g=u.g,ru(this,u.s),this.l=u.l;var d=u.i,f=new ta;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Ww(this,f),this.m=u.m}else u&&(d=String(u).match(Gw))?(this.h=!1,nu(this,d[1]||"",!0),this.o=Xo(d[2]||""),this.g=Xo(d[3]||"",!0),ru(this,d[4]),this.l=Xo(d[5]||"",!0),Ww(this,d[6]||"",!0),this.m=Xo(d[7]||"")):(this.h=!1,this.i=new ta(null,this.h))}Xr.prototype.toString=function(){var u=[],d=this.j;d&&u.push(ea(d,Kw,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(ea(d,Kw,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(ea(f,f.charAt(0)=="/"?iR:rR,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",ea(f,oR)),u.join("")};function Vn(u){return new Xr(u)}function nu(u,d,f){u.j=f?Xo(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function ru(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function Ww(u,d,f){d instanceof ta?(u.i=d,aR(u.i,u.h)):(f||(d=ea(d,sR)),u.i=new ta(d,u.h))}function Ne(u,d,f){u.i.set(d,f)}function iu(u){return Ne(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Xo(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ea(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,nR),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nR(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Kw=/[#\/\?@]/g,rR=/[#\?:]/g,iR=/[#\?]/g,sR=/[#\?@]/g,oR=/#/g;function ta(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function ur(u){u.g||(u.g=new Map,u.h=0,u.i&&tR(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ta.prototype,n.add=function(u,d){ur(this),this.i=null,u=ss(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function Qw(u,d){ur(u),d=ss(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Yw(u,d){return ur(u),d=ss(u,d),u.g.has(d)}n.forEach=function(u,d){ur(this),this.g.forEach(function(f,g){f.forEach(function(C){u.call(d,C,g,this)},this)},this)},n.na=function(){ur(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=u[g];for(let x=0;x<C.length;x++)f.push(d[g])}return f},n.V=function(u){ur(this);let d=[];if(typeof u=="string")Yw(this,u)&&(d=d.concat(this.g.get(ss(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return ur(this),this.i=null,u=ss(this,u),Yw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function Zw(u,d,f){Qw(u,d),0<f.length&&(u.i=null,u.g.set(ss(u,d),M(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var C=x;O[g]!==""&&(C+="="+encodeURIComponent(String(O[g]))),u.push(C)}}return this.i=u.join("&")};function ss(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function aR(u,d){d&&!u.j&&(ur(u),u.i=null,u.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(Qw(this,g),Zw(this,C,f))},u)),u.j=d}function cR(u,d){let f=new Zo;if(a.Image){let g=new Image;g.onload=v(lr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(lr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(lr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(lr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function uR(u,d){let f=new Zo,g=new AbortController,C=setTimeout(()=>{g.abort(),lr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(x=>{clearTimeout(C),x.ok?lr(f,"TestPingServer: ok",!0,d):lr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),lr(f,"TestPingServer: error",!1,d)})}function lr(u,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function lR(){this.g=new Gx}function dR(u,d,f){let g=f||"";try{zw(u,function(C,x){let O=C;l(C)&&(O=mf(C)),d.push(g+x+"="+encodeURIComponent(O))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function na(u){this.l=u.Ub||null,this.j=u.eb||!1}T(na,yf),na.prototype.g=function(){return new su(this.l,this.j)},na.prototype.i=function(u){return function(){return u}}({});function su(u,d){ot.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(su,ot),n=su.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,ia(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ra(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ia(this)),this.g&&(this.readyState=3,ia(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?ra(this):ia(this),this.readyState==3&&Jw(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,ra(this))},n.Qa=function(u){this.g&&(this.response=u,ra(this))},n.ga=function(){this.g&&ra(this)};function ra(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ia(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function ia(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(su.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Xw(u){let d="";return $(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Sf(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Xw(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Ne(u,d,f))}function Le(u){ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Le,ot);var hR=/^https?$/i,fR=["POST","PUT"];n=Le.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wf.g(),this.v=this.o?Aw(this.o):Aw(wf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(x){eI(this,x);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fR,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,O]of f)this.g.setRequestHeader(x,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rI(this),this.u=!0,this.g.send(u),this.u=!1}catch(x){eI(this,x)}};function eI(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,tI(u),ou(u)}function tI(u){u.A||(u.A=!0,ht(u,"complete"),ht(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ht(this,"complete"),ht(this,"abort"),ou(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ou(this,!0)),Le.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?nI(this):this.bb())},n.bb=function(){nI(this)};function nI(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Un(u)!=4||u.Z()!=2)){if(u.u&&Un(u)==4)Dw(u.Ea,0,u);else if(ht(u,"readystatechange"),Un(u)==4){u.h=!1;try{let O=u.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var C=String(u.D).match(Gw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!hR.test(C?C.toLowerCase():"")}f=g}if(f)ht(u,"complete"),ht(u,"success");else{u.m=6;try{var x=2<Un(u)?u.g.statusText:""}catch{x=""}u.l=x+" ["+u.Z()+"]",tI(u)}}finally{ou(u)}}}}function ou(u,d){if(u.g){rI(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||ht(u,"ready");try{f.onreadystatechange=g}catch{}}}function rI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Un(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),zx(d)}};function iI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function pR(u){let d={};u=(u.g&&2<=Un(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(B(u[g]))continue;var f=D(u[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[C]||[];d[C]=x,x.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sa(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function sI(u){this.Aa=0,this.i=[],this.j=new Zo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sa("baseRetryDelayMs",5e3,u),this.cb=sa("retryDelaySeedMs",1e4,u),this.Wa=sa("forwardChannelMaxRetries",2,u),this.wa=sa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new jw(u&&u.concurrentRequestLimit),this.Da=new lR,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=sI.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){ft(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=pI(this,null,this.W),cu(this)};function Af(u){if(oI(u),u.G==3){var d=u.U++,f=Vn(u.I);if(Ne(f,"SID",u.K),Ne(f,"RID",d),Ne(f,"TYPE","terminate"),oa(u,f),d=new cr(u,u.j,d),d.L=2,d.v=iu(Vn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=gI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),tu(d)}fI(u)}function au(u){u.g&&(Rf(u),u.g.cancel(),u.g=null)}function oI(u){au(u),u.u&&(a.clearTimeout(u.u),u.u=null),uu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function cu(u){if(!Bw(u.h)&&!u.s){u.s=!0;var d=u.Ga;Ho||vw(),qo||(Ho(),qo=!0),af.add(d,u),u.B=0}}function gR(u,d){return $w(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Yo(m(u.Ga,u,d),hI(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new cr(this,this.j,u),x=this.o;if(this.S&&(x?(x=y(x),E(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=cI(this,C,d),f=Vn(this.I),Ne(f,"RID",u),Ne(f,"CVER",22),this.D&&Ne(f,"X-HTTP-Session-Id",this.D),oa(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(Xw(x)))+"&"+d:this.m&&Sf(f,this.m,x)),Tf(this.h,C),this.Ua&&Ne(f,"TYPE","init"),this.P?(Ne(f,"$req",d),Ne(f,"SID","null"),C.T=!0,Ef(C,f,null)):Ef(C,f,d),this.G=2}}else this.G==3&&(u?aI(this,u):this.i.length==0||Bw(this.h)||aI(this))};function aI(u,d){var f;d?f=d.l:f=u.U++;let g=Vn(u.I);Ne(g,"SID",u.K),Ne(g,"RID",f),Ne(g,"AID",u.T),oa(u,g),u.m&&u.o&&Sf(g,u.m,u.o),f=new cr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=cI(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Tf(u.h,f),Ef(f,g,d)}function oa(u,d){u.H&&$(u.H,function(f,g){Ne(d,g,f)}),u.l&&zw({},function(f,g){Ne(d,g,f)})}function cI(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var C=u.i;let x=-1;for(;;){let O=["count="+f];x==-1?0<f?(x=C[0].g,O.push("ofs="+x)):x=0:O.push("ofs="+x);let Te=!0;for(let Xe=0;Xe<f;Xe++){let we=C[Xe].g,at=C[Xe].map;if(we-=x,0>we)x=Math.max(0,C[Xe].g-100),Te=!1;else try{dR(at,O,"req"+we+"_")}catch{g&&g(at)}}if(Te){g=O.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function uI(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Ho||vw(),qo||(Ho(),qo=!0),af.add(d,u),u.v=0}}function xf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Yo(m(u.Fa,u),hI(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,lI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Yo(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),au(this),lI(this))};function Rf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function lI(u){u.g=new cr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=Vn(u.qa);Ne(d,"RID","rpc"),Ne(d,"SID",u.K),Ne(d,"AID",u.T),Ne(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ne(d,"TO",u.ja),Ne(d,"TYPE","xmlhttp"),oa(u,d),u.m&&u.o&&Sf(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=iu(Vn(d)),f.m=null,f.P=!0,Lw(f,u)}n.Za=function(){this.C!=null&&(this.C=null,au(this),xf(this),ft(19))};function uu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function dI(u,d){var f=null;if(u.g==d){uu(u),Rf(u),u.g=null;var g=2}else if(Cf(u.h,d))f=d.D,Hw(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;g=Jc(),ht(g,new Pw(g,f)),cu(u)}else uI(u);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&gR(u,d)||g==2&&xf(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:ei(u,5);break;case 4:ei(u,10);break;case 3:ei(u,6);break;default:ei(u,2)}}}function hI(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function ei(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let C=!g;g=new Xr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||nu(g,"https"),iu(g),C?cR(g.toString(),f):uR(g.toString(),f)}else ft(2);u.G=0,u.l&&u.l.sa(d),fI(u),oI(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function fI(u){if(u.G=0,u.ka=[],u.l){let d=qw(u.h);(d.length!=0||u.i.length!=0)&&(R(u.ka,d),R(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function pI(u,d,f){var g=f instanceof Xr?Vn(f):new Xr(f);if(g.g!="")d&&(g.g=d+"."+g.g),ru(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var x=new Xr(null);g&&nu(x,g),d&&(x.g=d),C&&ru(x,C),f&&(x.l=f),g=x}return f=u.D,d=u.ya,f&&d&&Ne(g,f,d),Ne(g,"VER",u.la),oa(u,g),g}function gI(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Le(new na({eb:f})):new Le(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mI(){}n=mI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function lu(){}lu.prototype.g=function(u,d){return new Nt(u,d)};function Nt(u,d){ot.call(this),this.g=new sI(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!B(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!B(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new os(this)}T(Nt,ot),Nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){Af(this.g)},Nt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=mf(u),u=f);d.i.push(new Jx(d.Ya++,u)),d.G==3&&cu(d)},Nt.prototype.N=function(){this.g.l=null,delete this.j,Af(this.g),delete this.g,Nt.aa.N.call(this)};function yI(u){vf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}T(yI,vf);function vI(){_f.call(this),this.status=1}T(vI,_f);function os(u){this.g=u}T(os,mI),os.prototype.ua=function(){ht(this.g,"a")},os.prototype.ta=function(u){ht(this.g,new yI(u))},os.prototype.sa=function(u){ht(this.g,new vI)},os.prototype.ra=function(){ht(this.g,"b")},lu.prototype.createWebChannel=lu.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,Yy=er.createWebChannelTransport=function(){return new lu},Qy=er.getStatEventTarget=function(){return Jc()},Ky=er.Event=Zr,Vd=er.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xc.NO_ERROR=0,Xc.TIMEOUT=8,Xc.HTTP_ERROR=6,pc=er.ErrorCode=Xc,Ow.COMPLETE="complete",Wy=er.EventType=Ow,xw.EventType=Ko,Ko.OPEN="a",Ko.CLOSE="b",Ko.ERROR="c",Ko.MESSAGE="d",ot.prototype.listen=ot.prototype.K,oo=er.WebChannel=xw,q2=er.FetchXmlHttpFactory=na,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,Gy=er.XhrIo=Le}).apply(typeof Ld<"u"?Ld:typeof self<"u"?self:typeof window<"u"?window:{});var FT="@firebase/firestore";var Qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");var Fo="10.14.0";var Gi=new Mr("@firebase/firestore");function ho(){return Gi.logLevel}function P(n,...e){if(Gi.logLevel<=he.DEBUG){let t=e.map($_);Gi.debug(`Firestore (${Fo}): ${n}`,...t)}}function vt(n,...e){if(Gi.logLevel<=he.ERROR){let t=e.map($_);Gi.error(`Firestore (${Fo}): ${n}`,...t)}}function Wi(n,...e){if(Gi.logLevel<=he.WARN){let t=e.map($_);Gi.warn(`Firestore (${Fo}): ${n}`,...t)}}function $_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function q(n="Unexpected state"){let e=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: `+n;throw vt(e),new Error(e)}function z(n,e){n||q()}function ee(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends Rt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Jt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Kd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},tv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qe.UNAUTHENTICATED))}shutdown(){}},nv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},rv=class{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){z(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Jt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Jt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>b(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Jt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(z(typeof r.accessToken=="string"),new Kd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return z(e===null||typeof e=="string"),new Qe(e)}},iv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},sv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new iv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ov=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},av=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){z(this.o===void 0);let r=s=>{s.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,P("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(z(typeof t.token=="string"),this.R=t.token,new ov(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function z2(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Qd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=z2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function Io(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function kS(n){return n+"\0"}var je=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new U(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new U(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new U(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new je(0,0))}static max(){return new n(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Yd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(),r===void 0?r=e.length-t:r>e.length-t&&q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ae=class n extends Yd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},G2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ye=class n extends Yd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return G2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new U(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new U(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new U(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var j=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ae.fromString(e))}static fromName(e){return new n(Ae.fromString(e).popFirst(5))}static empty(){return new n(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ae.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ae(e.slice()))}};var Eo=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function cv(n){return n.fields.find(e=>e.kind===2)}function Li(n){return n.fields.filter(e=>e.kind!==2)}Eo.UNKNOWN_ID=-1;var vo=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Cc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,en.min())}};function W2(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new je(t+1,0):new je(t,r));return new en(i,j.empty(),e)}function FS(n){return new en(n.readTime,n.key,-1)}var en=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Q.min(),j.empty(),-1)}static max(){return new n(Q.max(),j.empty(),-1)}};function H_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=j.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var LS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ts(n){return b(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==LS)throw n;P("LocalStore","Unexpectedly lost primary lease")})}var A=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var Jd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Jt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new qi(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=q_(r.target.error);this.V.reject(new qi(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new qi(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(P("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new lv(t)}},bo=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(lt())===12.2&&vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return P("SimpleDb","Removing database:",e),Vi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Id())return!1;if(n.v())return!0;let e=lt(),t=n.S(e),r=0<t&&t<10,i=VS(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return b(this,null,function*(){return this.db||(P("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new qi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new U(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new U(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new qi(e,o))},i.onupgradeneeded=s=>{P("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{P("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return b(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=Jd.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),A.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(P("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function VS(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var uv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Vi(this.B.delete())}},qi=class extends U{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Yr(n){return n.name==="IndexedDbTransactionError"}var lv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(P("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(P("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Vi(r)}add(e){return P("SimpleDb","ADD",this.store.name,e,e),Vi(this.store.add(e))}get(e){return Vi(this.store.get(e)).next(t=>(t===void 0&&(t=null),P("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return P("SimpleDb","DELETE",this.store.name,e),Vi(this.store.delete(e))}count(){return P("SimpleDb","COUNT",this.store.name),Vi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new A((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new A((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){P("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new A((r,i)=>{t.onerror=s=>{let o=q_(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new A((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new uv(a),l=t(a.primaryKey,a.value,c);if(l instanceof A){let h=l.catch(p=>(c.done(),A.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>A.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Vi(n){return new A((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=q_(r.target.error);t(i)}})}var LT=!1;function q_(n){let e=bo.S(lt());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new U("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LT||(LT=!0,setTimeout(()=>{throw r},0)),r}}return n}var dv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){P("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>b(this,null,function*(){this.task=null;try{P("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Yr(t)?P("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ts(t)}yield this.X(6e4)}))}},hv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return b(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return A.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return P("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(P("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=FS(s);H_(o,r)>0&&(r=o)}),new en(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var pn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function qh(n){return n==null}function Tc(n){return n===0&&1/n==-1/0}function K2(n){return typeof n=="number"&&Number.isInteger(n)&&!Tc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function _t(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VT(e)),e=Q2(n.get(t),e);return VT(e)}function Q2(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function VT(n){return n+""}function Rn(n){let e=n.length;if(z(e>=2),e===2)return z(n.charAt(0)===""&&n.charAt(1)===""),Ae.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&q(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:q()}s=o+2}return new Ae(r)}var UT=["userId","batchId"];function Hd(n,e){return[n,_t(e)]}function US(n,e,t){return[n,_t(e),t]}var Y2={},Z2=["prefixPath","collectionGroup","readTime","documentId"],J2=["prefixPath","collectionGroup","documentId"],X2=["collectionGroup","readTime","prefixPath","documentId"],ej=["canonicalId","targetId"],tj=["targetId","path"],nj=["path","targetId"],rj=["collectionId","parent"],ij=["indexId","uid"],sj=["uid","sequenceNumber"],oj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],aj=["indexId","uid","orderedDocumentKey"],cj=["userId","collectionPath","documentId"],uj=["userId","collectionPath","largestBatchId"],lj=["userId","collectionGroup","largestBatchId"],jS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],dj=[...jS,"documentOverlays"],BS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$S=BS,z_=[...$S,"indexConfiguration","indexState","indexEntries"],hj=z_,fj=[...z_,"globals"];var Sc=class extends Zd{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Je(n,e){let t=ee(n);return bo.F(t._e,e)}function jT(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function HS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Fe=class n{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yo(this.root,e,this.comparator,!1)}getReverseIterator(){return new yo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yo(this.root,e,this.comparator,!0)}},yo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nn=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();let e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xe=class n{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xd(this.data.getIterator())}getIteratorFrom(e){return new Xd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Xd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ao(n){return n.hasNext()?n.getNext():void 0}var gn=class n{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new n([])}unionWith(e){let t=new xe(Ye.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var eh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ze=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new eh("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ze.EMPTY_BYTE_STRING=new Ze("");var pj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nr(n){if(z(!!n),typeof n=="string"){let e=0,t=pj.exec(n);if(z(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(n.seconds),nanos:Oe(n.nanos)}}function Oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $r(n){return typeof n=="string"?Ze.fromBase64String(n):Ze.fromUint8Array(n)}function G_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function W_(n){let e=n.mapValue.fields.__previous_value__;return G_(e)?W_(e):e}function Ac(n){let e=nr(n.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}var fv=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Do=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var jr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qd={nullValue:"NULL_VALUE"};function Ki(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?G_(n)?4:qS(n)?9007199254740991:zh(n)?10:11:q()}function Pn(n,e){if(n===e)return!0;let t=Ki(n);if(t!==Ki(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ac(n).isEqual(Ac(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=nr(i.timestampValue),a=nr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return $r(i.bytesValue).isEqual($r(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Oe(i.geoPointValue.latitude)===Oe(s.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Oe(i.integerValue)===Oe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Oe(i.doubleValue),a=Oe(s.doubleValue);return o===a?Tc(o)===Tc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Io(n.arrayValue.values||[],e.arrayValue.values||[],Pn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(jT(o)!==jT(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Pn(o[c],a[c])))return!1;return!0}(n,e);default:return q()}}function xc(n,e){return(n.values||[]).find(t=>Pn(t,e))!==void 0}function Hr(n,e){if(n===e)return 0;let t=Ki(n),r=Ki(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Oe(s.integerValue||s.doubleValue),c=Oe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return BT(n.timestampValue,e.timestampValue);case 4:return BT(Ac(n),Ac(e));case 5:return ie(n.stringValue,e.stringValue);case 6:return function(s,o){let a=$r(s),c=$r(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ie(a[l],c[l]);if(h!==0)return h}return ie(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ie(Oe(s.latitude),Oe(o.latitude));return a!==0?a:ie(Oe(s.longitude),Oe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return $T(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,h;let p=s.fields||{},m=o.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,T=(c=m.value)===null||c===void 0?void 0:c.arrayValue,M=ie(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:$T(v,T)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===jr.mapValue&&o===jr.mapValue)return 0;if(s===jr.mapValue)return 1;if(o===jr.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=ie(c[p],h[p]);if(m!==0)return m;let v=Hr(a[c[p]],l[h[p]]);if(v!==0)return v}return ie(c.length,h.length)}(n.mapValue,e.mapValue);default:throw q()}}function BT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=nr(n),r=nr(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function $T(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Hr(t[i],r[i]);if(s)return s}return ie(t.length,r.length)}function Co(n){return pv(n)}function pv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=nr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return $r(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return j.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=pv(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${pv(t.fields[o])}`;return i+"}"}(n.mapValue):q()}function K_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gv(n){return!!n&&"integerValue"in n}function Rc(n){return!!n&&"arrayValue"in n}function HT(n){return!!n&&"nullValue"in n}function qT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zd(n){return!!n&&"mapValue"in n}function zh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ic(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Lo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ic(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ic(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var zS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function gj(n){return"nullValue"in n?qd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?K_(Do.empty(),j.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?zh(n)?zS:{mapValue:{}}:q()}function mj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?K_(Do.empty(),j.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?zS:"mapValue"in n?zh(n)?{mapValue:{}}:jr:q()}function zT(n,e){let t=Hr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function GT(n,e){let t=Hr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var jt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(t)}setAll(e){let t=Ye.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Ic(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());zd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];zd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Lo(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Ic(this.value))}};function GS(n){let e=[];return Lo(n.fields,(t,r)=>{let i=new Ye([t]);if(zd(r)){let s=GS(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new gn(e)}var it=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Q.min(),Q.min(),Q.min(),jt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Q.min(),Q.min(),jt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Q.min(),Q.min(),jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var qr=class{constructor(e,t){this.position=e,this.inclusive=t}};function WT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=j.comparator(j.fromName(o.referenceValue),t.key):r=Hr(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function KT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pn(n.position[t],e.position[t]))return!1;return!0}var To=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function yj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var th=class{},ge=class n extends th{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new vv(e,t,r):t==="array-contains"?new Iv(e,r):t==="in"?new nh(e,r):t==="not-in"?new Ev(e,r):t==="array-contains-any"?new bv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _v(e,r):new wv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Hr(t,this.value)):t!==null&&Ki(this.value)===Ki(t)&&this.matchesComparison(Hr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ce=class n extends th{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return So(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function So(n){return n.op==="and"}function mv(n){return n.op==="or"}function Q_(n){return WS(n)&&So(n)}function WS(n){for(let e of n.filters)if(e instanceof Ce)return!1;return!0}function yv(n){if(n instanceof ge)return n.field.canonicalString()+n.op.toString()+Co(n.value);if(Q_(n))return n.filters.map(e=>yv(e)).join(",");{let e=n.filters.map(t=>yv(t)).join(",");return`${n.op}(${e})`}}function KS(n,e){return n instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.field.isEqual(i.field)&&Pn(r.value,i.value)}(n,e):n instanceof Ce?function(r,i){return i instanceof Ce&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&KS(o,i.filters[a]),!0):!1}(n,e):void q()}function QS(n,e){let t=n.filters.concat(e);return Ce.create(t,n.op)}function YS(n){return n instanceof ge?function(t){return`${t.field.canonicalString()} ${t.op} ${Co(t.value)}`}(n):n instanceof Ce?function(t){return t.op.toString()+" {"+t.getFilters().map(YS).join(" ,")+"}"}(n):"Filter"}var vv=class extends ge{constructor(e,t,r){super(e,t,r),this.key=j.fromName(r.referenceValue)}matches(e){let t=j.comparator(e.key,this.key);return this.matchesComparison(t)}},_v=class extends ge{constructor(e,t){super(e,"in",t),this.keys=ZS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},wv=class extends ge{constructor(e,t){super(e,"not-in",t),this.keys=ZS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function ZS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>j.fromName(r.referenceValue))}var Iv=class extends ge{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Rc(t)&&xc(t.arrayValue,this.value)}},nh=class extends ge{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&xc(this.value.arrayValue,t)}},Ev=class extends ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!xc(this.value.arrayValue,t)}},bv=class extends ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Rc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xc(this.value.arrayValue,r))}};var Dv=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function Cv(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Dv(n,e,t,r,i,s,o)}function Qi(n){let e=ee(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>yv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),qh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Co(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Co(r)).join(",")),e.ue=t}return e.ue}function Bc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!KS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!KT(n.startAt,e.startAt)&&KT(n.endAt,e.endAt)}function rh(n){return j.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ih(n,e){return n.filters.filter(t=>t instanceof ge&&t.field.isEqual(e))}function QT(n,e,t){let r=qd,i=!0;for(let s of ih(n,e)){let o=qd,a=!0;switch(s.op){case"<":case"<=":o=gj(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=qd}zT({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];zT({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function YT(n,e,t){let r=jr,i=!0;for(let s of ih(n,e)){let o=jr,a=!0;switch(s.op){case">=":case">":o=mj(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=jr}GT({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];GT({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var Ao=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function vj(n,e,t,r,i,s,o,a){return new Ao(n,e,t,r,i,s,o,a)}function Gh(n){return new Ao(n)}function ZT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _j(n){return n.collectionGroup!==null}function Ec(n){let e=ee(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new xe(Ye.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new To(s,r))}),t.has(Ye.keyField().canonicalString())||e.ce.push(new To(Ye.keyField(),r))}return e.ce}function Xt(n){let e=ee(n);return e.le||(e.le=wj(e,Ec(n))),e.le}function wj(n,e){if(n.limitType==="F")return Cv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new To(i.field,s)});let t=n.endAt?new qr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qr(n.startAt.position,n.startAt.inclusive):null;return Cv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Tv(n,e,t){return new Ao(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wh(n,e){return Bc(Xt(n),Xt(e))&&n.limitType===e.limitType}function JS(n){return`${Qi(Xt(n))}|lt:${n.limitType}`}function fo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>YS(i)).join(", ")}]`),qh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Co(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Co(i)).join(",")),`Target(${r})`}(Xt(n))}; limitType=${n.limitType})`}function $c(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):j.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Ec(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=WT(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Ec(r),i)||r.endAt&&!function(o,a,c){let l=WT(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Ec(r),i))}(n,e)}function Ij(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XS(n){return(e,t)=>{let r=!1;for(let i of Ec(n)){let s=Ej(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Ej(n,e,t){let r=n.field.isKeyField()?j.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Hr(c,l):q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}var On=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Lo(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return HS(this.inner)}size(){return this.innerSize}};var bj=new Fe(j.comparator);function Bt(){return bj}var eA=new Fe(j.comparator);function _c(...n){let e=eA;for(let t of n)e=e.insert(t.key,t);return e}function tA(n){let e=eA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Mn(){return bc()}function nA(){return bc()}function bc(){return new On(n=>n.toString(),(n,e)=>n.isEqual(e))}var Dj=new Fe(j.comparator),Cj=new xe(j.comparator);function ue(...n){let e=Cj;for(let t of n)e=e.add(t);return e}var Tj=new xe(ie);function Sj(){return Tj}function Y_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function rA(n){return{integerValue:""+n}}function Aj(n,e){return K2(e)?rA(e):Y_(n,e)}var xo=class{constructor(){this._=void 0}};function xj(n,e,t){return n instanceof Yi?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&G_(s)&&(s=W_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof zr?sA(n,e):n instanceof Gr?oA(n,e):function(i,s){let o=iA(i,s),a=JT(o)+JT(i.Pe);return gv(o)&&gv(i.Pe)?rA(a):Y_(i.serializer,a)}(n,e)}function Rj(n,e,t){return n instanceof zr?sA(n,e):n instanceof Gr?oA(n,e):t}function iA(n,e){return n instanceof Zi?function(r){return gv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Yi=class extends xo{},zr=class extends xo{constructor(e){super(),this.elements=e}};function sA(n,e){let t=aA(e);for(let r of n.elements)t.some(i=>Pn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Gr=class extends xo{constructor(e){super(),this.elements=e}};function oA(n,e){let t=aA(e);for(let r of n.elements)t=t.filter(i=>!Pn(i,r));return{arrayValue:{values:t}}}var Zi=class extends xo{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function JT(n){return Oe(n.integerValue||n.doubleValue)}function aA(n){return Rc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Sv=class{constructor(e,t){this.field=e,this.transform=t}};function Mj(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof zr&&i instanceof zr||r instanceof Gr&&i instanceof Gr?Io(r.elements,i.elements,Pn):r instanceof Zi&&i instanceof Zi?Pn(r.Pe,i.Pe):r instanceof Yi&&i instanceof Yi}(n.transform,e.transform)}var Av=class{constructor(e,t){this.version=e,this.transformResults=t}},mn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Gd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ro=class{};function cA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Mc(n.key,mn.none()):new Wr(n.key,n.data,mn.none());{let t=n.data,r=jt.empty(),i=new xe(Ye.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new kn(n.key,r,new gn(i.toArray()),mn.none())}}function Nj(n,e,t){n instanceof Wr?function(i,s,o){let a=i.value.clone(),c=eS(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof kn?function(i,s,o){if(!Gd(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=eS(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(uA(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Dc(n,e,t,r){return n instanceof Wr?function(s,o,a,c){if(!Gd(s.precondition,o))return a;let l=s.value.clone(),h=tS(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof kn?function(s,o,a,c){if(!Gd(s.precondition,o))return a;let l=tS(s.fieldTransforms,c,o),h=o.data;return h.setAll(uA(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return Gd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Pj(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=iA(r.transform,i||null);s!=null&&(t===null&&(t=jt.empty()),t.set(r.field,s))}return t||null}function XT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Io(r,i,(s,o)=>Mj(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Wr=class extends Ro{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},kn=class extends Ro{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function uA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function eS(n,e,t){let r=new Map;z(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Rj(o,a,t[i]))}return r}function tS(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,xj(s,o,e))}return r}var Mc=class extends Ro{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},sh=class extends Ro{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Nc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Nj(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Dc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=nA();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=cA(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,(t,r)=>XT(t,r))&&Io(this.baseMutations,e.baseMutations,(t,r)=>XT(t,r))}},xv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){z(e.mutations.length===r.length);let i=function(){return Dj}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Pc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Rv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var $e,ve;function Oj(n){switch(n){default:return q();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function lA(n){if(n===void 0)return vt("GRPC error has no .code"),N.UNKNOWN;switch(n){case $e.OK:return N.OK;case $e.CANCELLED:return N.CANCELLED;case $e.UNKNOWN:return N.UNKNOWN;case $e.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case $e.INTERNAL:return N.INTERNAL;case $e.UNAVAILABLE:return N.UNAVAILABLE;case $e.UNAUTHENTICATED:return N.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case $e.NOT_FOUND:return N.NOT_FOUND;case $e.ALREADY_EXISTS:return N.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return N.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case $e.ABORTED:return N.ABORTED;case $e.OUT_OF_RANGE:return N.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return N.UNIMPLEMENTED;case $e.DATA_LOSS:return N.DATA_LOSS;default:return q()}}(ve=$e||($e={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var nS=null;function kj(){return new TextEncoder}var Fj=new Fr([4294967295,4294967295],0);function rS(n){let e=kj().encode(n),t=new zy;return t.update(e),new Uint8Array(t.digest())}function iS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fr([t,r],0),new Fr([i,s],0)]}var Mv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $i(`Invalid padding: ${t}`);if(r<0)throw new $i(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $i(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $i(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Fr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Fr.fromNumber(r)));return i.compare(Fj)===1&&(i=new Fr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=rS(e),[r,i]=iS(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=rS(e),[r,i]=iS(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},$i=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var oh=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Oc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Q.min(),i,new Fe(ie),Bt(),ue())}},Oc=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ue(),ue(),ue())}};var _o=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},ah=class{constructor(e,t){this.targetId=e,this.me=t}},ch=class{constructor(e,t,r=Ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},uh=class{constructor(){this.fe=0,this.ge=oS(),this.pe=Ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),t=ue(),r=ue();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:q()}}),new Oc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=oS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Nv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Bt(),this.qe=sS(),this.Qe=new Fe(ie)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(rh(s))if(r===0){let o=new j(s.path);this.Ue(t,o,it.newNoDocument(o,Q.min()))}else z(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}nS?.et(function(h,p,m,v,T){var M,R,k,B,F,H;let te={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},$=p.unchangedNames;return $&&(te.bloomFilter={applied:T===0,hashCount:(M=$?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(B=(k=(R=$?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&B!==void 0?B:0,padding:(H=(F=$?.bits)===null||F===void 0?void 0:F.padding)!==null&&H!==void 0?H:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),te}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=$r(r).toUint8Array()}catch(c){if(c instanceof eh)return Wi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Mv(o,i,s)}catch(c){return Wi(c instanceof $i?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&rh(a.target)){let c=new j(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,it.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ue();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new oh(e,t,this.Qe,this.ke,r);return this.ke=Bt(),this.qe=sS(),this.Qe=new Fe(ie),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new uh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xe(ie),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||P("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function sS(){return new Fe(j.comparator)}function oS(){return new Fe(j.comparator)}var Lj={asc:"ASCENDING",desc:"DESCENDING"},Vj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uj={and:"AND",or:"OR"},Pv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ov(n,e){return n.useProto3Json||qh(e)?e:{value:e}}function Mo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function jj(n,e){return Mo(n,e.toTimestamp())}function wt(n){return z(!!n),Q.fromTimestamp(function(t){let r=nr(t);return new je(r.seconds,r.nanos)}(n))}function Z_(n,e){return kv(n,e).canonicalString()}function kv(n,e){let t=function(i){return new Ae(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function hA(n){let e=Ae.fromString(n);return z(IA(e)),e}function lh(n,e){return Z_(n.databaseId,e.path)}function zi(n,e){let t=hA(e);if(t.get(1)!==n.databaseId.projectId)throw new U(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new U(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new j(gA(t))}function fA(n,e){return Z_(n.databaseId,e)}function pA(n){let e=hA(n);return e.length===4?Ae.emptyPath():gA(e)}function Fv(n){return new Ae(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gA(n){return z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function aS(n,e,t){return{name:lh(n,e),fields:t.value.mapValue.fields}}function Bj(n,e,t){let r=zi(n,e.name),i=wt(e.updateTime),s=e.createTime?wt(e.createTime):Q.min(),o=new jt({mapValue:{fields:e.fields}}),a=it.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function $j(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(z(h===void 0||typeof h=="string"),Ze.fromBase64String(h||"")):(z(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ze.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?N.UNKNOWN:lA(l.code);return new U(h,l.message||"")}(o);t=new ch(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=zi(n,r.document.name),s=wt(r.document.updateTime),o=r.document.createTime?wt(r.document.createTime):Q.min(),a=new jt({mapValue:{fields:r.document.fields}}),c=it.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new _o(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=zi(n,r.document),s=r.readTime?wt(r.readTime):Q.min(),o=it.newNoDocument(i,s),a=r.removedTargetIds||[];t=new _o([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=zi(n,r.document),s=r.removedTargetIds||[];t=new _o([],s,i,null)}else{if(!("filter"in e))return q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Rv(i,s),a=r.targetId;t=new ah(a,o)}}return t}function dh(n,e){let t;if(e instanceof Wr)t={update:aS(n,e.key,e.value)};else if(e instanceof Mc)t={delete:lh(n,e.key)};else if(e instanceof kn)t={update:aS(n,e.key,e.data),updateMask:Kj(e.fieldMask)};else{if(!(e instanceof sh))return q();t={verify:lh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Yi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zi)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:jj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:q()}(n,e.precondition)),t}function Lv(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?mn.updateTime(wt(s.updateTime)):s.exists!==void 0?mn.exists(s.exists):mn.none()}(e.currentDocument):mn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)z(a.setToServerValue==="REQUEST_TIME"),c=new Yi;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new zr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new Gr(h)}else"increment"in a?c=new Zi(o,a.increment):q();let l=Ye.fromServerFormat(a.fieldPath);return new Sv(l,c)}(n,i)):[];if(e.update){e.update.name;let i=zi(n,e.update.name),s=new jt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new gn(l.map(h=>Ye.fromServerFormat(h)))}(e.updateMask);return new kn(i,s,o,t,r)}return new Wr(i,s,t,r)}if(e.delete){let i=zi(n,e.delete);return new Mc(i,t)}if(e.verify){let i=zi(n,e.verify);return new sh(i,t)}return q()}function Hj(n,e){return n&&n.length>0?(z(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?wt(i.updateTime):wt(s);return o.isEqual(Q.min())&&(o=wt(s)),new Av(o,i.transformResults||[])}(t,e))):[]}function mA(n,e){return{documents:[fA(n,e.path)]}}function yA(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=fA(n,i);let s=function(l){if(l.length!==0)return wA(Ce.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:po(m.field),direction:zj(m.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=Ov(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function vA(n){let e=pA(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){z(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){let m=_A(p);return m instanceof Ce&&Q_(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(m=>function(T){return new To(go(T.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,qh(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new qr(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new qr(v,m)}(t.endAt)),vj(e,i,o,s,a,"F",c,l)}function qj(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _A(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=go(t.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=go(t.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=go(t.unaryFilter.field);return ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=go(t.unaryFilter.field);return ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(n):n.fieldFilter!==void 0?function(t){return ge.create(go(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ce.create(t.compositeFilter.filters.map(r=>_A(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q()}}(t.compositeFilter.op))}(n):q()}function zj(n){return Lj[n]}function Gj(n){return Vj[n]}function Wj(n){return Uj[n]}function po(n){return{fieldPath:n.canonicalString()}}function go(n){return Ye.fromServerFormat(n.fieldPath)}function wA(n){return n instanceof ge?function(t){if(t.op==="=="){if(qT(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NAN"}};if(HT(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qT(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NAN"}};if(HT(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(t.field),op:Gj(t.op),value:t.value}}}(n):n instanceof Ce?function(t){let r=t.getFilters().map(i=>wA(i));return r.length===1?r[0]:{compositeFilter:{op:Wj(t.op),filters:r}}}(n):q()}function Kj(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var No=class n{constructor(e,t,r,i,s=Q.min(),o=Q.min(),a=Ze.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var hh=class{constructor(e){this.ct=e}};function Qj(n,e){let t;if(e.document)t=Bj(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=j.fromSegments(e.noDocument.path),i=Xi(e.noDocument.readTime);t=it.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return q();{let r=j.fromSegments(e.unknownDocument.path),i=Xi(e.unknownDocument.version);t=it.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new je(i[0],i[1]);return Q.fromTimestamp(s)}(e.readTime)),t}function cS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:lh(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Mo(s,o.version.toTimestamp()),createTime:Mo(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ji(e.version)};else{if(!e.isUnknownDocument())return q();r.unknownDocument={path:t.path.toArray(),version:Ji(e.version)}}return r}function fh(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ji(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xi(n){let e=new je(n.seconds,n.nanoseconds);return Q.fromTimestamp(e)}function Ui(n,e){let t=(e.baseMutations||[]).map(s=>Lv(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>Lv(n.ct,s)),i=je.fromMillis(e.localWriteTimeMs);return new Nc(e.batchId,i,t,r)}function wc(n){let e=Xi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Xi(n.lastLimboFreeSnapshotVersion):Q.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return z(s.documents.length===1),Xt(Gh(pA(s.documents[0])))}(n.query):function(s){return Xt(vA(s))}(n.query),new No(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ze.fromBase64String(n.resumeToken))}function EA(n,e){let t=Ji(e.snapshotVersion),r=Ji(e.lastLimboFreeSnapshotVersion),i;i=rh(e.target)?mA(n.ct,e.target):yA(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qi(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function bA(n){let e=vA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Tv(e,e.limit,"L"):e}function Zy(n,e){return new Pc(e.largestBatchId,Lv(n.ct,e.overlayMutation))}function uS(n,e){let t=e.path.lastSegment();return[n,_t(e.path.popLast()),t]}function lS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ji(r.readTime),documentKey:_t(r.documentKey.path),largestBatchId:r.largestBatchId}}var Vv=class{getBundleMetadata(e,t){return dS(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Xi(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return dS(e).put(function(i){return{bundleId:i.id,createTime:Ji(wt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return hS(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:bA(s.bundledQuery),readTime:Xi(s.readTime)}}(r)})}saveNamedQuery(e,t){return hS(e).put(function(i){return{name:i.name,readTime:Ji(wt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function dS(n){return Je(n,"bundles")}function hS(n){return Je(n,"namedQueries")}var ph=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return gc(e).get(uS(this.userId,t)).next(r=>r?Zy(this.serializer,r):null)}getOverlays(e,t){let r=Mn();return A.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new Pc(t,o);i.push(this.ht(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(_t(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(gc(e).j("collectionPathOverlayIndex",a))}),A.waitFor(s)}getOverlaysForCollection(e,t,r){let i=Mn(),s=_t(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return gc(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=Zy(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=Mn(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gc(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=Zy(this.serializer,l);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return gc(e).put(function(i,s,o){let[a,c,l]=uS(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:dh(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function gc(n){return Je(n,"documentOverlays")}var Uv=class{Pt(e){return Je(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ze.fromUint8Array(r):Ze.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var tr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Tc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=nr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt($r(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?qS(e)?this.dt(t,Number.MAX_SAFE_INTEGER):zh(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):q()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Oe(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),j.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};tr.vt=new tr;function Yj(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function fS(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=Yj(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var jv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=fS(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=fS(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Bv=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},$v=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},ji=class{constructor(){this.jt=new jv,this.Ht=new Bv(this.jt),this.Jt=new $v(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Bi=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Lr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=pS(n.arrayValue,e.arrayValue),t!==0?t:(t=pS(n.directionalValue,e.directionalValue),t!==0?t:j.comparator(n.documentKey,e.documentKey)))}function pS(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var gh=class{constructor(e){this.Xt=new xe((t,r)=>Ye.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(z(e.collectionGroup===this.collectionId),this.nn)return!1;let t=cv(e);if(t!==void 0&&!this.sn(t))return!1;let r=Li(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new xe(Ye.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new vo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new vo(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new vo(r.field,r.dir==="asc"?0:1)));return new Eo(Eo.UNKNOWN_ID,this.collectionId,t,Cc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function DA(n){var e,t;if(z(n instanceof ge||n instanceof Ce),n instanceof ge){if(n instanceof nh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>ge.create(n.field,"==",s)))||[];return Ce.create(i,"or")}return n}let r=n.filters.map(i=>DA(i));return Ce.create(r,n.op)}function Zj(n){if(n.getFilters().length===0)return[];let e=zv(DA(n));return z(CA(e)),Hv(e)||qv(e)?[e]:e.getFilters()}function Hv(n){return n instanceof ge}function qv(n){return n instanceof Ce&&Q_(n)}function CA(n){return Hv(n)||qv(n)||function(t){if(t instanceof Ce&&mv(t)){for(let r of t.getFilters())if(!Hv(r)&&!qv(r))return!1;return!0}return!1}(n)}function zv(n){if(z(n instanceof ge||n instanceof Ce),n instanceof ge)return n;if(n.filters.length===1)return zv(n.filters[0]);let e=n.filters.map(r=>zv(r)),t=Ce.create(e,n.op);return t=mh(t),CA(t)?t:(z(t instanceof Ce),z(So(t)),z(t.filters.length>1),t.filters.reduce((r,i)=>J_(r,i)))}function J_(n,e){let t;return z(n instanceof ge||n instanceof Ce),z(e instanceof ge||e instanceof Ce),t=n instanceof ge?e instanceof ge?function(i,s){return Ce.create([i,s],"and")}(n,e):gS(n,e):e instanceof ge?gS(e,n):function(i,s){if(z(i.filters.length>0&&s.filters.length>0),So(i)&&So(s))return QS(i,s.getFilters());let o=mv(i)?i:s,a=mv(i)?s:i,c=o.filters.map(l=>J_(l,a));return Ce.create(c,"or")}(n,e),mh(t)}function gS(n,e){if(So(e))return QS(e,n.getFilters());{let t=e.filters.map(r=>J_(n,r));return Ce.create(t,"or")}}function mh(n){if(z(n instanceof ge||n instanceof Ce),n instanceof ge)return n;let e=n.getFilters();if(e.length===1)return mh(e[0]);if(WS(n))return n;let t=e.map(i=>mh(i)),r=[];return t.forEach(i=>{i instanceof ge?r.push(i):i instanceof Ce&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ce.create(r,n.op)}var Gv=class{constructor(){this.un=new kc}addToCollectionParentIndex(e,t){return this.un.add(t),A.resolve()}getCollectionParents(e,t){return A.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return A.resolve()}deleteFieldIndex(e,t){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,t){return A.resolve()}getDocumentsMatchingTarget(e,t){return A.resolve(null)}getIndexType(e,t){return A.resolve(0)}getFieldIndexes(e,t){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,t){return A.resolve(en.min())}getMinOffsetFromCollectionGroup(e,t){return A.resolve(en.min())}updateCollectionGroup(e,t,r){return A.resolve()}updateIndexEntries(e,t){return A.resolve()}},kc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xe(Ae.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xe(Ae.comparator)).toArray()}};var Ud=new Uint8Array(0),Wv=class{constructor(e,t){this.databaseId=t,this.cn=new kc,this.ln=new On(r=>Qi(r),(r,i)=>Bc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:_t(i)};return mS(e).put(s)}return A.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[kS(t),""],!1,!0);return mS(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(Rn(o.parent))}return r})}addFieldIndex(e,t){let r=mc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=uo(e);return s.next(a=>{o.put(lS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=mc(e),i=uo(e),s=co(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=mc(e),r=co(e),i=uo(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return A.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new gh(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=co(e),i=!0,s=new Map;return A.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ue(),a=[];return A.forEach(s,(c,l)=>{P("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(c)} to execute ${Qi(t)}`);let h=function(F,H){let te=cv(H);if(te===void 0)return null;for(let $ of ih(F,te.fieldPath))switch($.op){case"array-contains-any":return $.value.arrayValue.values||[];case"array-contains":return[$.value]}return null}(l,c),p=function(F,H){let te=new Map;for(let $ of Li(H))for(let I of ih(F,$.fieldPath))switch(I.op){case"==":case"in":te.set($.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return te.set($.fieldPath.canonicalString(),I.value),Array.from(te.values())}return null}(l,c),m=function(F,H){let te=[],$=!0;for(let I of Li(H)){let y=I.kind===0?QT(F,I.fieldPath,F.startAt):YT(F,I.fieldPath,F.startAt);te.push(y.value),$&&($=y.inclusive)}return new qr(te,$)}(l,c),v=function(F,H){let te=[],$=!0;for(let I of Li(H)){let y=I.kind===0?YT(F,I.fieldPath,F.endAt):QT(F,I.fieldPath,F.endAt);te.push(y.value),$&&($=y.inclusive)}return new qr(te,$)}(l,c),T=this.In(c,l,m),M=this.In(c,l,v),R=this.Tn(c,l,p),k=this.En(c.indexId,h,T,m.inclusive,M,v.inclusive,R);return A.forEach(k,B=>r.G(B,t.limit).next(F=>{F.forEach(H=>{let te=j.fromSegments(H.documentKey);o.has(te)||(o=o.add(te),a.push(te))})}))}).next(()=>a)}return A.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=Zj(Ce.create(e.filters,"and")).map(r=>Cv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){let c=(t!=null?t.length:1)*Math.max(r.length,s.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):Ud,v=this.An(e,m,r[p%l],i),T=this.Rn(e,m,s[p%l],o),M=a.map(R=>this.An(e,m,R,!0));h.push(...this.createRange(v,T,M))}return h}An(e,t,r,i){let s=new Bi(e,j.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new Bi(e,j.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new gh(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return A.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new xe(Ye.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new ji;for(let i of Li(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);tr.vt.It(s,o)}return r.zt()}dn(e){let t=new ji;return tr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new ji;return tr.vt.It(K_(this.databaseId,t),r.Yt(function(s){let o=Li(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new ji);let s=0;for(let o of Li(e)){let a=r[s++];for(let c of i)if(this.fn(t,o.fieldPath)&&Rc(a))i=this.gn(i,o,a);else{let l=c.Yt(o.kind);tr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new ji;c.seed(a.zt()),tr.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof ge&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=mc(e),i=uo(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return A.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(h,p){let m=p?new Cc(p.sequenceNumber,new en(Xi(p.readTime),new j(Rn(p.documentKey)),p.largestBatchId)):Cc.empty(),v=h.fields.map(([T,M])=>new vo(Ye.fromServerFormat(T),M));return new Eo(h.indexId,h.collectionGroup,v,m)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ie(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=mc(e),s=uo(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>A.forEach(a,c=>s.put(lS(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return A.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?A.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(s,c);return l.isEqual(h)?A.resolve():this.bn(e,s,c,l,h)}))))})}Dn(e,t,r,i){return co(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return co(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=co(e),s=new xe(Lr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Bi(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new xe(Lr),i=this.Vn(t,e);if(i==null)return r;let s=cv(t);if(s!=null){let o=e.data.field(s.fieldPath);if(Rc(o))for(let a of o.arrayValue.values||[])r=r.add(new Bi(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Bi(t.indexId,e.key,Ud,i));return r}bn(e,t,r,i,s){P("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,l,h,p,m){let v=c.getIterator(),T=l.getIterator(),M=ao(v),R=ao(T);for(;M||R;){let k=!1,B=!1;if(M&&R){let F=h(M,R);F<0?B=!0:F>0&&(k=!0)}else M!=null?B=!0:k=!0;k?(p(R),R=ao(T)):B?(m(M),M=ao(v)):(M=ao(v),R=ao(T))}}(i,s,Lr,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),A.waitFor(o)}yn(e){let t=1;return uo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Lr(o,a)).filter((o,a,c)=>!a||Lr(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Lr(o,e),c=Lr(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Ud,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Ud,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(e,t){return Lr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yS)}getMinOffset(e,t){return A.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||q())).next(yS)}};function mS(n){return Je(n,"collectionParents")}function co(n){return Je(n,"indexEntries")}function mc(n){return Je(n,"indexConfiguration")}function uo(n){return Je(n,"indexState")}function yS(n){z(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;H_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new en(e.readTime,e.documentKey,t)}var vS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function TA(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:o},(h,p,m)=>(a++,m.delete()));s.push(c.next(()=>{z(a===1)}));let l=[];for(let h of t.mutations){let p=US(e,h.key.path,t.batchId);s.push(i.delete(p)),l.push(h.key)}return A.waitFor(s).next(()=>l)}function yh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw q();e=n.noDocument}return JSON.stringify(e).length}Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(41943040,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);var vh=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){z(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=mo(e),o=Vr(e);return o.add({}).next(a=>{z(typeof a=="number");let c=new Nc(a,t,r,i),l=function(v,T,M){let R=M.baseMutations.map(B=>dh(v.ct,B)),k=M.mutations.map(B=>dh(v.ct,B));return{userId:T,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:R,mutations:k}}(this.serializer,this.userId,c),h=[],p=new xe((m,v)=>ie(m.canonicalString(),v.canonicalString()));for(let m of i){let v=US(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(o.put(l)),h.push(s.put(v,Y2))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),A.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Vr(e).get(t).next(r=>r?(z(r.userId===this.userId),Ui(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?A.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Vr(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(z(a.batchId>=r),s=Ui(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Vr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ui(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Hd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return mo(e).J({range:i},(o,a,c)=>{let[l,h,p]=o,m=Rn(h);if(l===this.userId&&t.path.isEqual(m))return Vr(e).get(p).next(v=>{if(!v)throw q();z(v.userId===this.userId),s.push(Ui(this.serializer,v))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(ie),i=[];return t.forEach(s=>{let o=Hd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=mo(e).J({range:a},(l,h,p)=>{let[m,v,T]=l,M=Rn(v);m===this.userId&&s.path.isEqual(M)?r=r.add(T):p.done()});i.push(c)}),A.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=Hd(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new xe(ie);return mo(e).J({range:o},(c,l,h)=>{let[p,m,v]=c,T=Rn(m);p===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push(Vr(e).get(s).next(o=>{if(o===null)throw q();z(o.userId===this.userId),r.push(Ui(this.serializer,o))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return TA(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return A.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return mo(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Rn(s[1]);i.push(c)}else a.done()}).next(()=>{z(i.length===0)})})}containsKey(e,t){return SA(e,this.userId,t)}Nn(e){return AA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function SA(n,e,t){let r=Hd(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return mo(n).J({range:s,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(o=!0),l.done()}).next(()=>o)}function Vr(n){return Je(n,"mutations")}function mo(n){return Je(n,"documentMutations")}function AA(n){return Je(n,"mutationQueues")}var Po=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Kv=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Po(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Q.fromTimestamp(new je(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>lo(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(z(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return lo(e).J((o,a)=>{let c=wc(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>A.waitFor(s)).next(()=>i)}forEachTarget(e,t){return lo(e).J((r,i)=>{let s=wc(i);t(s)})}qn(e){return _S(e).get("targetGlobalKey").next(t=>(z(t!==null),t))}Qn(e,t){return _S(e).put("targetGlobalKey",t)}Kn(e,t){return lo(e).put(EA(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Qi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return lo(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=wc(a);Bc(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=Ur(e);return t.forEach(o=>{let a=_t(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),A.waitFor(i)}removeMatchingKeys(e,t,r){let i=Ur(e);return A.forEach(t,s=>{let o=_t(s.path);return A.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=Ur(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ur(e),s=ue();return i.J({range:r,H:!0},(o,a,c)=>{let l=Rn(o[1]),h=new j(l);s=s.add(h)}).next(()=>s)}containsKey(e,t){let r=_t(t.path),i=IDBKeyRange.bound([r],[kS(r)],!1,!0),s=0;return Ur(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return lo(e).get(t).next(r=>r?wc(r):null)}};function lo(n){return Je(n,"targets")}function _S(n){return Je(n,"targetGlobal")}function Ur(n){return Je(n,"targetDocuments")}function wS([n,e],[t,r]){let i=ie(n,t);return i===0?ie(e,r):i}var Qv=class{constructor(e){this.Un=e,this.buffer=new xe(wS),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();wS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Yv=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){P("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yr(t)?P("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ts(t)}yield this.Hn(3e5)}))}},Zv=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return A.resolve(pn.oe);let r=new Qv(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(vS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vS):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ho()<=he.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function Jj(n,e){return new Zv(n,e)}var Jv=class{constructor(e,t){this.db=e,this.garbageCollector=Jj(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return jd(e,r)}removeReference(e,t,r){return jd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return jd(e,t)}nr(e,t){return function(i,s){let o=!1;return AA(i).Y(a=>SA(i,a,s).next(c=>(c&&(o=!0),A.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let c=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Q.min()),Ur(e).delete(function(p){return[0,_t(p.path)]}(o))))});i.push(c)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return jd(e,t)}tr(e,t){let r=Ur(e),i,s=pn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==pn.oe&&t(new j(Rn(i)),s),s=l,i=c):s=pn.oe}).next(()=>{s!==pn.oe&&t(new j(Rn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function jd(n,e){return Ur(n).put(function(r,i){return{targetId:0,path:_t(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var _h=class{constructor(){this.changes=new On(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?A.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Xv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fi(e).put(r)}removeEntry(e,t,r){return Fi(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],fh(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=it.newInvalidDocument(t);return Fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yc(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:it.newInvalidDocument(t)};return Fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yc(t))},(i,s)=>{r={document:this.ir(t,s),size:yh(s)}}).next(()=>r)}getEntries(e,t){let r=Bt();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Bt(),i=new Fe(j.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,yh(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return A.resolve();let i=new xe(bS);t.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(yc(i.first()),yc(i.last())),o=i.getIterator(),a=o.getNext();return Fi(e).J({index:"documentKeyIndex",range:s},(c,l,h)=>{let p=j.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&bS(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.$(yc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),fh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fi(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=Bt();for(let p of l){let m=this.ir(j.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&($c(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=Bt(),o=ES(t,r),a=ES(t,en.max());return Fi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,h)=>{let p=this.ir(j.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(p.key,p),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new e_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return IS(e).get("remoteDocumentGlobalKey").next(t=>(z(!!t),t))}rr(e,t){return IS(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=Qj(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Q.min())))return r}return it.newInvalidDocument(e)}};function xA(n){return new Xv(n)}var e_=class extends _h{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new On(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new xe((s,o)=>ie(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=cS(this.cr.serializer,o);i=i.add(s.path.popLast());let l=yh(c);r+=l-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=cS(this.cr.serializer,o.convertToNoDocument(Q.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),A.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function IS(n){return Je(n,"remoteDocumentGlobal")}function Fi(n){return Je(n,"remoteDocumentsV14")}function yc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ES(n,e){let t=e.documentKey.path.toArray();return[n,fh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bS(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ie(t[s],r[s]),i)return i;return i=ie(t.length,r.length),i||(i=ie(t[t.length-2],r[r.length-2]),i||ie(t[t.length-1],r[r.length-1]))}var t_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var wh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Dc(r.mutation,i,gn.empty(),je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){let i=Mn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=_c();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Mn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Bt(),o=bc(),a=function(){return bc()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof kn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Dc(h.mutation,l,h.mutation.getFieldMask(),je.now())):o.set(l.key,gn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new t_(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=bc(),i=new Fe((o,a)=>o-a),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||gn.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ue()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=nA();h.forEach(m=>{if(!s.has(m)){let v=cA(t.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return A.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_j(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):A.resolve(Mn()),a=-1,c=s;return o.next(l=>A.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?A.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ue())).next(h=>({batchId:a,changes:tA(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new j(t)).next(r=>{let i=_c();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=_c();return this.indexManager.getCollectionParents(e,s).next(a=>A.forEach(a,c=>{let l=function(p,m){return new Ao(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,it.newInvalidDocument(h)))});let a=_c();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&Dc(h.mutation,l,gn.empty(),je.now()),$c(t,l)&&(a=a.insert(c,l))}),a})}};var n_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return A.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:wt(i.createTime)}}(t)),A.resolve()}getNamedQuery(e,t){return A.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:bA(i.bundledQuery),readTime:wt(i.readTime)}}(t)),A.resolve()}};var r_=class{constructor(){this.overlays=new Fe(j.comparator),this.Ir=new Map}getOverlay(e,t){return A.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Mn();return A.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),A.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),A.resolve()}getOverlaysForCollection(e,t,r){let i=Mn(),s=t.length+1,o=new j(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return A.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Fe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Mn(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Mn(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return A.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Pc(t,r));let s=this.Ir.get(t);s===void 0&&(s=ue(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var i_=class{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,A.resolve()}};var Fc=class{constructor(){this.Tr=new xe(He.Er),this.dr=new xe(He.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new He(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new He(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new j(new Ae([])),r=new He(t,e),i=new He(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new j(new Ae([])),r=new He(t,e),i=new He(t,e+1),s=ue();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new He(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},He=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return j.comparator(e.key,t.key)||ie(e.wr,t.wr)}static Ar(e,t){return ie(e.wr,t.wr)||j.comparator(e.key,t.key)}};var s_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new xe(He.Er)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Nc(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new He(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(o)}lookupMutationBatch(e,t){return A.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return A.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new He(t,0),i=new He(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),A.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(ie);return t.forEach(i=>{let s=new He(i,0),o=new He(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),A.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;j.isDocumentKey(s)||(s=s.child(""));let o=new He(new j(s),0),a=new xe(ie);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),A.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){z(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return A.forEach(t.mutations,i=>{let s=new He(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new He(t,0),i=this.br.firstAfterOrEqual(r);return A.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var o_=class{constructor(e){this.Mr=e,this.docs=function(){return new Fe(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return A.resolve(r?r.document.mutableCopy():it.newInvalidDocument(t))}getEntries(e,t){let r=Bt();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():it.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Bt(),o=t.path,a=new j(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||H_(FS(h),r)<=0||(i.has(h.key)||$c(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return A.resolve(s)}getAllFromCollectionGroup(e,t,r,i){q()}Or(e,t){return A.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new a_(this)}getSize(e){return A.resolve(this.size)}},a_=class extends _h{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),A.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var c_=class{constructor(e){this.persistence=e,this.Nr=new On(t=>Qi(t),Bc),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Fc,this.targetCount=0,this.kr=Po.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),A.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,A.resolve()}updateTargetData(e,t){return this.Kn(t),A.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(s).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return A.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),A.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),A.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),A.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return A.resolve(r)}containsKey(e,t){return A.resolve(this.Br.containsKey(t))}};var Ih=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new pn(0),this.Kr=!1,this.Kr=!0,this.$r=new i_,this.referenceDelegate=e(this),this.Ur=new c_(this),this.indexManager=new Gv,this.remoteDocumentCache=function(i){return new o_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new hh(t),this.Gr=new n_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new r_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new s_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){P("MemoryPersistence","Starting transaction:",e);let i=new u_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return A.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},u_=class extends Zd{constructor(e){super(),this.currentSequenceNumber=e}},Eh=class n{constructor(e){this.persistence=e,this.Jr=new Fc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw q()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),A.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),A.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Xr,r=>{let i=j.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Q.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return A.or([()=>A.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var l_=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new Jd("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UT,{unique:!0}),c.createObjectStore("documentMutations")}(e),DS(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=A.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),DS(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Q.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UT,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return A.waitFor(m)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:cj});l.createIndex("collectionPathOverlayIndex",uj,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",lj,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:Z2});l.createIndex("documentKeyIndex",J2),l.createIndex("collectionGroupIndex",X2)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:ij}).createIndex("sequenceNumberIndex",sj,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:oj}).createIndex("documentKeyIndex",aj,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=yh(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>A.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>A.forEach(a,c=>{z(c.userId===s.userId);let l=Ui(this.serializer,c);return TA(e,s.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new Ae(o),l=function(p){return[0,_t(p)]}(c);s.push(t.get(l).next(h=>h?A.resolve():(p=>t.put({targetId:0,path:_t(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>A.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:rj});let r=t.store("collectionParents"),i=new kc,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:_t(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new Ae(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{let h=Rn(a);return s(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=wc(i),o=EA(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new j(Ae.fromString(p.document.name).popFirst(5)):p.noDocument?j.fromSegments(p.noDocument.path):p.unknownDocument?j.fromSegments(p.unknownDocument.path):q()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>A.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=xA(this.serializer),s=new Ih(Eh.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ue();Ui(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),A.forEach(a,(c,l)=>{let h=new Qe(l),p=ph.lt(this.serializer,h),m=s.getIndexManager(h),v=vh.lt(h,this.serializer,m,s.referenceDelegate);return new wh(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Sc(t,pn.oe),c).next()})})}};function DS(n){n.createObjectStore("targetDocuments",{keyPath:tj}).createIndex("documentTargetsIndex",nj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ej,{unique:!0}),n.createObjectStore("targetGlobal")}var Jy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",d_=class n{constructor(e,t,r,i,s,o,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new U(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jv(this,i),this.Ai=t+"main",this.serializer=new hh(c),this.Ri=new bo(this.Ai,this.hi,new l_(this.serializer)),this.$r=new Uv,this.Ur=new Kv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xA(this.serializer),this.Gr=new Vv,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&vt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new U(N.FAILED_PRECONDITION,Jy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new pn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>b(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>b(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>b(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Yr(e))return P("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return vc(e).get("owner").next(t=>A.resolve(this.vi(t)))}Ci(e){return Bd(e).delete(this.clientId)}Fi(){return b(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Je(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return A.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?A.resolve(!0):vc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new U(N.FAILED_PRECONDITION,Jy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&P("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return b(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Sc(e,pn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Bd(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return vh.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ph.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){P("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?fj:c===16?hj:c===15?z_:c===14?$S:c===13?BS:c===12?dj:c===11?jS:void q()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new Sc(a,this.Qr?this.Qr.next():pn.oe),t==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new U(N.FAILED_PRECONDITION,LS);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return vc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new U(N.FAILED_PRECONDITION,Jy)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vc(e).put("owner",t)}static D(){return bo.D()}bi(e){let t=vc(e);return t.get("owner").next(r=>this.vi(r)?(P("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):A.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;hy()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return P("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){vt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function vc(n){return Je(n,"owner")}function Bd(n){return Je(n,"clientMetadata")}function Xj(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var h_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ue(),i=ue();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var f_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var bh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hy()?8:VS(lt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new f_;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ho()<=he.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),A.resolve()):(ho()<=he.DEBUG&&P("QueryEngine","Query:",fo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ho()<=he.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xt(t))):A.resolve())}Yi(e,t){if(ZT(t))return A.resolve(null);let r=Xt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Tv(t,null,"F"),r=Xt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ue(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,Tv(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return ZT(t)||i.isEqual(Q.min())?A.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?A.resolve(null):(ho()<=he.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fo(t)),this.rs(e,o,t,W2(i,-1)).next(a=>a))})}ts(e,t){let r=new xe(XS(e));return t.forEach((i,s)=>{$c(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return ho()<=he.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",fo(t)),this.Ji.getDocumentsMatchingQuery(e,t,en.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var p_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Fe(ie),this._s=new On(s=>Qi(s),Bc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function RA(n,e,t,r){return new p_(n,e,t,r)}function MA(n,e){return b(this,null,function*(){let t=ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ue();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function eB(n,e){let t=ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),v=A.resolve();return m.forEach(T=>{v=v.next(()=>h.getEntry(c,T)).next(M=>{let R=l.docVersions.get(T);z(R!==null),M.version.compareTo(R)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function NA(n){let e=ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function tB(n,e){let t=ee(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ze.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(M,R,k){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(s,v))});let c=Bt(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(nB(s,o,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(Q.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return A.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function nB(n,e,t){let r=ue(),i=ue();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Bt();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Q.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):P("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function rB(n,e){let t=ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iB(n,e){let t=ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,A.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new No(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function g_(n,e,t){return b(this,null,function*(){let r=ee(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Yr(o))throw o;P("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function CS(n,e,t){let r=ee(n),i=Q.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){let p=ee(c),m=p._s.get(h);return m!==void 0?A.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,Xt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Q.min(),t?s:ue())).next(a=>(sB(r,Ij(e),a),{documents:a,Ts:s})))}function sB(n,e,t){let r=n.us.get(e)||Q.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Dh=class{constructor(){this.activeTargetIds=Sj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Ch=class{constructor(){this.so=new Dh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Dh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var m_=class{_o(e){}shutdown(){}};var Th=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var $d=null;function Xy(){return $d===null?$d=function(){return 268435456+Math.round(2147483648*Math.random())}():$d++,"0x"+$d.toString(16)}var oB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var y_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var dt="WebChannelConnection",v_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=Xy(),c=this.xo(t,r.toUriEncodedString());P("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(h=>(P("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Wi("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=oB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Xy();return new Promise((o,a)=>{let c=new Gy;c.setWithCredentials(!0),c.listenOnce(Wy.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case pc.NO_ERROR:let h=c.getResponseJson();P(dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case pc.TIMEOUT:P(dt,`RPC '${e}' ${s} timed out`),a(new U(N.DEADLINE_EXCEEDED,"Request time out"));break;case pc.HTTP_ERROR:let p=c.getStatus();if(P(dt,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let T=function(R){let k=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(k)>=0?k:N.UNKNOWN}(v.status);a(new U(T,v.message))}else a(new U(N.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new U(N.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{P(dt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);P(dt,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Xy(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Yy(),a=Qy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");P(dt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c),m=!1,v=!1,T=new y_({Io:R=>{v?P(dt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(P(dt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),P(dt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),M=(R,k,B)=>{R.listen(k,F=>{try{B(F)}catch(H){setTimeout(()=>{throw H},0)}})};return M(p,oo.EventType.OPEN,()=>{v||(P(dt,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),M(p,oo.EventType.CLOSE,()=>{v||(v=!0,P(dt,`RPC '${e}' stream ${i} transport closed`),T.So())}),M(p,oo.EventType.ERROR,R=>{v||(v=!0,Wi(dt,`RPC '${e}' stream ${i} transport errored:`,R),T.So(new U(N.UNAVAILABLE,"The operation could not be completed")))}),M(p,oo.EventType.MESSAGE,R=>{var k;if(!v){let B=R.data[0];z(!!B);let F=B,H=F.error||((k=F[0])===null||k===void 0?void 0:k.error);if(H){P(dt,`RPC '${e}' stream ${i} received error:`,H);let te=H.status,$=function(_){let E=$e[_];if(E!==void 0)return lA(E)}(te),I=H.message;$===void 0&&($=N.INTERNAL,I="Unknown error status: "+te+" with message "+H.message),v=!0,T.So(new U($,I)),p.close()}else P(dt,`RPC '${e}' stream ${i} received:`,B),T.bo(B)}}),M(a,Ky.STAT_EVENT,R=>{R.stat===Vd.PROXY?P(dt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Vd.NOPROXY&&P(dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}};function aB(){return typeof window<"u"?window:null}function Wd(){return typeof document<"u"?document:null}function Kh(n){return new Pv(n,!0)}var Sh=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ah=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Sh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(vt(t.toString()),vt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new U(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return P("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},__=class extends Ah{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=$j(this.serializer,e),r=function(s){if(!("targetChange"in s))return Q.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?wt(o.readTime):Q.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Fv(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=rh(c)?{documents:mA(s,c)}:{query:yA(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=dA(s,o.resumeToken);let l=Ov(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Q.min())>0){a.readTime=Mo(s,o.snapshotVersion.toTimestamp());let l=Ov(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=qj(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Fv(this.serializer),t.removeTarget=e,this.a_(t)}},w_=class extends Ah{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return z(!!e.streamToken),this.lastStreamToken=e.streamToken,z(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=Hj(e.writeResults,e.commitTime),r=wt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Fv(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>dh(this.serializer,r))};this.a_(t)}};var I_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new U(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,kv(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(N.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,kv(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},E_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(vt(t),this.D_=!1):P("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var b_=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>b(this,null,function*(){ns(this)&&(P("RemoteStore","Restarting streams for network reachability change."),yield function(c){return b(this,null,function*(){let l=ee(c);l.L_.add(4),yield Hc(l),l.q_.set("Unknown"),l.L_.delete(4),yield Qh(l)})}(this))}))}),this.q_=new E_(r,i)}};function Qh(n){return b(this,null,function*(){if(ns(n))for(let e of n.B_)yield e(!0)})}function Hc(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function PA(n,e){let t=ee(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),nw(t)?tw(t):Vo(t).r_()&&ew(t,e))}function X_(n,e){let t=ee(n),r=Vo(t);t.N_.delete(e),r.r_()&&OA(t,e),t.N_.size===0&&(r.r_()?r.o_():ns(t)&&t.q_.set("Unknown"))}function ew(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vo(n).A_(e)}function OA(n,e){n.Q_.xe(e),Vo(n).R_(e)}function tw(n){n.Q_=new Nv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Vo(n).start(),n.q_.v_()}function nw(n){return ns(n)&&!Vo(n).n_()&&n.N_.size>0}function ns(n){return ee(n).L_.size===0}function kA(n){n.Q_=void 0}function cB(n){return b(this,null,function*(){n.q_.set("Online")})}function uB(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{ew(n,e)})})}function lB(n,e){return b(this,null,function*(){kA(n),nw(n)?(n.q_.M_(e),tw(n)):n.q_.set("Unknown")})}function dB(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof ch&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){P("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xh(n,r)}else if(e instanceof _o?n.Q_.Ke(e):e instanceof ah?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Q.min()))try{let r=yield NA(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(Ze.EMPTY_BYTE_STRING,h.snapshotVersion)),OA(s,c);let p=new No(h.target,c,l,h.sequenceNumber);ew(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){P("RemoteStore","Failed to raise snapshot:",r),yield xh(n,r)}})}function xh(n,e,t){return b(this,null,function*(){if(!Yr(e))throw e;n.L_.add(1),yield Hc(n),n.q_.set("Offline"),t||(t=()=>NA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){P("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Qh(n)}))})}function FA(n,e){return e().catch(t=>xh(n,t,e))}function qc(n){return b(this,null,function*(){let e=ee(n),t=Kr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;hB(e);)try{let i=yield rB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,fB(e,i)}catch(i){yield xh(e,i)}LA(e)&&VA(e)})}function hB(n){return ns(n)&&n.O_.length<10}function fB(n,e){n.O_.push(e);let t=Kr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function LA(n){return ns(n)&&!Kr(n).n_()&&n.O_.length>0}function VA(n){Kr(n).start()}function pB(n){return b(this,null,function*(){Kr(n).p_()})}function gB(n){return b(this,null,function*(){let e=Kr(n);for(let t of n.O_)e.m_(t.mutations)})}function mB(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=xv.from(r,e,t);yield FA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield qc(n)})}function yB(n,e){return b(this,null,function*(){e&&Kr(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(o){return Oj(o)&&o!==N.ABORTED}(i.code)){let s=r.O_.shift();Kr(r).s_(),yield FA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield qc(r)}})}(n,e)),LA(n)&&VA(n)})}function TS(n,e){return b(this,null,function*(){let t=ee(n);t.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");let r=ns(t);t.L_.add(3),yield Hc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Qh(t)})}function vB(n,e){return b(this,null,function*(){let t=ee(n);e?(t.L_.delete(2),yield Qh(t)):e||(t.L_.add(2),yield Hc(t),t.q_.set("Unknown"))})}function Vo(n){return n.K_||(n.K_=function(t,r,i){let s=ee(t);return s.w_(),new __(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:cB.bind(null,n),Ro:uB.bind(null,n),mo:lB.bind(null,n),d_:dB.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),nw(n)?tw(n):n.q_.set("Unknown")):(yield n.K_.stop(),kA(n))}))),n.K_}function Kr(n){return n.U_||(n.U_=function(t,r,i){let s=ee(t);return s.w_(),new w_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:pB.bind(null,n),mo:yB.bind(null,n),f_:gB.bind(null,n),g_:mB.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield qc(n)):(yield n.U_.stop(),n.O_.length>0&&(P("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var D_=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function rw(n,e){if(vt("AsyncQueue",`${e}: ${n}`),Yr(n))return new U(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Rh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||j.comparator(t.key,r.key):(t,r)=>j.comparator(t.key,r.key),this.keyedMap=_c(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Mh=class{constructor(){this.W_=new Fe(j.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):q():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Oo=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Rh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var C_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},T_=class{constructor(){this.queries=SS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=ee(t),s=i.queries;i.queries=SS(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new U(N.ABORTED,"Firestore shutting down"))}};function SS(){return new On(n=>JS(n),Wh)}function UA(n,e){return b(this,null,function*(){let t=ee(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new C_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=rw(o,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&iw(t)})}function jA(n,e){return b(this,null,function*(){let t=ee(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function _B(n,e){let t=ee(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&iw(t)}function wB(n,e,t){let r=ee(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function iw(n){n.Y_.forEach(e=>{e.next()})}var S_,AS;(AS=S_||(S_={})).ea="default",AS.Cache="cache";var Nh=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Oo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==S_.Cache}};var Ph=class{constructor(e){this.key=e}},Oh=class{constructor(e){this.key=e}},A_=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=XS(e),this.Ra=new Rh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Mh,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=$c(this.query,p)?p:null,T=!!m&&this.mutatedKeys.has(m.key),M=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),R=!1;m&&v?m.data.isEqual(v.data)?T!==M&&(r.track({type:3,doc:v}),R=!0):this.ga(m,v)||(r.track({type:2,doc:v}),R=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),R=!0):m&&!v&&(r.track({type:1,doc:m}),R=!0,(c||l)&&(a=!0)),R&&(v?(o=o.add(v),s=M?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(v,T){let M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return M(v)-M(T)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new Oo(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Mh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Oh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Ph(r))}),t}ba(e){this.Ta=e.Ts,this.da=ue();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Oo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},x_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},R_=class{constructor(e){this.key=e,this.va=!1}},M_=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new On(a=>JS(a),Wh),this.Ma=new Map,this.xa=new Set,this.Oa=new Fe(j.comparator),this.Na=new Map,this.La=new Fc,this.Ba={},this.ka=new Map,this.qa=Po.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function IB(n,e,t=!0){return b(this,null,function*(){let r=GA(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield BA(r,e,t,!0),i})}function EB(n,e){return b(this,null,function*(){let t=GA(n);yield BA(t,e,!0,!1)})}function BA(n,e,t,r){return b(this,null,function*(){let i=yield iB(n.localStore,Xt(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield bB(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&PA(n.remoteStore,i),a})}function bB(n,e,t,r,i){return b(this,null,function*(){n.Ka=(p,m,v)=>function(M,R,k,B){return b(this,null,function*(){let F=R.view.ma(k);F.ns&&(F=yield CS(M.localStore,R.query,!1).then(({documents:I})=>R.view.ma(I,F)));let H=B&&B.targetChanges.get(R.targetId),te=B&&B.targetMismatches.get(R.targetId)!=null,$=R.view.applyChanges(F,M.isPrimaryClient,H,te);return RS(M,R.targetId,$.wa),$.snapshot})}(n,p,m,v);let s=yield CS(n.localStore,e,!0),o=new A_(e,s.Ts),a=o.ma(s.documents),c=Oc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);RS(n,t,l.wa);let h=new x_(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function DB(n,e,t){return b(this,null,function*(){let r=ee(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Wh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield g_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&X_(r.remoteStore,i.targetId),N_(r,i.targetId)}).catch(ts))):(N_(r,i.targetId),yield g_(r.localStore,i.targetId,!0))})}function CB(n,e){return b(this,null,function*(){let t=ee(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),X_(t.remoteStore,r.targetId))})}function TB(n,e,t){return b(this,null,function*(){let r=WA(n);try{let i=yield function(o,a){let c=ee(o),l=je.now(),h=a.reduce((v,T)=>v.add(T.key),ue()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=Bt(),M=ue();return c.cs.getEntries(v,h).next(R=>{T=R,T.forEach((k,B)=>{B.isValidDocument()||(M=M.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,T)).next(R=>{p=R;let k=[];for(let B of a){let F=Pj(B,p.get(B.key).overlayedDocument);F!=null&&k.push(new kn(B.key,F,GS(F.value.mapValue),mn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(v,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:tA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Fe(ie)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield zc(r,i.changes),yield qc(r.remoteStore)}catch(i){let s=rw(i,"Failed to persist write");t.reject(s)}})}function $A(n,e){return b(this,null,function*(){let t=ee(n);try{let r=yield tB(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?z(o.va):i.removedDocuments.size>0&&(z(o.va),o.va=!1))}),yield zc(t,r,e)}catch(r){yield ts(r)}})}function xS(n,e,t){let r=ee(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=ee(o);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&iw(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function SB(n,e,t){return b(this,null,function*(){let r=ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Fe(j.comparator);o=o.insert(s,it.newNoDocument(s,Q.min()));let a=ue().add(s),c=new oh(Q.min(),new Map,new Fe(ie),o,a);yield $A(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),sw(r)}else yield g_(r.localStore,e,!1).then(()=>N_(r,e,t)).catch(ts)})}function AB(n,e){return b(this,null,function*(){let t=ee(n),r=e.batch.batchId;try{let i=yield eB(t.localStore,e);qA(t,r,null),HA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield zc(t,i)}catch(i){yield ts(i)}})}function xB(n,e,t){return b(this,null,function*(){let r=ee(n);try{let i=yield function(o,a){let c=ee(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(z(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);qA(r,e,t),HA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield zc(r,i)}catch(i){yield ts(i)}})}function HA(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function qA(n,e,t){let r=ee(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function N_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||zA(n,r)})}function zA(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(X_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),sw(n))}function RS(n,e,t){for(let r of t)r instanceof Ph?(n.La.addReference(r.key,e),RB(n,r)):r instanceof Oh?(P("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||zA(n,r.key)):q()}function RB(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(P("SyncEngine","New document in limbo: "+t),n.xa.add(r),sw(n))}function sw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new j(Ae.fromString(e)),r=n.qa.next();n.Na.set(r,new R_(t)),n.Oa=n.Oa.insert(t,r),PA(n.remoteStore,new No(Xt(Gh(t.path)),r,"TargetPurposeLimboResolution",pn.oe))}}function zc(n,e,t){return b(this,null,function*(){let r=ee(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=h_.Wi(c.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return b(this,null,function*(){let h=ee(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>A.forEach(l,m=>A.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>A.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Yr(p))throw p;P("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),T=v.snapshotVersion,M=v.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(m,M)}}})}(r.localStore,s))})}function MB(n,e){return b(this,null,function*(){let t=ee(n);if(!t.currentUser.isEqual(e)){P("SyncEngine","User change. New user:",e.toKey());let r=yield MA(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new U(N.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield zc(t,r.hs)}})}function NB(n,e){let t=ee(n),r=t.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function GA(n){let e=ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$A.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SB.bind(null,e),e.Ca.d_=_B.bind(null,e.eventManager),e.Ca.$a=wB.bind(null,e.eventManager),e}function WA(n){let e=ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xB.bind(null,e),e}var P_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=Kh(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return RA(this.persistence,new bh,t.initialUser,this.serializer)}Ga(t){return new Ih(Eh.Zr,this.serializer)}Wa(t){return new Ch}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var O_=class n extends P_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){yield Nf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield WA(this.Ja.syncEngine),yield qc(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return RA(this.persistence,new bh,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Yv(r,e.asyncQueue,t)}Ha(e,t){let r=new hv(t,this.persistence);return new dv(e.asyncQueue,r)}Ga(e){let t=Xj(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new d_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,aB(),Wd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Ch}};var KA=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=MB.bind(null,this.syncEngine),yield vB(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new T_}()}createDatastore(t){let r=Kh(t.databaseInfo.databaseId),i=function(o){return new v_(o)}(t.databaseInfo);return function(o,a,c,l){return new I_(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new b_(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>xS(this.syncEngine,r,0),function(){return Th.D()?new Th:new m_}())}createSyncEngine(t,r){return function(s,o,a,c,l,h,p){let m=new M_(s,o,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield function(s){return b(this,null,function*(){let o=ee(s);P("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Hc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var kh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):vt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var k_=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qe.UNAUTHENTICATED,this.clientId=Qd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>b(this,null,function*(){P("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(P("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=rw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ev(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield MA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function MS(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield PB(n);P("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>TS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>TS(e.remoteStore,i)),n._onlineComponents=e})}function PB(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){P("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ev(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Wi("Error using user provided cache. Falling back to memory cache: "+t),yield ev(n,new P_)}}else P("FirestoreClient","Using default OfflineComponentProvider"),yield ev(n,new P_);return n._offlineComponents})}function QA(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(P("FirestoreClient","Using user provided OnlineComponentProvider"),yield MS(n,n._uninitializedComponentsProvider._online)):(P("FirestoreClient","Using default OnlineComponentProvider"),yield MS(n,new KA))),n._onlineComponents})}function OB(n){return QA(n).then(e=>e.syncEngine)}function YA(n){return b(this,null,function*(){let e=yield QA(n),t=e.eventManager;return t.onListen=IB.bind(null,e.syncEngine),t.onUnlisten=DB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=EB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=CB.bind(null,e.syncEngine),t})}function kB(n,e,t={}){let r=new Jt;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,a,c,l){let h=new kh({next:m=>{h.Za(),o.enqueueAndForget(()=>jA(s,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new U(N.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?l.reject(new U(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Nh(Gh(a.path),h,{includeMetadataChanges:!0,_a:!0});return UA(s,p)}(yield YA(n),n.asyncQueue,e,t,r)})),r.promise}function FB(n,e,t={}){let r=new Jt;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,a,c,l){let h=new kh({next:m=>{h.Za(),o.enqueueAndForget(()=>jA(s,p)),m.fromCache&&c.source==="server"?l.reject(new U(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Nh(a,h,{includeMetadataChanges:!0,_a:!0});return UA(s,p)}(yield YA(n),n.asyncQueue,e,t,r)})),r.promise}function ZA(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var NS=new Map;function JA(n,e,t){if(!t)throw new U(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LB(n,e,t,r){if(e===!0&&r===!0)throw new U(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PS(n){if(!j.isDocumentKey(n))throw new U(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function OS(n){if(j.isDocumentKey(n))throw new U(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ow(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q()}function Qr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new U(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ow(n);throw new U(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Fh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new U(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new U(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new U(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ko=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tv;switch(r.type){case"firstParty":return new sv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=NS.get(t);r&&(P("ComponentProvider","Removing Datastore"),NS.delete(t),r.terminate())}(this),Promise.resolve()}};function XA(n,e,t,r={}){var i;let s=(n=Qr(n,ko))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Qe.MOCK_USER;else{a=wd(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new U(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Qe(l)}n._authCredentials=new nv(new Kd(a,c))}}var Lh=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},$t=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Br=class n extends Lh{constructor(e,t,r){super(e,t,Gh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new j(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ex(n,e,...t){if(n=Vt(n),JA("collection","path",e),n instanceof ko){let r=Ae.fromString(e,...t);return OS(r),new Br(n,null,r)}{if(!(n instanceof $t||n instanceof Br))throw new U(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ae.fromString(e,...t));return OS(r),new Br(n.firestore,null,r)}}function tx(n,e,...t){if(n=Vt(n),arguments.length===1&&(e=Qd.newId()),JA("doc","path",e),n instanceof ko){let r=Ae.fromString(e,...t);return PS(r),new $t(n,null,new j(r))}{if(!(n instanceof $t||n instanceof Br))throw new U(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ae.fromString(e,...t));return PS(r),new $t(n.firestore,n instanceof Br?n.converter:null,new j(r))}}var Vh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Sh(this,"async_queue_retry"),this.Vu=()=>{let r=Wd();r&&P("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Wd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Wd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Jt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return b(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yr(e))throw e;P("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw vt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=D_.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&q()}verifyOperationInProgress(){}wu(){return b(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var es=class extends ko{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Vh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Vh(e),this._firestoreClient=void 0,yield e}})}};function nx(n,e){let t=typeof n=="object"?n:Ai(),r=typeof n=="string"?n:e||"(default)",i=ac(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=_d("firestore");s&&XA(i,...s)}return i}function aw(n){if(n._terminated)throw new U(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rx(n),n._firestoreClient}function rx(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,h){return new fv(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ZA(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new k_(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function ix(n,e){Wi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return VB(n,KA.provider,{build:r=>new O_(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function VB(n,e,t){if((n=Qr(n,es))._firestoreClient||n._terminated)throw new U(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new U(N.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},rx(n)}var Lc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ze.fromBase64String(e))}catch(t){throw new U(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Vc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new U(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Uh=class{constructor(e){this._methodName=e}};var Uc=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new U(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}};var jc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var UB=/^__.*__$/,F_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new kn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wr(e,this.data,t,this.fieldTransforms)}};function sx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}var L_=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sx(this.Cu)&&UB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},V_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Kh(e)}Qu(e,t,r,i=!1){return new L_({Cu:e,methodName:t,qu:r,path:Ye.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function jB(n){let e=n._freezeSettings(),t=Kh(n._databaseId);return new V_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BB(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);ux("Data must be an object, but it was:",o,r);let a=ax(r,o),c,l;if(s.merge)c=new gn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=$B(e,p,t);if(!o.contains(m))throw new U(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);qB(h,m)||h.push(m)}c=new gn(h),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new F_(new jt(a),c,l)}function ox(n,e){if(cx(n=Vt(n)))return ux("Unsupported field value:",e,n),ax(n,e);if(n instanceof Uh)return function(r,i){if(!sx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=ox(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Aj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=je.fromDate(r);return{timestampValue:Mo(i.serializer,s)}}if(r instanceof je){let s=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mo(i.serializer,s)}}if(r instanceof Uc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lc)return{bytesValue:dA(i.serializer,r._byteString)};if(r instanceof $t){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Z_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Y_(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ow(r)}`)}(n,e)}function ax(n,e){let t={};return HS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lo(n,(r,i)=>{let s=ox(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function cx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof je||n instanceof Uc||n instanceof Lc||n instanceof $t||n instanceof Uh||n instanceof jc)}function ux(n,e,t){if(!cx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=ow(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function $B(n,e,t){if((e=Vt(e))instanceof Vc)return e._internalPath;if(typeof e=="string")return lx(n,e);throw jh("Field path arguments must be of type string or ",n,!1,void 0,t)}var HB=new RegExp("[~\\*/\\[\\]]");function lx(n,e,t){if(e.search(HB)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vc(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jh(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new U(N.INVALID_ARGUMENT,a+n+c)}function qB(n,e){return n.some(t=>t.isEqual(e))}var Bh=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new U_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(dx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},U_=class extends Bh{data(){return super.data()}};function dx(n,e){return typeof e=="string"?lx(n,e):e instanceof Vc?e._internalPath:e._delegate._internalPath}function zB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var j_=class{convertValue(e,t="none"){switch(Ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Lo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Oe(o.doubleValue));return new jc(s)}convertGeoPoint(e){return new Uc(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=W_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ac(e));default:return null}}convertTimestamp(e){let t=nr(e);return new je(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ae.fromString(e);z(IA(r));let i=new Do(r.get(1),r.get(3)),s=new j(r.popFirst(5));return i.isEqual(t)||vt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function GB(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Hi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},$h=class extends Bh{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new wo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(dx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},wo=class extends $h{data(e={}){return super.data(e)}},B_=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wo(this._firestore,this._userDataWriter,r.key,r,new Hi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new U(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new wo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new wo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:WB(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function WB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}function hx(n){n=Qr(n,$t);let e=Qr(n.firestore,es);return kB(aw(e),n._key).then(t=>QB(e,n,t))}var Hh=class extends j_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}};function fx(n){n=Qr(n,Lh);let e=Qr(n.firestore,es),t=aw(e),r=new Hh(e);return zB(n._query),FB(t,n._query).then(i=>new B_(e,r,n,i))}function px(n,e,t){n=Qr(n,$t);let r=Qr(n.firestore,es),i=GB(n.converter,e,t);return KB(r,[BB(jB(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,mn.none())])}function KB(n,e){return function(r,i){let s=new Jt;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return TB(yield OB(r),i,s)})),s.promise}(aw(n),e)}function QB(n,e,t){let r=t.docs.get(e._key),i=new Hh(n);return new $h(n,i,e._key,r,new Hi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Fo=i})(Pr),xn(new Mt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new es(new rv(r.getProvider("auth-internal")),new av(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new U(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Do(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ke(FT,"4.7.3",e),ke(FT,"4.7.3","esm2017")})();var rr=class{constructor(e){return e}},gx="firestore",cw=class{constructor(){return Mi(gx)}};var uw=new K("angularfire2.firestore-instances");function YB(n,e){let t=cc(gx,n,e);return t&&new rr(t)}function ZB(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new rr(r)}}var JB={provide:cw,deps:[[new nt,uw]]},XB={provide:rr,useFactory:YB,deps:[[new nt,uw],Xn]};function mx(n,...e){return ke("angularfire",Or.full,"fst"),Cn([XB,JB,{provide:uw,useFactory:ZB(n),multi:!0,deps:[be,bt,Ni,Pi,[new nt,so],[new nt,Ri],...e]}])}var Yh=Ut(ex,!0);var ir=Ut(tx,!0);var yx=Ut(ix,!0);var rs=Ut(hx,!0);var Zh=Ut(fx,!0);var vx=Ut(nx,!0);var Jh=Ut(px,!0);var Uo=class n{cache={};get(e){return this.cache[e]}set(e,t){this.cache[e]=t}clear(e){delete this.cache[e]}clearAll(){this.cache={}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var tn=class n{constructor(e,t){this.firestore=e;this.cacheService=t;yx(this.firestore).catch(r=>{r.code=="failed-precondition"?console.warn("Persistencia fallida: m\xFAltiples pesta\xF1as abiertas en AuthService."):r.code=="unimplemented"&&console.warn("Persistencia no soportada en este navegador.")})}userExists(e){return b(this,null,function*(){try{if(this.cacheService.get(`user_${e}`))return console.log("Usuario encontrado en cach\xE9, evitando consulta en Firestore."),!0;let r=ir(this.firestore,`users/${e}`),i=yield rs(r);return i.exists()?(console.log("Usuario encontrado en Firestore."),this.cacheService.set(`user_${e}`,i.data()),!0):(console.warn("Usuario no encontrado en Firestore."),!1)}catch(t){return console.error("Error al verificar si el usuario existe:",t),!1}})}setUserSession(e){return b(this,null,function*(){let t=this.cacheService.get(`user_${e}`);if(t){console.log("Datos de usuario obtenidos del cach\xE9."),this.storeUserDataInLocalStorage(e,t);return}let r=ir(this.firestore,`users/${e}`),i=yield rs(r);if(i.exists()){let s=i.data();this.storeUserDataInLocalStorage(e,s),this.cacheService.set(`user_${e}`,s)}else console.error("El usuario no existe en la base de datos.")})}storeUserDataInLocalStorage(e,t){let r=t?.nombre||"",i=t?.correo||"",s=t?.telefono||"";localStorage.setItem("username",e),localStorage.setItem("name",r),localStorage.setItem("email",i),localStorage.setItem("phone",s)}hasSeenWelcome(e){return b(this,null,function*(){if(localStorage.getItem("welcomeSeen")==="true")return!0;let r=ir(this.firestore,`users/${e}`),i=yield rs(r),s=i.exists()&&i.data()?.welcomeSeen===!0;return s&&localStorage.setItem("welcomeSeen","true"),s})}markWelcomeAsSeen(e){return b(this,null,function*(){let t=ir(this.firestore,`users/${e}`);yield Jh(t,{welcomeSeen:!0},{merge:!0}),localStorage.setItem("welcomeSeen","true")})}isUserLoggedIn(){return localStorage.getItem("username")!==null}getUsername(){return localStorage.getItem("username")}getName(){return localStorage.getItem("name")}setTema(e){localStorage.setItem("tema",e)}getTema(){return localStorage.getItem("tema")}getUserSellos(e,t=!1){return b(this,null,function*(){let r=`user_sellos_${e}`;if(!t){let a=this.cacheService.get(r);if(a)return console.log("Sellos del usuario obtenidos del cach\xE9."),a}let i=Yh(this.firestore,`users/${e}/sellos`),s=yield Zh(i),o={};return s.forEach(a=>{let c=a.id,l=a.data();o[c]=l.completed===!0}),this.cacheService.set(r,o),o})}static \u0275fac=function(t){return new(t||n)(Z(rr),Z(Uo))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xh=class n{constructor(e,t){this.authService=e;this.router=t}username="";errorMessage="";login(){return b(this,null,function*(){if(this.errorMessage="",this.username.trim())try{if(yield this.authService.userExists(this.username)){yield this.authService.setUserSession(this.username);let t=yield this.authService.hasSeenWelcome(this.username),i=new URLSearchParams(window.location.search).get("nextUrl")||"/pasaporte";t?this.router.navigateByUrl(i):this.router.navigate(["/bienvenida"],{queryParams:{nextUrl:i}})}else this.errorMessage="El usuario no existe. Por favor, intenta con otro nombre."}catch(e){this.errorMessage="Ocurri\xF3 un error al iniciar sesi\xF3n. Por favor, intenta nuevamente.",console.error(e)}else this.errorMessage="Por favor, ingresa un nombre de usuario."})}static \u0275fac=function(t){return new(t||n)(J(tn),J(xt))};static \u0275cmp=Dt({type:n,selectors:[["app-login"]],standalone:!0,features:[Kt],decls:19,vars:2,consts:[[1,"background-container"],[1,"login-container"],[1,"login-box"],[1,"logo"],["src","imgs/wow-logo.png","alt","Logo OWOW"],[1,"welcome-title"],[1,"subtitle"],[1,"input-group"],[1,"input-icon"],["src","imgs/mail-icon.png","alt","Logo OWOW"],["type","text","placeholder","Correo electr\xF3nico",1,"input-field",3,"ngModelChange","ngModel"],["NgIf","errorMessage",1,"error-message"],[1,"login-button",3,"click"],[1,"button-icon"],["src","imgs/btn-login.png","alt","Logo OWOW"]],template:function(t,r){t&1&&(Y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Re(4,"img",4),ne(),Y(5,"h1",5),Me(6,"\xA1Bienvenido!"),ne(),Y(7,"p",6),Me(8,"Inicia Sesi\xF3n"),ne(),Y(9,"div",7)(10,"span",8),Re(11,"img",9),ne(),Y(12,"input",10),Zg("ngModelChange",function(s){return n0(r.username,s)||(r.username=s),s}),ne()(),Y(13,"p",11),Me(14),ne(),Y(15,"button",12),St("click",function(){return r.login()}),Y(16,"span",13),Re(17,"img",14),ne(),Me(18," Ingresar "),ne()()()()),t&2&&(Pe(12),Yg("ngModel",r.username),Pe(2),xa(r.errorMessage))},dependencies:[$C,gd,UC,oy],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;width:100vw;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#ec671f}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-end;height:100vh;width:100%;padding:0;box-sizing:border-box;position:relative;z-index:1}.login-box[_ngcontent-%COMP%]{background-color:#611f78;border-radius:20px 20px 0 0;padding:20px 30px 40px;width:75%;max-width:320px;min-height:80vh;box-shadow:0 -4px 12px #0000001a;text-align:left;display:flex;flex-direction:column;justify-content:flex-start;border:3px solid #ffffff}.logo[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:40px;width:25vh}.welcome-title[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:bold;font-size:2.5rem;color:#fff;font-weight:700;text-align:center;margin-bottom:10px}.subtitle[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:bold;font-size:1.4rem;color:#fff;text-align:center;margin-top:0;margin-bottom:5px}.error-message[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;color:#fff;font-size:14px;text-align:center;margin-top:10px;text-align:left}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff;border-radius:50px;padding:12px;margin-top:50px}.input-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-right:30px;margin-left:10px}.input-field[_ngcontent-%COMP%]{border:none;outline:none;background:transparent;width:100%;font-size:16px;color:#333}.input-field[_ngcontent-%COMP%]::placeholder{color:#601f788a}.login-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:transparent;color:#fff;border:none;border-radius:25px;padding:10px;font-size:1rem;font-weight:700;cursor:pointer;transition:background-color .3s ease;border:2px solid #ffffff;margin:20px auto 0;width:180px}.login-button[_ngcontent-%COMP%]:hover{background-color:#5a3b7d}.button-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-right:8px}"]})};var ef=class n{constructor(e,t,r){this.authService=e;this.router=t;this.route=r}username="";name="";nextUrl=null;ngOnInit(){return b(this,null,function*(){this.username=this.authService.getUsername(),this.name=this.authService.getName(),this.username&&(yield this.authService.markWelcomeAsSeen(this.username));let e=new URLSearchParams(window.location.search);this.nextUrl=e.get("nextUrl")||"/pasaporte"})}continue(){this.nextUrl?this.router.navigateByUrl(this.nextUrl):this.router.navigate(["pasaporte"])}static \u0275fac=function(t){return new(t||n)(J(tn),J(xt),J(At))};static \u0275cmp=Dt({type:n,selectors:[["app-bienvenida"]],decls:21,vars:1,consts:[[1,"background-container"],[1,"header"],[1,"greeting"],[1,"morning-text"],[1,"user-name"],[1,"profile-image"],["src","imgs/user.png","alt","Perfil de Usuario"],[1,"welcome-container"],[1,"welcome-box"],[1,"logo"],["src","imgs/wow-simple-logo.png","alt","Logo OWOW"],[1,"welcome-title"],[1,"welcome-content"],[1,"txt-content"],[1,"btn-zone"],[1,"continue-button",3,"click"]],template:function(t,r){t&1&&(Y(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),Me(4,"\xA1Buenos d\xEDas!"),ne(),Y(5,"h2",4),Me(6),ne()(),Y(7,"div",5),Re(8,"img",6),ne()(),Y(9,"div",7)(10,"div",8)(11,"div",9),Re(12,"img",10),ne(),Y(13,"h2",11),Me(14,"Bienvenido a una experiencia WOW"),ne(),Y(15,"div",12)(16,"p",13),Me(17," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod malesuada. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod malesuada. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod malesuada. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod malesuada. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod malesuada. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod malesuada. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod malesuada. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod malesuada. "),ne(),Y(18,"div",14)(19,"button",15),St("click",function(){return r.continue()}),Me(20,"Continuar"),ne()()()()()()),t&2&&(Pe(6),kt("Hola ",r.name,""))},styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;width:100vw;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;width:100%;box-sizing:border-box;color:#fff;margin-top:40px}.greeting[_ngcontent-%COMP%]{display:flex;flex-direction:column}.morning-text[_ngcontent-%COMP%]{font-size:20px;font-family:DM Sans,sans-serif;font-style:normal;margin:0;color:#f1d7ff}.user-name[_ngcontent-%COMP%]{font-size:26px;font-family:DM Sans,sans-serif;font-style:bold;margin:8px 0 0}.profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;border:2px solid #ffffff}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#ec671f}.welcome-container[_ngcontent-%COMP%]{z-index:1;display:flex;justify-content:center;align-items:flex-end;height:100vh;width:100%;padding:0;box-sizing:border-box;position:relative;overflow:auto}.welcome-box[_ngcontent-%COMP%]{background-color:#611f78;border-radius:20px 20px 0 0;padding:20px;width:90%;height:calc(100vh - 10px);box-sizing:border-box;box-shadow:0 -4px 12px #0000001a;border:3px solid #ffffff}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75px;object-fit:contain}.welcome-title[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:bold;font-size:24px;height:auto;margin-top:10px;margin-bottom:10px;color:#fff;font-weight:700;text-align:center}.welcome-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.txt-content[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:normal;font-size:14px;overflow-y:auto;height:35vh;padding:10px;color:#fff;font-weight:400;margin:0;flex-grow:.3;text-align:left}.continue-button[_ngcontent-%COMP%]{display:block;margin:10px auto 0;padding:15px 30px;font-size:18px;font-weight:700;color:#fff;background-color:#dd5b22;border:none;border-radius:25px;box-shadow:0 4px 8px #0003;cursor:pointer;transition:all .2s ease}.continue-button[_ngcontent-%COMP%]:hover{background-color:#bb4a1c}.continue-button[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:0 2px 4px #0003}"]})};var tf=class n{constructor(e,t){this.firestore=e;this.cacheService=t}getTriviaData(e){return b(this,null,function*(){let t=this.cacheService.get(`trivia_${e}`);if(t)return console.log("Datos de trivia obtenidos del cach\xE9."),t;let r=localStorage.getItem(`trivia_${e}`);if(r){let o=JSON.parse(r);return this.cacheService.set(`trivia_${e}`,o),console.log("Datos de trivia obtenidos de localStorage."),o}let i=yield rs(ir(this.firestore,`trivia/${e}`)),s=i.exists()?i.data():null;return s&&(this.cacheService.set(`trivia_${e}`,s),localStorage.setItem(`trivia_${e}`,JSON.stringify(s))),s})}getQuestionsByTema(e){return b(this,null,function*(){let t=this.cacheService.get(`questions_${e}`);if(t)return console.log("Preguntas obtenidas del cach\xE9."),t;let r=Yh(this.firestore,`trivia/${e}/preguntas`),s=(yield Zh(r)).docs.map(o=>L({id:o.id},o.data()));return this.cacheService.set(`questions_${e}`,s),s})}hasSello(e,t){return b(this,null,function*(){let r=`completed_${e}_${t}`,i=this.cacheService.get(r);if(i!==void 0)return console.log("Estado de trivia completada obtenido del cach\xE9."),i;let s=ir(this.firestore,`users/${e}/sellos/${t}`),o=yield rs(s),a=o.exists()&&o.data()?.completed===!0;return this.cacheService.set(r,a),a})}markTriviaAsCompleted(e,t){return b(this,null,function*(){let r=ir(this.firestore,`users/${e}/sellos/${t}`);yield Jh(r,{completed:!0},{merge:!0}),this.cacheService.set(`completed_${e}_${t}`,!0)})}static \u0275fac=function(t){return new(t||n)(Z(rr),Z(Uo))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var t$=(n,e,t)=>({opcion:!0,selected:n,correct:e,incorrect:t});function n$(n,e){if(n&1){let t=e0();Y(0,"button",24),St("click",function(){let i=Nb(t).$implicit,s=Tn();return Pb(s.handleOptionClick(i))}),Me(1),ne()}if(n&2){let t=e.$implicit,r=Tn();ut("ngClass",i0(2,t$,r.selectedAnswer===t,r.showFeedback&&t===(r.currentQuestion==null?null:r.currentQuestion.respuesta),r.showFeedback&&t!==(r.currentQuestion==null?null:r.currentQuestion.respuesta)&&r.selectedAnswer===t)),Pe(),kt(" ",r.currentQuestion==null?null:r.currentQuestion[t]," ")}}var nf=class n{constructor(e,t,r,i){this.triviaService=e;this.route=t;this.router=r;this.authService=i}trivia="";questions=[];answeredQuestions=new Set;currentQuestionIndex=0;currentQuestion;feedbackMessage="";feedbackClass="";isAnswered=!1;sello="";objetivo=0;answeredCorrectly=0;userId="";timeLeft=12;timerInterval;selectedAnswer=null;showFeedback=!1;name="";ngOnInit(){return b(this,null,function*(){this.trivia=this.route.snapshot.paramMap.get("tema"),this.sello=this.route.snapshot.paramMap.get("sello"),this.userId=this.authService.getUsername()||"",this.name=this.authService.getName();let e=localStorage.getItem(`answeredQuestions_${this.trivia}`);if(e&&(this.answeredQuestions=new Set(JSON.parse(e))),this.sello){if(yield this.triviaService.hasSello(this.userId,this.sello)){this.router.navigate(["/pasaporte"]);return}yield this.loadTriviaData()}})}ngOnDestroy(){this.clearTimer()}handleOptionClick(e){if(this.isAnswered||this.showFeedback)return;this.selectedAnswer=e,this.isAnswered=!0,this.clearTimer();let t=this.currentQuestion.respuesta.toString();setTimeout(()=>{if(e===t){if(this.feedbackMessage="\xA1Correcto!",this.feedbackClass="feedback-box show",this.answeredQuestions.add(this.currentQuestion.id),localStorage.setItem(`answeredQuestions_${this.trivia}`,JSON.stringify([...this.answeredQuestions])),this.answeredCorrectly++,this.answeredCorrectly>=this.objetivo){console.log("\xA1Objetivo cumplido! Completando trivia..."),this.completeTrivia();return}}else this.feedbackMessage="\xA1Sigue intentando!",this.feedbackClass="feedback-box show";setTimeout(()=>{this.feedbackClass="feedback-box",this.resetForNextQuestion()},2e3)},500)}resetForNextQuestion(){if(this.showFeedback=!1,this.feedbackMessage="",this.feedbackClass="",this.selectedAnswer=null,this.isAnswered=!1,this.currentQuestionIndex>=this.questions.length-1){console.log("No hay m\xE1s preguntas. Reiniciando preguntas no contestadas."),this.resetUnansweredQuestions();return}this.currentQuestionIndex++,this.currentQuestion=this.questions[this.currentQuestionIndex],this.startTimer()}nextQuestion(){this.resetFeedback(),this.currentQuestionIndex<this.questions.length-1?(this.currentQuestionIndex++,this.currentQuestion=this.questions[this.currentQuestionIndex],this.startTimer()):this.resetUnansweredQuestions()}resetUnansweredQuestions(){return b(this,null,function*(){let e=this.questions.filter(t=>!this.answeredQuestions.has(t.id));if(e.length===0){console.log("No hay m\xE1s preguntas no contestadas. Cargando nuevas preguntas desde la base de datos.");let t=yield this.triviaService.getQuestionsByTema(this.trivia);if(t&&t.length>0){let r=this.shuffleArray(t).slice(0,5);this.questions=r,this.answeredQuestions.clear()}else console.error("No se pudieron cargar nuevas preguntas."),this.questions=[]}else console.log("Reiniciando preguntas no contestadas."),this.questions=this.shuffleArray(e);this.questions.length>0?(this.currentQuestionIndex=0,this.currentQuestion=this.questions[this.currentQuestionIndex],this.startTimer()):console.error("No hay preguntas disponibles. Verifica la base de datos.")})}startTimer(){let e=document.querySelector(".progress-ring__circle"),r=2*Math.PI*35;e&&(e.style.strokeDasharray=`${r} ${r}`,e.style.strokeDashoffset=`${r}`),this.timeLeft=12,this.timerInterval=setInterval(()=>{if(this.timeLeft>0){this.timeLeft--;let i=r-this.timeLeft/12*r;e&&(e.style.strokeDashoffset=`${i}`)}else clearInterval(this.timerInterval),this.handleTimeout()},1e3)}handleTimeout(){this.clearTimer(),this.showFeedback=!0,this.feedbackMessage="Tiempo agotado",this.feedbackClass="feedback-overlay show incorrecto",this.isAnswered=!0,setTimeout(()=>{this.resetForNextQuestion()},2e3)}clearTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)}loadTriviaData(){return b(this,null,function*(){let e=yield this.triviaService.getTriviaData(this.trivia);e&&(this.objetivo=Number(e.objetivo)||0,yield this.loadQuestions())})}loadQuestions(){return b(this,null,function*(){this.questions=this.shuffleArray((yield this.triviaService.getQuestionsByTema(this.trivia)).filter(e=>!this.answeredQuestions.has(e.id))),this.currentQuestionIndex=0,this.currentQuestion=this.questions[this.currentQuestionIndex],this.startTimer()})}shuffleArray(e){for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}getOptionKeys(e){return Object.keys(e).filter(t=>!isNaN(Number(t))).sort()}completeTrivia(){return b(this,null,function*(){if(!this.sello){console.error("No se puede completar la trivia: Sello es null o indefinido.");return}yield this.triviaService.markTriviaAsCompleted(this.userId,this.sello),this.router.navigate(["/felicitacion"],{queryParams:{sello:this.sello}})})}resetFeedback(){this.isAnswered=!1,this.feedbackMessage="",this.feedbackClass="",this.selectedAnswer=""}static \u0275fac=function(t){return new(t||n)(J(tf),J(At),J(xt),J(tn))};static \u0275cmp=Dt({type:n,selectors:[["app-trivia"]],standalone:!0,features:[Kt],decls:29,vars:6,consts:[[1,"background-container"],[1,"header"],[1,"greeting"],[1,"user-name"],[1,"morning-text"],[1,"profile-image"],["src","imgs/user.png","alt","Perfil de Usuario"],[1,"trivia-container"],["src","imgs/wow-circulos.png","alt","WOW Circulos",1,"background-image"],[1,"trivia-box"],[1,"header-with-timer"],[1,"logo"],["src","imgs/wow-simple-logo.png","alt","Logo OWOW"],[1,"timer-circle"],["width","80","height","80",1,"progress-ring"],["cx","40","cy","40","r","35","stroke-width","5","fill","transparent",1,"progress-ring__circle"],[1,"timer-text"],[1,"pregunta-card"],["src","imgs/pregunta-card.png","alt","Pregunta Card",1,"pregunta-card-image"],[1,"pregunta-text"],[1,"opciones-container"],[1,"opciones"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"feedback-box",3,"ngClass"],[3,"click","ngClass"]],template:function(t,r){t&1&&(Y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),Me(4),ne(),Y(5,"p",4),Me(6,"\xA1Juguemos!"),ne()(),Y(7,"div",5),Re(8,"img",6),ne()(),Y(9,"div",7),Re(10,"img",8),Y(11,"div",9)(12,"div",10)(13,"div",11),Re(14,"img",12),ne(),Y(15,"div",13),qb(),Y(16,"svg",14),Re(17,"circle",15),ne(),zb(),Y(18,"div",16),Me(19),ne()()(),Y(20,"div",17),Re(21,"img",18),Y(22,"div",19),Me(23),ne()(),Y(24,"div",20)(25,"div",21),Ar(26,n$,2,6,"button",22),ne()(),Y(27,"div",23),Me(28),ne()()()()),t&2&&(Pe(4),kt("Hola ",r.name,""),Pe(15),xa(r.timeLeft),Pe(4),kt(" ",r.currentQuestion==null?null:r.currentQuestion.id," "),Pe(3),ut("ngForOf",r.getOptionKeys(r.currentQuestion)),Pe(),ut("ngClass",r.feedbackClass),Pe(),kt(" ",r.feedbackMessage," "))},dependencies:[Ei,zl,Gl],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;width:100vw;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;width:100%;box-sizing:border-box;color:#fff;margin-top:40px}.greeting[_ngcontent-%COMP%]{display:flex;flex-direction:column}.morning-text[_ngcontent-%COMP%]{font-size:20px;font-family:DM Sans,sans-serif;font-style:normal;margin:0;color:#f1d7ff}.user-name[_ngcontent-%COMP%]{font-size:26px;font-family:DM Sans,sans-serif;font-style:bold;margin:8px 0 0}.profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;border:2px solid #ffffff}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#ec671f}.trivia-container[_ngcontent-%COMP%]{z-index:1;display:flex;justify-content:center;align-items:flex-end;height:100vh;width:100%;padding:0;box-sizing:border-box;position:relative;overflow:auto}.background-image[_ngcontent-%COMP%]{position:absolute;top:45%;left:50%;transform:translate(-50%,-50%);width:auto;height:auto;max-width:87%;max-height:100%;z-index:0;pointer-events:none}.trivia-box[_ngcontent-%COMP%]{background-color:#611f78;border-radius:20px 20px 0 0;padding:20px 30px 40px;width:75%;max-width:320px;min-height:90vh;box-shadow:0 -4px 12px #0000001a;text-align:left;display:flex;flex-direction:column;justify-content:flex-start;border:3px solid #ffffff}.header-with-timer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:10px;width:100%}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15vh;object-fit:contain}.timer-circle[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:7vh;height:7vh;border-radius:50%;background-color:#fff;box-shadow:0 4px 8px #0003;margin-left:10px;position:relative}.progress-ring[_ngcontent-%COMP%]{position:absolute;transform:rotate(-90deg)}.progress-ring__circle[_ngcontent-%COMP%]{stroke:#dd5b22;stroke-dasharray:230;stroke-dashoffset:230;transition:stroke-dashoffset 1s linear;stroke-linecap:round;stroke-width:4;fill:none}.timer-text[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:bold;font-size:1.3em;font-weight:700;color:#4a1861;z-index:1}.trivia-header[_ngcontent-%COMP%]{position:relative;width:100%;height:60px;display:flex;align-items:center;justify-content:space-between;color:#333;font-size:1.2em;padding:0 20px;box-sizing:border-box}.progress-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:#d32f2f;z-index:1;transition:width 1s linear}.trivia-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .trivia-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .trivia-header[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{font-size:1.3em}.title[_ngcontent-%COMP%]{font-weight:700;flex:1;text-align:left}.timer[_ngcontent-%COMP%]{font-weight:700;margin-left:auto;font-size:1.1em}.image-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-top:20px}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border-radius:8px;box-shadow:0 4px 8px #0003}.pregunta-card[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;max-width:350px;margin:18px auto -5px}.pregunta-card-image[_ngcontent-%COMP%]{width:100%;border-radius:10px;object-fit:cover}.pregunta-text[_ngcontent-%COMP%]{position:absolute;font-family:DM Sans,sans-serif;font-style:normal;font-size:1.3em;font-weight:700;color:#611f78;text-align:center;padding:10px;word-wrap:break-word;max-width:90%}.opciones-container[_ngcontent-%COMP%]{position:relative;z-index:1;background-color:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 10px #0000001a;margin:0 auto;width:100%;max-width:350px;text-align:center}.opciones-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 10px #0000001a;margin:20px auto;width:250px;text-align:center}.opciones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.opcion[_ngcontent-%COMP%]{position:relative;background-color:#611f78;color:#fff;font-family:DM Sans,sans-serif;font-size:14px;font-weight:700;padding:15px;border:none;border-radius:20px;text-align:center;cursor:pointer;box-shadow:5px 7px #4a1861;transition:all .2s ease}.opcion[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px #2e0f3d}.opcion[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:0 2px #2e0f3d}.opcion.selected[_ngcontent-%COMP%]{background-color:#dd5b22;box-shadow:0 4px #8e3c17}.opcion.correct[_ngcontent-%COMP%]{background-color:#4caf50;box-shadow:0 4px #2e7d32}.opcion.incorrect[_ngcontent-%COMP%]{background-color:#f44336;box-shadow:0 4px #b71c1c}.feedback-box[_ngcontent-%COMP%]{position:absolute;border-radius:20px 20px 0 0;padding:20px 30px 40px;width:75%;max-width:320px;min-height:89vh;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#151515b3;color:#fff;font-family:DM Sans,sans-serif;font-style:bold;font-size:3.5em;align-content:center;font-weight:700;box-shadow:0 4px 8px #0000006e;text-align:center;z-index:10;pointer-events:none;opacity:0;transition:opacity .3s ease;text-shadow:-3px -3px 0 #DD5B22,3px -3px 0 #DD5B22,-3px 3px 0 #DD5B22,3px 3px 0 #DD5B22,0px 0px 0 #DD5B22}.feedback-box.show[_ngcontent-%COMP%]{display:block;pointer-events:auto;opacity:1}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f26522;text-align:center;position:absolute;top:0;left:0;width:100%;z-index:999}.spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}.spinner[_ngcontent-%COMP%]   .progress-ring[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate 1.5s linear infinite;width:80px;height:80px}.spinner[_ngcontent-%COMP%]   .progress-ring__circle[_ngcontent-%COMP%]{stroke:#fff;stroke-dasharray:220;stroke-dashoffset:0;animation:_ngcontent-%COMP%_dash 1.5s ease-in-out infinite;transform-origin:center;stroke-width:6;fill:transparent}@keyframes _ngcontent-%COMP%_rotate{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_dash{0%{stroke-dasharray:1,220;stroke-dashoffset:0}50%{stroke-dasharray:150,220;stroke-dashoffset:-75}to{stroke-dasharray:1,220;stroke-dashoffset:-220}}.spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-size:1.5em;color:#fff;margin:0}"]})};function r$(n,e){if(n&1&&Re(0,"img",12),n&2){let t=Tn(2);ut("src",t.currentImage,Sa)}}function i$(n,e){if(n&1&&Re(0,"img",13),n&2){let t=Tn(2);ut("src",t.currentStar,Sa)}}function s$(n,e){if(n&1&&(Y(0,"div",9),Ar(1,r$,1,1,"img",10)(2,i$,1,1,"img",11),ne()),n&2){let t=Tn();Pe(),ut("ngIf",t.currentImage),Pe(),ut("ngIf",t.currentStar)}}function o$(n,e){if(n&1&&(Y(0,"div",14),Me(1),ne()),n&2){let t=Tn();Pe(),kt(" ",t.feedbackMessage," ")}}var rf=class n{constructor(e,t){this.router=e;this.route=t}selloImg=null;starImg=null;selloBackground="";ngOnInit(){this.route.queryParams.subscribe(e=>{let t=e.sello;t&&(this.selloImg=this.backgroundImages[`sello-${t}`]||null,this.starImg=this.backgroundStar[`sello-${t}`]||null,this.selloBackground="sello-"+t)})}feedbackMessage="\xA1Felicidades obtuviste un sello!";currentBackgroundClass="felicidades";backgroundImages={"sello-lima":"imgs/sello-Lima.png","sello-ica":"imgs/sello-Ica.png","sello-chiclayo":"imgs/sello-Chiclayo.png","sello-huancayo":"imgs/sello-Huancayo.png"};backgroundStar={"sello-lima":"imgs/estrella-lima.png","sello-ica":"imgs/estrella-ica.png","sello-chiclayo":"imgs/estrella-chiclayo.png","sello-huancayo":"imgs/estrella-huancayo.png"};currentImage="";currentStar="";actionBtn(){this.isSelloBackground()?this.redirectToPassport():this.setRandomSelloBackground()}isSelloBackground(){return this.backgroundImages.hasOwnProperty(this.currentBackgroundClass)}setRandomSelloBackground(){this.currentBackgroundClass=this.selloBackground,this.updateCurrentImage()}updateCurrentImage(){this.currentImage=this.selloImg||"",this.currentStar=this.starImg||""}redirectToPassport(){this.router.navigate(["/pasaporte"],{queryParams:{forceUpt:!0}})}updateFeedback(e){this.feedbackMessage=e}static \u0275fac=function(t){return new(t||n)(J(xt),J(At))};static \u0275cmp=Dt({type:n,selectors:[["app-felicitacion"]],standalone:!0,features:[Kt],decls:10,vars:3,consts:[[1,"background-container"],[1,"header"],[1,"logo"],["src","imgs/wow-logo-horizontal.png","alt","Logo OWOW"],[1,"home-container"],[1,"home-box",3,"ngClass"],["class","content-container",4,"ngIf"],["class","feedback-text",4,"ngIf"],[1,"continue-button",3,"click"],[1,"content-container"],["alt","Sello","class","sello-image",3,"src",4,"ngIf"],["alt","Estrella","class","star-image",3,"src",4,"ngIf"],["alt","Sello",1,"sello-image",3,"src"],["alt","Estrella",1,"star-image",3,"src"],[1,"feedback-text"]],template:function(t,r){t&1&&(Y(0,"div",0)(1,"div",1)(2,"div",2),Re(3,"img",3),ne()(),Y(4,"div",4)(5,"div",5),Ar(6,s$,3,2,"div",6)(7,o$,2,1,"div",7),Y(8,"button",8),St("click",function(){return r.actionBtn()}),Me(9,"Continuar"),ne()()()()),t&2&&(Pe(5),ut("ngClass",r.currentBackgroundClass),Pe(),ut("ngIf",r.currentImage),Pe(),ut("ngIf",!r.currentImage))},dependencies:[Ei,zl,x0],styles:['body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;width:100vw;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;width:100%;box-sizing:border-box;color:#fff;margin-top:40px}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#ec671f}.logo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-bottom:10px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70%;object-fit:contain}.home-container[_ngcontent-%COMP%]{z-index:1;display:flex;justify-content:center;align-items:flex-end;height:98vh;width:100%;padding:0;box-sizing:border-box;position:relative;overflow:auto}.home-box.felicidades[_ngcontent-%COMP%]{position:relative;border-radius:20px 20px 0 0;padding:20px 30px;width:75%;max-width:320px;min-height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow:hidden;border:3px solid #ffffff;background:repeating-conic-gradient(#4a1861 0deg 6deg,#611f78 6deg 12deg)}.home-box.felicidades[_ngcontent-%COMP%]:before{content:"";position:absolute;top:40%;left:50%;width:200%;height:200%;background:repeating-conic-gradient(#4a1861 0deg 6deg,#611f78 6deg 12deg);transform:translate(-50%,-50%);z-index:0}.home-box.sello-lima[_ngcontent-%COMP%]{position:relative;border-radius:20px 20px 0 0;padding:20px 30px;width:75%;max-width:320px;min-height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow:hidden;border:3px solid #ffffff;background-image:url("./media/fondo-home-QM3F4GHF.jpg");background-size:cover;background-position:center -20px;background-repeat:no-repeat}.home-box.sello-ica[_ngcontent-%COMP%]{position:relative;border-radius:20px 20px 0 0;padding:20px 30px;width:75%;max-width:320px;min-height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow:hidden;border:3px solid #ffffff;background-image:url("./media/fondo-ica-FS32HJKM.jpg");background-size:cover;background-position:center -20px;background-repeat:no-repeat}.home-box.sello-chiclayo[_ngcontent-%COMP%]{position:relative;border-radius:20px 20px 0 0;padding:20px 30px;width:75%;max-width:320px;min-height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow:hidden;border:3px solid #ffffff;background-image:url("./media/fondo-chiclayo-KLNA4FYX.jpg");background-size:cover;background-position:center -20px;background-repeat:no-repeat}.home-box.sello-huancayo[_ngcontent-%COMP%]{position:relative;border-radius:20px 20px 0 0;padding:20px 30px;width:75%;max-width:320px;min-height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow:hidden;border:3px solid #ffffff;background-image:url("./media/fondo-huancayo-OFMI5XXL.jpg");background-size:cover;background-position:center -20px;background-repeat:no-repeat}.home-box[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1}.feedback-text[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;transform:translate(-50%,-50%);font-family:DM Sans,sans-serif;font-size:3rem;font-weight:700;color:#fff;text-align:center;-webkit-text-stroke:2px #f26522;text-shadow:-2px -2px 0 #DD5B22,2px -2px 0 #DD5B22,-2px 2px 0 #DD5B22,2px 2px 0 #DD5B22,0px 0px 0 #DD5B22}.content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;width:100%;height:70%;margin-bottom:10vh}.sello-image[_ngcontent-%COMP%]{width:180px;height:180px;border-radius:50%;box-shadow:0 8px 20px #00000059;object-fit:cover;z-index:2}.star-image[_ngcontent-%COMP%]{position:absolute;width:50vh;height:auto;z-index:1;pointer-events:none}.continue-button[_ngcontent-%COMP%]{display:block;margin:20px auto;padding:15px 30px;font-size:18px;font-weight:700;color:#fff;background-color:#dd5b22;border:none;border-radius:25px;box-shadow:0 4px 8px #0003;cursor:pointer;transition:all .2s ease}.continue-button[_ngcontent-%COMP%]:hover{background-color:#bb4a1c}.continue-button[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:0 2px 4px #0003}']})};var jo=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(e,t){return b(this,null,function*(){let r=t.url,i=this.authService.getUsername();return i?(yield this.authService.hasSeenWelcome(i))?r?!0:this.router.createUrlTree(["/pasaporte"]):this.router.createUrlTree(["/bienvenida"],{queryParams:{nextUrl:r}}):this.router.createUrlTree(["/login"],{queryParams:{nextUrl:r}})})}static \u0275fac=function(t){return new(t||n)(Z(tn),Z(xt))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};function a$(n,e){if(n&1&&(Y(0,"div",16)(1,"div",17),Re(2,"img",18),ne()()),n&2){let t=e.$implicit,r=Tn();Pe(2),Qg("alt","",t.key," sello"),ut("src",r.getSelloImage(t.key),Sa)}}var sf=class n{constructor(e,t,r){this.authService=e;this.route=t;this.router=r}name="";sellosImgs={"sello-lima":"imgs/sello-Lima.png","sello-ica":"imgs/sello-Ica.png","sello-chiclayo":"imgs/sello-Chiclayo.png","sello-huancayo":"imgs/sello-Huancayo.png"};sellosUser={};ngOnInit(){return b(this,null,function*(){this.name=this.authService.getName();let e=this.authService.getUsername();try{let r=(yield ep(this.route.queryParams)).forceUpt==="true";this.sellosUser=yield this.authService.getUserSellos(e,r||!1),console.log("Sellos obtenidos:",this.sellosUser)}catch(t){console.error("Error al obtener los sellos:",t)}})}getSelloImage(e){return this.sellosImgs["sello-"+e]||"imgs/default.png"}logout(){localStorage.clear(),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(J(tn),J(At),J(xt))};static \u0275cmp=Dt({type:n,selectors:[["app-home"]],standalone:!0,features:[Kt],decls:21,vars:4,consts:[[1,"background-container"],[1,"logout-container"],[1,"logout-button",3,"click"],[1,"header"],[1,"greeting"],[1,"morning-text"],[1,"user-name"],[1,"profile-image"],["src","imgs/user.png","alt","Perfil de Usuario"],[1,"home-container"],[1,"home-box"],[1,"logo"],["src","imgs/wow-simple-logo.png","alt","Logo OWOW"],[1,"home-title"],[1,"seal-container"],["class","seal-item",4,"ngFor","ngForOf"],[1,"seal-item"],[1,"seal-circle"],[3,"src","alt"]],template:function(t,r){t&1&&(Y(0,"div",0)(1,"div",1)(2,"button",2),St("click",function(){return r.logout()}),Me(3,"Cerrar sesi\xF3n"),ne()(),Y(4,"div",3)(5,"div",4)(6,"p",5),Me(7,"\xA1Buenos d\xEDas!"),ne(),Y(8,"h2",6),Me(9),ne()(),Y(10,"div",7),Re(11,"img",8),ne()(),Y(12,"div",9)(13,"div",10)(14,"div",11),Re(15,"img",12),ne(),Y(16,"h2",13),Me(17,"Pasaporte WOW"),ne(),Y(18,"div",14),Ar(19,a$,3,3,"div",15),o0(20,"keyvalue"),ne()()()()),t&2&&(Pe(9),kt("Hola ",r.name,""),Pe(10),ut("ngForOf",a0(20,2,r.sellosUser)))},dependencies:[Ei,Gl,R0],styles:['body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;width:100vw;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;width:100%;box-sizing:border-box;color:#fff;margin-top:px}.greeting[_ngcontent-%COMP%]{display:flex;flex-direction:column}.morning-text[_ngcontent-%COMP%]{font-size:20px;font-family:DM Sans,sans-serif;font-style:normal;margin:0;color:#fff}.user-name[_ngcontent-%COMP%]{font-size:26px;font-family:DM Sans,sans-serif;font-style:bold;margin:8px 0 0}.profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;border:2px solid #ffffff}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#ec671f}.home-container[_ngcontent-%COMP%]{z-index:1;display:flex;justify-content:center;align-items:flex-end;height:100vh;width:100%;padding:0;box-sizing:border-box;position:relative;overflow:auto}.background-image[_ngcontent-%COMP%]{position:absolute;top:45%;left:50%;transform:translate(-50%,-50%);width:auto;height:auto;max-width:87%;max-height:100%;z-index:0;pointer-events:none}.home-box[_ngcontent-%COMP%]{background-image:url("./media/fondo-home-QM3F4GHF.jpg");background-size:cover;background-position:center -20px;background-repeat:no-repeat;border-radius:20px 20px 0 0;padding:20px 30px 40px;width:75%;max-width:320px;min-height:90vh;box-shadow:0 -4px 12px #0000001a;text-align:left;display:flex;flex-direction:column;justify-content:flex-start;border:3px solid #ffffff}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12vh;object-fit:contain}.home-title[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:bold;font-size:24px;color:#fff;font-weight:700;text-align:center;margin:20px 0}.seal-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:20px;margin-top:30px}.seal-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}.seal-circle[_ngcontent-%COMP%]{width:17vh;height:17vh;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #0003;overflow:hidden}.seal-circle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.seal-text[_ngcontent-%COMP%]{font-size:.9rem;font-family:DM Sans,sans-serif;font-style:bold;font-weight:700;color:#fff;margin-top:14px}.logout-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;padding:10px 20px;box-sizing:border-box}.logout-button[_ngcontent-%COMP%]{background-color:#6a4c93;color:#fff;border:none;border-radius:25px;padding:10px 15px;font-size:14px;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .2s ease}.logout-button[_ngcontent-%COMP%]:hover{background-color:#5a3b7d}.logout-button[_ngcontent-%COMP%]:active{transform:scale(.95)}']})};var Ix=[{path:"login",component:Xh},{path:"pasaporte",component:sf,canActivate:[jo]},{path:"bienvenida",component:ef},{path:"trivia/:tema/:sello",component:nf,canActivate:[jo]},{path:"felicitacion",component:rf,canActivate:[jo]},{path:"",redirectTo:"pasaporte",pathMatch:"full"}];var Sx="firebasestorage.googleapis.com",c$="storageBucket",u$=2*60*1e3,l$=10*60*1e3;var Fn=class n extends Rt{constructor(e,t,r=0){super(lw(e),`Firebase Storage: ${t} (${lw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},or=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(or||{});function lw(n){return"storage/"+n}function d$(){let n="An unknown error occurred, please check the error payload for server response.";return new Fn(or.UNKNOWN,n)}function h$(){return new Fn(or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function f$(){return new Fn(or.CANCELED,"User canceled the upload/download.")}function p$(n){return new Fn(or.INVALID_URL,"Invalid URL '"+n+"'.")}function g$(n){return new Fn(or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Ex(n){return new Fn(or.INVALID_ARGUMENT,n)}function Ax(){return new Fn(or.APP_DELETED,"The Firebase app was deleted.")}function m$(n){return new Fn(or.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var sr=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw g$(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(H){H.path_=decodeURIComponent(H.path)}let h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),T={bucket:1,path:3},M=t===Sx?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",k=new RegExp(`^https?://${M}/${i}/${R}`,"i"),F=[{regex:a,indices:c,postModify:s},{regex:v,indices:T,postModify:l},{regex:k,indices:{bucket:1,path:2},postModify:l}];for(let H=0;H<F.length;H++){let te=F[H],$=te.regex.exec(e);if($){let I=$[te.indices.bucket],y=$[te.indices.path];y||(y=""),r=new n(I,y),te.postModify(r);break}}if(r==null)throw p$(e);return r}},dw=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function y$(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function h(...R){l||(l=!0,e.apply(null,R))}function p(R){i=setTimeout(()=>{i=null,n(v,c())},R)}function m(){s&&clearTimeout(s)}function v(R,...k){if(l){m();return}if(R){m(),h.call(null,R,...k);return}if(c()||o){m(),h.call(null,R,...k);return}r<64&&(r*=2);let F;a===1?(a=2,F=0):F=(r+Math.random())*1e3,p(F)}let T=!1;function M(R){T||(T=!0,m(),!l&&(i!==null?(R||(a=2),clearTimeout(i),p(0)):R||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,M(!0)},t),M}function v$(n){n(!1)}function _$(n){return n!==void 0}function bx(n,e,t,r){if(r<e)throw Ex(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ex(`Invalid value for '${n}'. Expected ${t} or less.`)}function w$(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var hw=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(hw||{});function I$(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var fw=class{constructor(e,t,r,i,s,o,a,c,l,h,p,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,T)=>{this.resolve_=v,this.reject_=T,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Bo(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===hw.NO_ERROR,c=s.getStatus();if(!a||I$(c,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===hw.ABORT;r(!1,new Bo(!1,null,h));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Bo(l,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());_$(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=d$();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?Ax():f$();o(c)}else{let c=h$();o(c)}};this.canceled_?t(!1,new Bo(!1,null,!0)):this.backoffId_=y$(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&v$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Bo=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function E$(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function b$(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function D$(n,e){e&&(n["X-Firebase-GMPID"]=e)}function C$(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function T$(n,e,t,r,i,s,o=!0){let a=w$(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return D$(l,e),E$(l,t),b$(l,s),C$(l,r),new fw(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function S$(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function A$(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var YK=256*1024;var pw=class n{constructor(e,t){this._service=e,t instanceof sr?this._location=t:this._location=sr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new sr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return A$(this._location.path)}get storage(){return this._service}get parent(){let e=S$(this._location.path);if(e===null)return null;let t=new sr(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw m$(e)}};function Dx(n,e){let t=e?.[c$];return t==null?null:sr.makeFromBucketSpec(t,n)}function x$(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:wd(i,n.app.options.projectId))}var gw=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Sx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=u$,this._maxUploadRetryTime=l$,this._requests=new Set,i!=null?this._bucket=sr.makeFromBucketSpec(i,this._host):this._bucket=Dx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sr.makeFromBucketSpec(this._url,e):this._bucket=Dx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return b(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return b(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pw(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new dw(Ax());{let o=T$(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return b(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},Cx="@firebase/storage",Tx="0.13.2";var xx="storage";function Rx(n=Ai(),e){n=Vt(n);let r=ac(n,xx).getImmediate({identifier:e}),i=_d("storage");return i&&Mx(r,...i),r}function Mx(n,e,t,r={}){x$(n,e,t,r)}function R$(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new gw(t,r,i,e,Pr)}function M$(){xn(new Mt(xx,R$,"PUBLIC").setMultipleInstances(!0)),ke(Cx,Tx,""),ke(Cx,Tx,"esm2017")}M$();var Kc=class{constructor(e){return e}},Nx="storage",mw=class{constructor(){return Mi(Nx)}};var yw=new K("angularfire2.storage-instances");function N$(n,e){let t=cc(Nx,n,e);return t&&new Kc(t)}function P$(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Kc(r)}}var O$={provide:mw,deps:[[new nt,yw]]},k$={provide:Kc,useFactory:N$,deps:[[new nt,yw],Xn]};function Px(n,...e){return ke("angularfire",Or.full,"gcs"),Cn([k$,O$,{provide:yw,useFactory:P$(n),multi:!0,deps:[be,bt,Ni,Pi,[new nt,so],[new nt,Ri],...e]}])}var Ox=Ut(Rx,!0);var kx={providers:[p0({eventCoalescing:!0}),EC(Ix),pT(()=>gT({projectId:"feria-wow",appId:"1:649771887294:web:171704f2e4a7ff4d35ccef",storageBucket:"feria-wow.firebasestorage.app",apiKey:"AIzaSyCHJiHlDv1Fk2JS7_v6UwlzutaM9cmU-bE",authDomain:"feria-wow.firebaseapp.com",messagingSenderId:"649771887294",measurementId:"G-WM7LLK7RJ4"})),mx(()=>vx()),Px(()=>Ox())]};var of=class n{title="feria-wow-passport";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Dt({type:n,selectors:[["app-root"]],standalone:!0,features:[Kt],decls:1,vars:0,template:function(t,r){t&1&&Re(0,"router-outlet")},dependencies:[Qm],styles:['@font-face{font-family:DM Sans;src:url("./media/DMSans-Regular-EVH27TZS.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:DM Sans;src:url("./media/DMSans-Bold-LWHRSIJO.ttf") format("truetype");font-weight:700;font-style:normal}']})};U0(of,kx).catch(n=>console.error(n));
