var BR=Object.defineProperty,$R=Object.defineProperties;var HR=Object.getOwnPropertyDescriptors;var PI=Object.getOwnPropertySymbols,zR=Object.getPrototypeOf,qR=Object.prototype.hasOwnProperty,GR=Object.prototype.propertyIsEnumerable,WR=Reflect.get;var OI=(n,e,t)=>e in n?BR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})qR.call(e,t)&&OI(n,t,e[t]);if(PI)for(var t of PI(e))GR.call(e,t)&&OI(n,t,e[t]);return n},fe=(n,e)=>$R(n,HR(e));var zf=(n,e,t)=>WR(zR(n),t,e);var b=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function kI(n,e){return Object.is(n,e)}var qe=null,yu=!1,vu=1,$n=Symbol("SIGNAL");function _e(n){let e=qe;return qe=n,e}function FI(){return qe}var ha={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Wf(n){if(yu)throw new Error("");if(qe===null)return;qe.consumerOnSignalRead(n);let e=qe.nextProducerIndex++;if(Eu(qe),e<qe.producerNode.length&&qe.producerNode[e]!==n&&da(qe)){let t=qe.producerNode[e];Iu(t,qe.producerIndexOfThis[e])}qe.producerNode[e]!==n&&(qe.producerNode[e]=n,qe.producerIndexOfThis[e]=da(qe)?jI(n,qe,e):0),qe.producerLastReadVersion[e]=n.version}function KR(){vu++}function LI(n){if(!(da(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===vu)){if(!n.producerMustRecompute(n)&&!Qf(n)){n.dirty=!1,n.lastCleanEpoch=vu;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=vu}}function VI(n){if(n.liveConsumerNode===void 0)return;let e=yu;yu=!0;try{for(let t of n.liveConsumerNode)t.dirty||QR(t)}finally{yu=e}}function UI(){return qe?.consumerAllowSignalWrites!==!1}function QR(n){n.dirty=!0,VI(n),n.consumerMarkedDirty?.(n)}function wu(n){return n&&(n.nextProducerIndex=0),_e(n)}function Kf(n,e){if(_e(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(da(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Iu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Qf(n){Eu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(LI(t),r!==t.version))return!0}return!1}function Yf(n){if(Eu(n),da(n))for(let e=0;e<n.producerNode.length;e++)Iu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function jI(n,e,t){if(BI(n),n.liveConsumerNode.length===0&&$I(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=jI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Iu(n,e){if(BI(n),n.liveConsumerNode.length===1&&$I(n))for(let r=0;r<n.producerNode.length;r++)Iu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Eu(i),i.producerIndexOfThis[r]=e}}function da(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Eu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function BI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function $I(n){return n.producerNode!==void 0}function HI(n){let e=Object.create(YR);e.computation=n;let t=()=>{if(LI(e),Wf(e),e.value===_u)throw e.error;return e.value};return t[$n]=e,t}var qf=Symbol("UNSET"),Gf=Symbol("COMPUTING"),_u=Symbol("ERRORED"),YR=fe(L({},ha),{value:qf,dirty:!0,error:null,equal:kI,producerMustRecompute(n){return n.value===qf||n.value===Gf},producerRecomputeValue(n){if(n.value===Gf)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Gf;let t=wu(n),r;try{r=n.computation()}catch(i){r=_u,n.error=i}finally{Kf(n,t)}if(e!==qf&&e!==_u&&r!==_u&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function ZR(){throw new Error}var zI=ZR;function qI(){zI()}function GI(n){zI=n}var JR=null;function WI(n){let e=Object.create(QI);e.value=n;let t=()=>(Wf(e),e.value);return t[$n]=e,t}function Zf(n,e){UI()||qI(),n.equal(n.value,e)||(n.value=e,XR(n))}function KI(n,e){UI()||qI(),Zf(n,e(n.value))}var QI=fe(L({},ha),{equal:kI,value:void 0});function XR(n){n.version++,KR(),VI(n),JR?.()}function re(n){return typeof n=="function"}function hs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var bu=hs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function si(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ve=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(s){e=s instanceof bu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{YI(s)}catch(o){e=e??[],o instanceof bu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new bu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)YI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&si(t,e)}remove(e){let{_finalizers:t}=this;t&&si(t,e),e instanceof n&&e._removeParent(this)}};Ve.EMPTY=(()=>{let n=new Ve;return n.closed=!0,n})();var Jf=Ve.EMPTY;function Du(n){return n instanceof Ve||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function YI(n){re(n)?n():n.unsubscribe()}var sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fs={setTimeout(n,e,...t){let{delegate:r}=fs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=fs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Cu(n){fs.setTimeout(()=>{let{onUnhandledError:e}=sn;if(e)e(n);else throw n})}function fa(){}var ZI=Xf("C",void 0,void 0);function JI(n){return Xf("E",void 0,n)}function XI(n){return Xf("N",n,void 0)}function Xf(n,e,t){return{kind:n,value:e,error:t}}var oi=null;function ps(n){if(sn.useDeprecatedSynchronousErrorHandling){let e=!oi;if(e&&(oi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=oi;if(oi=null,t)throw r}}else n()}function eE(n){sn.useDeprecatedSynchronousErrorHandling&&oi&&(oi.errorThrown=!0,oi.error=n)}var ai=class extends Ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Du(e)&&e.add(this)):this.destination=nM}static create(e,t,r){return new mr(e,t,r)}next(e){this.isStopped?tp(XI(e),this):this._next(e)}error(e){this.isStopped?tp(JI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?tp(ZI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},eM=Function.prototype.bind;function ep(n,e){return eM.call(n,e)}var np=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Tu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Tu(r)}else Tu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Tu(t)}}},mr=class extends ai{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&sn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ep(e.next,s),error:e.error&&ep(e.error,s),complete:e.complete&&ep(e.complete,s)}):i=e}this.destination=new np(i)}};function Tu(n){sn.useDeprecatedSynchronousErrorHandling?eE(n):Cu(n)}function tM(n){throw n}function tp(n,e){let{onStoppedNotification:t}=sn;t&&fs.setTimeout(()=>t(n,e))}var nM={closed:!0,next:fa,error:tM,complete:fa};var gs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ft(n){return n}function rp(...n){return ip(n)}function ip(n){return n.length===0?Ft:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var me=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=iM(t)?t:new mr(t,r,i);return ps(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=tE(r),new r((i,s)=>{let o=new mr({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[gs](){return this}pipe(...t){return ip(t)(this)}toPromise(t){return t=tE(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function tE(n){var e;return(e=n??sn.Promise)!==null&&e!==void 0?e:Promise}function rM(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function iM(n){return n&&n instanceof ai||rM(n)&&Du(n)}function sp(n){return re(n?.lift)}function ye(n){return e=>{if(sp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(n,e,t,r,i){return new op(n,e,t,r,i)}var op=class extends ai{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ms(){return ye((n,e)=>{let t=null;n._refCount++;let r=pe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ys=class extends me{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,sp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ve;let t=this.getSubject();e.add(this.source.subscribe(pe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ve.EMPTY)}return e}refCount(){return ms()(this)}};var nE=hs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var tt=(()=>{class n extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Su(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new nE}next(t){ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Jf:(this.currentObservers=null,s.push(t),new Ve(()=>{this.currentObservers=null,si(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new me;return t.source=this,t}}return n.create=(e,t)=>new Su(e,t),n})(),Su=class extends tt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Jf}};var nt=class extends tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ap={now(){return(ap.delegate||Date).now()},delegate:void 0};var Au=class extends Ve{constructor(e,t){super()}schedule(e,t=0){return this}};var pa={setInterval(n,e,...t){let{delegate:r}=pa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=pa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var vs=class extends Au{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return pa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&pa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,si(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var _s=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};_s.now=ap.now;var ws=class extends _s{constructor(e,t=_s.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var cp=new ws(vs);var xu=class extends vs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Ru=class extends ws{};var up=new Ru(xu);var Lt=new me(n=>n.complete());function rE(n){return n&&re(n.schedule)}function iE(n){return n[n.length-1]}function Mu(n){return re(iE(n))?n.pop():void 0}function yr(n){return rE(iE(n))?n.pop():void 0}function lp(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function oE(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function c(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function sE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ci(n){return this instanceof ci?(this.v=n,this):new ci(n)}function aE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(T){return Promise.resolve(T).then(v,p)}}function a(v,T){r[v]&&(i[v]=function(M){return new Promise(function(R,k){s.push([v,M,R,k])>1||c(v,M)})},T&&(i[v]=T(i[v])))}function c(v,T){try{l(r[v](T))}catch(M){m(s[0][3],M)}}function l(v){v.value instanceof ci?Promise.resolve(v.value.v).then(h,p):m(s[0][2],v)}function h(v){c("next",v)}function p(v){c("throw",v)}function m(v,T){v(T),s.shift(),s.length&&c(s[0][0],s[0][1])}}function cE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof sE=="function"?sE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Nu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Pu(n){return re(n?.then)}function Ou(n){return re(n[gs])}function ku(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function Fu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function sM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Lu=sM();function Vu(n){return re(n?.[Lu])}function Uu(n){return aE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ci(t.read());if(i)return yield ci(void 0);yield yield ci(r)}}finally{t.releaseLock()}})}function ju(n){return re(n?.getReader)}function $e(n){if(n instanceof me)return n;if(n!=null){if(Ou(n))return oM(n);if(Nu(n))return aM(n);if(Pu(n))return cM(n);if(ku(n))return uE(n);if(Vu(n))return uM(n);if(ju(n))return lM(n)}throw Fu(n)}function oM(n){return new me(e=>{let t=n[gs]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function aM(n){return new me(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function cM(n){return new me(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Cu)})}function uM(n){return new me(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function uE(n){return new me(e=>{dM(n,e).catch(t=>e.error(t))})}function lM(n){return uE(Uu(n))}function dM(n,e){var t,r,i,s;return oE(this,void 0,void 0,function*(){try{for(t=cE(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Dt(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function vr(n,e=0){return ye((t,r)=>{t.subscribe(pe(r,i=>Dt(r,n,()=>r.next(i),e),()=>Dt(r,n,()=>r.complete(),e),i=>Dt(r,n,()=>r.error(i),e)))})}function _r(n,e=0){return ye((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function lE(n,e){return $e(n).pipe(_r(e),vr(e))}function dE(n,e){return $e(n).pipe(_r(e),vr(e))}function hE(n,e){return new me(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function fE(n,e){return new me(t=>{let r;return Dt(t,e,()=>{r=n[Lu](),Dt(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Bu(n,e){if(!n)throw new Error("Iterable cannot be null");return new me(t=>{Dt(t,e,()=>{let r=n[Symbol.asyncIterator]();Dt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function pE(n,e){return Bu(Uu(n),e)}function gE(n,e){if(n!=null){if(Ou(n))return lE(n,e);if(Nu(n))return hE(n,e);if(Pu(n))return dE(n,e);if(ku(n))return Bu(n,e);if(Vu(n))return fE(n,e);if(ju(n))return pE(n,e)}throw Fu(n)}function Ue(n,e){return e?gE(n,e):$e(n)}function se(...n){let e=yr(n);return Ue(n,e)}function Is(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new me(e?i=>e.schedule(r,0,i):r)}function dp(n){return!!n&&(n instanceof me||re(n.lift)&&re(n.subscribe))}var on=hs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function hp(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let s=new mr({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new on)}});n.subscribe(s)})}function le(n,e){return ye((t,r)=>{let i=0;t.subscribe(pe(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:hM}=Array;function fM(n,e){return hM(e)?n(...e):n(e)}function $u(n){return le(e=>fM(n,e))}var{isArray:pM}=Array,{getPrototypeOf:gM,prototype:mM,keys:yM}=Object;function Hu(n){if(n.length===1){let e=n[0];if(pM(e))return{args:e,keys:null};if(vM(e)){let t=yM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function vM(n){return n&&typeof n=="object"&&gM(n)===mM}function zu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function qu(...n){let e=yr(n),t=Mu(n),{args:r,keys:i}=Hu(n);if(r.length===0)return Ue([],e);let s=new me(_M(r,e,i?o=>zu(i,o):Ft));return t?s.pipe($u(t)):s}function _M(n,e,t=Ft){return r=>{mE(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)mE(e,()=>{let l=Ue(n[c],e),h=!1;l.subscribe(pe(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function mE(n,e,t){n?Dt(t,n,e):e()}function yE(n,e,t,r,i,s,o,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},v=M=>l<r?T(M):c.push(M),T=M=>{s&&e.next(M),l++;let R=!1;$e(t(M,h++)).subscribe(pe(e,k=>{i?.(k),s?v(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;c.length&&l<r;){let k=c.shift();o?Dt(e,o,()=>T(k)):T(k)}m()}catch(k){e.error(k)}}))};return n.subscribe(pe(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Ge(n,e,t=1/0){return re(e)?Ge((r,i)=>le((s,o)=>e(r,s,i,o))($e(n(r,i))),t):(typeof e=="number"&&(t=e),ye((r,i)=>yE(r,i,n,t)))}function fp(n=1/0){return Ge(Ft,n)}function vE(){return fp(1)}function Es(...n){return vE()(Ue(n,yr(n)))}function Gu(n){return new me(e=>{$e(n()).subscribe(e)})}function pp(...n){let e=Mu(n),{args:t,keys:r}=Hu(n),i=new me(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let h=0;h<o;h++){let p=!1;$e(t[h]).subscribe(pe(s,m=>{p||(p=!0,l--),a[h]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||s.next(r?zu(r,a):a),s.complete())}))}});return e?i.pipe($u(e)):i}function an(n,e){return ye((t,r)=>{let i=0;t.subscribe(pe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function wr(n){return ye((e,t)=>{let r=null,i=!1,s;r=e.subscribe(pe(t,void 0,void 0,o=>{s=$e(n(o,wr(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function _E(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(pe(o,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function bs(n,e){return re(e)?Ge(n,e,1):Ge(n,1)}function Ir(n){return ye((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Hn(n){return n<=0?()=>Lt:ye((e,t)=>{let r=0;e.subscribe(pe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function gp(n){return le(()=>n)}function Wu(n=wM){return ye((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function wM(){return new on}function ga(n){return ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function _n(n,e){let t=arguments.length>=2;return r=>r.pipe(n?an((i,s)=>n(i,s,r)):Ft,Hn(1),t?Ir(e):Wu(()=>new on))}function Ds(n){return n<=0?()=>Lt:ye((e,t)=>{let r=[];e.subscribe(pe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function mp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?an((i,s)=>n(i,s,r)):Ft,Ds(1),t?Ir(e):Wu(()=>new on))}function yp(n,e){return ye(_E(n,e,arguments.length>=2,!0))}function vp(...n){let e=yr(n);return ye((t,r)=>{(e?Es(n,t,e):Es(n,t)).subscribe(r)})}function cn(n,e){return ye((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(pe(r,c=>{i?.unsubscribe();let l=0,h=s++;$e(n(c,h)).subscribe(i=pe(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function _p(n){return ye((e,t)=>{$e(n).subscribe(pe(t,()=>t.complete(),fa)),!t.closed&&e.subscribe(t)})}function We(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?ye((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(pe(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ft}var lb="https://g.co/ng/security#xss",K=class extends Error{constructor(e,t){super(Sg(e,t)),this.code=e}};function Sg(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Sa(n){return{toString:n}.toString()}var Ku="__parameters__";function IM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function db(n,e,t){return Sa(()=>{let r=IM(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,h){let p=c.hasOwnProperty(Ku)?c[Ku]:Object.defineProperty(c,Ku,{value:[]})[Ku];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var _a=globalThis;function Re(n){for(let e in n)if(n[e]===Re)return e;throw Error("Could not find renamed property on target object.")}function EM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function vt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(vt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function wE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var bM=Re({__forward_ref__:Re});function Aa(n){return n.__forward_ref__=Aa,n.toString=function(){return vt(this())},n}function yt(n){return hb(n)?n():n}function hb(n){return typeof n=="function"&&n.hasOwnProperty(bM)&&n.__forward_ref__===Aa}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function _i(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ml(n){return IE(n,pb)||IE(n,gb)}function fb(n){return Ml(n)!==null}function IE(n,e){return n.hasOwnProperty(e)?n[e]:null}function DM(n){let e=n&&(n[pb]||n[gb]);return e||null}function EE(n){return n&&(n.hasOwnProperty(bE)||n.hasOwnProperty(CM))?n[bE]:null}var pb=Re({\u0275prov:Re}),bE=Re({\u0275inj:Re}),gb=Re({ngInjectableDef:Re}),CM=Re({ngInjectorDef:Re}),Q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function mb(n){return n&&!!n.\u0275providers}var TM=Re({\u0275cmp:Re}),SM=Re({\u0275dir:Re}),AM=Re({\u0275pipe:Re}),xM=Re({\u0275mod:Re}),ol=Re({\u0275fac:Re}),va=Re({__NG_ELEMENT_ID__:Re}),DE=Re({__NG_ENV_ID__:Re});function Nl(n){return typeof n=="string"?n:n==null?"":String(n)}function RM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Nl(n)}function MM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new K(-200,n)}function Ag(n,e){throw new K(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),Pp;function yb(){return Pp}function Ct(n){let e=Pp;return Pp=n,e}function vb(n,e,t){let r=Ml(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ae.Optional)return null;if(e!==void 0)return e;Ag(n,"Injector")}var NM={},wa=NM,Op="__NG_DI_FLAG__",al="ngTempTokenPath",PM="ngTokenPath",OM=/\n/gm,kM="\u0275",CE="__source",As;function FM(){return As}function Er(n){let e=As;return As=n,e}function LM(n,e=ae.Default){if(As===void 0)throw new K(-203,!1);return As===null?vb(n,void 0,e):As.get(n,e&ae.Optional?null:void 0,e)}function X(n,e=ae.Default){return(yb()||LM)(yt(n),e)}function V(n,e=ae.Default){return X(n,Pl(e))}function Pl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function kp(n){let e=[];for(let t=0;t<n.length;t++){let r=yt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let i,s=ae.Default;for(let o=0;o<r.length;o++){let a=r[o],c=VM(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(X(i,s))}else e.push(X(r))}return e}function _b(n,e){return n[Op]=e,n.prototype[Op]=e,n}function VM(n){return n[Op]}function UM(n,e,t,r){let i=n[al];throw e[CE]&&i.unshift(e[CE]),n.message=jM(`
`+n.message,i,t,r),n[PM]=i,n[al]=null,n}function jM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==kM?n.slice(2):n;let i=vt(e);if(Array.isArray(e))i=e.map(vt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):vt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(OM,`
  `)}`}var rt=_b(db("Optional"),8);var xg=_b(db("SkipSelf"),4);function li(n,e){let t=n.hasOwnProperty(ol);return t?n[ol]:null}function Rg(n,e){n.forEach(t=>Array.isArray(t)?Rg(t,e):e(t))}function wb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function cl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function BM(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function $M(n,e,t){let r=xa(n,e);return r>=0?n[r|1]=t:(r=~r,BM(n,r,e,t)),r}function wp(n,e){let t=xa(n,e);if(t>=0)return n[t|1]}function xa(n,e){return HM(n,e,1)}function HM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Rs={},qt=[],Ms=new Q(""),Ib=new Q("",-1),Eb=new Q(""),ul=class{get(e,t=wa){if(t===wa){let r=new Error(`NullInjectorError: No provider for ${vt(e)}!`);throw r.name="NullInjectorError",r}return t}},bb=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(bb||{}),En=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(En||{}),Cr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Cr||{});function zM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Fp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];GM(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function qM(n){return n===3||n===4||n===6}function GM(n){return n.charCodeAt(0)===64}function Ia(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?TE(n,t,i,null,e[++r]):TE(n,t,i,null,null))}}return n}function TE(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var Db="ng-template";function WM(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&zM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Mg(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Mg(n){return n.type===4&&n.value!==Db}function KM(n,e,t){let r=n.type===4&&!t?Db:n.value;return e===r}function QM(n,e,t){let r=4,i=n.attrs,s=i!==null?JM(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!un(r)&&!un(c))return!1;if(o&&un(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!KM(n,c,t)||c===""&&e.length===1){if(un(r))return!1;o=!0}}else if(r&8){if(i===null||!WM(n,i,c,t)){if(un(r))return!1;o=!0}}else{let l=e[++a],h=YM(c,i,Mg(n),t);if(h===-1){if(un(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(un(r))return!1;o=!0}}}}return un(r)||o}function un(n){return(n&1)===0}function YM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return XM(e,n)}function ZM(n,e,t=!1){for(let r=0;r<e.length;r++)if(QM(n,e[r],t))return!0;return!1}function JM(n){for(let e=0;e<n.length;e++){let t=n[e];if(qM(t))return e}return n.length}function XM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function SE(n,e){return n?":not("+e.trim()+")":e}function eN(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!un(o)&&(e+=SE(s,i),i=""),r=o,s=s||!un(r);t++}return i!==""&&(e+=SE(s,i)),e}function tN(n){return n.map(eN).join(",")}function nN(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!un(i))break;i=s}r++}return{attrs:e,classes:t}}function lt(n){return Sa(()=>{let e=Rb(n),t=fe(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===bb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||En.Emulated,styles:n.styles||qt,_:null,schemas:n.schemas||null,tView:null,id:""});Mb(t);let r=n.dependencies;return t.directiveDefs=xE(r,!1),t.pipeDefs=xE(r,!0),t.id=sN(t),t})}function rN(n){return di(n)||Tb(n)}function iN(n){return n!==null}function wi(n){return Sa(()=>({type:n.type,bootstrap:n.bootstrap||qt,declarations:n.declarations||qt,imports:n.imports||qt,exports:n.exports||qt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function AE(n,e){if(n==null)return Rs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Cr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Cr.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Qt(n){return Sa(()=>{let e=Rb(n);return Mb(e),e})}function Cb(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function di(n){return n[TM]||null}function Tb(n){return n[SM]||null}function Sb(n){return n[AM]||null}function Ab(n){let e=di(n)||Tb(n)||Sb(n);return e!==null?e.standalone:!1}function xb(n,e){let t=n[xM]||null;if(!t&&e===!0)throw new Error(`Type ${vt(n)} does not have '\u0275mod' property.`);return t}function Rb(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Rs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||qt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:AE(n.inputs,e),outputs:AE(n.outputs),debugInfo:null}}function Mb(n){n.features?.forEach(e=>e(n))}function xE(n,e){if(!n)return null;let t=e?Sb:rN;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(iN)}function sN(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Sn(n){return{\u0275providers:n}}function oN(...n){return{\u0275providers:Nb(!0,n),\u0275fromNgModule:!0}}function Nb(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Rg(e,o=>{let a=o;Lp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Pb(i,s),t}function Pb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Ng(i,s=>{e(s,r)})}}function Lp(n,e,t,r){if(n=yt(n),!n)return!1;let i=null,s=EE(n),o=!s&&di(n);if(!s&&!o){let c=n.ngModule;if(s=EE(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Lp(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Rg(s.imports,h=>{Lp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Pb(l,e)}if(!a){let l=li(i)||(()=>new i);e({provide:i,useFactory:l,deps:qt},i),e({provide:Eb,useValue:i,multi:!0},i),e({provide:Ms,useValue:()=>X(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;Ng(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Ng(n,e){for(let t of n)mb(t)&&(t=t.\u0275providers),Array.isArray(t)?Ng(t,e):e(t)}var aN=Re({provide:String,useValue:Re});function Ob(n){return n!==null&&typeof n=="object"&&aN in n}function cN(n){return!!(n&&n.useExisting)}function uN(n){return!!(n&&n.useFactory)}function Ns(n){return typeof n=="function"}function lN(n){return!!n.useClass}var Ol=new Q(""),tl={},dN={},Ip;function Pg(){return Ip===void 0&&(Ip=new ul),Ip}var Kt=class{},Ea=class extends Kt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Up(e,o=>this.processProvider(o)),this.records.set(Ib,Cs(void 0,this)),i.has("environment")&&this.records.set(Kt,Cs(void 0,this));let s=this.records.get(Ol);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Eb,qt,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Er(this),r=Ct(void 0),i;try{return e()}finally{Er(t),Ct(r)}}get(e,t=wa,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(DE))return e[DE](this);r=Pl(r);let i,s=Er(this),o=Ct(void 0);try{if(!(r&ae.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=mN(e)&&Ml(e);l&&this.injectableDefInScope(l)?c=Cs(Vp(e),tl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ae.Self?Pg():this.parent;return t=r&ae.Optional&&t===wa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[al]=a[al]||[]).unshift(vt(e)),s)throw a;return UM(a,e,"R3InjectorError",this.source)}else throw a}finally{Ct(o),Er(s)}}resolveInjectorInitializers(){let e=_e(null),t=Er(this),r=Ct(void 0),i;try{let s=this.get(Ms,qt,ae.Self);for(let o of s)o()}finally{Er(t),Ct(r),_e(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(vt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){e=yt(e);let t=Ns(e)?e:yt(e&&e.provide),r=fN(e);if(!Ns(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Cs(void 0,tl,!0),i.factory=()=>kp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=_e(null);try{return t.value===tl&&(t.value=dN,t.value=t.factory()),typeof t.value=="object"&&t.value&&gN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{_e(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=yt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Vp(n){let e=Ml(n),t=e!==null?e.factory:li(n);if(t!==null)return t;if(n instanceof Q)throw new K(204,!1);if(n instanceof Function)return hN(n);throw new K(204,!1)}function hN(n){if(n.length>0)throw new K(204,!1);let t=DM(n);return t!==null?()=>t.factory(n):()=>new n}function fN(n){if(Ob(n))return Cs(void 0,n.useValue);{let e=kb(n);return Cs(e,tl)}}function kb(n,e,t){let r;if(Ns(n)){let i=yt(n);return li(i)||Vp(i)}else if(Ob(n))r=()=>yt(n.useValue);else if(uN(n))r=()=>n.useFactory(...kp(n.deps||[]));else if(cN(n))r=()=>X(yt(n.useExisting));else{let i=yt(n&&(n.useClass||n.provide));if(pN(n))r=()=>new i(...kp(n.deps));else return li(i)||Vp(i)}return r}function Cs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function pN(n){return!!n.deps}function gN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function mN(n){return typeof n=="function"||typeof n=="object"&&n instanceof Q}function Up(n,e){for(let t of n)Array.isArray(t)?Up(t,e):t&&mb(t)?Up(t.\u0275providers,e):e(t)}function Wn(n,e){n instanceof Ea&&n.assertNotDestroyed();let t,r=Er(n),i=Ct(void 0);try{return e()}finally{Er(r),Ct(i)}}function yN(){return yb()!==void 0||FM()!=null}function vN(n){return typeof n=="function"}var Kn=0,de=1,ee=2,_t=3,ln=4,hn=5,ll=6,dl=7,dn=8,Ps=9,bn=10,Qe=11,ba=12,RE=13,Bs=14,Dn=15,Os=16,Ts=17,ks=18,kl=19,Fb=20,br=21,Ep=22,Gt=23,Cn=25,Lb=1;var hi=7,hl=8,fl=9,Wt=10,pl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(pl||{});function Dr(n){return Array.isArray(n)&&typeof n[Lb]=="object"}function Qn(n){return Array.isArray(n)&&n[Lb]===!0}function Vb(n){return(n.flags&4)!==0}function Fl(n){return n.componentOffset>-1}function Og(n){return(n.flags&1)===1}function Tr(n){return!!n.template}function jp(n){return(n[ee]&512)!==0}var Bp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ub(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function $s(){return jb}function jb(n){return n.type.prototype.ngOnChanges&&(n.setInput=wN),_N}$s.ngInherit=!0;function _N(){let n=$b(this),e=n?.current;if(e){let t=n.previous;if(t===Rs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function wN(n,e,t,r,i){let s=this.declaredInputs[r],o=$b(n)||IN(n,{previous:Rs,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Bp(l&&l.currentValue,t,c===Rs),Ub(n,e,i,t)}var Bb="__ngSimpleChanges__";function $b(n){return n[Bb]||null}function IN(n,e){return n[Bb]=e}var ME=null;var wn=function(n,e,t){ME?.(n,e,t)},Hb="svg",EN="math";function Tn(n){for(;Array.isArray(n);)n=n[Kn];return n}function zb(n,e){return Tn(e[n])}function fn(n,e){return Tn(e[n.index])}function qb(n,e){return n.data[e]}function bN(n,e){return n[e]}function xr(n,e){let t=e[n];return Dr(t)?t:t[Kn]}function kg(n){return(n[ee]&128)===128}function DN(n){return Qn(n[_t])}function gl(n,e){return e==null?null:n[e]}function Gb(n){n[Ts]=0}function Wb(n){n[ee]&1024||(n[ee]|=1024,kg(n)&&Vl(n))}function CN(n,e){for(;n>0;)e=e[Bs],n--;return e}function Ll(n){return!!(n[ee]&9216||n[Gt]?.dirty)}function $p(n){n[bn].changeDetectionScheduler?.notify(8),n[ee]&64&&(n[ee]|=1024),Ll(n)&&Vl(n)}function Vl(n){n[bn].changeDetectionScheduler?.notify(0);let e=fi(n);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!kg(e)));)e=fi(e)}function Kb(n,e){if((n[ee]&256)===256)throw new K(911,!1);n[br]===null&&(n[br]=[]),n[br].push(e)}function TN(n,e){if(n[br]===null)return;let t=n[br].indexOf(e);t!==-1&&n[br].splice(t,1)}function fi(n){let e=n[_t];return Qn(e)?e[_t]:e}var ce={lFrame:o0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Qb=!1;function SN(){return ce.lFrame.elementDepthCount}function AN(){ce.lFrame.elementDepthCount++}function xN(){ce.lFrame.elementDepthCount--}function Yb(){return ce.bindingsEnabled}function RN(){return ce.skipHydrationRootTNode!==null}function MN(n){return ce.skipHydrationRootTNode===n}function NN(){ce.skipHydrationRootTNode=null}function Se(){return ce.lFrame.lView}function St(){return ce.lFrame.tView}function Zb(n){return ce.lFrame.contextLView=n,n[dn]}function Jb(n){return ce.lFrame.contextLView=null,n}function At(){let n=Xb();for(;n!==null&&n.type===64;)n=n.parent;return n}function Xb(){return ce.lFrame.currentTNode}function PN(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ra(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function e0(){return ce.lFrame.isParent}function ON(){ce.lFrame.isParent=!1}function t0(){return Qb}function NE(n){Qb=n}function n0(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function kN(n){return ce.lFrame.bindingIndex=n}function Fg(){return ce.lFrame.bindingIndex++}function FN(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function LN(){return ce.lFrame.inI18n}function VN(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Hp(e)}function UN(){return ce.lFrame.currentDirectiveIndex}function Hp(n){ce.lFrame.currentDirectiveIndex=n}function jN(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function r0(n){ce.lFrame.currentQueryIndex=n}function BN(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[hn]:null}function i0(n,e,t){if(t&ae.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ae.Host);)if(i=BN(s),i===null||(s=s[Bs],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=ce.lFrame=s0();return r.currentTNode=e,r.lView=n,!0}function Lg(n){let e=s0(),t=n[de];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function s0(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?o0(n):e}function o0(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function a0(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var c0=a0;function Vg(){let n=a0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function $N(n){return(ce.lFrame.contextLView=CN(n,ce.lFrame.contextLView))[dn]}function Hs(){return ce.lFrame.selectedIndex}function pi(n){ce.lFrame.selectedIndex=n}function Ug(){let n=ce.lFrame;return qb(n.tView,n.selectedIndex)}function u0(){ce.lFrame.currentNamespace=Hb}function l0(){HN()}function HN(){ce.lFrame.currentNamespace=null}function zN(){return ce.lFrame.currentNamespace}var d0=!0;function jg(){return d0}function Bg(n){d0=n}function qN(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=jb(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function $g(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function nl(n,e,t){h0(n,e,3,t)}function rl(n,e,t,r){(n[ee]&3)===t&&h0(n,e,t,r)}function bp(n,e){let t=n[ee];(t&3)===e&&(t&=16383,t+=1,n[ee]=t)}function h0(n,e,t,r){let i=r!==void 0?n[Ts]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ts]+=65536),(a<s||s==-1)&&(GN(n,t,e,c),n[Ts]=(n[Ts]&4294901760)+c+2),c++}function PE(n,e){wn(4,n,e);let t=_e(null);try{e.call(n)}finally{_e(t),wn(5,n,e)}}function GN(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ee]>>14<n[Ts]>>16&&(n[ee]&3)===e&&(n[ee]+=16384,PE(a,s)):PE(a,s)}var xs=-1,gi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function WN(n){return n instanceof gi}function KN(n){return(n.flags&8)!==0}function QN(n){return(n.flags&16)!==0}var Dp={},zp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Pl(r);let i=this.injector.get(e,Dp,r);return i!==Dp||t===Dp?i:this.parentInjector.get(e,t,r)}};function f0(n){return n!==xs}function ml(n){return n&32767}function YN(n){return n>>16}function yl(n,e){let t=YN(n),r=e;for(;t>0;)r=r[Bs],t--;return r}var qp=!0;function vl(n){let e=qp;return qp=n,e}var ZN=256,p0=ZN-1,g0=5,JN=0,In={};function XN(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(va)&&(r=t[va]),r==null&&(r=t[va]=JN++);let i=r&p0,s=1<<i;e.data[n+(i>>g0)]|=s}function _l(n,e){let t=m0(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,Cp(r.data,n),Cp(e,null),Cp(r.blueprint,null));let i=Hg(n,e),s=n.injectorIndex;if(f0(i)){let o=ml(i),a=yl(i,e),c=a[de].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Cp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function m0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Hg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=I0(i),r===null)return xs;if(t++,i=i[Bs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return xs}function Gp(n,e,t){XN(n,e,t)}function y0(n,e,t){if(t&ae.Optional||n!==void 0)return n;Ag(e,"NodeInjector")}function v0(n,e,t,r){if(t&ae.Optional&&r===void 0&&(r=null),!(t&(ae.Self|ae.Host))){let i=n[Ps],s=Ct(void 0);try{return i?i.get(e,r,t&ae.Optional):vb(e,r,t&ae.Optional)}finally{Ct(s)}}return y0(r,e,t)}function _0(n,e,t,r=ae.Default,i){if(n!==null){if(e[ee]&2048&&!(r&ae.Self)){let o=iP(n,e,t,r,In);if(o!==In)return o}let s=w0(n,e,t,r,In);if(s!==In)return s}return v0(e,t,r,i)}function w0(n,e,t,r,i){let s=nP(t);if(typeof s=="function"){if(!i0(e,n,r))return r&ae.Host?y0(i,t,r):v0(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ae.Optional))Ag(t);else return o}finally{c0()}}else if(typeof s=="number"){let o=null,a=m0(n,e),c=xs,l=r&ae.Host?e[Dn][hn]:null;for((a===-1||r&ae.SkipSelf)&&(c=a===-1?Hg(n,e):e[a+8],c===xs||!kE(r,!1)?a=-1:(o=e[de],a=ml(c),e=yl(c,e)));a!==-1;){let h=e[de];if(OE(s,a,h.data)){let p=eP(a,e,t,o,r,l);if(p!==In)return p}c=e[a+8],c!==xs&&kE(r,e[de].data[a+8]===l)&&OE(s,a,e)?(o=h,a=ml(c),e=yl(c,e)):a=-1}}return i}function eP(n,e,t,r,i,s){let o=e[de],a=o.data[n+8],c=r==null?Fl(a)&&qp:r!=o&&(a.type&3)!==0,l=i&ae.Host&&s===a,h=tP(a,o,t,c,l);return h!==null?Fs(e,o,h,a):In}function tP(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let T=o[v];if(v<c&&t===T||v>=c&&T.type===t)return v}if(i){let v=o[c];if(v&&Tr(v)&&v.type===t)return c}return null}function Fs(n,e,t,r){let i=n[t],s=e.data;if(WN(i)){let o=i;o.resolving&&MM(RM(s[t]));let a=vl(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Ct(o.injectImpl):null,h=i0(n,r,ae.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&qN(t,s[t],e)}finally{l!==null&&Ct(l),vl(a),o.resolving=!1,c0()}}return i}function nP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(va)?n[va]:void 0;return typeof e=="number"?e>=0?e&p0:rP:e}function OE(n,e,t){let r=1<<n;return!!(t[e+(n>>g0)]&r)}function kE(n,e){return!(n&ae.Self)&&!(n&ae.Host&&e)}var ui=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return _0(this._tNode,this._lView,e,Pl(r),t)}};function rP(){return new ui(At(),Se())}function Ma(n){return Sa(()=>{let e=n.prototype.constructor,t=e[ol]||Wp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[ol]||Wp(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Wp(n){return hb(n)?()=>{let e=Wp(yt(n));return e&&e()}:li(n)}function iP(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ee]&2048&&!(o[ee]&512);){let a=w0(s,o,t,r|ae.Self,In);if(a!==In)return a;let c=s.parent;if(!c){let l=o[Fb];if(l){let h=l.get(t,In,r);if(h!==In)return h}c=I0(o),o=o[Bs]}s=c}return i}function I0(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[hn]:null}function FE(n,e=null,t=null,r){let i=E0(n,e,t,r);return i.resolveInjectorInitializers(),i}function E0(n,e=null,t=null,r,i=new Set){let s=[t||qt,oN(n)];return r=r||(typeof n=="object"?void 0:vt(n)),new Ea(s,e||Pg(),r||null,i)}var Tt=class n{static{this.THROW_IF_NOT_FOUND=wa}static{this.NULL=new ul}static create(e,t){if(Array.isArray(e))return FE({name:""},t,e,"");{let r=e.name??"";return FE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=G({token:n,providedIn:"any",factory:()=>X(Ib)})}static{this.__NG_ELEMENT_ID__=-1}};var sP=new Q("");sP.__NG_ELEMENT_ID__=n=>{let e=At();if(e===null)throw new K(204,!1);if(e.type&2)return e.value;if(n&ae.Optional)return null;throw new K(204,!1)};var oP="ngOriginalError";function Tp(n){return n[oP]}var b0=!0,D0=(()=>{class n{static{this.__NG_ELEMENT_ID__=aP}static{this.__NG_ENV_ID__=t=>t}}return n})(),Kp=class extends D0{constructor(e){super(),this._lView=e}onDestroy(e){return Kb(this._lView,e),()=>TN(this._lView,e)}};function aP(){return new Kp(Se())}var zs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new nt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Qp=class extends tt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,yN()&&(this.destroyRef=V(D0,{optional:!0})??void 0,this.pendingTasks=V(zs,{optional:!0})??void 0)}emit(e){let t=_e(null);try{super.next(e)}finally{_e(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ve&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ke=Qp;function wl(...n){}function C0(n){let e,t;function r(){n=wl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function LE(n){return queueMicrotask(()=>n()),()=>{n=wl}}var zg="isAngularZone",Il=zg+"_ID",cP=0,Te=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ke(!1),this.onMicrotaskEmpty=new Ke(!1),this.onStable=new Ke(!1),this.onError=new Ke(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=b0}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,dP(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(zg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,uP,wl,wl);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},uP={};function qg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function lP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){C0(()=>{n.callbackScheduled=!1,Yp(n),n.isCheckStableRunning=!0,qg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Yp(n)}function dP(n){let e=()=>{lP(n)},t=cP++;n._inner=n._inner.fork({name:"angular",properties:{[zg]:!0,[Il]:t,[Il+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(hP(c))return r.invokeTask(s,o,a,c);try{return VE(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),UE(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return VE(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!fP(c)&&e(),UE(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Yp(n),qg(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Yp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function VE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function UE(n){n._nesting--,qg(n)}var Zp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ke,this.onMicrotaskEmpty=new Ke,this.onStable=new Ke,this.onError=new Ke}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function hP(n){return T0(n,"__ignore_ng_zone__")}function fP(n){return T0(n,"__scheduler_tick__")}function T0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var zn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Tp(e);for(;t&&Tp(t);)t=Tp(t);return t||null}},pP=new Q("",{providedIn:"root",factory:()=>{let n=V(Te),e=V(zn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function gP(){return Ul(At(),Se())}function Ul(n,e){return new Rr(fn(n,e))}var Rr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=gP}}return n})();function S0(n){return(n.flags&128)===128}var A0=new Map,mP=0;function yP(){return mP++}function vP(n){A0.set(n[kl],n)}function Jp(n){A0.delete(n[kl])}var jE="__ngContext__";function mi(n,e){Dr(e)?(n[jE]=e[kl],vP(e)):n[jE]=e}function x0(n){return M0(n[ba])}function R0(n){return M0(n[ln])}function M0(n){for(;n!==null&&!Qn(n);)n=n[ln];return n}var Xp;function N0(n){Xp=n}function P0(){if(Xp!==void 0)return Xp;if(typeof document<"u")return document;throw new K(210,!1)}var Gg=new Q("",{providedIn:"root",factory:()=>_P}),_P="ng",Wg=new Q(""),Mr=new Q("",{providedIn:"platform",factory:()=>"unknown"});var Kg=new Q("",{providedIn:"root",factory:()=>P0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var wP="h",IP="b";var EP=()=>null;function Qg(n,e,t=!1){return EP(n,e,t)}var O0=!1,bP=new Q("",{providedIn:"root",factory:()=>O0});var Qu;function DP(){if(Qu===void 0&&(Qu=null,_a.trustedTypes))try{Qu=_a.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Qu}function jl(n){return DP()?.createHTML(n)||n}var Yu;function CP(){if(Yu===void 0&&(Yu=null,_a.trustedTypes))try{Yu=_a.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Yu}function BE(n){return CP()?.createHTML(n)||n}var El=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lb})`}};function Na(n){return n instanceof El?n.changingThisBreaksApplicationSecurity:n}function Yg(n,e){let t=TP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${lb})`)}return t===e}function TP(n){return n instanceof El&&n.getTypeName()||null}function SP(n){let e=new tg(n);return AP()?new eg(e):e}var eg=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(jl(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},tg=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=jl(e),t}};function AP(){try{return!!new window.DOMParser().parseFromString(jl(""),"text/html")}catch{return!1}}var xP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Zg(n){return n=String(n),n.match(xP)?n:"unsafe:"+n}function Yn(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Pa(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var k0=Yn("area,br,col,hr,img,wbr"),F0=Yn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),L0=Yn("rp,rt"),RP=Pa(L0,F0),MP=Pa(F0,Yn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),NP=Pa(L0,Yn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$E=Pa(k0,MP,NP,RP),V0=Yn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),PP=Yn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),OP=Yn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),kP=Pa(V0,PP,OP),FP=Yn("script,style,template"),ng=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=UP(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=VP(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=HE(e).toLowerCase();if(!$E.hasOwnProperty(t))return this.sanitizedSomething=!0,!FP.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!kP.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;V0[a]&&(c=Zg(c)),this.buf.push(" ",o,'="',zE(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=HE(e).toLowerCase();$E.hasOwnProperty(t)&&!k0.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(zE(e))}};function LP(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function VP(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw U0(e);return e}function UP(n){let e=n.firstChild;if(e&&LP(n,e))throw U0(e);return e}function HE(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function U0(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var jP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,BP=/([^\#-~ |!])/g;function zE(n){return n.replace(/&/g,"&amp;").replace(jP,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(BP,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Zu;function j0(n,e){let t=null;try{Zu=Zu||SP(n);let r=e?String(e):"";t=Zu.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Zu.getInertBodyElement(r)}while(r!==s);let a=new ng().sanitizeChildren(qE(t)||t);return jl(a)}finally{if(t){let r=qE(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function qE(n){return"content"in n&&$P(n)?n.content:null}function $P(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Bl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Bl||{});function B0(n){let e=$0();return e?BE(e.sanitize(Bl.HTML,n)||""):Yg(n,"HTML")?BE(Na(n)):j0(P0(),Nl(n))}function Oa(n){let e=$0();return e?e.sanitize(Bl.URL,n)||"":Yg(n,"URL")?Na(n):Zg(Nl(n))}function $0(){let n=Se();return n&&n[bn].sanitizer}function H0(n){return n instanceof Function?n():n}var qn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(qn||{}),HP;function Jg(n,e){return HP(n,e)}function Ss(n,e,t,r,i){if(r!=null){let s,o=!1;Qn(r)?s=r:Dr(r)&&(o=!0,r=r[Kn]);let a=Tn(r);n===0&&t!==null?i==null?K0(e,t,a):bl(e,t,a,i||null,!0):n===1&&t!==null?bl(e,t,a,i||null,!0):n===2?iO(e,a,o):n===3&&e.destroyNode(a),s!=null&&oO(e,n,s,t,i)}}function zP(n,e){return n.createText(e)}function qP(n,e,t){n.setValue(e,t)}function z0(n,e,t){return n.createElement(e,t)}function GP(n,e){q0(n,e),e[Kn]=null,e[hn]=null}function WP(n,e,t,r,i,s){r[Kn]=i,r[hn]=e,$l(n,r,t,1,i,s)}function q0(n,e){e[bn].changeDetectionScheduler?.notify(9),$l(n,e,e[Qe],2,null,null)}function KP(n){let e=n[ba];if(!e)return Sp(n[de],n);for(;e;){let t=null;if(Dr(e))t=e[ba];else{let r=e[Wt];r&&(t=r)}if(!t){for(;e&&!e[ln]&&e!==n;)Dr(e)&&Sp(e[de],e),e=e[_t];e===null&&(e=n),Dr(e)&&Sp(e[de],e),t=e&&e[ln]}e=t}}function QP(n,e,t,r){let i=Wt+r,s=t.length;r>0&&(t[i-1][ln]=e),r<s-Wt?(e[ln]=t[i],wb(t,Wt+r,e)):(t.push(e),e[ln]=null),e[_t]=t;let o=e[Os];o!==null&&t!==o&&G0(o,e);let a=e[ks];a!==null&&a.insertView(n),$p(e),e[ee]|=128}function G0(n,e){let t=n[fl],r=e[_t];if(Dr(r))n[ee]|=pl.HasTransplantedViews;else{let i=r[_t][Dn];e[Dn]!==i&&(n[ee]|=pl.HasTransplantedViews)}t===null?n[fl]=[e]:t.push(e)}function Xg(n,e){let t=n[fl],r=t.indexOf(e);t.splice(r,1)}function rg(n,e){if(n.length<=Wt)return;let t=Wt+e,r=n[t];if(r){let i=r[Os];i!==null&&i!==n&&Xg(i,r),e>0&&(n[t-1][ln]=r[ln]);let s=cl(n,Wt+e);GP(r[de],r);let o=s[ks];o!==null&&o.detachView(s[de]),r[_t]=null,r[ln]=null,r[ee]&=-129}return r}function W0(n,e){if(!(e[ee]&256)){let t=e[Qe];t.destroyNode&&$l(n,e,t,3,null,null),KP(e)}}function Sp(n,e){if(e[ee]&256)return;let t=_e(null);try{e[ee]&=-129,e[ee]|=256,e[Gt]&&Yf(e[Gt]),ZP(n,e),YP(n,e),e[de].type===1&&e[Qe].destroy();let r=e[Os];if(r!==null&&Qn(e[_t])){r!==e[_t]&&Xg(r,e);let i=e[ks];i!==null&&i.detachView(n)}Jp(e)}finally{_e(t)}}function YP(n,e){let t=n.cleanup,r=e[dl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[dl]=null);let i=e[br];if(i!==null){e[br]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function ZP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof gi)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];wn(4,a,c);try{c.call(a)}finally{wn(5,a,c)}}else{wn(4,i,s);try{s.call(i)}finally{wn(5,i,s)}}}}}function JP(n,e,t){return XP(n,e.parent,t)}function XP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Kn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===En.None||s===En.Emulated)return null}return fn(r,t)}}function bl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function K0(n,e,t){n.appendChild(e,t)}function GE(n,e,t,r,i){r!==null?bl(n,e,t,r,i):K0(n,e,t)}function Q0(n,e){return n.parentNode(e)}function eO(n,e){return n.nextSibling(e)}function tO(n,e,t){return rO(n,e,t)}function nO(n,e,t){return n.type&40?fn(n,t):null}var rO=nO,WE;function em(n,e,t,r){let i=JP(n,r,e),s=e[Qe],o=r.parent||e[hn],a=tO(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)GE(s,i,t[c],a,!1);else GE(s,i,t,a,!1);WE!==void 0&&WE(s,r,e,t,i)}function ma(n,e){if(e!==null){let t=e.type;if(t&3)return fn(e,n);if(t&4)return ig(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ma(n,r);{let i=n[e.index];return Qn(i)?ig(-1,i):Tn(i)}}else{if(t&128)return ma(n,e.next);if(t&32)return Jg(e,n)()||Tn(n[e.index]);{let r=Y0(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fi(n[Dn]);return ma(i,r)}else return ma(n,e.next)}}}return null}function Y0(n,e){if(e!==null){let r=n[Dn][hn],i=e.projection;return r.projection[i]}return null}function ig(n,e){let t=Wt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return ma(r,i)}return e[hi]}function iO(n,e,t){n.removeChild(null,e,t)}function tm(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&mi(Tn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)tm(n,e,t.child,r,i,s,!1),Ss(e,n,i,a,s);else if(c&32){let l=Jg(t,r),h;for(;h=l();)Ss(e,n,i,h,s);Ss(e,n,i,a,s)}else c&16?sO(n,e,r,t,i,s):Ss(e,n,i,a,s);t=o?t.projectionNext:t.next}}function $l(n,e,t,r,i,s){tm(t,r,n.firstChild,e,i,s,!1)}function sO(n,e,t,r,i,s){let o=t[Dn],c=o[hn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Ss(e,n,i,h,s)}else{let l=c,h=o[_t];S0(r)&&(l.flags|=128),tm(n,e,l,h,i,s,!0)}}function oO(n,e,t,r,i){let s=t[hi],o=Tn(t);s!==o&&Ss(e,n,r,s,i);for(let a=Wt;a<t.length;a++){let c=t[a];$l(c[de],c,n,e,r,s)}}function aO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:qn.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=qn.Important),n.setStyle(t,r,i,s))}}function cO(n,e,t){n.setAttribute(e,"style",t)}function Z0(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function J0(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Fp(n,e,r),i!==null&&Z0(n,e,i),s!==null&&cO(n,e,s)}var Nr={};function be(n=1){X0(St(),Se(),Hs()+n,!1)}function X0(n,e,t,r){if(!r)if((e[ee]&3)===3){let s=n.preOrderCheckHooks;s!==null&&nl(e,s,t)}else{let s=n.preOrderHooks;s!==null&&rl(e,s,0,t)}pi(t)}function Z(n,e=ae.Default){let t=Se();if(t===null)return X(n,e);let r=At();return _0(r,t,yt(n),e)}function eD(n,e,t,r,i,s){let o=_e(null);try{let a=null;i&Cr.SignalBased&&(a=e[r][$n]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Cr.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):Ub(e,a,r,s)}finally{_e(o)}}function uO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)pi(~i);else{let s=i,o=t[++r],a=t[++r];VN(o,s);let c=e[s];a(2,c)}}}finally{pi(-1)}}function Hl(n,e,t,r,i,s,o,a,c,l,h){let p=e.blueprint.slice();return p[Kn]=i,p[ee]=r|4|128|8|64,(l!==null||n&&n[ee]&2048)&&(p[ee]|=2048),Gb(p),p[_t]=p[Bs]=n,p[dn]=t,p[bn]=o||n&&n[bn],p[Qe]=a||n&&n[Qe],p[Ps]=c||n&&n[Ps]||null,p[hn]=s,p[kl]=yP(),p[ll]=h,p[Fb]=l,p[Dn]=e.type==2?n[Dn]:p,p}function zl(n,e,t,r,i){let s=n.data[e];if(s===null)s=lO(n,e,t,r,i),LN()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=PN();s.injectorIndex=o===null?-1:o.injectorIndex}return Ra(s,!0),s}function lO(n,e,t,r,i){let s=Xb(),o=e0(),a=o?s:s&&s.parent,c=n.data[e]=gO(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function tD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function nD(n,e,t,r,i){let s=Hs(),o=r&2;try{pi(-1),o&&e.length>Cn&&X0(n,e,Cn,!1),wn(o?2:0,i),t(r,i)}finally{pi(s),wn(o?3:1,i)}}function rD(n,e,t){if(Vb(e)){let r=_e(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{_e(r)}}}function iD(n,e,t){Yb()&&(IO(n,e,t,fn(t,e)),(t.flags&64)===64&&uD(n,e,t))}function sD(n,e,t=fn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function oD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=nm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function nm(n,e,t,r,i,s,o,a,c,l,h){let p=Cn+r,m=p+i,v=dO(p,m),T=typeof l=="function"?l():l;return v[de]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:h}}function dO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Nr);return t}function hO(n,e,t,r){let s=r.get(bP,O0)||t===En.ShadowDom,o=n.selectRootElement(e,s);return fO(o),o}function fO(n){pO(n)}var pO=()=>null;function gO(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return RN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function KE(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Cr.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?QE(r,t,l,a,c):QE(r,t,l,a)}return r}function QE(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function mO(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=t?t.get(p):null,v=m?m.inputs:null,T=m?m.outputs:null;c=KE(0,p.inputs,h,c,v),l=KE(1,p.outputs,h,l,T);let M=c!==null&&o!==null&&!Mg(e)?RO(c,h,o):null;a.push(M)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function yO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function rm(n,e,t,r,i,s,o,a){let c=fn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(im(n,t,h,r,i),Fl(e)&&vO(t,e.index)):e.type&3?(r=yO(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function vO(n,e){let t=xr(e,n);t[ee]&16||(t[ee]|=64)}function aD(n,e,t,r){if(Yb()){let i=r===null?null:{"":-1},s=bO(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&cD(n,e,t,o,i,a),i&&DO(t,r,i)}t.mergedAttrs=Ia(t.mergedAttrs,t.attrs)}function cD(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Gp(_l(t,e),n,r[l].type);TO(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,c=tD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Ia(t.mergedAttrs,h.hostAttrs),SO(n,t,e,c,h),CO(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}mO(n,t,s)}function _O(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;wO(o)!=a&&o.push(a),o.push(t,r,s)}}function wO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function IO(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Fl(t)&&AO(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||_l(t,e),mi(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=Fs(e,n,a,t);if(mi(l,e),o!==null&&xO(e,a-i,l,c,t,o),Tr(c)){let h=xr(t.index,e);h[dn]=Fs(e,n,a,t)}}}function uD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=UN();try{pi(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Hp(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&EO(c,l)}}finally{pi(-1),Hp(o)}}function EO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function bO(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(ZM(e,o.selectors,!1))if(r||(r=[]),Tr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;sg(n,e,c)}else r.unshift(o),sg(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function sg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function DO(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new K(-301,!1);r.push(e[i],s)}}}function CO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Tr(e)&&(t[""]=n)}}function TO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function SO(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=li(i.type,!0)),o=new gi(s,Tr(i),Z);n.blueprint[r]=o,t[r]=o,_O(n,e,r,tD(n,t,i.hostVars,Nr),i)}function AO(n,e,t){let r=fn(e,n),i=oD(t),s=n[bn].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=ql(n,Hl(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function xO(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],h=o[a++],p=o[a++];eD(r,t,c,l,h,p)}}function RO(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function lD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function dD(n,e){let t=n.contentQueries;if(t!==null){let r=_e(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];r0(s),a.contentQueries(2,e[o],o)}}}finally{_e(r)}}}function ql(n,e){return n[ba]?n[RE][ln]=e:n[ba]=e,n[RE]=e,e}function og(n,e,t){r0(0);let r=_e(null);try{e(n,t)}finally{_e(r)}}function MO(n){return n[dl]??=[]}function NO(n){return n.cleanup??=[]}function hD(n,e){let t=n[Ps],r=t?t.get(zn,null):null;r&&r.handleError(e)}function im(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],h=n.data[o];eD(h,l,r,a,c,i)}}function PO(n,e,t){let r=zb(e,n);qP(n[Qe],r,t)}function OO(n,e){let t=xr(e,n),r=t[de];kO(r,t);let i=t[Kn];i!==null&&t[ll]===null&&(t[ll]=Qg(i,t[Ps])),sm(r,t,t[dn])}function kO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function sm(n,e,t){Lg(e);try{let r=n.viewQuery;r!==null&&og(1,r,t);let i=n.template;i!==null&&nD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ks]?.finishViewCreation(n),n.staticContentQueries&&dD(n,e),n.staticViewQueries&&og(2,n.viewQuery,t);let s=n.components;s!==null&&FO(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ee]&=-5,Vg()}}function FO(n,e){for(let t=0;t<e.length;t++)OO(n,e[t])}function LO(n,e,t,r){let i=_e(null);try{let s=e.tView,a=n[ee]&4096?4096:16,c=Hl(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Os]=l;let h=n[ks];return h!==null&&(c[ks]=h.createEmbeddedView(s)),sm(s,c,t),c}finally{_e(i)}}function YE(n,e){return!e||e.firstChild===null||S0(n)}function VO(n,e,t,r=!0){let i=e[de];if(QP(i,e,n,t),r){let o=ig(t,n),a=e[Qe],c=Q0(a,n[hi]);c!==null&&WP(i,n[hn],a,e,c,o)}let s=e[ll];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Dl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Tn(s)),Qn(s)&&UO(s,r);let o=t.type;if(o&8)Dl(n,e,t.child,r);else if(o&32){let a=Jg(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=Y0(e,t);if(Array.isArray(a))r.push(...a);else{let c=fi(e[Dn]);Dl(c[de],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function UO(n,e){for(let t=Wt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&Dl(r[de],r,i,e)}n[hi]!==n[Kn]&&e.push(n[hi])}var fD=[];function jO(n){return n[Gt]??BO(n)}function BO(n){let e=fD.pop()??Object.create(HO);return e.lView=n,e}function $O(n){n.lView[Gt]!==n&&(n.lView=null,fD.push(n))}var HO=fe(L({},ha),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Vl(n.lView)},consumerOnSignalRead(){this.lView[Gt]=this}});function zO(n){let e=n[Gt]??Object.create(qO);return e.lView=n,e}var qO=fe(L({},ha),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=fi(n.lView);for(;e&&!pD(e[de]);)e=fi(e);e&&Wb(e)},consumerOnSignalRead(){this.lView[Gt]=this}});function pD(n){return n.type!==2}var GO=100;function gD(n,e=!0,t=0){let r=n[bn],i=r.rendererFactory,s=!1;s||i.begin?.();try{WO(n,t)}catch(o){throw e&&hD(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function WO(n,e){let t=t0();try{NE(!0),ag(n,e);let r=0;for(;Ll(n);){if(r===GO)throw new K(103,!1);r++,ag(n,1)}}finally{NE(t)}}function KO(n,e,t,r){let i=e[ee];if((i&256)===256)return;let s=!1,o=!1;!s&&e[bn].inlineEffectRunner?.flush(),Lg(e);let a=!0,c=null,l=null;s||(pD(n)?(l=jO(e),c=wu(l)):FI()===null?(a=!1,l=zO(e),c=wu(l)):e[Gt]&&(Yf(e[Gt]),e[Gt]=null));try{Gb(e),kN(n.bindingStartIndex),t!==null&&nD(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let v=n.preOrderCheckHooks;v!==null&&nl(e,v,null)}else{let v=n.preOrderHooks;v!==null&&rl(e,v,0,null),bp(e,0)}if(o||QO(e),mD(e,0),n.contentQueries!==null&&dD(n,e),!s)if(h){let v=n.contentCheckHooks;v!==null&&nl(e,v)}else{let v=n.contentHooks;v!==null&&rl(e,v,1),bp(e,1)}uO(n,e);let p=n.components;p!==null&&vD(e,p,0);let m=n.viewQuery;if(m!==null&&og(2,m,r),!s)if(h){let v=n.viewCheckHooks;v!==null&&nl(e,v)}else{let v=n.viewHooks;v!==null&&rl(e,v,2),bp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ep]){for(let v of e[Ep])v();e[Ep]=null}s||(e[ee]&=-73)}catch(h){throw s||Vl(e),h}finally{l!==null&&(Kf(l,c),a&&$O(l)),Vg()}}function mD(n,e){for(let t=x0(n);t!==null;t=R0(t))for(let r=Wt;r<t.length;r++){let i=t[r];yD(i,e)}}function QO(n){for(let e=x0(n);e!==null;e=R0(e)){if(!(e[ee]&pl.HasTransplantedViews))continue;let t=e[fl];for(let r=0;r<t.length;r++){let i=t[r];Wb(i)}}}function YO(n,e,t){let r=xr(e,n);yD(r,t)}function yD(n,e){kg(n)&&ag(n,e)}function ag(n,e){let r=n[de],i=n[ee],s=n[Gt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Qf(s)),o||=!1,s&&(s.dirty=!1),n[ee]&=-9217,o)KO(r,n,r.template,n[dn]);else if(i&8192){mD(n,1);let a=r.components;a!==null&&vD(n,a,1)}}function vD(n,e,t){for(let r=0;r<e.length;r++)YO(n,e[r],t)}function om(n,e){let t=t0()?64:1088;for(n[bn].changeDetectionScheduler?.notify(e);n;){n[ee]|=t;let r=fi(n);if(jp(n)&&!r)return n;n=r}return null}var yi=class{get rootNodes(){let e=this._lView,t=e[de];return Dl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dn]}set context(e){this._lView[dn]=e}get destroyed(){return(this._lView[ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[_t];if(Qn(e)){let t=e[hl],r=t?t.indexOf(this):-1;r>-1&&(rg(e,r),cl(t,r))}this._attachedToViewContainer=!1}W0(this._lView[de],this._lView)}onDestroy(e){Kb(this._lView,e)}markForCheck(){om(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){$p(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,gD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=jp(this._lView),t=this._lView[Os];t!==null&&!e&&Xg(t,this._lView),q0(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;let t=jp(this._lView),r=this._lView[Os];r!==null&&!t&&G0(r,this._lView),$p(this._lView)}},Gl=(()=>{class n{static{this.__NG_ELEMENT_ID__=XO}}return n})(),ZO=Gl,JO=class extends ZO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=LO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new yi(i)}};function XO(){return ek(At(),Se())}function ek(n,e){return n.type&4?new JO(e,n,Ul(n,e)):null}var qW=new RegExp(`^(\\d+)*(${IP}|${wP})*(.*)`);var tk=()=>null;function ZE(n,e){return tk(n,e)}var Ls=class{},Wl=new Q("",{providedIn:"root",factory:()=>!1});var _D=new Q(""),wD=new Q(""),cg=class{},Cl=class{};function nk(n){let e=Error(`No component factory found for ${vt(n)}.`);return e[rk]=n,e}var rk="ngComponent";var ug=class{resolveComponentFactory(e){throw nk(e)}},Vs=class{static{this.NULL=new ug}},Us=class{},Ii=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>ik()}}return n})();function ik(){let n=Se(),e=At(),t=xr(e.index,n);return(Dr(t)?t:n)[Qe]}var sk=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>null})}}return n})();function lg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=wE(i,a);else if(s==2){let c=a,l=e[++o];r=wE(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Tl=class extends Vs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=di(e);return new Da(t,this.ngModule)}};function JE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Cr.None;e?t.push({propName:o,templateName:r,isSignal:(a&Cr.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function ok(n){let e=n.toLowerCase();return e==="svg"?Hb:e==="math"?EN:null}var Da=class extends Cl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=JE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return JE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=tN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=_e(null);try{i=i||this.ngModule;let o=i instanceof Kt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new zp(e,o):e,c=a.get(Us,null);if(c===null)throw new K(407,!1);let l=a.get(sk,null),h=a.get(Ls,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",T=r?hO(m,r,this.componentDef.encapsulation,a):z0(m,v,ok(v)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let R=null;T!==null&&(R=Qg(T,a,!0));let k=nm(0,null,null,1,0,null,null,null,null,null,null),B=Hl(null,k,null,M,null,null,p,m,a,null,R);Lg(B);let F,H,ne=null;try{let $=this.componentDef,I,y=null;$.findHostDirectiveDefs?(I=[],y=new Map,$.findHostDirectiveDefs($,I,y),I.push($)):I=[$];let _=ak(B,T);ne=ck(_,T,$,I,B,p,m),H=qb(k,Cn),T&&dk(m,$,T,r),t!==void 0&&hk(H,this.ngContentSelectors,t),F=lk(ne,$,I,y,B,[fk]),sm(k,B,null)}catch($){throw ne!==null&&Jp(ne),Jp(B),$}finally{Vg()}return new dg(this.componentType,F,Ul(H,B),B,H)}finally{_e(s)}}},dg=class extends cg{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new yi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;im(s[de],s,i,e,t),this.previousInputValues.set(e,t);let o=xr(this._tNode.index,s);om(o,1)}}get injector(){return new ui(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ak(n,e){let t=n[de],r=Cn;return n[r]=e,zl(t,r,2,"#host",null)}function ck(n,e,t,r,i,s,o){let a=i[de];uk(r,n,e,o);let c=null;e!==null&&(c=Qg(e,i[Ps]));let l=s.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Hl(i,oD(t),null,h,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&sg(a,n,r.length-1),ql(i,p),i[n.index]=p}function uk(n,e,t,r){for(let i of n)e.mergedAttrs=Ia(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(lg(e,e.mergedAttrs,!0),t!==null&&J0(r,t,e))}function lk(n,e,t,r,i,s){let o=At(),a=i[de],c=fn(o,i);cD(a,i,o,t,null,r);for(let h=0;h<t.length;h++){let p=o.directiveStart+h,m=Fs(i,a,p,o);mi(m,i)}uD(a,i,o),c&&mi(c,i);let l=Fs(i,a,o.directiveStart+o.componentOffset,o);if(n[dn]=i[dn]=l,s!==null)for(let h of s)h(l,e);return rD(a,o,i),l}function dk(n,e,t,r){if(r)Fp(n,t,["ng-version","18.2.10"]);else{let{attrs:i,classes:s}=nN(e.selectors[0]);i&&Fp(n,t,i),s&&s.length>0&&Z0(n,t,s.join(" "))}}function hk(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function fk(){let n=At();$g(Se()[de],n)}var qs=(()=>{class n{static{this.__NG_ELEMENT_ID__=pk}}return n})();function pk(){let n=At();return mk(n,Se())}var gk=qs,ID=class extends gk{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ul(this._hostTNode,this._hostLView)}get injector(){return new ui(this._hostTNode,this._hostLView)}get parentInjector(){let e=Hg(this._hostTNode,this._hostLView);if(f0(e)){let t=yl(e,this._hostLView),r=ml(e),i=t[de].data[r+8];return new ui(i,t)}else return new ui(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=XE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Wt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=ZE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,YE(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!vN(e),a;if(o)a=t;else{let T=t||{};a=T.index,r=T.injector,i=T.projectableNodes,s=T.environmentInjector||T.ngModuleRef}let c=o?e:new Da(di(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let M=(o?l:this.parentInjector).get(Kt,null);M&&(s=M)}let h=di(c.componentType??{}),p=ZE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=c.create(l,i,m,s);return this.insertImpl(v.hostView,a,YE(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(DN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[_t],l=new ID(c,c[hn],c[_t]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return VO(o,i,s,r),e.attachToViewContainerRef(),wb(Ap(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=XE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=rg(this._lContainer,t);r&&(cl(Ap(this._lContainer),t),W0(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=rg(this._lContainer,t);return r&&cl(Ap(this._lContainer),t)!=null?new yi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function XE(n){return n[hl]}function Ap(n){return n[hl]||(n[hl]=[])}function mk(n,e){let t,r=e[n.index];return Qn(r)?t=r:(t=lD(r,e,null,n),e[n.index]=t,ql(e,t)),vk(t,e,n,r),new ID(t,n,e)}function yk(n,e){let t=n[Qe],r=t.createComment(""),i=fn(e,n),s=Q0(t,i);return bl(t,s,r,eO(t,i),!1),r}var vk=Ik,_k=()=>!1;function wk(n,e,t){return _k(n,e,t)}function Ik(n,e,t,r){if(n[hi])return;let i;t.type&8?i=Tn(r):i=yk(e,t),n[hi]=i}var eb=new Set;function ka(n){eb.has(n)||(eb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Ek(n){return typeof n=="function"&&n[$n]!==void 0}function Kl(n,e){ka("NgSignals");let t=WI(n),r=t[$n];return e?.equal&&(r.equal=e.equal),t.set=i=>Zf(r,i),t.update=i=>KI(r,i),t.asReadonly=bk.bind(t),t}function bk(){let n=this[$n];if(n.readonlyFn===void 0){let e=()=>this();e[$n]=n,n.readonlyFn=e}return n.readonlyFn}function ED(n){return Ek(n)&&typeof n.set=="function"}function Dk(n){return Object.getPrototypeOf(n.prototype).constructor}function Gs(n){let e=Dk(n.type),t=!0,r=[n];for(;e;){let i;if(Tr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Ju(n.inputs),o.inputTransforms=Ju(n.inputTransforms),o.declaredInputs=Ju(n.declaredInputs),o.outputs=Ju(n.outputs);let a=i.hostBindings;a&&xk(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&Sk(n,c),l&&Ak(n,l),Ck(n,i),EM(n.outputs,i.outputs),Tr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Gs&&(t=!1)}}e=Object.getPrototypeOf(e)}Tk(r)}function Ck(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function Tk(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ia(i.hostAttrs,t=Ia(t,i.hostAttrs))}}function Ju(n){return n===Rs?{}:n===qt?[]:n}function Sk(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Ak(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function xk(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Sr=class{},Ca=class{};var hg=class extends Sr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Tl(this);let s=xb(e);this._bootstrapComponents=H0(s.bootstrap),this._r3Injector=E0(e,t,[{provide:Sr,useValue:this},{provide:Vs,useValue:this.componentFactoryResolver},...r],vt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},fg=class extends Ca{constructor(e){super(),this.moduleType=e}create(e){return new hg(this.moduleType,e,[])}};var Sl=class extends Sr{constructor(e){super(),this.componentFactoryResolver=new Tl(this),this.instance=null;let t=new Ea([...e.providers,{provide:Sr,useValue:this},{provide:Vs,useValue:this.componentFactoryResolver}],e.parent||Pg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function am(n,e,t=null){return new Sl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function bD(n){return cm(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Rk(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function cm(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function DD(n,e,t){return n[e]=t}function Ar(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Mk(n,e,t,r){let i=Ar(n,e,t);return Ar(n,e+1,r)||i}function Nk(n,e,t,r,i){let s=Mk(n,e,t,r);return Ar(n,e+2,i)||s}function Pk(n){return(n.flags&32)===32}function Ok(n,e,t,r,i,s,o,a,c){let l=e.consts,h=zl(e,n,4,o||null,a||null);aD(e,t,h,gl(l,c)),$g(e,h);let p=h.tView=nm(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function kk(n,e,t,r,i,s,o,a,c,l){let h=t+Cn,p=e.firstCreatePass?Ok(h,e,n,r,i,s,o,a,c):e.data[h];Ra(p,!1);let m=Fk(e,n,p,t);jg()&&em(e,n,m,p),mi(m,n);let v=lD(m,n,m,p);return n[h]=v,ql(n,v),wk(v,p,n),Og(p)&&iD(e,n,p),c!=null&&sD(n,p,l),p}function An(n,e,t,r,i,s,o,a){let c=Se(),l=St(),h=gl(l.consts,s);return kk(c,l,n,e,t,r,i,h,o,a),An}var Fk=Lk;function Lk(n,e,t,r){return Bg(!0),e[Qe].createComment("")}var ya=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ya||{}),Vk=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})(),tb=class n{constructor(){this.ngZone=V(Te),this.scheduler=V(Ls),this.errorHandler=V(zn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ya.EarlyRead,ya.Write,ya.MixedReadWrite,ya.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}};function CD(n,e,t,r){return Ar(n,Fg(),t)?e+Nl(t)+r:Nr}function Xu(n,e){return n<<17|e<<2}function vi(n){return n>>17&32767}function Uk(n){return(n&2)==2}function jk(n,e){return n&131071|e<<17}function pg(n){return n|2}function js(n){return(n&131068)>>2}function xp(n,e){return n&-131069|e<<2}function Bk(n){return(n&1)===1}function gg(n){return n|1}function $k(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=vi(o),c=js(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||xa(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let m=vi(n[a+1]);n[r+1]=Xu(m,a),m!==0&&(n[m+1]=xp(n[m+1],r)),n[a+1]=jk(n[a+1],r)}else n[r+1]=Xu(a,0),a!==0&&(n[a+1]=xp(n[a+1],r)),a=r;else n[r+1]=Xu(c,0),a===0?a=r:n[c+1]=xp(n[c+1],r),c=r;l&&(n[r+1]=pg(n[r+1])),nb(n,h,r,!0),nb(n,h,r,!1),Hk(e,h,n,r,s),o=Xu(a,c),s?e.classBindings=o:e.styleBindings=o}function Hk(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&xa(s,e)>=0&&(t[r+1]=gg(t[r+1]))}function nb(n,e,t,r){let i=n[t+1],s=e===null,o=r?vi(i):js(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];zk(c,e)&&(a=!0,n[o+1]=r?gg(l):pg(l)),o=r?vi(l):js(l)}a&&(n[t+1]=r?pg(i):gg(i))}function zk(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?xa(n,e)>=0:!1}function je(n,e,t){let r=Se(),i=Fg();if(Ar(r,i,e)){let s=St(),o=Ug();rm(s,o,r,n,e,r[Qe],t,!1)}return je}function rb(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";im(n,t,s[o],o,r)}function um(n,e){return qk(n,e,null,!0),um}function qk(n,e,t,r){let i=Se(),s=St(),o=FN(2);if(s.firstUpdatePass&&Wk(s,n,o,r),e!==Nr&&Ar(i,o,e)){let a=s.data[Hs()];Jk(s,a,i,i[Qe],n,i[o+1]=Xk(e,t),r,o)}}function Gk(n,e){return e>=n.expandoStartIndex}function Wk(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Hs()],o=Gk(n,t);e1(s,r)&&e===null&&!o&&(e=!1),e=Kk(i,s,e,r),$k(i,s,e,t,o,r)}}function Kk(n,e,t,r){let i=jN(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Rp(null,n,e,t,r),t=Ta(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Rp(i,n,e,t,r),s===null){let c=Qk(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Rp(null,n,e,c[1],r),c=Ta(c,e.attrs,r),Yk(n,e,r,c))}else s=Zk(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function Qk(n,e,t){let r=t?e.classBindings:e.styleBindings;if(js(r)!==0)return n[vi(r)]}function Yk(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[vi(i)]=r}function Zk(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ta(r,o,t)}return Ta(r,e.attrs,t)}function Rp(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ta(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ta(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),$M(n,o,t?!0:e[++s]))}return n===void 0?null:n}function Jk(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=Bk(l)?ib(c,e,t,i,js(l),o):void 0;if(!Al(h)){Al(s)||Uk(l)&&(s=ib(c,null,t,i,a,o));let p=zb(Hs(),t);aO(r,o,p,i,s)}}function ib(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=t[i+1];m===Nr&&(m=p?qt:void 0);let v=p?wp(m,r):h===r?m:void 0;if(l&&!Al(v)&&(v=wp(c,r)),Al(v)&&(a=v,o))return a;let T=n[i+1];i=o?vi(T):js(T)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=wp(c,r))}return a}function Al(n){return n!==void 0}function Xk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=vt(Na(n)))),n}function e1(n,e){return(n.flags&(e?8:16))!==0}function t1(n,e,t,r,i,s){let o=e.consts,a=gl(o,i),c=zl(e,n,2,r,a);return aD(e,t,c,gl(o,s)),c.attrs!==null&&lg(c,c.attrs,!1),c.mergedAttrs!==null&&lg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function W(n,e,t,r){let i=Se(),s=St(),o=Cn+n,a=i[Qe],c=s.firstCreatePass?t1(o,s,i,e,t,r):s.data[o],l=n1(s,i,c,a,e,n);i[o]=l;let h=Og(c);return Ra(c,!0),J0(a,l,c),!Pk(c)&&jg()&&em(s,i,l,c),SN()===0&&mi(l,i),AN(),h&&(iD(s,i,c),rD(s,c,i)),r!==null&&sD(i,c),W}function J(){let n=At();e0()?ON():(n=n.parent,Ra(n,!1));let e=n;MN(e)&&NN(),xN();let t=St();return t.firstCreatePass&&($g(t,n),Vb(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&KN(e)&&rb(t,e,Se(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&QN(e)&&rb(t,e,Se(),e.stylesWithoutHost,!1),J}function Ie(n,e,t,r){return W(n,e,t,r),J(),Ie}var n1=(n,e,t,r,i,s)=>(Bg(!0),z0(r,i,zN()));function TD(){return Se()}var xl="en-US";var r1=xl;function i1(n){typeof n=="string"&&(r1=n.toLowerCase().replace(/_/g,"-"))}var s1=(n,e,t)=>{};function xt(n,e,t,r){let i=Se(),s=St(),o=At();return SD(s,i,i[Qe],o,n,e,r),xt}function o1(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[dl],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function SD(n,e,t,r,i,s,o){let a=Og(r),l=n.firstCreatePass&&NO(n),h=e[dn],p=MO(e),m=!0;if(r.type&3||o){let M=fn(r,e),R=o?o(M):M,k=p.length,B=o?H=>o(Tn(H[r.index])):r.index,F=null;if(!o&&a&&(F=o1(n,e,i,r.index)),F!==null){let H=F.__ngLastListenerFn__||F;H.__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,m=!1}else{s=ob(r,e,h,s),s1(M,i,s);let H=t.listen(R,i,s);p.push(s,H),l&&l.push(i,B,k,k+1)}}else s=ob(r,e,h,s);let v=r.outputs,T;if(m&&v!==null&&(T=v[i])){let M=T.length;if(M)for(let R=0;R<M;R+=2){let k=T[R],B=T[R+1],ne=e[k][B].subscribe(s),$=p.length;p.push(s,ne),l&&l.push(i,r.index,$,-($+1))}}}function sb(n,e,t,r){let i=_e(null);try{return wn(6,e,t),t(r)!==!1}catch(s){return hD(n,s),!1}finally{wn(7,e,t),_e(i)}}function ob(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?xr(n.index,e):e;om(o,5);let a=sb(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=sb(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Yt(n=1){return $N(n)}function lm(n,e,t,r,i){let s=Se(),o=CD(s,e,t,r);if(o!==Nr){let a=St(),c=Ug();rm(a,c,s,n,o,s[Qe],i,!1)}return lm}function a1(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ce(n,e=""){let t=Se(),r=St(),i=n+Cn,s=r.firstCreatePass?zl(r,i,1,e,null):r.data[i],o=c1(r,t,s,e,n);t[i]=o,jg()&&em(r,t,o,s),Ra(s,!1)}var c1=(n,e,t,r,i)=>(Bg(!0),zP(e[Qe],r));function Zn(n){return wt("",n,""),Zn}function wt(n,e,t){let r=Se(),i=CD(r,n,e,t);return i!==Nr&&PO(r,Hs(),i),wt}function dm(n,e,t){ED(e)&&(e=e());let r=Se(),i=Fg();if(Ar(r,i,e)){let s=St(),o=Ug();rm(s,o,r,n,e,r[Qe],t,!1)}return dm}function AD(n,e){let t=ED(n);return t&&n.set(e),t}function hm(n,e){let t=Se(),r=St(),i=At();return SD(r,t,t[Qe],i,n,e),hm}function u1(n,e,t){let r=St();if(r.firstCreatePass){let i=Tr(n);mg(t,r.data,r.blueprint,i,!0),mg(e,r.data,r.blueprint,i,!1)}}function mg(n,e,t,r,i){if(n=yt(n),Array.isArray(n))for(let s=0;s<n.length;s++)mg(n[s],e,t,r,i);else{let s=St(),o=Se(),a=At(),c=Ns(n)?n:yt(n.provide),l=kb(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ns(n)||!n.multi){let v=new gi(l,i,Z),T=Np(c,e,i?h:h+m,p);T===-1?(Gp(_l(a,o),s,c),Mp(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),o.push(v)):(t[T]=v,o[T]=v)}else{let v=Np(c,e,h+m,p),T=Np(c,e,h,h+m),M=v>=0&&t[v],R=T>=0&&t[T];if(i&&!R||!i&&!M){Gp(_l(a,o),s,c);let k=h1(i?d1:l1,t.length,i,r,l);!i&&R&&(t[T].providerFactory=k),Mp(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),o.push(k)}else{let k=xD(t[i?T:v],l,!i&&r);Mp(s,n,v>-1?v:T,k)}!i&&r&&R&&t[T].componentProviders++}}}function Mp(n,e,t,r){let i=Ns(e),s=lN(e);if(i||s){let c=(s?yt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function xD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Np(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function l1(n,e,t,r){return yg(this.multi,[])}function d1(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Fs(t,t[de],this.providerFactory.index,r);s=a.slice(0,o),yg(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],yg(i,s);return s}function yg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function h1(n,e,t,r,i){let s=new gi(n,t,Z);return s.multi=[],s.index=e,s.componentProviders=0,xD(s,i,r&&!t),s}function fm(n,e=[]){return t=>{t.providersResolver=(r,i)=>u1(r,i?i(n):n,e)}}var f1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Nb(!1,t.type),i=r.length>0?am([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(X(Kt))})}}return n})();function Rt(n){ka("NgStandalone"),n.getStandaloneInjector=e=>e.get(f1).getOrCreateStandaloneInjector(n)}function RD(n,e,t,r,i,s){return g1(Se(),n0(),n,e,t,r,i,s)}function MD(n,e){let t=n[e];return t===Nr?void 0:t}function p1(n,e,t,r,i,s){let o=e+t;return Ar(n,o,i)?DD(n,o+1,s?r.call(s,i):r(i)):MD(n,o+1)}function g1(n,e,t,r,i,s,o,a){let c=e+t;return Nk(n,c,i,s,o)?DD(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):MD(n,c+3)}function ND(n,e){let t=St(),r,i=n+Cn;t.firstCreatePass?(r=m1(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=li(r.type,!0)),o,a=Ct(Z);try{let c=vl(!1),l=s();return vl(c),a1(t,Se(),i,l),l}finally{Ct(a)}}function m1(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function PD(n,e,t){let r=n+Cn,i=Se(),s=bN(i,r);return y1(i,r)?p1(i,n0(),e,s.transform,t,s):s.transform(t)}function y1(n,e){return n[de].data[e].pure}var Gn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},OD=new Gn("18.2.10");var Ql=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var kD=new Q("");function Ei(n){return!!n&&typeof n.then=="function"}function FD(n){return!!n&&typeof n.subscribe=="function"}var LD=new Q(""),VD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=V(LD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Ei(s))t.push(s);else if(FD(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pm=new Q("");function v1(){GI(()=>{throw new K(600,!1)})}function _1(n){return n.isBoundToModule}var w1=10;function I1(n,e,t){try{let r=t();return Ei(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var bi=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(pP),this.afterRenderManager=V(Vk),this.zonelessEnabled=V(Wl),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new tt,this.afterTick=new tt,this.componentTypes=[],this.components=[],this.isStable=V(zs).hasPendingTasks.pipe(le(t=>!t)),this._injector=V(Kt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Cl;if(!this._injector.get(VD).done){let m=!i&&Ab(t),v=!1;throw new K(405,v)}let o;i?o=t:o=this._injector.get(Vs).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=_1(o)?void 0:this._injector.get(Sr),c=r||o.selector,l=o.create(Tt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(kD,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),il(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new K(101,!1);let t=_e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,_e(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Us,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<w1;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)E1(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ll(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;il(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(pm,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>il(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function il(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function E1(n,e,t,r){if(!t&&!Ll(n))return;gD(n,e,t&&!r?0:1)}var vg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},gm=(()=>{class n{compileModuleSync(t){return new fg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=xb(t),s=H0(i.declarations).reduce((o,a)=>{let c=di(a);return c&&o.push(new Da(c)),o},[]);return new vg(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var b1=(()=>{class n{constructor(){this.zone=V(Te),this.changeDetectionScheduler=V(Ls),this.applicationRef=V(bi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),D1=new Q("",{factory:()=>!1});function UD({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Te(fe(L({},BD()),{scheduleInRootZone:t})),[{provide:Te,useFactory:n},{provide:Ms,multi:!0,useFactory:()=>{let r=V(b1,{optional:!0});return()=>r.initialize()}},{provide:Ms,multi:!0,useFactory:()=>{let r=V(C1);return()=>{r.initialize()}}},e===!0?{provide:_D,useValue:!0}:[],{provide:wD,useValue:t??b0}]}function jD(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=UD({ngZoneFactory:()=>{let i=BD(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&ka("NgZone_CoalesceEvent"),new Te(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Sn([{provide:D1,useValue:!0},{provide:Wl,useValue:!1},r])}function BD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var C1=(()=>{class n{constructor(){this.subscription=new Ve,this.initialized=!1,this.zone=V(Te),this.pendingTasks=V(zs)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Te.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Te.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var T1=(()=>{class n{constructor(){this.appRef=V(bi),this.taskService=V(zs),this.ngZone=V(Te),this.zonelessEnabled=V(Wl),this.disableScheduling=V(_D,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ve,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Il):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(wD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Zp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?LE:C0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Il+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,LE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function S1(){return typeof $localize<"u"&&$localize.locale||xl}var mm=new Q("",{providedIn:"root",factory:()=>V(mm,ae.Optional|ae.SkipSelf)||S1()});var _g=new Q("");function el(n){return!n.moduleRef}function A1(n){let e=el(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Te);return t.run(()=>{el(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(zn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),el(n)){let s=()=>e.destroy(),o=n.platformInjector.get(_g);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(_g);o.add(s),n.moduleRef.onDestroy(()=>{il(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return I1(r,t,()=>{let s=e.get(VD);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(mm,xl);if(i1(o||xl),el(n)){let a=e.get(bi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return x1(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function x1(n,e){let t=n.injector.get(bi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new K(-403,!1);e.push(n)}var sl=null;function R1(n=[],e){return Tt.create({name:e,providers:[{provide:Ol,useValue:"platform"},{provide:_g,useValue:new Set([()=>sl=null])},...n]})}function M1(n=[]){if(sl)return sl;let e=R1(n);return sl=e,v1(),N1(e),e}function N1(n){n.get(Wg,null)?.forEach(t=>t())}var Di=(()=>{class n{static{this.__NG_ELEMENT_ID__=P1}}return n})();function P1(n){return O1(At(),Se(),(n&16)===16)}function O1(n,e,t){if(Fl(n)&&!t){let r=xr(n.index,e);return new yi(r,r)}else if(n.type&175){let r=e[Dn];return new yi(r,e)}return null}var wg=class{constructor(){}supports(e){return bD(e)}create(e){return new Ig(e)}},k1=(n,e)=>e,Ig=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||k1}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<ab(r,i,s)?t:r,a=ab(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let v=m<s.length?s[m]:s[m]=0,T=v+m;h<=T&&T<l&&(s[m]=v+1)}let p=o.previousIndex;s[p]=h-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!bD(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,Rk(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Eg(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Rl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Rl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Eg=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},bg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Rl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new bg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ab(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var Dg=class{constructor(){}supports(e){return e instanceof Map||cm(e)}create(){return new Cg}},Cg=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||cm(e)))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new Tg(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Tg=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function cb(){return new ym([new wg])}var ym=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:cb})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||cb()),deps:[[n,new xg,new rt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new K(901,!1)}}return n})();function ub(){return new vm([new Dg])}var vm=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:ub})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||ub()),deps:[[n,new xg,new rt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new K(901,!1)}}return n})();function $D(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=M1(r),s=[UD({}),{provide:Ls,useExisting:T1},...t||[]],o=new Sl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return A1({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Yl(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Zl(n,e){ka("NgSignals");let t=HI(n);return e?.equal&&(t[$n].equal=e.equal),t}function Pr(n){let e=_e(null);try{return n()}finally{_e(e)}}var QD=null;function Jn(){return QD}function YD(n){QD??=n}var Jl=class{};var Zt=new Q(""),ZD=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(V1),providedIn:"platform"})}}return n})();var V1=(()=>{class n extends ZD{constructor(){super(),this._doc=V(Zt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Jn().getBaseHref(this._doc)}onPopState(t){let r=Jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function JD(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function HD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ci(n){return n&&n[0]!=="?"?"?"+n:n}var ed=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(XD),providedIn:"root"})}}return n})(),U1=new Q(""),XD=(()=>{class n extends ed{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(Zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return JD(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ci(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ci(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ci(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(X(ZD),X(U1,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Fa=(()=>{class n{constructor(t){this._subject=new Ke,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=$1(HD(zD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ci(r))}normalize(t){return n.stripTrailingSlash(B1(this._basePath,zD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ci(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ci(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Ci}static{this.joinWithSlash=JD}static{this.stripTrailingSlash=HD}static{this.\u0275fac=function(r){return new(r||n)(X(ed))}}static{this.\u0275prov=G({token:n,factory:()=>j1(),providedIn:"root"})}}return n})();function j1(){return new Fa(X(ed))}function B1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function zD(n){return n.replace(/\/index.html$/,"")}function $1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function eC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var _m=/\s+/,qD=[],td=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=qD,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(_m):qD}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(_m):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(_m).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Z(Rr),Z(Ii))}}static{this.\u0275dir=Qt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var wm=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},nd=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new wm(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),GD(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);GD(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Z(qs),Z(Gl),Z(ym))}}static{this.\u0275dir=Qt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function GD(n,e){n.context.$implicit=e.item}var rd=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Im,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){WD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){WD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Z(qs),Z(Gl))}}static{this.\u0275dir=Qt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Im=class{constructor(){this.$implicit=null,this.ngIf=null}};function WD(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${vt(e)}'.`)}function H1(n,e){return{key:n,value:e}}var tC=(()=>{class n{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=KD}transform(t,r=KD){if(!t||!(t instanceof Map)&&typeof t!="object")return null;this.differ??=this.differs.find(t).create();let i=this.differ.diff(t),s=r!==this.compareFn;return i&&(this.keyValues=[],i.forEachItem(o=>{this.keyValues.push(H1(o.key,o.currentValue))})),(i||s)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}static{this.\u0275fac=function(r){return new(r||n)(Z(vm,16))}}static{this.\u0275pipe=Cb({name:"keyvalue",type:n,pure:!1,standalone:!0})}}return n})();function KD(n,e){let t=n.key,r=e.key;if(t===r)return 0;if(t===void 0)return 1;if(r===void 0)return-1;if(t===null)return 1;if(r===null)return-1;if(typeof t=="string"&&typeof r=="string")return t<r?-1:1;if(typeof t=="number"&&typeof r=="number")return t-r;if(typeof t=="boolean"&&typeof r=="boolean")return t<r?-1:1;let i=String(t),s=String(r);return i==s?0:i<s?-1:1}var Xn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wi({type:n})}static{this.\u0275inj=_i({})}}return n})(),nC="browser",z1="server";function Em(n){return n===z1}var Xl=class{};var Cm=class extends Jl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Tm=class n extends Cm{static makeCurrent(){YD(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=q1();return t==null?null:G1(t)}resetBaseElement(){La=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return eC(document.cookie,e)}},La=null;function q1(){return La=La||document.querySelector("base"),La?La.getAttribute("href"):null}function G1(n){return new URL(n,document.baseURI).pathname}var W1=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Sm=new Q(""),oC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(X(Sm),X(Te))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),sd=class{constructor(e){this._doc=e}},bm="ng-app-id",aC=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Em(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${bm}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(bm),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(bm,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(X(Zt),X(Gg),X(Kg,8),X(Mr))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Dm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},xm=/%COMP%/g,cC="%COMP%",K1=`_nghost-${cC}`,Q1=`_ngcontent-${cC}`,Y1=!0,Z1=new Q("",{providedIn:"root",factory:()=>Y1});function J1(n){return Q1.replace(xm,n)}function X1(n){return K1.replace(xm,n)}function uC(n,e){return e.map(t=>t.replace(xm,n))}var rC=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Em(a),this.defaultRenderer=new Va(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===En.ShadowDom&&(r=fe(L({},r),{encapsulation:En.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof od?i.applyToHost(t):i instanceof Ua&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case En.Emulated:s=new od(c,l,r,this.appId,h,o,a,p);break;case En.ShadowDom:return new Am(c,l,t,r,o,a,this.nonce,p);default:s=new Ua(c,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(X(oC),X(aC),X(Gg),X(Z1),X(Zt),X(Mr),X(Te),X(Kg))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Va=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Dm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(iC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(iC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Dm[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Dm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(qn.DashCase|qn.Important)?e.style.setProperty(t,r,i&qn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&qn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Jn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function iC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Am=class extends Va{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=uC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ua=class extends Va{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?uC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},od=class extends Ua{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=J1(l),this.hostAttr=X1(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},eF=(()=>{class n extends sd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(X(Zt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),sC=["alt","control","meta","shift"],tF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},rF=(()=>{class n extends sd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jn().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),sC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=tF[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),sC.forEach(o=>{if(o!==i){let a=nF[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(X(Zt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function lC(n,e){return $D(L({rootComponent:n},iF(e)))}function iF(n){return{appProviders:[...uF,...n?.providers??[]],platformProviders:cF}}function sF(){Tm.makeCurrent()}function oF(){return new zn}function aF(){return N0(document),document}var cF=[{provide:Mr,useValue:nC},{provide:Wg,useValue:sF,multi:!0},{provide:Zt,useFactory:aF,deps:[]}];var uF=[{provide:Ol,useValue:"root"},{provide:zn,useFactory:oF,deps:[]},{provide:Sm,useClass:eF,multi:!0,deps:[Zt,Te,Mr]},{provide:Sm,useClass:rF,multi:!0,deps:[Zt]},rC,aC,oC,{provide:Us,useExisting:rC},{provide:Xl,useClass:W1,deps:[]},[]];var dC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(X(Zt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",nc=Symbol("RouteTitle"),Om=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Js(n){return new Om(n)}function hF(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function fF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xn(n[t],e[t]))return!1;return!0}function xn(n,e){let t=n?km(n):void 0,r=e?km(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!_C(n[i],e[i]))return!1;return!0}function km(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function _C(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function wC(n){return n.length>0?n[n.length-1]:null}function Or(n){return dp(n)?n:Ei(n)?Ue(Promise.resolve(n)):se(n)}var pF={exact:EC,subset:bC},IC={exact:gF,subset:mF,ignored:()=>!0};function hC(n,e,t){return pF[t.paths](n.root,e.root,t.matrixParams)&&IC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function gF(n,e){return xn(n,e)}function EC(n,e,t){if(!Si(n.segments,e.segments)||!ud(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!EC(n.children[r],e.children[r],t))return!1;return!0}function mF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>_C(n[t],e[t]))}function bC(n,e,t){return DC(n,e,e.segments,t)}function DC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Si(i,t)||e.hasChildren()||!ud(i,t,r))}else if(n.segments.length===t.length){if(!Si(n.segments,t)||!ud(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!bC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Si(n.segments,i)||!ud(n.segments,i,r)||!n.children[oe]?!1:DC(n.children[oe],e,s,r)}}function ud(n,e,t){return e.every((r,i)=>IC[t](n[i].parameters,r.parameters))}var tr=class{constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Js(this.queryParams),this._queryParamMap}toString(){return _F.serialize(this)}},De=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ld(this)}},Ti=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Js(this.parameters),this._parameterMap}toString(){return TC(this)}};function yF(n,e){return Si(n,e)&&n.every((t,r)=>xn(t.parameters,e[r].parameters))}function Si(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function vF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var ay=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new Ga,providedIn:"root"})}}return n})(),Ga=class{parse(e){let t=new Lm(e);return new tr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ja(e.root,!0)}`,r=EF(e.queryParams),i=typeof e.fragment=="string"?`#${wF(e.fragment)}`:"";return`${t}${r}${i}`}},_F=new Ga;function ld(n){return n.segments.map(e=>TC(e)).join("/")}function ja(n,e){if(!n.hasChildren())return ld(n);if(e){let t=n.children[oe]?ja(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==oe&&r.push(`${i}:${ja(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=vF(n,(r,i)=>i===oe?[ja(n.children[oe],!1)]:[`${i}:${ja(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${ld(n)}/${t[0]}`:`${ld(n)}/(${t.join("//")})`}}function CC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ad(n){return CC(n).replace(/%3B/gi,";")}function wF(n){return encodeURI(n)}function Fm(n){return CC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dd(n){return decodeURIComponent(n)}function fC(n){return dd(n.replace(/\+/g,"%20"))}function TC(n){return`${Fm(n.path)}${IF(n.parameters)}`}function IF(n){return Object.entries(n).map(([e,t])=>`;${Fm(e)}=${Fm(t)}`).join("")}function EF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ad(t)}=${ad(i)}`).join("&"):`${ad(t)}=${ad(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var bF=/^[^\/()?;#]+/;function Rm(n){let e=n.match(bF);return e?e[0]:""}var DF=/^[^\/()?;=#]+/;function CF(n){let e=n.match(DF);return e?e[0]:""}var TF=/^[^=?&#]+/;function SF(n){let e=n.match(TF);return e?e[0]:""}var AF=/^[^&#]+/;function xF(n){let e=n.match(AF);return e?e[0]:""}var Lm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new De(e,t)),r}parseSegment(){let e=Rm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new Ti(dd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=CF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Rm(this.remaining);i&&(r=i,this.capture(r))}e[dd(t)]=dd(r)}parseQueryParam(e){let t=SF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=xF(this.remaining);o&&(r=o,this.capture(r))}let i=fC(t),s=fC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Rm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new K(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=oe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[oe]:new De([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}};function SC(n){return n.segments.length>0?new De([],{[oe]:n}):n}function AC(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=AC(i);if(r===oe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new De(n.segments,e);return RF(t)}function RF(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new De(n.segments.concat(e.segments),e.children)}return n}function Wa(n){return n instanceof tr}function MF(n,e,t=null,r=null){let i=xC(n);return RC(i,e,t,r)}function xC(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new De(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=SC(r);return e??i}function RC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Mm(i,i,i,t,r);let s=NF(e);if(s.toRoot())return Mm(i,i,new De([],{}),t,r);let o=PF(s,i,n),a=o.processChildren?Ha(o.segmentGroup,o.index,s.commands):NC(o.segmentGroup,o.index,s.commands);return Mm(i,o.segmentGroup,a,t,r)}function hd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ka(n){return typeof n=="object"&&n!=null&&n.outlets}function Mm(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;n===e?o=t:o=MC(n,e,t);let a=SC(AC(o));return new tr(a,s,i)}function MC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=MC(s,e,t)}),new De(n.segments,r)}var fd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hd(r[0]))throw new K(4003,!1);let i=r.find(Ka);if(i&&i!==wC(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function NF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new fd(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new fd(t,e,r)}var Qs=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function PF(n,e,t){if(n.isAbsolute)return new Qs(e,!0,0);if(!t)return new Qs(e,!1,NaN);if(t.parent===null)return new Qs(t,!0,0);let r=hd(n.commands[0])?0:1,i=t.segments.length-1+r;return OF(t,i,n.numberOfDoubleDots)}function OF(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new Qs(r,!1,i-s)}function kF(n){return Ka(n[0])?n[0].outlets:{[oe]:n}}function NC(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return Ha(n,e,t);let r=FF(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new De(n.segments.slice(0,r.pathIndex),{});return s.children[oe]=new De(n.segments.slice(r.pathIndex),n.children),Ha(s,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?Vm(n,e,t):r.match?Ha(n,0,i):Vm(n,e,t)}function Ha(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=kF(t),i={};if(Object.keys(r).some(s=>s!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let s=Ha(n.children[oe],e,t);return new De(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=NC(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new De(n.segments,i)}}function FF(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Ka(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!gC(c,l,o))return s;r+=2}else{if(!gC(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Vm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Ka(s)){let c=LF(s.outlets);return new De(r,c)}if(i===0&&hd(t[0])){let c=n.segments[e];r.push(new Ti(c.path,pC(t[0]))),i++;continue}let o=Ka(s)?s.outlets[oe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&hd(a)?(r.push(new Ti(o,pC(a))),i+=2):(r.push(new Ti(o,{})),i++)}return new De(r,{})}function LF(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Vm(new De([],{}),0,r))}),e}function pC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function gC(n,e,t){return n==t.path&&xn(e,t.parameters)}var za="imperative",it=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(it||{}),Jt=class{constructor(e,t){this.id=e,this.url=t}},Qa=class extends Jt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=it.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ai=class extends Jt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=it.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ut=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ut||{}),Um=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Um||{}),er=class extends Jt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=it.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},xi=class extends Jt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=it.NavigationSkipped}},Ya=class extends Jt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=it.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},pd=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jm=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bm=class extends Jt{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=it.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},$m=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hm=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zm=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qm=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gm=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wm=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Km=class{constructor(e){this.snapshot=e,this.type=it.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qm=class{constructor(e){this.snapshot=e,this.type=it.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Za=class{},Xs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function VF(n,e){return n.providers&&!n._injector&&(n._injector=am(n.providers,e,`Route: ${n.path}`)),n._injector??e}function pn(n){return n.outlet||oe}function UF(n,e){let t=n.filter(r=>pn(r)===e);return t.push(...n.filter(r=>pn(r)!==e)),t}function rc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ym=class{get injector(){return rc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Id(this.rootInjector),this.attachRef=null}},Id=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ym(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(X(Kt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Zm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Zm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Jm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Jm(e,this._root).map(t=>t.value)}};function Zm(n,e){if(n===e.value)return e;for(let t of e.children){let r=Zm(n,t);if(r)return r}return null}function Jm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Jm(n,t);if(r.length)return r.unshift(e),r}return[]}var Vt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ks(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var md=class extends gd{constructor(e,t){super(e),this.snapshot=t,cy(this,e)}toString(){return this.snapshot.toString()}};function PC(n){let e=jF(n),t=new nt([new Ti("",{})]),r=new nt({}),i=new nt({}),s=new nt({}),o=new nt(""),a=new Mt(t,r,s,o,i,oe,n,e.root);return a.snapshot=e.root,new md(new Vt(a,[]),e)}function jF(n){let e={},t={},r={},i="",s=new Ys([],e,r,i,t,oe,n,null,{});return new vd("",new Vt(s,[]))}var Mt=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(le(l=>l[nc]))??se(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(e=>Js(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(e=>Js(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function yd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&kC(i)&&(r.resolve[nc]=i.title),r}var Ys=class{get title(){return this.data?.[nc]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Js(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Js(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},vd=class extends gd{constructor(e,t){super(t),this.url=e,cy(this,t)}toString(){return OC(this._root)}};function cy(n,e){e.value._routerState=n,e.children.forEach(t=>cy(n,t))}function OC(n){let e=n.children.length>0?` { ${n.children.map(OC).join(", ")} } `:"";return`${n.value}${e}`}function Nm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),xn(e.params,t.params)||n.paramsSubject.next(t.params),fF(e.url,t.url)||n.urlSubject.next(t.url),xn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Xm(n,e){let t=xn(n.params,e.params)&&yF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Xm(n.parent,e.parent))}function kC(n){return typeof n.title=="string"||n.title===null}var uy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Ke,this.deactivateEvents=new Ke,this.attachEvents=new Ke,this.detachEvents=new Ke,this.parentContexts=V(Id),this.location=V(qs),this.changeDetector=V(Di),this.inputBinder=V(ly,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new ey(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Qt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$s]})}}return n})(),ey=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Mt?this.route:e===Id?this.childContexts:this.parent.get(e,t)}},ly=new Q("");function BF(n,e,t){let r=Ja(n,e._root,t?t._root:void 0);return new md(r,e)}function Ja(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=$F(n,e,t);return new Vt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ja(n,a)),o}}let r=HF(e.value),i=e.children.map(s=>Ja(n,s));return new Vt(r,i)}}function $F(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ja(n,r,i);return Ja(n,r)})}function HF(n){return new Mt(new nt(n.url),new nt(n.params),new nt(n.queryParams),new nt(n.fragment),new nt(n.data),n.outlet,n.component,n)}var Xa=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},FC="ngNavigationCancelingError";function _d(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Wa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=LC(!1,Ut.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function LC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[FC]=!0,t.cancellationCode=e,t}function zF(n){return VC(n)&&Wa(n.url)}function VC(n){return!!n&&n[FC]}var qF=(n,e,t,r)=>le(i=>(new ty(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),ty=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Nm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ks(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ks(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ks(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ks(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Qm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Wm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Nm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Nm(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},wd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Zs=class{constructor(e,t){this.component=e,this.route=t}};function GF(n,e,t){let r=n._root,i=e?e._root:null;return Ba(r,i,t,[r.value])}function WF(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function to(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!fb(n)?n:e.get(n):r}function Ba(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ks(e);return n.children.forEach(o=>{KF(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>qa(a,t.getContext(o),i)),i}function KF(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=QF(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new wd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ba(n,e,a?a.children:null,r,i):Ba(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Zs(a.outlet.component,o))}else o&&qa(e,a,i),i.canActivateChecks.push(new wd(r)),s.component?Ba(n,null,a?a.children:null,r,i):Ba(n,null,t,r,i);return i}function QF(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Si(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Si(n.url,e.url)||!xn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xm(n,e)||!xn(n.queryParams,e.queryParams);case"paramsChange":default:return!Xm(n,e)}}function qa(n,e,t){let r=Ks(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?qa(o,e.children.getContext(s),t):qa(o,null,t):qa(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Zs(e.outlet.component,i)):t.canDeactivateChecks.push(new Zs(null,i)):t.canDeactivateChecks.push(new Zs(null,i))}function ic(n){return typeof n=="function"}function YF(n){return typeof n=="boolean"}function ZF(n){return n&&ic(n.canLoad)}function JF(n){return n&&ic(n.canActivate)}function XF(n){return n&&ic(n.canActivateChild)}function eL(n){return n&&ic(n.canDeactivate)}function tL(n){return n&&ic(n.canMatch)}function UC(n){return n instanceof on||n?.name==="EmptyError"}var cd=Symbol("INITIAL_VALUE");function eo(){return cn(n=>qu(n.map(e=>e.pipe(Hn(1),vp(cd)))).pipe(le(e=>{for(let t of e)if(t!==!0){if(t===cd)return cd;if(t===!1||nL(t))return t}return!0}),an(e=>e!==cd),Hn(1)))}function nL(n){return Wa(n)||n instanceof Xa}function rL(n,e){return Ge(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?se(fe(L({},t),{guardsResult:!0})):iL(o,r,i,n).pipe(Ge(a=>a&&YF(a)?sL(r,s,n,e):se(a)),le(a=>fe(L({},t),{guardsResult:a})))})}function iL(n,e,t,r){return Ue(n).pipe(Ge(i=>lL(i.component,i.route,t,e,r)),_n(i=>i!==!0,!0))}function sL(n,e,t,r){return Ue(e).pipe(bs(i=>Es(aL(i.route.parent,r),oL(i.route,r),uL(n,i.path,t),cL(n,i.route,t))),_n(i=>i!==!0,!0))}function oL(n,e){return n!==null&&e&&e(new Km(n)),se(!0)}function aL(n,e){return n!==null&&e&&e(new Gm(n)),se(!0)}function cL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(s=>Gu(()=>{let o=rc(e)??t,a=to(s,o),c=JF(a)?a.canActivate(e,n):Wn(o,()=>a(e,n));return Or(c).pipe(_n())}));return se(i).pipe(eo())}function uL(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>WF(o)).filter(o=>o!==null).map(o=>Gu(()=>{let a=o.guards.map(c=>{let l=rc(o.node)??t,h=to(c,l),p=XF(h)?h.canActivateChild(r,n):Wn(l,()=>h(r,n));return Or(p).pipe(_n())});return se(a).pipe(eo())}));return se(s).pipe(eo())}function lL(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return se(!0);let o=s.map(a=>{let c=rc(e)??i,l=to(a,c),h=eL(l)?l.canDeactivate(n,e,t,r):Wn(c,()=>l(n,e,t,r));return Or(h).pipe(_n())});return se(o).pipe(eo())}function dL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return se(!0);let s=i.map(o=>{let a=to(o,n),c=ZF(a)?a.canLoad(e,t):Wn(n,()=>a(e,t));return Or(c)});return se(s).pipe(eo(),jC(r))}function jC(n){return rp(We(e=>{if(typeof e!="boolean")throw _d(n,e)}),le(e=>e===!0))}function hL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return se(!0);let s=i.map(o=>{let a=to(o,n),c=tL(a)?a.canMatch(e,t):Wn(n,()=>a(e,t));return Or(c)});return se(s).pipe(eo(),jC(r))}var ec=class{constructor(e){this.segmentGroup=e||null}},tc=class extends Error{constructor(e){super(),this.urlTree=e}};function Ws(n){return Is(new ec(n))}function fL(n){return Is(new K(4e3,!1))}function pL(n){return Is(LC(!1,Ut.GuardRejected))}var ny=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[oe])return fL(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:T,title:M}=i,R=Wn(s,()=>a({params:v,data:T,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:M}));if(R instanceof tr)throw new tc(R);t=R}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new tc(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new tr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new De(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},ry={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gL(n,e,t,r,i){let s=BC(n,e,t);return s.matched?(r=VF(e,r),hL(r,e,t,i).pipe(le(o=>o===!0?s:L({},ry)))):se(s)}function BC(n,e,t){if(e.path==="**")return mL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},ry):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||hF)(t,n,e);if(!i)return L({},ry);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function mL(n){return{matched:!0,parameters:n.length>0?wC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function mC(n,e,t,r){return t.length>0&&_L(n,t,r)?{segmentGroup:new De(e,vL(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&wL(n,t,r)?{segmentGroup:new De(n.segments,yL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function yL(n,e,t,r){let i={};for(let s of t)if(Ed(n,e,s)&&!r[pn(s)]){let o=new De([],{});i[pn(s)]=o}return L(L({},r),i)}function vL(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&pn(r)!==oe){let i=new De([],{});t[pn(r)]=i}return t}function _L(n,e,t){return t.some(r=>Ed(n,e,r)&&pn(r)!==oe)}function wL(n,e,t){return t.some(r=>Ed(n,e,r))}function Ed(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function IL(n,e,t){return e.length===0&&!n.children[t]}var iy=class{};function EL(n,e,t,r,i,s,o="emptyOnly"){return new sy(n,e,t,r,i,o,s).recognize()}var bL=31,sy=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new ny(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){let e=mC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(le(({children:t,rootSnapshot:r})=>{let i=new Vt(r,t),s=new vd("",i),o=MF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Ys([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(le(r=>({children:r,rootSnapshot:t})),wr(r=>{if(r instanceof tc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ec?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(le(o=>o instanceof Vt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ue(s).pipe(bs(o=>{let a=r.children[o],c=UF(t,o);return this.processSegmentGroup(e,c,a,o,i)}),yp((o,a)=>(o.push(...a),o)),Ir(null),mp(),Ge(o=>{if(o===null)return Ws(r);let a=$C(o);return DL(a),se(a)}))}processSegment(e,t,r,i,s,o,a){return Ue(t).pipe(bs(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(wr(l=>{if(l instanceof ec)return se(null);throw l}))),_n(c=>!!c),wr(c=>{if(UC(c))return IL(r,i,s)?se(new iy):Ws(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return pn(r)!==o&&(o===oe||!Ed(i,s,r))?Ws(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Ws(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=BC(t,i,s);if(!c)return Ws(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>bL&&(this.allowRedirects=!1));let v=new Ys(s,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,yC(i),pn(i),i.component??i._loadedComponent??null,i,vC(i)),T=yd(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(T.params),v.data=Object.freeze(T.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(Ge(R=>this.processSegment(e,r,t,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=gL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(cn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(cn(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=c,T=new Ys(m,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,yC(r),pn(r),r.component??r._loadedComponent??null,r,vC(r)),M=yd(T,o,this.paramsInheritanceStrategy);T.params=Object.freeze(M.params),T.data=Object.freeze(M.data);let{segmentGroup:R,slicedSegments:k}=mC(t,m,v,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,T).pipe(le(F=>new Vt(T,F)));if(l.length===0&&k.length===0)return se(new Vt(T,[]));let B=pn(r)===s;return this.processSegment(h,l,R,k,B?oe:s,!0,T).pipe(le(F=>new Vt(T,F instanceof Vt?[F]:[])))}))):Ws(t)))}getChildConfig(e,t,r){return t.children?se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?se({routes:t._loadedRoutes,injector:t._loadedInjector}):dL(e,t,r,this.urlSerializer).pipe(Ge(i=>i?this.configLoader.loadChildren(e,t).pipe(We(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):pL(t))):se({routes:[],injector:e})}};function DL(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function CL(n){let e=n.value.routeConfig;return e&&e.path===""}function $C(n){let e=[],t=new Set;for(let r of n){if(!CL(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=$C(r.children);e.push(new Vt(r.value,i))}return e.filter(r=>!t.has(r))}function yC(n){return n.data||{}}function vC(n){return n.resolve||{}}function TL(n,e,t,r,i,s){return Ge(o=>EL(n,e,t,r,o.extractedUrl,i,s).pipe(le(({state:a,tree:c})=>fe(L({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function SL(n,e){return Ge(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return se(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of HC(c))o.add(l);let a=0;return Ue(o).pipe(bs(c=>s.has(c)?AL(c,r,n,e):(c.data=yd(c,c.parent,n).resolve,se(void 0))),We(()=>a++),Ds(1),Ge(c=>a===o.size?se(t):Lt))})}function HC(n){let e=n.children.map(t=>HC(t)).flat();return[n,...e]}function AL(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!kC(i)&&(s[nc]=i.title),xL(s,n,e,r).pipe(le(o=>(n._resolvedData=o,n.data=yd(n,n.parent,t).resolve,null)))}function xL(n,e,t,r){let i=km(n);if(i.length===0)return se({});let s={};return Ue(i).pipe(Ge(o=>RL(n[o],e,t,r).pipe(_n(),We(a=>{if(a instanceof Xa)throw _d(new Ga,a);s[o]=a}))),Ds(1),gp(s),wr(o=>UC(o)?Lt:Is(o)))}function RL(n,e,t,r){let i=rc(e)??r,s=to(n,i),o=s.resolve?s.resolve(e,t):Wn(i,()=>s(e,t));return Or(o)}function Pm(n){return cn(e=>{let t=n(e);return t?Ue(t).pipe(le(()=>e)):se(e)})}var zC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[nc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(ML),providedIn:"root"})}}return n})(),ML=(()=>{class n extends zC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(X(dC))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dy=new Q("",{providedIn:"root",factory:()=>({})}),NL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=lt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Rt],decls:1,vars:0,template:function(r,i){r&1&&Ie(0,"router-outlet")},dependencies:[uy],encapsulation:2})}}return n})();function hy(n){let e=n.children&&n.children.map(hy),t=e?fe(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=NL),t}var fy=new Q(""),PL=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(gm)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return se(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Or(t.loadComponent()).pipe(le(qC),We(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ga(()=>{this.componentLoaders.delete(t)})),i=new ys(r,()=>new tt).pipe(ms());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return se({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=OL(r,this.compiler,t,this.onLoadEndListener).pipe(ga(()=>{this.childrenLoaders.delete(r)})),o=new ys(s,()=>new tt).pipe(ms());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function OL(n,e,t,r){return Or(n.loadChildren()).pipe(le(qC),Ge(i=>i instanceof Ca||Array.isArray(i)?se(i):Ue(e.compileModuleAsync(i))),le(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(fy,[],{optional:!0,self:!0}).flat()),{routes:o.map(hy),injector:s}}))}function kL(n){return n&&typeof n=="object"&&"default"in n}function qC(n){return kL(n)?n.default:n}var py=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(FL),providedIn:"root"})}}return n})(),FL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),LL=new Q("");var VL=new Q(""),UL=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new tt,this.transitionAbortSubject=new tt,this.configLoader=V(PL),this.environmentInjector=V(Kt),this.urlSerializer=V(ay),this.rootContexts=V(Id),this.location=V(Fa),this.inputBindingEnabled=V(ly,{optional:!0})!==null,this.titleStrategy=V(zC),this.options=V(dy,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(py),this.createViewTransition=V(LL,{optional:!0}),this.navigationErrorHandler=V(VL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let t=i=>this.events.next(new zm(i)),r=i=>this.events.next(new qm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(fe(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new nt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:za,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(an(s=>s.id!==0),le(s=>fe(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),cn(s=>{let o=!1,a=!1;return se(s).pipe(cn(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ut.SupersededByNewNavigation),Lt;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?fe(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new xi(c.id,this.urlSerializer.serialize(c.rawUrl),p,Um.IgnoredSameUrlNavigation)),c.resolve(!1),Lt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return se(c).pipe(cn(p=>{let m=this.transitions?.getValue();return this.events.next(new Qa(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Lt:Promise.resolve(p)}),TL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),We(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=fe(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new pd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:T,extras:M}=c,R=new Qa(p,this.urlSerializer.serialize(m),v,T);this.events.next(R);let k=PC(this.rootComponentType).snapshot;return this.currentTransition=s=fe(L({},c),{targetSnapshot:k,urlAfterRedirects:m,extras:fe(L({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,se(s)}else{let p="";return this.events.next(new xi(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Um.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Lt}}),We(c=>{let l=new jm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),le(c=>(this.currentTransition=s=fe(L({},c),{guards:GF(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),rL(this.environmentInjector,c=>this.events.next(c)),We(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw _d(this.urlSerializer,c.guardsResult);let l=new Bm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),an(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Ut.GuardRejected),!1)),Pm(c=>{if(c.guards.canActivateChecks.length)return se(c).pipe(We(l=>{let h=new $m(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),cn(l=>{let h=!1;return se(l).pipe(SL(this.paramsInheritanceStrategy,this.environmentInjector),We({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Ut.NoDataFromResolver)}}))}),We(l=>{let h=new Hm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Pm(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(We(m=>{h.component=m}),le(()=>{})));for(let m of h.children)p.push(...l(m));return p};return qu(l(c.targetSnapshot.root)).pipe(Ir(null),Hn(1))}),Pm(()=>this.afterPreactivation()),cn(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Ue(h).pipe(le(()=>s)):se(s)}),le(c=>{let l=BF(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=fe(L({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),We(()=>{this.events.next(new Za)}),qF(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Hn(1),We({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ai(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),_p(this.transitionAbortSubject.pipe(We(c=>{throw c}))),ga(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Ut.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),wr(c=>{if(a=!0,VC(c))this.events.next(new er(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),zF(c)?this.events.next(new Xs(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Ya(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let h=Wn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Xa){let{message:p,cancellationCode:m}=_d(this.urlSerializer,h);this.events.next(new er(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new Xs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Lt}))}))}cancelNavigationTransition(t,r,i){let s=new er(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function jL(n){return n!==za}var BL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V($L),providedIn:"root"})}}return n})(),oy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},$L=(()=>{class n extends oy{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ma(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(HL),providedIn:"root"})}}return n})(),HL=(()=>{class n extends GC{constructor(){super(...arguments),this.location=V(Fa),this.urlSerializer=V(ay),this.options=V(dy,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(py),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new tr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=PC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Qa)this.stateMemento=this.createStateMemento();else if(t instanceof xi)this.rawUrlTree=r.initialUrl;else if(t instanceof pd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Za?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof er&&(t.code===Ut.GuardRejected||t.code===Ut.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ya?this.restoreHistory(r,!0):t instanceof Ai&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof tr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ma(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$a=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}($a||{});function zL(n,e){n.events.pipe(an(t=>t instanceof Ai||t instanceof er||t instanceof Ya||t instanceof xi),le(t=>t instanceof Ai||t instanceof xi?$a.COMPLETE:(t instanceof er?t.code===Ut.Redirect||t.code===Ut.SupersededByNewNavigation:!1)?$a.REDIRECTING:$a.FAILED),an(t=>t!==$a.REDIRECTING),Hn(1)).subscribe(()=>{e()})}function qL(n){throw n}var GL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},WL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ht=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=V(Ql),this.stateManager=V(GC),this.options=V(dy,{optional:!0})||{},this.pendingTasks=V(zs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(UL),this.urlSerializer=V(ay),this.location=V(Fa),this.urlHandlingStrategy=V(py),this._events=new tt,this.errorHandler=this.options.errorHandler||qL,this.navigated=!1,this.routeReuseStrategy=V(BL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(fy,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(ly,{optional:!0}),this.eventsSubscription=new Ve,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof er&&r.code!==Ut.Redirect&&r.code!==Ut.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ai)this.navigated=!0;else if(r instanceof Xs){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||jL(i.source)},o);this.scheduleNavigation(a,za,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}QL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),za,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=L({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(hy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=xC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return RC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Wa(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,za,null,r)}navigate(t,r={skipLocationChange:!1}){return KL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},GL):r===!1?i=L({},WL):i=r,Wa(t))return hC(this.currentUrlTree,t,i);let s=this.parseUrl(t);return hC(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return zL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function KL(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new K(4008,!1)}function QL(n){return!(n instanceof Za)&&!(n instanceof Xs)}var YL=new Q("");function WC(n,...e){return Sn([{provide:fy,multi:!0,useValue:n},[],{provide:Mt,useFactory:ZL,deps:[ht]},{provide:pm,multi:!0,useFactory:JL},e.map(t=>t.\u0275providers)])}function ZL(n){return n.routerState.root}function JL(){let n=V(Tt);return e=>{let t=n.get(bi);if(e!==t.components[0])return;let r=n.get(ht),i=n.get(XL);n.get(eV)===1&&r.initialNavigation(),n.get(tV,null,ae.Optional)?.setUpPreloading(),n.get(YL,null,ae.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var XL=new Q("",{factory:()=>new tt}),eV=new Q("",{providedIn:"root",factory:()=>1});var tV=new Q("");var tT=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Z(Ii),Z(Rr))}}static{this.\u0275dir=Qt({type:n})}}return n})(),nV=(()=>{class n extends tT{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ma(n)))(i||n)}})()}static{this.\u0275dir=Qt({type:n,features:[Gs]})}}return n})(),nT=new Q("");var rV={provide:nT,useExisting:Aa(()=>Sd),multi:!0};function iV(){let n=Jn()?Jn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var sV=new Q(""),Sd=(()=>{class n extends tT{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!iV())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Z(Ii),Z(Rr),Z(sV,8))}}static{this.\u0275dir=Qt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&xt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[fm([rV]),Gs]})}}return n})();var oV=new Q(""),aV=new Q("");function rT(n){return n!=null}function iT(n){return Ei(n)?Ue(n):n}function sT(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function oT(n,e){return e.map(t=>t(n))}function cV(n){return!n.validate}function aT(n){return n.map(e=>cV(e)?e:t=>e.validate(t))}function uV(n){if(!n)return null;let e=n.filter(rT);return e.length==0?null:function(t){return sT(oT(t,e))}}function cT(n){return n!=null?uV(aT(n)):null}function lV(n){if(!n)return null;let e=n.filter(rT);return e.length==0?null:function(t){let r=oT(t,e).map(iT);return pp(r).pipe(le(sT))}}function uT(n){return n!=null?lV(aT(n)):null}function KC(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function dV(n){return n._rawValidators}function hV(n){return n._rawAsyncValidators}function gy(n){return n?Array.isArray(n)?n:[n]:[]}function Dd(n,e){return Array.isArray(n)?n.includes(e):n===e}function QC(n,e){let t=gy(e);return gy(n).forEach(i=>{Dd(t,i)||t.push(i)}),t}function YC(n,e){return gy(e).filter(t=>!Dd(n,t))}var Cd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=uT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},my=class extends Cd{get formDirective(){return null}get path(){return null}},uc=class extends Cd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},yy=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},fV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},x6=fe(L({},fV),{"[class.ng-submitted]":"isSubmitted"}),lT=(()=>{class n extends yy{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Z(uc,2))}}static{this.\u0275dir=Qt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&um("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Gs]})}}return n})();var sc="VALID",bd="INVALID",no="PENDING",oc="DISABLED",io=class{},Td=class extends io{constructor(e,t){super(),this.value=e,this.source=t}},ac=class extends io{constructor(e,t){super(),this.pristine=e,this.source=t}},cc=class extends io{constructor(e,t){super(),this.touched=e,this.source=t}},ro=class extends io{constructor(e,t){super(),this.status=e,this.source=t}};function pV(n){return(Ad(n)?n.validators:n)||null}function gV(n){return Array.isArray(n)?cT(n):n||null}function mV(n,e){return(Ad(e)?e.asyncValidators:n)||null}function yV(n){return Array.isArray(n)?uT(n):n||null}function Ad(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var vy=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Zl(()=>this.statusReactive()),this.statusReactive=Kl(void 0),this._pristine=Zl(()=>this.pristineReactive()),this.pristineReactive=Kl(!0),this._touched=Zl(()=>this.touchedReactive()),this.touchedReactive=Kl(!1),this._events=new tt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Pr(this.statusReactive)}set status(e){Pr(()=>this.statusReactive.set(e))}get valid(){return this.status===sc}get invalid(){return this.status===bd}get pending(){return this.status==no}get disabled(){return this.status===oc}get enabled(){return this.status!==oc}get pristine(){return Pr(this.pristineReactive)}set pristine(e){Pr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Pr(this.touchedReactive)}set touched(e){Pr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(QC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(QC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(YC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(YC(e,this._rawAsyncValidators))}hasValidator(e){return Dd(this._rawValidators,e)}hasAsyncValidator(e){return Dd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(fe(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new cc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new cc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(fe(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ac(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ac(!0,r))}markAsPending(e={}){this.status=no;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ro(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(fe(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=oc,this.errors=null,this._forEachChild(i=>{i.disable(fe(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Td(this.value,r)),this._events.next(new ro(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=sc,this._forEachChild(r=>{r.enable(fe(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fe(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sc||this.status===no)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Td(this.value,t)),this._events.next(new ro(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(fe(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?oc:sc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=no,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=iT(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ro(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ke,this.statusChanges=new Ke}_calculateStatus(){return this._allControlsDisabled()?oc:this.errors?bd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(no)?no:this._anyControlsHaveStatus(bd)?bd:sc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ac(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new cc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ad(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=gV(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=yV(this._rawAsyncValidators)}};var dT=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>_y}),_y="always";function vV(n,e){return[...e.path,n]}function _V(n,e,t=_y){IV(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),EV(n,e),DV(n,e),bV(n,e),wV(n,e)}function ZC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function wV(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function IV(n,e){let t=dV(n);e.validator!==null?n.setValidators(KC(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=hV(n);e.asyncValidator!==null?n.setAsyncValidators(KC(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ZC(e._rawValidators,i),ZC(e._rawAsyncValidators,i)}function EV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&hT(n,e)})}function bV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&hT(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function hT(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function DV(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function CV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function TV(n){return Object.getPrototypeOf(n.constructor)===nV}function SV(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Sd?t=s:TV(s)?r=s:i=s}),i||r||t||null}function JC(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function XC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var AV=class extends vy{constructor(e=null,t,r){super(pV(t),mV(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ad(t)&&(t.nonNullable||t.initialValueIsDefault)&&(XC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){JC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){JC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){XC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var xV={provide:uc,useExisting:Aa(()=>wy)},eT=Promise.resolve(),wy=(()=>{class n extends uc{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new AV,this._registered=!1,this.name="",this.update=new Ke,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=SV(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),CV(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){_V(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){eT.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Yl(r);eT.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?vV(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Z(my,9),Z(oV,10),Z(aV,10),Z(nT,10),Z(Di,8),Z(dT,8))}}static{this.\u0275dir=Qt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[fm([xV]),Gs,$s]})}}return n})();var RV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wi({type:n})}static{this.\u0275inj=_i({})}}return n})();var fT=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:dT,useValue:t.callSetDisabledState??_y}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wi({type:n})}static{this.\u0275inj=_i({imports:[RV]})}}return n})();var gT=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},NV=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},mT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,v=l&63;c||(v=64,o||(m=64)),r.push(t[h],t[p],t[m],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(gT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):NV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Ey;let m=s<<2|a>>4;if(r.push(m),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Ey=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},PV=function(n){let e=gT(n);return mT.encodeByteArray(e,!0)},lc=function(n){return PV(n).replace(/\./g,"")},Dy=function(n){try{return mT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function OV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var kV=()=>OV().__FIREBASE_DEFAULTS__,FV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},LV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Dy(n[1]);return e&&JSON.parse(e)},Rd=()=>{try{return kV()||FV()||LV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},yT=n=>{var e,t;return(t=(e=Rd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Md=n=>{let e=yT(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Cy=()=>{var n;return(n=Rd())===null||n===void 0?void 0:n.config},vT=n=>{var e;return(e=Rd())===null||e===void 0?void 0:e[`_${n}`]};var xd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Nd(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[lc(JSON.stringify(t)),lc(JSON.stringify(o)),""].join(".")}function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _T(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function VV(){var n;let e=(n=Rd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IT(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ET(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ty(){return!VV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pd(){try{return typeof indexedDB=="object"}catch{return!1}}function bT(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var UV="FirebaseError",Nt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=UV,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nr.prototype.create)}},nr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?jV(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Nt(i,a,r)}};function jV(n,e){return n.replace(BV,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var BV=/\{\$([^}]+)}/g;function so(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(pT(s)&&pT(o)){if(!so(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function pT(n){return n!==null&&typeof n=="object"}function Sy(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function DT(n,e){let t=new by(n,e);return t.subscribe.bind(t)}var by=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");$V(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Iy),i.error===void 0&&(i.error=Iy),i.complete===void 0&&(i.complete=Iy);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function $V(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Iy(){}var N6=4*60*60*1e3;function jt(n){return n&&n._delegate?n._delegate:n}var Pt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Mi="[DEFAULT]";var Ay=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new xd;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zV(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function HV(n){return n===Mi?void 0:n}function zV(n){return n.instantiationMode==="EAGER"}var Od=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Ay(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var qV=[],he=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(he||{}),GV={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},WV=he.INFO,KV={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},QV=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=KV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},kr=class{constructor(e){this.name=e,this._logLevel=WV,this._logHandler=QV,this._userLogHandler=null,qV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}};var YV=(n,e)=>e.some(t=>n instanceof t),CT,TT;function ZV(){return CT||(CT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JV(){return TT||(TT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ST=new WeakMap,Ry=new WeakMap,AT=new WeakMap,xy=new WeakMap,Ny=new WeakMap;function XV(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Rn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&ST.set(t,n)}).catch(()=>{}),Ny.set(e,n),e}function e2(n){if(Ry.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Ry.set(n,e)}var My={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ry.get(n);if(e==="objectStoreNames")return n.objectStoreNames||AT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xT(n){My=n(My)}function t2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(kd(this),e,...t);return AT.set(r,e.sort?e.sort():[e]),Rn(r)}:JV().includes(n)?function(...e){return n.apply(kd(this),e),Rn(ST.get(this))}:function(...e){return Rn(n.apply(kd(this),e))}}function n2(n){return typeof n=="function"?t2(n):(n instanceof IDBTransaction&&e2(n),YV(n,ZV())?new Proxy(n,My):n)}function Rn(n){if(n instanceof IDBRequest)return XV(n);if(xy.has(n))return xy.get(n);let e=n2(n);return e!==n&&(xy.set(n,e),Ny.set(e,n)),e}var kd=n=>Ny.get(n);function MT(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Rn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Rn(o.result),c.oldVersion,c.newVersion,Rn(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var r2=["get","getKey","getAll","getAllKeys","count"],i2=["put","add","delete","clear"],Py=new Map;function RT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Py.get(e))return Py.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=i2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||r2.includes(t)))return;let s=function(o,...a){return b(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return Py.set(e,s),s}xT(n=>fe(L({},n),{get:(e,t,r)=>RT(e,t)||n.get(e,t,r),has:(e,t)=>!!RT(e,t)||n.has(e,t)}));var ky=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(s2(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function s2(n){let e=n.getComponent();return e?.type==="VERSION"}var Fy="@firebase/app",NT="0.10.13";var rr=new kr("@firebase/app"),o2="@firebase/app-compat",a2="@firebase/analytics-compat",c2="@firebase/analytics",u2="@firebase/app-check-compat",l2="@firebase/app-check",d2="@firebase/auth",h2="@firebase/auth-compat",f2="@firebase/database",p2="@firebase/data-connect",g2="@firebase/database-compat",m2="@firebase/functions",y2="@firebase/functions-compat",v2="@firebase/installations",_2="@firebase/installations-compat",w2="@firebase/messaging",I2="@firebase/messaging-compat",E2="@firebase/performance",b2="@firebase/performance-compat",D2="@firebase/remote-config",C2="@firebase/remote-config-compat",T2="@firebase/storage",S2="@firebase/storage-compat",A2="@firebase/firestore",x2="@firebase/vertexai-preview",R2="@firebase/firestore-compat",M2="firebase",N2="10.14.1";var Ly="[DEFAULT]",P2={[Fy]:"fire-core",[o2]:"fire-core-compat",[c2]:"fire-analytics",[a2]:"fire-analytics-compat",[l2]:"fire-app-check",[u2]:"fire-app-check-compat",[d2]:"fire-auth",[h2]:"fire-auth-compat",[f2]:"fire-rtdb",[p2]:"fire-data-connect",[g2]:"fire-rtdb-compat",[m2]:"fire-fn",[y2]:"fire-fn-compat",[v2]:"fire-iid",[_2]:"fire-iid-compat",[w2]:"fire-fcm",[I2]:"fire-fcm-compat",[E2]:"fire-perf",[b2]:"fire-perf-compat",[D2]:"fire-rc",[C2]:"fire-rc-compat",[T2]:"fire-gcs",[S2]:"fire-gcs-compat",[A2]:"fire-fst",[R2]:"fire-fst-compat",[x2]:"fire-vertex","fire-js":"fire-js",[M2]:"fire-js-all"};var dc=new Map,O2=new Map,Vy=new Map;function PT(n,e){try{n.container.addComponent(e)}catch(t){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mn(n){let e=n.name;if(Vy.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;Vy.set(e,n);for(let t of dc.values())PT(t,n);for(let t of O2.values())PT(t,n);return!0}function fc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function oo(n){return n.settings!==void 0}var k2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new nr("app","Firebase",k2);var Uy=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}};var Lr=N2;function $y(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ly,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fr.create("bad-app-name",{appName:String(i)});if(t||(t=Cy()),!t)throw Fr.create("no-options");let s=dc.get(i);if(s){if(so(t,s.options)&&so(r,s.config))return s;throw Fr.create("duplicate-app",{appName:i})}let o=new Od(i);for(let c of Vy.values())o.addComponent(c);let a=new Uy(t,r,o);return dc.set(i,a),a}function Ni(n=Ly){let e=dc.get(n);if(!e&&n===Ly&&Cy())return $y();if(!e)throw Fr.create("no-app",{appName:n});return e}function Fd(){return Array.from(dc.values())}function ke(n,e,t){var r;let i=(r=P2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(a.join(" "));return}Mn(new Pt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var F2="firebase-heartbeat-database",L2=1,hc="firebase-heartbeat-store",Oy=null;function LT(){return Oy||(Oy=MT(F2,L2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(hc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fr.create("idb-open",{originalErrorMessage:n.message})})),Oy}function V2(n){return b(this,null,function*(){try{let t=(yield LT()).transaction(hc),r=yield t.objectStore(hc).get(VT(n));return yield t.done,r}catch(e){if(e instanceof Nt)rr.warn(e.message);else{let t=Fr.create("idb-get",{originalErrorMessage:e?.message});rr.warn(t.message)}}})}function OT(n,e){return b(this,null,function*(){try{let r=(yield LT()).transaction(hc,"readwrite");yield r.objectStore(hc).put(e,VT(n)),yield r.done}catch(t){if(t instanceof Nt)rr.warn(t.message);else{let r=Fr.create("idb-set",{originalErrorMessage:t?.message});rr.warn(r.message)}}})}function VT(n){return`${n.name}!${n.options.appId}`}var U2=1024,j2=30*24*60*60*1e3,jy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new By(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=j2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rr.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=kT(),{heartbeatsToSend:r,unsentEntries:i}=B2(this._heartbeatsCache.heartbeats),s=lc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return rr.warn(t),""}})}};function kT(){return new Date().toISOString().substring(0,10)}function B2(n,e=U2){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),FT(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),FT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var By=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return Pd()?bT().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield V2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return OT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return OT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function FT(n){return lc(JSON.stringify({version:2,heartbeats:n})).length}function $2(n){Mn(new Pt("platform-logger",e=>new ky(e),"PRIVATE")),Mn(new Pt("heartbeat",e=>new jy(e),"PRIVATE")),ke(Fy,NT,n),ke(Fy,NT,"esm2017"),ke("fire-js","")}$2("");var H2="firebase",z2="10.14.1";ke(H2,z2,"app");var Vr=new Gn("ANGULARFIRE2_VERSION");function pc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ki=(n,e)=>{let t=e?[e]:Fd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Oi=class{constructor(){return ki(q2)}},q2="app-check";function ao(){}var Ld=class{zone;delegate;constructor(e,t=up){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Hy=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ao,{},ao,ao)),t.pipe(We({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Fi=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Ld(Zone.current)),this.insideAngular=t.run(()=>new Ld(Zone.current,cp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(X(Te))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vd(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function G2(n){return Vd().ngZone.runOutsideAngular(()=>n())}function Pi(n){return Vd().ngZone.run(()=>n())}function W2(n){return K2(Vd())(n)}function K2(n){return function(t){return t=t.lift(new Hy(n.ngZone)),t.pipe(_r(n.outsideAngular),vr(n.insideAngular))}}var Q2=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Pi(()=>n.apply(void 0,r))},Bt=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Pi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ao,{},ao,ao))),r[s]=Q2(r[s],t));let i=G2(()=>n.apply(this,r));if(!e)if(i instanceof me){let s=Vd();return i.pipe(_r(s.outsideAngular),vr(s.insideAngular))}else return Pi(()=>i);return i instanceof me?i.pipe(W2):i instanceof Promise?Pi(()=>new Promise((s,o)=>i.then(a=>Pi(()=>s(a)),a=>Pi(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Pi(()=>i)};var ir=class{constructor(e){return e}},Li=class{constructor(){return Fd()}};function Y2(n){return n&&n.length===1?n[0]:new ir(Ni())}var zy=new Q("angularfire2._apps"),Z2={provide:ir,useFactory:Y2,deps:[[new rt,zy]]},J2={provide:Li,deps:[[new rt,zy]]};function X2(n){return(e,t)=>{let r=t.get(Mr);ke("angularfire",Vr.full,"core"),ke("angularfire",Vr.full,"app"),ke("angular",OD.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ir(i)}}function UT(n,...e){return Sn([Z2,J2,{provide:zy,useFactory:X2(n),multi:!0,deps:[Te,Tt,Fi,...e]}])}var jT=Bt($y,!0);function KT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var QT=KT,YT=new nr("auth","Firebase",KT());var $d=new kr("@firebase/auth");function eU(n,...e){$d.logLevel<=he.WARN&&$d.warn(`Auth (${Lr}): ${n}`,...e)}function jd(n,...e){$d.logLevel<=he.ERROR&&$d.error(`Auth (${Lr}): ${n}`,...e)}function BT(n,...e){throw nv(n,...e)}function tv(n,...e){return nv(n,...e)}function ZT(n,e,t){let r=Object.assign(Object.assign({},QT()),{[e]:t});return new nr("auth","Firebase",r).create(e,{appName:n.name})}function Bd(n){return ZT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return YT.create(n,...e)}function Ee(n,e,...t){if(!n)throw nv(e,...t)}function gc(n){let e="INTERNAL ASSERTION FAILED: "+n;throw jd(e),new Error(e)}function Hd(n,e){n||gc(e)}function tU(){return $T()==="http:"||$T()==="https:"}function $T(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function nU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tU()||IT()||"connection"in navigator)?navigator.onLine:!0}function rU(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ui=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hd(t>e,"Short delay should be less than long delay!"),this.isMobile=_T()||ET()}get(){return nU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function iU(n,e){Hd(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var zd=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var oU=new Ui(3e4,6e4);function JT(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Kd(s,o,a,c){return b(this,arguments,function*(n,e,t,r,i={}){return XT(n,i,()=>b(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Sy(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:m},l);return wT()||(v.referrerPolicy="no-referrer"),zd.fetch()(eS(n,n.config.apiHost,t,p),v)}))})}function XT(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},sU),e);try{let i=new Wy(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ud(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ud(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ud(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ud(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw ZT(n,h,l);BT(n,h)}}catch(i){if(i instanceof Nt)throw i;BT(n,"network-request-failed",{message:String(i)})}})}function eS(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?iU(n.config,i):`${n.config.apiScheme}://${i}`}var Wy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(tv(this.auth,"network-request-failed")),oU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ud(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=tv(n,e,r);return i.customData._tokenResponse=t,i}function aU(n,e){return b(this,null,function*(){return Kd(n,"POST","/v1/accounts:delete",e)})}function tS(n,e){return b(this,null,function*(){return Kd(n,"POST","/v1/accounts:lookup",e)})}function mc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function rv(n,e=!1){return b(this,null,function*(){let t=jt(n),r=yield t.getIdToken(e),i=nS(r);Ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:mc(qy(i.auth_time)),issuedAtTime:mc(qy(i.iat)),expirationTime:mc(qy(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function qy(n){return Number(n)*1e3}function nS(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return jd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Dy(t);return i?JSON.parse(i):(jd("Failed to decode base64 JWT payload"),null)}catch(i){return jd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function HT(n){let e=nS(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ky(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Nt&&cU(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function cU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Qy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var vc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function qd(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ky(n,tS(t,{idToken:r}));Ee(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?rS(s.providerUserInfo):[],a=uU(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new vc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function iv(n){return b(this,null,function*(){let e=jt(n);yield qd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function uU(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rS(n){return n.map(e=>{var{providerId:t}=e,r=lp(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function lU(n,e){return b(this,null,function*(){let t=yield XT(n,{},()=>b(this,null,function*(){let r=Sy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=eS(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function dU(n,e){return b(this,null,function*(){return Kd(n,"POST","/v2/accounts:revokeToken",JT(n,e))})}var yc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");let t=HT(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield lU(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return gc("not implemented")}};function Ur(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var _c=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=lp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield Ky(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return rv(this,e)}reload(){return iv(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield qd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(oo(this.auth.app))return Promise.reject(Bd(this.auth));let e=yield this.getIdToken();return yield Ky(this,aU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=t.photoURL)!==null&&o!==void 0?o:void 0,M=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,k=(l=t.createdAt)!==null&&l!==void 0?l:void 0,B=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:F,emailVerified:H,isAnonymous:ne,providerData:$,stsTokenManager:I}=t;Ee(F&&I,e,"internal-error");let y=yc.fromJSON(this.name,I);Ee(typeof F=="string",e,"internal-error"),Ur(p,e.name),Ur(m,e.name),Ee(typeof H=="boolean",e,"internal-error"),Ee(typeof ne=="boolean",e,"internal-error"),Ur(v,e.name),Ur(T,e.name),Ur(M,e.name),Ur(R,e.name),Ur(k,e.name),Ur(B,e.name);let _=new n({uid:F,auth:e,email:m,emailVerified:H,displayName:p,isAnonymous:ne,photoURL:T,phoneNumber:v,tenantId:M,stsTokenManager:y,createdAt:k,lastLoginAt:B});return $&&Array.isArray($)&&(_.providerData=$.map(E=>Object.assign({},E))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new yc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield qd(s),s})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];Ee(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?rS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new yc;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new vc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var zT=new Map;function Vi(n){Hd(n instanceof Function,"Expected a class definition");let e=zT.get(n);return e?(Hd(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zT.set(n,e),e)}var hU=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Yy=hU;function Gy(n,e,t){return`firebase:${n}:${e}:${t}`}var Gd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Gy(this.userKey,i.apiKey,s),this.fullPersistenceKey=Gy("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?_c._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(Vi(Yy),e,r);let i=(yield Promise.all(t.map(l=>b(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Vi(Yy),o=Gy(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let p=_c._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>b(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function qT(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vU(e))return"Blackberry";if(_U(e))return"Webos";if(pU(e))return"Safari";if((e.includes("chrome/")||gU(e))&&!e.includes("edge/"))return"Chrome";if(yU(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function fU(n=ft()){return/firefox\//i.test(n)}function pU(n=ft()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gU(n=ft()){return/crios\//i.test(n)}function mU(n=ft()){return/iemobile/i.test(n)}function yU(n=ft()){return/android/i.test(n)}function vU(n=ft()){return/blackberry/i.test(n)}function _U(n=ft()){return/webos/i.test(n)}function iS(n,e=[]){let t;switch(n){case"Browser":t=qT(ft());break;case"Worker":t=`${qT(ft())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lr}/${r}`}var Zy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function wU(t){return b(this,arguments,function*(n,e={}){return Kd(n,"GET","/v2/passwordPolicy",JT(n,e))})}var IU=6,Jy=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:IU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Xy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wd(this),this.idTokenSubscription=new Wd(this),this.beforeStateQueue=new Zy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vi(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Gd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield tS(this,{idToken:e}),r=yield _c._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(oo(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield qd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=rU()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(oo(this.app))return Promise.reject(Bd(this));let t=e?jt(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return oo(this.app)?Promise.reject(Bd(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return oo(this.app)?Promise.reject(Bd(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(Vi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield wU(this),t=new Jy(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield dU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Vi(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=yield Gd.create(this,[Vi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&eU(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function EU(n){return jt(n)}var Wd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=DT(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var bU={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DU(n){bU=n}function CU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function TU(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Vi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var x5=CU("rcb"),R5=new Ui(3e4,6e4);var M5=new Ui(2e3,1e4);var N5=10*60*1e3;var P5=new Ui(3e4,6e4);var O5=new Ui(5e3,15e3);var k5=encodeURIComponent("fac");var GT="@firebase/auth",WT="1.7.9";var ev=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function SU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AU(n){Mn(new Pt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iS(n)},l=new Xy(r,i,s,c);return TU(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Mn(new Pt("auth-internal",e=>{let t=EU(e.getProvider("auth").getImmediate());return(r=>new ev(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ke(GT,WT,SU(n)),ke(GT,WT,"esm2017")}var xU=5*60,F5=vT("authIdTokenMaxAge")||xU;function RU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}DU({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=tv("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",RU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AU("Browser");var xj="auth";var co=class{constructor(){return ki(xj)}};var sS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oS={};var jr,sv;(function(){var n;function e(I,y){function _(){}_.prototype=y.prototype,I.D=y.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(E,D,S){for(var w=Array(arguments.length-2),Un=2;Un<arguments.length;Un++)w[Un-2]=arguments[Un];return y.prototype[D].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(D=0;16>D;++D)E[D]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=I.g[0],_=I.g[1],D=I.g[2];var S=I.g[3],w=y+(S^_&(D^S))+E[0]+3614090360&4294967295;y=_+(w<<7&4294967295|w>>>25),w=S+(D^y&(_^D))+E[1]+3905402710&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(_^S&(y^_))+E[2]+606105819&4294967295,D=S+(w<<17&4294967295|w>>>15),w=_+(y^D&(S^y))+E[3]+3250441966&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(S^_&(D^S))+E[4]+4118548399&4294967295,y=_+(w<<7&4294967295|w>>>25),w=S+(D^y&(_^D))+E[5]+1200080426&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(_^S&(y^_))+E[6]+2821735955&4294967295,D=S+(w<<17&4294967295|w>>>15),w=_+(y^D&(S^y))+E[7]+4249261313&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(S^_&(D^S))+E[8]+1770035416&4294967295,y=_+(w<<7&4294967295|w>>>25),w=S+(D^y&(_^D))+E[9]+2336552879&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(_^S&(y^_))+E[10]+4294925233&4294967295,D=S+(w<<17&4294967295|w>>>15),w=_+(y^D&(S^y))+E[11]+2304563134&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(S^_&(D^S))+E[12]+1804603682&4294967295,y=_+(w<<7&4294967295|w>>>25),w=S+(D^y&(_^D))+E[13]+4254626195&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(_^S&(y^_))+E[14]+2792965006&4294967295,D=S+(w<<17&4294967295|w>>>15),w=_+(y^D&(S^y))+E[15]+1236535329&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(D^S&(_^D))+E[1]+4129170786&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^D&(y^_))+E[6]+3225465664&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(S^y))+E[11]+643717713&4294967295,D=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(D^S))+E[0]+3921069994&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^S&(_^D))+E[5]+3593408605&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^D&(y^_))+E[10]+38016083&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(S^y))+E[15]+3634488961&4294967295,D=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(D^S))+E[4]+3889429448&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^S&(_^D))+E[9]+568446438&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^D&(y^_))+E[14]+3275163606&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(S^y))+E[3]+4107603335&4294967295,D=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(D^S))+E[8]+1163531501&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^S&(_^D))+E[13]+2850285829&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^D&(y^_))+E[2]+4243563512&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(S^y))+E[7]+1735328473&4294967295,D=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(D^S))+E[12]+2368359562&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(_^D^S)+E[5]+4294588738&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^D)+E[8]+2272392833&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^_)+E[11]+1839030562&4294967295,D=S+(w<<16&4294967295|w>>>16),w=_+(D^S^y)+E[14]+4259657740&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^S)+E[1]+2763975236&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^D)+E[4]+1272893353&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^_)+E[7]+4139469664&4294967295,D=S+(w<<16&4294967295|w>>>16),w=_+(D^S^y)+E[10]+3200236656&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^S)+E[13]+681279174&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^D)+E[0]+3936430074&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^_)+E[3]+3572445317&4294967295,D=S+(w<<16&4294967295|w>>>16),w=_+(D^S^y)+E[6]+76029189&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^S)+E[9]+3654602809&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^D)+E[12]+3873151461&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^_)+E[15]+530742520&4294967295,D=S+(w<<16&4294967295|w>>>16),w=_+(D^S^y)+E[2]+3299628645&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(D^(_|~S))+E[0]+4096336452&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~D))+E[7]+1126891415&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~_))+E[14]+2878612391&4294967295,D=S+(w<<15&4294967295|w>>>17),w=_+(S^(D|~y))+E[5]+4237533241&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~S))+E[12]+1700485571&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~D))+E[3]+2399980690&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~_))+E[10]+4293915773&4294967295,D=S+(w<<15&4294967295|w>>>17),w=_+(S^(D|~y))+E[1]+2240044497&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~S))+E[8]+1873313359&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~D))+E[15]+4264355552&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~_))+E[6]+2734768916&4294967295,D=S+(w<<15&4294967295|w>>>17),w=_+(S^(D|~y))+E[13]+1309151649&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~S))+E[4]+4149444226&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~D))+E[11]+3174756917&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~_))+E[2]+718787259&4294967295,D=S+(w<<15&4294967295|w>>>17),w=_+(S^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var _=y-this.blockSize,E=this.B,D=this.h,S=0;S<y;){if(D==0)for(;S<=_;)i(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<y;)if(E[D++]=I.charCodeAt(S++),D==this.blockSize){i(this,E),D=0;break}}else for(;S<y;)if(E[D++]=I[S++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var _=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=_&255,_/=256;for(this.u(I),I=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)I[_++]=this.g[y]>>>E&255;return I};function s(I,y){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=y(I)}function o(I,y){this.h=y;for(var _=[],E=!0,D=I.length-1;0<=D;D--){var S=I[D]|0;E&&S==y||(_[D]=S,E=!1)}this.g=_}var a={};function c(I){return-128<=I&&128>I?s(I,function(y){return new o([y|0],0>y?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return R(l(-I));for(var y=[],_=1,E=0;I>=_;E++)y[E]=I/_|0,_*=4294967296;return new o(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return R(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var S=Math.min(8,I.length-D),w=parseInt(I.substring(D,D+S),y);8>S?(S=l(Math.pow(y,S)),E=E.j(S).add(l(w))):(E=E.j(_),E=E.add(l(w)))}return E}var p=c(0),m=c(1),v=c(16777216);n=o.prototype,n.m=function(){if(M(this))return-R(this).m();for(var I=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(M(this))return"-"+R(this).toString(I);for(var y=l(Math.pow(I,6)),_=this,E="";;){var D=H(_,y).g;_=k(_,D.j(y));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=D,T(_))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=k(this,I),M(I)?-1:T(I)?0:1};function R(I){for(var y=I.g.length,_=[],E=0;E<y;E++)_[E]=~I.g[E];return new o(_,~I.h).add(m)}n.abs=function(){return M(this)?R(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0,D=0;D<=y;D++){var S=E+(this.i(D)&65535)+(I.i(D)&65535),w=(S>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=w>>>16,S&=65535,w&=65535,_[D]=w<<16|S}return new o(_,_[_.length-1]&-2147483648?-1:0)};function k(I,y){return I.add(R(y))}n.j=function(I){if(T(this)||T(I))return p;if(M(this))return M(I)?R(this).j(R(I)):R(R(this).j(I));if(M(I))return R(this.j(R(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var S=this.i(E)>>>16,w=this.i(E)&65535,Un=I.i(D)>>>16,Go=I.i(D)&65535;_[2*E+2*D]+=w*Go,B(_,2*E+2*D),_[2*E+2*D+1]+=S*Go,B(_,2*E+2*D+1),_[2*E+2*D+1]+=w*Un,B(_,2*E+2*D+1),_[2*E+2*D+2]+=S*Un,B(_,2*E+2*D+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new o(_,0)};function B(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function H(I,y){if(T(y))throw Error("division by zero");if(T(I))return new F(p,p);if(M(I))return y=H(R(I),y),new F(R(y.g),R(y.h));if(M(y))return y=H(I,R(y)),new F(R(y.g),y.h);if(30<I.g.length){if(M(I)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(I);)_=ne(_),E=ne(E);var D=$(_,1),S=$(E,1);for(E=$(E,2),_=$(_,2);!T(E);){var w=S.add(E);0>=w.l(I)&&(D=D.add(_),S=w),E=$(E,1),_=$(_,1)}return y=k(I,D.j(y)),new F(D,y)}for(D=p;0<=I.l(y);){for(_=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(_),w=S.j(y);M(w)||0<w.l(I);)_-=E,S=l(_),w=S.j(y);T(S)&&(S=m),D=D.add(S),I=k(I,w)}return new F(D,I)}n.A=function(I){return H(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&I.i(E);return new o(_,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|I.i(E);return new o(_,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^I.i(E);return new o(_,this.h^I.h)};function ne(I){for(var y=I.g.length+1,_=[],E=0;E<y;E++)_[E]=I.i(E)<<1|I.i(E-1)>>>31;return new o(_,I.h)}function $(I,y){var _=y>>5;y%=32;for(var E=I.g.length-_,D=[],S=0;S<E;S++)D[S]=0<y?I.i(S+_)>>>y|I.i(S+_+1)<<32-y:I.i(S+_);return new o(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sv=oS.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,jr=oS.Integer=o}).apply(typeof sS<"u"?sS:typeof self<"u"?self:typeof window<"u"?window:{});var Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sr={};var ov,Rj,uo,av,wc,Yd,cv,uv,lv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qd=="object"&&Qd];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var C=u[g];if(!(C in f))break e;f=f[C]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var f=0,g=!1,C={next:function(){if(!g&&f<u.length){var x=f++;return{value:d(x,u[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function T(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,C,x){for(var O=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)O[xe-2]=arguments[xe];return d.prototype[C].apply(g,O)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function R(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=u.length||0,x=g.length||0;u.length=C+x;for(let O=0;O<x;O++)u[C+O]=g[O]}else u.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function B(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function H(u){return H[" "](u),u}H[" "]=function(){};var ne=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function $(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function y(u){let d={};for(let f in u)d[f]=u[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)u[f]=g[f];for(let x=0;x<_.length;x++)f=_[x],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function S(u){a.setTimeout(()=>{throw u},0)}function w(){var u=_f;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Un{constructor(){this.h=this.g=null}add(d,f){let g=Go.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Go=new k(()=>new aR,u=>u.reset());class aR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Wo,Ko=!1,_f=new Un,Nw=()=>{let u=a.Promise.resolve(void 0);Wo=()=>{u.then(cR)}};var cR=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(f){S(f)}var d=Go;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Ko=!1};function hr(){this.s=this.s,this.C=this.C}hr.prototype.s=!1,hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ot(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var uR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Qo(u,d){if(ot.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ne){e:{try{H(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:lR[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Qo.aa.h.call(this)}}T(Qo,ot);var lR={2:"touch",3:"pen",4:"mouse"};Qo.prototype.h=function(){Qo.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Yo="closure_listenable_"+(1e6*Math.random()|0),dR=0;function hR(u,d,f,g,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++dR,this.da=this.fa=!1}function eu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function tu(u){this.src=u,this.g={},this.h=0}tu.prototype.add=function(u,d,f,g,C){var x=u.toString();u=this.g[x],u||(u=this.g[x]=[],this.h++);var O=If(u,d,g,C);return-1<O?(d=u[O],f||(d.fa=!1)):(d=new hR(d,this.src,x,!!g,C),d.fa=f,u.push(d)),d};function wf(u,d){var f=d.type;if(f in u.g){var g=u.g[f],C=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=C)&&Array.prototype.splice.call(g,C,1),x&&(eu(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function If(u,d,f,g){for(var C=0;C<u.length;++C){var x=u[C];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return C}return-1}var Ef="closure_lm_"+(1e6*Math.random()|0),bf={};function Pw(u,d,f,g,C){if(g&&g.once)return kw(u,d,f,g,C);if(Array.isArray(d)){for(var x=0;x<d.length;x++)Pw(u,d[x],f,g,C);return null}return f=Sf(f),u&&u[Yo]?u.K(d,f,l(g)?!!g.capture:!!g,C):Ow(u,d,f,!1,g,C)}function Ow(u,d,f,g,C,x){if(!d)throw Error("Invalid event type");var O=l(C)?!!C.capture:!!C,xe=Cf(u);if(xe||(u[Ef]=xe=new tu(u)),f=xe.add(d,f,g,O,x),f.proxy)return f;if(g=fR(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)uR||(C=O),C===void 0&&(C=!1),u.addEventListener(d.toString(),g,C);else if(u.attachEvent)u.attachEvent(Lw(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function fR(){function u(f){return d.call(u.src,u.listener,f)}let d=pR;return u}function kw(u,d,f,g,C){if(Array.isArray(d)){for(var x=0;x<d.length;x++)kw(u,d[x],f,g,C);return null}return f=Sf(f),u&&u[Yo]?u.L(d,f,l(g)?!!g.capture:!!g,C):Ow(u,d,f,!0,g,C)}function Fw(u,d,f,g,C){if(Array.isArray(d))for(var x=0;x<d.length;x++)Fw(u,d[x],f,g,C);else g=l(g)?!!g.capture:!!g,f=Sf(f),u&&u[Yo]?(u=u.i,d=String(d).toString(),d in u.g&&(x=u.g[d],f=If(x,f,g,C),-1<f&&(eu(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete u.g[d],u.h--)))):u&&(u=Cf(u))&&(d=u.g[d.toString()],u=-1,d&&(u=If(d,f,g,C)),(f=-1<u?d[u]:null)&&Df(f))}function Df(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Yo])wf(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(Lw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Cf(d))?(wf(f,u),f.h==0&&(f.src=null,d[Ef]=null)):eu(u)}}}function Lw(u){return u in bf?bf[u]:bf[u]="on"+u}function pR(u,d){if(u.da)u=!0;else{d=new Qo(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Df(u),u=f.call(g,d)}return u}function Cf(u){return u=u[Ef],u instanceof tu?u:null}var Tf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sf(u){return typeof u=="function"?u:(u[Tf]||(u[Tf]=function(d){return u.handleEvent(d)}),u[Tf])}function at(){hr.call(this),this.i=new tu(this),this.M=this,this.F=null}T(at,hr),at.prototype[Yo]=!0,at.prototype.removeEventListener=function(u,d,f,g){Fw(this,u,d,f,g)};function gt(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new ot(d,u);else if(d instanceof ot)d.target=d.target||u;else{var C=d;d=new ot(g,u),E(d,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var O=d.g=f[x];C=nu(O,g,!0,d)&&C}if(O=d.g=u,C=nu(O,g,!0,d)&&C,C=nu(O,g,!1,d)&&C,f)for(x=0;x<f.length;x++)O=d.g=f[x],C=nu(O,g,!1,d)&&C}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)eu(f[g]);delete u.g[d],u.h--}}this.F=null},at.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},at.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function nu(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,x=0;x<d.length;++x){var O=d[x];if(O&&!O.da&&O.capture==f){var xe=O.listener,et=O.ha||O.src;O.fa&&wf(u.i,O),C=xe.call(et,g)!==!1&&C}}return C&&!g.defaultPrevented}function Vw(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Uw(u){u.g=Vw(()=>{u.g=null,u.i&&(u.i=!1,Uw(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class gR extends hr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Uw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zo(u){hr.call(this),this.h=u,this.g={}}T(Zo,hr);var jw=[];function Bw(u){$(u.g,function(d,f){this.g.hasOwnProperty(f)&&Df(d)},u),u.g={}}Zo.prototype.N=function(){Zo.aa.N.call(this),Bw(this)},Zo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Af=a.JSON.stringify,mR=a.JSON.parse,yR=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function xf(){}xf.prototype.h=null;function $w(u){return u.h||(u.h=u.i())}function Hw(){}var Jo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rf(){ot.call(this,"d")}T(Rf,ot);function Mf(){ot.call(this,"c")}T(Mf,ot);var ti={},zw=null;function ru(){return zw=zw||new at}ti.La="serverreachability";function qw(u){ot.call(this,ti.La,u)}T(qw,ot);function Xo(u){let d=ru();gt(d,new qw(d))}ti.STAT_EVENT="statevent";function Gw(u,d){ot.call(this,ti.STAT_EVENT,u),this.stat=d}T(Gw,ot);function mt(u){let d=ru();gt(d,new Gw(d,u))}ti.Ma="timingevent";function Ww(u,d){ot.call(this,ti.Ma,u),this.size=d}T(Ww,ot);function ea(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function ta(){this.g=!0}ta.prototype.xa=function(){this.g=!1};function vR(u,d,f,g,C,x){u.info(function(){if(u.g)if(x)for(var O="",xe=x.split("&"),et=0;et<xe.length;et++){var we=xe[et].split("=");if(1<we.length){var ct=we[0];we=we[1];var ut=ct.split("_");O=2<=ut.length&&ut[1]=="type"?O+(ct+"="+we+"&"):O+(ct+"=redacted&")}}else O=null;else O=x;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+O})}function _R(u,d,f,g,C,x,O){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+x+" "+O})}function cs(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+IR(u,f)+(g?" "+g:"")})}function wR(u,d){u.info(function(){return"TIMEOUT: "+d})}ta.prototype.info=function(){};function IR(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var O=1;O<C.length;O++)C[O]=""}}}}return Af(f)}catch{return d}}var iu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nf;function su(){}T(su,xf),su.prototype.g=function(){return new XMLHttpRequest},su.prototype.i=function(){return{}},Nf=new su;function fr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new Zo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qw}function Qw(){this.i=null,this.g="",this.h=!1}var Yw={},Pf={};function Of(u,d,f){u.L=1,u.v=uu(jn(d)),u.m=f,u.P=!0,Zw(u,null)}function Zw(u,d){u.F=Date.now(),ou(u),u.A=jn(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),dI(f.i,"t",g),u.C=0,f=u.j.J,u.h=new Qw,u.g=xI(u.j,f?d:null,!u.m),0<u.O&&(u.M=new gR(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(jw[0]=C.toString()),C=jw);for(var x=0;x<C.length;x++){var O=Pw(f,C[x],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Xo(),vR(u.i,u.u,u.A,u.l,u.R,u.m)}fr.prototype.ca=function(u){u=u.target;let d=this.M;d&&Bn(u)==3?d.j():this.Y(u)},fr.prototype.Y=function(u){try{if(u==this.g)e:{let ut=Bn(this.g);var d=this.g.Ba();let ds=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||vI(this.g)))){this.J||ut!=4||d==7||(d==8||0>=ds?Xo(3):Xo(2)),kf(this);var f=this.g.Z();this.X=f;t:if(Jw(this)){var g=vI(this.g);u="";var C=g.length,x=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),na(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(x&&d==C-1)});g.length=0,this.h.g+=u,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,_R(this.i,this.u,this.A,this.l,this.R,ut,f),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,et=this.g;if((xe=et.g?et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(xe)){var we=xe;break t}}we=null}if(f=we)cs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ff(this,f);else{this.o=!1,this.s=3,mt(12),ni(this),na(this);break e}}if(this.P){f=!0;let rn;for(;!this.J&&this.C<O.length;)if(rn=ER(this,O),rn==Pf){ut==4&&(this.s=4,mt(14),f=!1),cs(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Yw){this.s=4,mt(15),cs(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else cs(this.i,this.l,rn,null),Ff(this,rn);if(Jw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||O.length!=0||this.h.h||(this.s=1,mt(16),f=!1),this.o=this.o&&f,!f)cs(this.i,this.l,O,"[Invalid Chunked Response]"),ni(this),na(this);else if(0<O.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),$f(ct),ct.M=!0,mt(11))}}else cs(this.i,this.l,O,null),Ff(this,O);ut==4&&ni(this),this.o&&!this.J&&(ut==4?CI(this.j,this):(this.o=!1,ou(this)))}else UR(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),ni(this),na(this)}}}catch{}finally{}};function Jw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ER(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Pf:(f=Number(d.substring(f,g)),isNaN(f)?Yw:(g+=1,g+f>d.length?Pf:(d=d.slice(g,g+f),u.C=g+f,d)))}fr.prototype.cancel=function(){this.J=!0,ni(this)};function ou(u){u.S=Date.now()+u.I,Xw(u,u.I)}function Xw(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ea(m(u.ba,u),d)}function kf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}fr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(wR(this.i,this.A),this.L!=2&&(Xo(),mt(17)),ni(this),this.s=2,na(this)):Xw(this,this.S-u)};function na(u){u.j.G==0||u.J||CI(u.j,u)}function ni(u){kf(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Bw(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Ff(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Lf(f.h,u))){if(!u.K&&Lf(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)pu(f),hu(f);else break e;Bf(f),mt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ea(m(f.Za,f),6e3));if(1>=nI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ii(f,11)}else if((u.K||f.g==u)&&pu(f),!B(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let we=C[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let ct=we[3];ct!=null&&(f.la=ct,f.j.info("VER="+f.la));let ut=we[4];ut!=null&&(f.Aa=ut,f.j.info("SVER="+f.Aa));let ds=we[5];ds!=null&&typeof ds=="number"&&0<ds&&(g=1.5*ds,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let rn=u.g;if(rn){let mu=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mu){var x=g.h;x.g||mu.indexOf("spdy")==-1&&mu.indexOf("quic")==-1&&mu.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Vf(x,x.h),x.h=null))}if(g.D){let Hf=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hf&&(g.ya=Hf,Pe(g.I,g.D,Hf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=u;if(g.qa=AI(g,g.J?g.ia:null,g.W),O.K){rI(g.h,O);var xe=O,et=g.L;et&&(xe.I=et),xe.B&&(kf(xe),ou(xe)),g.g=O}else bI(g);0<f.i.length&&fu(f)}else we[0]!="stop"&&we[0]!="close"||ii(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?ii(f,7):jf(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}Xo(4)}catch{}}var bR=class{constructor(u,d){this.g=u,this.map=d}};function eI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function nI(u){return u.h?1:u.g?u.g.size:0}function Lf(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Vf(u,d){u.g?u.g.add(d):u.h=d}function rI(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}eI.prototype.cancel=function(){if(this.i=iI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function iI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function DR(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function CR(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function sI(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=CR(u),g=DR(u),C=g.length,x=0;x<C;x++)d.call(void 0,g[x],f&&f[x],u)}var oI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TR(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),C=null;if(0<=g){var x=u[f].substring(0,g);C=u[f].substring(g+1)}else x=u[f];d(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ri(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ri){this.h=u.h,au(this,u.j),this.o=u.o,this.g=u.g,cu(this,u.s),this.l=u.l;var d=u.i,f=new sa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),aI(this,f),this.m=u.m}else u&&(d=String(u).match(oI))?(this.h=!1,au(this,d[1]||"",!0),this.o=ra(d[2]||""),this.g=ra(d[3]||"",!0),cu(this,d[4]),this.l=ra(d[5]||"",!0),aI(this,d[6]||"",!0),this.m=ra(d[7]||"")):(this.h=!1,this.i=new sa(null,this.h))}ri.prototype.toString=function(){var u=[],d=this.j;d&&u.push(ia(d,cI,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(ia(d,cI,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(ia(f,f.charAt(0)=="/"?xR:AR,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",ia(f,MR)),u.join("")};function jn(u){return new ri(u)}function au(u,d,f){u.j=f?ra(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function cu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function aI(u,d,f){d instanceof sa?(u.i=d,NR(u.i,u.h)):(f||(d=ia(d,RR)),u.i=new sa(d,u.h))}function Pe(u,d,f){u.i.set(d,f)}function uu(u){return Pe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ra(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ia(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,SR),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function SR(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var cI=/[#\/\?@]/g,AR=/[#\?:]/g,xR=/[#\?]/g,RR=/[#\?@]/g,MR=/#/g;function sa(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function pr(u){u.g||(u.g=new Map,u.h=0,u.i&&TR(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=sa.prototype,n.add=function(u,d){pr(this),this.i=null,u=us(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function uI(u,d){pr(u),d=us(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function lI(u,d){return pr(u),d=us(u,d),u.g.has(d)}n.forEach=function(u,d){pr(this),this.g.forEach(function(f,g){f.forEach(function(C){u.call(d,C,g,this)},this)},this)},n.na=function(){pr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=u[g];for(let x=0;x<C.length;x++)f.push(d[g])}return f},n.V=function(u){pr(this);let d=[];if(typeof u=="string")lI(this,u)&&(d=d.concat(this.g.get(us(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return pr(this),this.i=null,u=us(this,u),lI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function dI(u,d,f){uI(u,d),0<f.length&&(u.i=null,u.g.set(us(u,d),M(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var C=x;O[g]!==""&&(C+="="+encodeURIComponent(String(O[g]))),u.push(C)}}return this.i=u.join("&")};function us(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function NR(u,d){d&&!u.j&&(pr(u),u.i=null,u.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(uI(this,g),dI(this,C,f))},u)),u.j=d}function PR(u,d){let f=new ta;if(a.Image){let g=new Image;g.onload=v(gr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(gr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(gr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(gr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function OR(u,d){let f=new ta,g=new AbortController,C=setTimeout(()=>{g.abort(),gr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(x=>{clearTimeout(C),x.ok?gr(f,"TestPingServer: ok",!0,d):gr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),gr(f,"TestPingServer: error",!1,d)})}function gr(u,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function kR(){this.g=new yR}function FR(u,d,f){let g=f||"";try{sI(u,function(C,x){let O=C;l(C)&&(O=Af(C)),d.push(g+x+"="+encodeURIComponent(O))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function oa(u){this.l=u.Ub||null,this.j=u.eb||!1}T(oa,xf),oa.prototype.g=function(){return new lu(this.l,this.j)},oa.prototype.i=function(u){return function(){return u}}({});function lu(u,d){at.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(lu,at),n=lu.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,ca(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,aa(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ca(this)),this.g&&(this.readyState=3,ca(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function hI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?aa(this):ca(this),this.readyState==3&&hI(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,aa(this))},n.Qa=function(u){this.g&&(this.response=u,aa(this))},n.ga=function(){this.g&&aa(this)};function aa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ca(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function ca(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(lu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function fI(u){let d="";return $(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Uf(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=fI(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Pe(u,d,f))}function Le(u){at.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Le,at);var LR=/^https?$/i,VR=["POST","PUT"];n=Le.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nf.g(),this.v=this.o?$w(this.o):$w(Nf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(x){pI(this,x);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(VR,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,O]of f)this.g.setRequestHeader(x,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yI(this),this.u=!0,this.g.send(u),this.u=!1}catch(x){pI(this,x)}};function pI(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,gI(u),du(u)}function gI(u){u.A||(u.A=!0,gt(u,"complete"),gt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,gt(this,"complete"),gt(this,"abort"),du(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),du(this,!0)),Le.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?mI(this):this.bb())},n.bb=function(){mI(this)};function mI(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Bn(u)!=4||u.Z()!=2)){if(u.u&&Bn(u)==4)Vw(u.Ea,0,u);else if(gt(u,"readystatechange"),Bn(u)==4){u.h=!1;try{let O=u.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var C=String(u.D).match(oI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!LR.test(C?C.toLowerCase():"")}f=g}if(f)gt(u,"complete"),gt(u,"success");else{u.m=6;try{var x=2<Bn(u)?u.g.statusText:""}catch{x=""}u.l=x+" ["+u.Z()+"]",gI(u)}}finally{du(u)}}}}function du(u,d){if(u.g){yI(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||gt(u,"ready");try{f.onreadystatechange=g}catch{}}}function yI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Bn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),mR(d)}};function vI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function UR(u){let d={};u=(u.g&&2<=Bn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(B(u[g]))continue;var f=D(u[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[C]||[];d[C]=x,x.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function _I(u){this.Aa=0,this.i=[],this.j=new ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ua("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ua("baseRetryDelayMs",5e3,u),this.cb=ua("retryDelaySeedMs",1e4,u),this.Wa=ua("forwardChannelMaxRetries",2,u),this.wa=ua("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new eI(u&&u.concurrentRequestLimit),this.Da=new kR,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=_I.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){mt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=AI(this,null,this.W),fu(this)};function jf(u){if(wI(u),u.G==3){var d=u.U++,f=jn(u.I);if(Pe(f,"SID",u.K),Pe(f,"RID",d),Pe(f,"TYPE","terminate"),la(u,f),d=new fr(u,u.j,d),d.L=2,d.v=uu(jn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=xI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ou(d)}SI(u)}function hu(u){u.g&&($f(u),u.g.cancel(),u.g=null)}function wI(u){hu(u),u.u&&(a.clearTimeout(u.u),u.u=null),pu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function fu(u){if(!tI(u.h)&&!u.s){u.s=!0;var d=u.Ga;Wo||Nw(),Ko||(Wo(),Ko=!0),_f.add(d,u),u.B=0}}function jR(u,d){return nI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ea(m(u.Ga,u,d),TI(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new fr(this,this.j,u),x=this.o;if(this.S&&(x?(x=y(x),E(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=EI(this,C,d),f=jn(this.I),Pe(f,"RID",u),Pe(f,"CVER",22),this.D&&Pe(f,"X-HTTP-Session-Id",this.D),la(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(fI(x)))+"&"+d:this.m&&Uf(f,this.m,x)),Vf(this.h,C),this.Ua&&Pe(f,"TYPE","init"),this.P?(Pe(f,"$req",d),Pe(f,"SID","null"),C.T=!0,Of(C,f,null)):Of(C,f,d),this.G=2}}else this.G==3&&(u?II(this,u):this.i.length==0||tI(this.h)||II(this))};function II(u,d){var f;d?f=d.l:f=u.U++;let g=jn(u.I);Pe(g,"SID",u.K),Pe(g,"RID",f),Pe(g,"AID",u.T),la(u,g),u.m&&u.o&&Uf(g,u.m,u.o),f=new fr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=EI(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Vf(u.h,f),Of(f,g,d)}function la(u,d){u.H&&$(u.H,function(f,g){Pe(d,g,f)}),u.l&&sI({},function(f,g){Pe(d,g,f)})}function EI(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var C=u.i;let x=-1;for(;;){let O=["count="+f];x==-1?0<f?(x=C[0].g,O.push("ofs="+x)):x=0:O.push("ofs="+x);let xe=!0;for(let et=0;et<f;et++){let we=C[et].g,ct=C[et].map;if(we-=x,0>we)x=Math.max(0,C[et].g-100),xe=!1;else try{FR(ct,O,"req"+we+"_")}catch{g&&g(ct)}}if(xe){g=O.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function bI(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Wo||Nw(),Ko||(Wo(),Ko=!0),_f.add(d,u),u.v=0}}function Bf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ea(m(u.Fa,u),TI(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,DI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ea(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),hu(this),DI(this))};function $f(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function DI(u){u.g=new fr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=jn(u.qa);Pe(d,"RID","rpc"),Pe(d,"SID",u.K),Pe(d,"AID",u.T),Pe(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Pe(d,"TO",u.ja),Pe(d,"TYPE","xmlhttp"),la(u,d),u.m&&u.o&&Uf(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=uu(jn(d)),f.m=null,f.P=!0,Zw(f,u)}n.Za=function(){this.C!=null&&(this.C=null,hu(this),Bf(this),mt(19))};function pu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function CI(u,d){var f=null;if(u.g==d){pu(u),$f(u),u.g=null;var g=2}else if(Lf(u.h,d))f=d.D,rI(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;g=ru(),gt(g,new Ww(g,f)),fu(u)}else bI(u);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&jR(u,d)||g==2&&Bf(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:ii(u,5);break;case 4:ii(u,10);break;case 3:ii(u,6);break;default:ii(u,2)}}}function TI(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function ii(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let C=!g;g=new ri(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||au(g,"https"),uu(g),C?PR(g.toString(),f):OR(g.toString(),f)}else mt(2);u.G=0,u.l&&u.l.sa(d),SI(u),wI(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function SI(u){if(u.G=0,u.ka=[],u.l){let d=iI(u.h);(d.length!=0||u.i.length!=0)&&(R(u.ka,d),R(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function AI(u,d,f){var g=f instanceof ri?jn(f):new ri(f);if(g.g!="")d&&(g.g=d+"."+g.g),cu(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var x=new ri(null);g&&au(x,g),d&&(x.g=d),C&&cu(x,C),f&&(x.l=f),g=x}return f=u.D,d=u.ya,f&&d&&Pe(g,f,d),Pe(g,"VER",u.la),la(u,g),g}function xI(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Le(new oa({eb:f})):new Le(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function RI(){}n=RI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function gu(){}gu.prototype.g=function(u,d){return new kt(u,d)};function kt(u,d){at.call(this),this.g=new _I(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!B(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!B(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new ls(this)}T(kt,at),kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){jf(this.g)},kt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=Af(u),u=f);d.i.push(new bR(d.Ya++,u)),d.G==3&&fu(d)},kt.prototype.N=function(){this.g.l=null,delete this.j,jf(this.g),delete this.g,kt.aa.N.call(this)};function MI(u){Rf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}T(MI,Rf);function NI(){Mf.call(this),this.status=1}T(NI,Mf);function ls(u){this.g=u}T(ls,RI),ls.prototype.ua=function(){gt(this.g,"a")},ls.prototype.ta=function(u){gt(this.g,new MI(u))},ls.prototype.sa=function(u){gt(this.g,new NI)},ls.prototype.ra=function(){gt(this.g,"b")},gu.prototype.createWebChannel=gu.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,lv=sr.createWebChannelTransport=function(){return new gu},uv=sr.getStatEventTarget=function(){return ru()},cv=sr.Event=ti,Yd=sr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},iu.NO_ERROR=0,iu.TIMEOUT=8,iu.HTTP_ERROR=6,wc=sr.ErrorCode=iu,Kw.COMPLETE="complete",av=sr.EventType=Kw,Hw.EventType=Jo,Jo.OPEN="a",Jo.CLOSE="b",Jo.ERROR="c",Jo.MESSAGE="d",at.prototype.listen=at.prototype.K,uo=sr.WebChannel=Hw,Rj=sr.FetchXmlHttpFactory=oa,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,ov=sr.XhrIo=Le}).apply(typeof Qd<"u"?Qd:typeof self<"u"?self:typeof window<"u"?window:{});var aS="@firebase/firestore";var Ye=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");var Uo="10.14.0";var Yi=new kr("@firebase/firestore");function go(){return Yi.logLevel}function P(n,...e){if(Yi.logLevel<=he.DEBUG){let t=e.map(nw);Yi.debug(`Firestore (${Uo}): ${n}`,...t)}}function It(n,...e){if(Yi.logLevel<=he.ERROR){let t=e.map(nw);Yi.error(`Firestore (${Uo}): ${n}`,...t)}}function Zi(n,...e){if(Yi.logLevel<=he.WARN){let t=e.map(nw);Yi.warn(`Firestore (${Uo}): ${n}`,...t)}}function nw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: `+n;throw It(e),new Error(e)}function q(n,e){n||z()}function te(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends Nt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var en=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var oh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},gv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ye.UNAUTHENTICATED))}shutdown(){}},mv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},yv=class{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){q(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new en;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new en,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>b(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new en)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(q(typeof r.accessToken=="string"),new oh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return q(e===null||typeof e=="string"),new Ye(e)}},vv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},_v=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new vv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}},wv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Iv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){q(this.o===void 0);let r=s=>{s.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,P("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(q(typeof t.token=="string"),this.R=t.token,new wv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Mj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ah=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Mj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function Do(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function oA(n){return n+"\0"}var Be=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new U(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new U(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new U(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Be(0,0))}static max(){return new n(new Be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ch=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Me=class n extends ch{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Nj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ze=class n extends ch{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Nj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new U(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new U(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new U(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var j=class n{constructor(e){this.path=e}static fromPath(e){return new n(Me.fromString(e))}static fromName(e){return new n(Me.fromString(e).popFirst(5))}static empty(){return new n(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Me(e.slice()))}};var Co=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Ev(n){return n.fields.find(e=>e.kind===2)}function Bi(n){return n.fields.filter(e=>e.kind!==2)}Co.UNKNOWN_ID=-1;var Io=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Mc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,nn.min())}};function Pj(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Be(t+1,0):new Be(t,r));return new nn(i,j.empty(),e)}function aA(n){return new nn(n.readTime,n.key,-1)}var nn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Y.min(),j.empty(),-1)}static max(){return new n(Y.max(),j.empty(),-1)}};function rw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=j.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var cA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",uh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ss(n){return b(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==cA)throw n;P("LocalStore","Unexpectedly lost primary lease")})}var A=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var lh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new en,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ki(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=iw(r.target.error);this.V.reject(new Ki(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new Ki(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(P("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Dv(t)}},To=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ft())===12.2&&It("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return P("SimpleDb","Removing database:",e),$i(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Pd())return!1;if(n.v())return!0;let e=ft(),t=n.S(e),r=0<t&&t<10,i=uA(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return b(this,null,function*(){return this.db||(P("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new Ki(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new U(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new U(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ki(e,o))},i.onupgradeneeded=s=>{P("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{P("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return b(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=lh.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),A.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(P("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function uA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var bv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return $i(this.B.delete())}},Ki=class extends U{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ei(n){return n.name==="IndexedDbTransactionError"}var Dv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(P("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(P("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$i(r)}add(e){return P("SimpleDb","ADD",this.store.name,e,e),$i(this.store.add(e))}get(e){return $i(this.store.get(e)).next(t=>(t===void 0&&(t=null),P("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return P("SimpleDb","DELETE",this.store.name,e),$i(this.store.delete(e))}count(){return P("SimpleDb","COUNT",this.store.name),$i(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new A((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new A((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){P("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new A((r,i)=>{t.onerror=s=>{let o=iw(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new A((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new bv(a),l=t(a.primaryKey,a.value,c);if(l instanceof A){let h=l.catch(p=>(c.done(),A.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>A.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function $i(n){return new A((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=iw(r.target.error);t(i)}})}var cS=!1;function iw(n){let e=To.S(ft());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new U("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cS||(cS=!0,setTimeout(()=>{throw r},0)),r}}return n}var Cv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){P("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>b(this,null,function*(){this.task=null;try{P("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){ei(t)?P("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ss(t)}yield this.X(6e4)}))}},Tv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return b(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return A.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return P("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(P("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=aA(s);rw(o,r)>0&&(r=o)}),new nn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var gn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function nf(n){return n==null}function Nc(n){return n===0&&1/n==-1/0}function Oj(n){return typeof n=="number"&&Number.isInteger(n)&&!Nc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Et(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=uS(e)),e=kj(n.get(t),e);return uS(e)}function kj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function uS(n){return n+""}function Nn(n){let e=n.length;if(q(e>=2),e===2)return q(n.charAt(0)===""&&n.charAt(1)===""),Me.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&z(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:z()}s=o+2}return new Me(r)}var lS=["userId","batchId"];function th(n,e){return[n,Et(e)]}function lA(n,e,t){return[n,Et(e),t]}var Fj={},Lj=["prefixPath","collectionGroup","readTime","documentId"],Vj=["prefixPath","collectionGroup","documentId"],Uj=["collectionGroup","readTime","prefixPath","documentId"],jj=["canonicalId","targetId"],Bj=["targetId","path"],$j=["path","targetId"],Hj=["collectionId","parent"],zj=["indexId","uid"],qj=["uid","sequenceNumber"],Gj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wj=["indexId","uid","orderedDocumentKey"],Kj=["userId","collectionPath","documentId"],Qj=["userId","collectionPath","largestBatchId"],Yj=["userId","collectionGroup","largestBatchId"],dA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Zj=[...dA,"documentOverlays"],hA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fA=hA,sw=[...fA,"indexConfiguration","indexState","indexEntries"],Jj=sw,Xj=[...sw,"globals"];var Pc=class extends uh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Xe(n,e){let t=te(n);return To.F(t._e,e)}function dS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function jo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Fe=class n{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wo(this.root,e,this.comparator,!1)}getReverseIterator(){return new wo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wo(this.root,e,this.comparator,!0)}},wo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},On=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,s){return this}insert(e,t,r){return new On(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ne=class n{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dh(this.data.getIterator())}getIteratorFrom(e){return new dh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},dh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function lo(n){return n.hasNext()?n.getNext():void 0}var mn=class n{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ne(Ze.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var hh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Je=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hh("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Je.EMPTY_BYTE_STRING=new Je("");var eB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(n){if(q(!!n),typeof n=="string"){let e=0,t=eB.exec(n);if(q(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(n.seconds),nanos:Oe(n.nanos)}}function Oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Gr(n){return typeof n=="string"?Je.fromBase64String(n):Je.fromUint8Array(n)}function ow(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function aw(n){let e=n.mapValue.fields.__previous_value__;return ow(e)?aw(e):e}function Oc(n){let e=ar(n.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}var Sv=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},So=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var zr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nh={nullValue:"NULL_VALUE"};function Ji(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ow(n)?4:gA(n)?9007199254740991:rf(n)?10:11:z()}function kn(n,e){if(n===e)return!0;let t=Ji(n);if(t!==Ji(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Oc(n).isEqual(Oc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ar(i.timestampValue),a=ar(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Gr(i.bytesValue).isEqual(Gr(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Oe(i.geoPointValue.latitude)===Oe(s.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Oe(i.integerValue)===Oe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Oe(i.doubleValue),a=Oe(s.doubleValue);return o===a?Nc(o)===Nc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Do(n.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(dS(o)!==dS(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!kn(o[c],a[c])))return!1;return!0}(n,e);default:return z()}}function kc(n,e){return(n.values||[]).find(t=>kn(t,e))!==void 0}function Wr(n,e){if(n===e)return 0;let t=Ji(n),r=Ji(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Oe(s.integerValue||s.doubleValue),c=Oe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return hS(n.timestampValue,e.timestampValue);case 4:return hS(Oc(n),Oc(e));case 5:return ie(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Gr(s),c=Gr(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ie(a[l],c[l]);if(h!==0)return h}return ie(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ie(Oe(s.latitude),Oe(o.latitude));return a!==0?a:ie(Oe(s.longitude),Oe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return fS(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,h;let p=s.fields||{},m=o.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,T=(c=m.value)===null||c===void 0?void 0:c.arrayValue,M=ie(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:fS(v,T)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===zr.mapValue&&o===zr.mapValue)return 0;if(s===zr.mapValue)return 1;if(o===zr.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=ie(c[p],h[p]);if(m!==0)return m;let v=Wr(a[c[p]],l[h[p]]);if(v!==0)return v}return ie(c.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function hS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=ar(n),r=ar(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function fS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Wr(t[i],r[i]);if(s)return s}return ie(t.length,r.length)}function Ao(n){return Av(n)}function Av(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ar(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Gr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return j.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Av(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Av(t.fields[o])}`;return i+"}"}(n.mapValue):z()}function cw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xv(n){return!!n&&"integerValue"in n}function Fc(n){return!!n&&"arrayValue"in n}function pS(n){return!!n&&"nullValue"in n}function gS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rh(n){return!!n&&"mapValue"in n}function rf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Sc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return jo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Sc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var mA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function tB(n){return"nullValue"in n?nh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?cw(So.empty(),j.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?rf(n)?mA:{mapValue:{}}:z()}function nB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?cw(So.empty(),j.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?mA:"mapValue"in n?rf(n)?{mapValue:{}}:zr:z()}function mS(n,e){let t=Wr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function yS(n,e){let t=Wr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var $t=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!rh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sc(t)}setAll(e){let t=Ze.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Sc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];rh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){jo(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Sc(this.value))}};function yA(n){let e=[];return jo(n.fields,(t,r)=>{let i=new Ze([t]);if(rh(r)){let s=yA(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new mn(e)}var st=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Y.min(),Y.min(),Y.min(),$t.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Y.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Y.min(),Y.min(),$t.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Y.min(),Y.min(),$t.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Kr=class{constructor(e,t){this.position=e,this.inclusive=t}};function vS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=j.comparator(j.fromName(o.referenceValue),t.key):r=Wr(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _S(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kn(n.position[t],e.position[t]))return!1;return!0}var xo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function rB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var fh=class{},ge=class n extends fh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Nv(e,t,r):t==="array-contains"?new kv(e,r):t==="in"?new ph(e,r):t==="not-in"?new Fv(e,r):t==="array-contains-any"?new Lv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Pv(e,r):new Ov(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Wr(t,this.value)):t!==null&&Ji(this.value)===Ji(t)&&this.matchesComparison(Wr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ae=class n extends fh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ro(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ro(n){return n.op==="and"}function Rv(n){return n.op==="or"}function uw(n){return vA(n)&&Ro(n)}function vA(n){for(let e of n.filters)if(e instanceof Ae)return!1;return!0}function Mv(n){if(n instanceof ge)return n.field.canonicalString()+n.op.toString()+Ao(n.value);if(uw(n))return n.filters.map(e=>Mv(e)).join(",");{let e=n.filters.map(t=>Mv(t)).join(",");return`${n.op}(${e})`}}function _A(n,e){return n instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.field.isEqual(i.field)&&kn(r.value,i.value)}(n,e):n instanceof Ae?function(r,i){return i instanceof Ae&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&_A(o,i.filters[a]),!0):!1}(n,e):void z()}function wA(n,e){let t=n.filters.concat(e);return Ae.create(t,n.op)}function IA(n){return n instanceof ge?function(t){return`${t.field.canonicalString()} ${t.op} ${Ao(t.value)}`}(n):n instanceof Ae?function(t){return t.op.toString()+" {"+t.getFilters().map(IA).join(" ,")+"}"}(n):"Filter"}var Nv=class extends ge{constructor(e,t,r){super(e,t,r),this.key=j.fromName(r.referenceValue)}matches(e){let t=j.comparator(e.key,this.key);return this.matchesComparison(t)}},Pv=class extends ge{constructor(e,t){super(e,"in",t),this.keys=EA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Ov=class extends ge{constructor(e,t){super(e,"not-in",t),this.keys=EA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function EA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>j.fromName(r.referenceValue))}var kv=class extends ge{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Fc(t)&&kc(t.arrayValue,this.value)}},ph=class extends ge{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&kc(this.value.arrayValue,t)}},Fv=class extends ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!kc(this.value.arrayValue,t)}},Lv=class extends ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Fc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kc(this.value.arrayValue,r))}};var Vv=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function Uv(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Vv(n,e,t,r,i,s,o)}function Xi(n){let e=te(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Mv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ao(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ao(r)).join(",")),e.ue=t}return e.ue}function Wc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!rB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_A(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_S(n.startAt,e.startAt)&&_S(n.endAt,e.endAt)}function gh(n){return j.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function mh(n,e){return n.filters.filter(t=>t instanceof ge&&t.field.isEqual(e))}function wS(n,e,t){let r=nh,i=!0;for(let s of mh(n,e)){let o=nh,a=!0;switch(s.op){case"<":case"<=":o=tB(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=nh}mS({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];mS({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function IS(n,e,t){let r=zr,i=!0;for(let s of mh(n,e)){let o=zr,a=!0;switch(s.op){case">=":case">":o=nB(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=zr}yS({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];yS({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var Mo=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function iB(n,e,t,r,i,s,o,a){return new Mo(n,e,t,r,i,s,o,a)}function sf(n){return new Mo(n)}function ES(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sB(n){return n.collectionGroup!==null}function Ac(n){let e=te(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ne(Ze.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new xo(s,r))}),t.has(Ze.keyField().canonicalString())||e.ce.push(new xo(Ze.keyField(),r))}return e.ce}function tn(n){let e=te(n);return e.le||(e.le=oB(e,Ac(n))),e.le}function oB(n,e){if(n.limitType==="F")return Uv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new xo(i.field,s)});let t=n.endAt?new Kr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Kr(n.startAt.position,n.startAt.inclusive):null;return Uv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function jv(n,e,t){return new Mo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function of(n,e){return Wc(tn(n),tn(e))&&n.limitType===e.limitType}function bA(n){return`${Xi(tn(n))}|lt:${n.limitType}`}function mo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>IA(i)).join(", ")}]`),nf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ao(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ao(i)).join(",")),`Target(${r})`}(tn(n))}; limitType=${n.limitType})`}function Kc(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):j.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Ac(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=vS(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Ac(r),i)||r.endAt&&!function(o,a,c){let l=vS(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Ac(r),i))}(n,e)}function aB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DA(n){return(e,t)=>{let r=!1;for(let i of Ac(n)){let s=cB(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function cB(n,e,t){let r=n.field.isKeyField()?j.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Wr(c,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Fn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jo(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return pA(this.inner)}size(){return this.innerSize}};var uB=new Fe(j.comparator);function Ht(){return uB}var CA=new Fe(j.comparator);function Cc(...n){let e=CA;for(let t of n)e=e.insert(t.key,t);return e}function TA(n){let e=CA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Pn(){return xc()}function SA(){return xc()}function xc(){return new Fn(n=>n.toString(),(n,e)=>n.isEqual(e))}var lB=new Fe(j.comparator),dB=new Ne(j.comparator);function ue(...n){let e=dB;for(let t of n)e=e.add(t);return e}var hB=new Ne(ie);function fB(){return hB}function lw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function AA(n){return{integerValue:""+n}}function pB(n,e){return Oj(e)?AA(e):lw(n,e)}var No=class{constructor(){this._=void 0}};function gB(n,e,t){return n instanceof es?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ow(s)&&(s=aw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Qr?RA(n,e):n instanceof Yr?MA(n,e):function(i,s){let o=xA(i,s),a=bS(o)+bS(i.Pe);return xv(o)&&xv(i.Pe)?AA(a):lw(i.serializer,a)}(n,e)}function mB(n,e,t){return n instanceof Qr?RA(n,e):n instanceof Yr?MA(n,e):t}function xA(n,e){return n instanceof ts?function(r){return xv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var es=class extends No{},Qr=class extends No{constructor(e){super(),this.elements=e}};function RA(n,e){let t=NA(e);for(let r of n.elements)t.some(i=>kn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Yr=class extends No{constructor(e){super(),this.elements=e}};function MA(n,e){let t=NA(e);for(let r of n.elements)t=t.filter(i=>!kn(i,r));return{arrayValue:{values:t}}}var ts=class extends No{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function bS(n){return Oe(n.integerValue||n.doubleValue)}function NA(n){return Fc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Bv=class{constructor(e,t){this.field=e,this.transform=t}};function yB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Qr&&i instanceof Qr||r instanceof Yr&&i instanceof Yr?Do(r.elements,i.elements,kn):r instanceof ts&&i instanceof ts?kn(r.Pe,i.Pe):r instanceof es&&i instanceof es}(n.transform,e.transform)}var $v=class{constructor(e,t){this.version=e,this.transformResults=t}},yn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ih(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Po=class{};function PA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lc(n.key,yn.none()):new Zr(n.key,n.data,yn.none());{let t=n.data,r=$t.empty(),i=new Ne(Ze.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ln(n.key,r,new mn(i.toArray()),yn.none())}}function vB(n,e,t){n instanceof Zr?function(i,s,o){let a=i.value.clone(),c=CS(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ln?function(i,s,o){if(!ih(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=CS(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(OA(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Rc(n,e,t,r){return n instanceof Zr?function(s,o,a,c){if(!ih(s.precondition,o))return a;let l=s.value.clone(),h=TS(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ln?function(s,o,a,c){if(!ih(s.precondition,o))return a;let l=TS(s.fieldTransforms,c,o),h=o.data;return h.setAll(OA(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return ih(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function _B(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=xA(r.transform,i||null);s!=null&&(t===null&&(t=$t.empty()),t.set(r.field,s))}return t||null}function DS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Do(r,i,(s,o)=>yB(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Zr=class extends Po{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ln=class extends Po{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function OA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function CS(n,e,t){let r=new Map;q(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,mB(o,a,t[i]))}return r}function TS(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,gB(s,o,e))}return r}var Lc=class extends Po{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},yh=class extends Po{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Vc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&vB(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Rc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Rc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=SA();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=PA(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(t,r)=>DS(t,r))&&Do(this.baseMutations,e.baseMutations,(t,r)=>DS(t,r))}},Hv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){q(e.mutations.length===r.length);let i=function(){return lB}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Uc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var zv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var He,ve;function wB(n){switch(n){default:return z();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function kA(n){if(n===void 0)return It("GRPC error has no .code"),N.UNKNOWN;switch(n){case He.OK:return N.OK;case He.CANCELLED:return N.CANCELLED;case He.UNKNOWN:return N.UNKNOWN;case He.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case He.INTERNAL:return N.INTERNAL;case He.UNAVAILABLE:return N.UNAVAILABLE;case He.UNAUTHENTICATED:return N.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case He.NOT_FOUND:return N.NOT_FOUND;case He.ALREADY_EXISTS:return N.ALREADY_EXISTS;case He.PERMISSION_DENIED:return N.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case He.ABORTED:return N.ABORTED;case He.OUT_OF_RANGE:return N.OUT_OF_RANGE;case He.UNIMPLEMENTED:return N.UNIMPLEMENTED;case He.DATA_LOSS:return N.DATA_LOSS;default:return z()}}(ve=He||(He={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var SS=null;function IB(){return new TextEncoder}var EB=new jr([4294967295,4294967295],0);function AS(n){let e=IB().encode(n),t=new sv;return t.update(e),new Uint8Array(t.digest())}function xS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new jr([t,r],0),new jr([i,s],0)]}var qv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Gi(`Invalid padding: ${t}`);if(r<0)throw new Gi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Gi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=jr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(jr.fromNumber(r)));return i.compare(EB)===1&&(i=new jr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=AS(e),[r,i]=xS(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=AS(e),[r,i]=xS(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Gi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var vh=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,jc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Y.min(),i,new Fe(ie),Ht(),ue())}},jc=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ue(),ue(),ue())}};var Eo=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},_h=class{constructor(e,t){this.targetId=e,this.me=t}},wh=class{constructor(e,t,r=Je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ih=class{constructor(){this.fe=0,this.ge=MS(),this.pe=Je.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),t=ue(),r=ue();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new jc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=MS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Gv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ht(),this.qe=RS(),this.Qe=new Fe(ie)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(gh(s))if(r===0){let o=new j(s.path);this.Ue(t,o,st.newNoDocument(o,Y.min()))}else q(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}SS?.et(function(h,p,m,v,T){var M,R,k,B,F,H;let ne={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},$=p.unchangedNames;return $&&(ne.bloomFilter={applied:T===0,hashCount:(M=$?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(B=(k=(R=$?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&B!==void 0?B:0,padding:(H=(F=$?.bits)===null||F===void 0?void 0:F.padding)!==null&&H!==void 0?H:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),ne}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Gr(r).toUint8Array()}catch(c){if(c instanceof hh)return Zi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new qv(o,i,s)}catch(c){return Zi(c instanceof Gi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&gh(a.target)){let c=new j(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,st.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ue();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new vh(e,t,this.Qe,this.ke,r);return this.ke=Ht(),this.qe=RS(),this.Qe=new Fe(ie),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ih,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ne(ie),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||P("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ih),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function RS(){return new Fe(j.comparator)}function MS(){return new Fe(j.comparator)}var bB={asc:"ASCENDING",desc:"DESCENDING"},DB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CB={and:"AND",or:"OR"},Wv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Kv(n,e){return n.useProto3Json||nf(e)?e:{value:e}}function Oo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function TB(n,e){return Oo(n,e.toTimestamp())}function bt(n){return q(!!n),Y.fromTimestamp(function(t){let r=ar(t);return new Be(r.seconds,r.nanos)}(n))}function dw(n,e){return Qv(n,e).canonicalString()}function Qv(n,e){let t=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function LA(n){let e=Me.fromString(n);return q(GA(e)),e}function Eh(n,e){return dw(n.databaseId,e.path)}function Qi(n,e){let t=LA(e);if(t.get(1)!==n.databaseId.projectId)throw new U(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new U(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new j(jA(t))}function VA(n,e){return dw(n.databaseId,e)}function UA(n){let e=LA(n);return e.length===4?Me.emptyPath():jA(e)}function Yv(n){return new Me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jA(n){return q(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function NS(n,e,t){return{name:Eh(n,e),fields:t.value.mapValue.fields}}function SB(n,e,t){let r=Qi(n,e.name),i=bt(e.updateTime),s=e.createTime?bt(e.createTime):Y.min(),o=new $t({mapValue:{fields:e.fields}}),a=st.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function AB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(q(h===void 0||typeof h=="string"),Je.fromBase64String(h||"")):(q(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Je.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?N.UNKNOWN:kA(l.code);return new U(h,l.message||"")}(o);t=new wh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Qi(n,r.document.name),s=bt(r.document.updateTime),o=r.document.createTime?bt(r.document.createTime):Y.min(),a=new $t({mapValue:{fields:r.document.fields}}),c=st.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Eo(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Qi(n,r.document),s=r.readTime?bt(r.readTime):Y.min(),o=st.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Eo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Qi(n,r.document),s=r.removedTargetIds||[];t=new Eo([],s,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new zv(i,s),a=r.targetId;t=new _h(a,o)}}return t}function bh(n,e){let t;if(e instanceof Zr)t={update:NS(n,e.key,e.value)};else if(e instanceof Lc)t={delete:Eh(n,e.key)};else if(e instanceof Ln)t={update:NS(n,e.key,e.data),updateMask:OB(e.fieldMask)};else{if(!(e instanceof yh))return z();t={verify:Eh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof es)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ts)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:TB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:z()}(n,e.precondition)),t}function Zv(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?yn.updateTime(bt(s.updateTime)):s.exists!==void 0?yn.exists(s.exists):yn.none()}(e.currentDocument):yn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)q(a.setToServerValue==="REQUEST_TIME"),c=new es;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new Qr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new Yr(h)}else"increment"in a?c=new ts(o,a.increment):z();let l=Ze.fromServerFormat(a.fieldPath);return new Bv(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Qi(n,e.update.name),s=new $t({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new mn(l.map(h=>Ze.fromServerFormat(h)))}(e.updateMask);return new Ln(i,s,o,t,r)}return new Zr(i,s,t,r)}if(e.delete){let i=Qi(n,e.delete);return new Lc(i,t)}if(e.verify){let i=Qi(n,e.verify);return new yh(i,t)}return z()}function xB(n,e){return n&&n.length>0?(q(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?bt(i.updateTime):bt(s);return o.isEqual(Y.min())&&(o=bt(s)),new $v(o,i.transformResults||[])}(t,e))):[]}function BA(n,e){return{documents:[VA(n,e.path)]}}function $A(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=VA(n,i);let s=function(l){if(l.length!==0)return qA(Ae.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:yo(m.field),direction:MB(m.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=Kv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function HA(n){let e=UA(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){q(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){let m=zA(p);return m instanceof Ae&&uw(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(m=>function(T){return new xo(vo(T.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,nf(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new Kr(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Kr(v,m)}(t.endAt)),iB(e,i,o,s,a,"F",c,l)}function RB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function zA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=vo(t.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=vo(t.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=vo(t.unaryFilter.field);return ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=vo(t.unaryFilter.field);return ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return ge.create(vo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ae.create(t.compositeFilter.filters.map(r=>zA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function MB(n){return bB[n]}function NB(n){return DB[n]}function PB(n){return CB[n]}function yo(n){return{fieldPath:n.canonicalString()}}function vo(n){return Ze.fromServerFormat(n.fieldPath)}function qA(n){return n instanceof ge?function(t){if(t.op==="=="){if(gS(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NAN"}};if(pS(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(gS(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NAN"}};if(pS(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(t.field),op:NB(t.op),value:t.value}}}(n):n instanceof Ae?function(t){let r=t.getFilters().map(i=>qA(i));return r.length===1?r[0]:{compositeFilter:{op:PB(t.op),filters:r}}}(n):z()}function OB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function GA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ko=class n{constructor(e,t,r,i,s=Y.min(),o=Y.min(),a=Je.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Dh=class{constructor(e){this.ct=e}};function kB(n,e){let t;if(e.document)t=SB(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=j.fromSegments(e.noDocument.path),i=rs(e.noDocument.readTime);t=st.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=j.fromSegments(e.unknownDocument.path),i=rs(e.unknownDocument.version);t=st.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new Be(i[0],i[1]);return Y.fromTimestamp(s)}(e.readTime)),t}function PS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ch(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Eh(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Oo(s,o.version.toTimestamp()),createTime:Oo(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ns(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:ns(e.version)}}return r}function Ch(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ns(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rs(n){let e=new Be(n.seconds,n.nanoseconds);return Y.fromTimestamp(e)}function Hi(n,e){let t=(e.baseMutations||[]).map(s=>Zv(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>Zv(n.ct,s)),i=Be.fromMillis(e.localWriteTimeMs);return new Vc(e.batchId,i,t,r)}function Tc(n){let e=rs(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?rs(n.lastLimboFreeSnapshotVersion):Y.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return q(s.documents.length===1),tn(sf(UA(s.documents[0])))}(n.query):function(s){return tn(HA(s))}(n.query),new ko(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Je.fromBase64String(n.resumeToken))}function WA(n,e){let t=ns(e.snapshotVersion),r=ns(e.lastLimboFreeSnapshotVersion),i;i=gh(e.target)?BA(n.ct,e.target):$A(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xi(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function KA(n){let e=HA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jv(e,e.limit,"L"):e}function dv(n,e){return new Uc(e.largestBatchId,Zv(n.ct,e.overlayMutation))}function OS(n,e){let t=e.path.lastSegment();return[n,Et(e.path.popLast()),t]}function kS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ns(r.readTime),documentKey:Et(r.documentKey.path),largestBatchId:r.largestBatchId}}var Jv=class{getBundleMetadata(e,t){return FS(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:rs(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return FS(e).put(function(i){return{bundleId:i.id,createTime:ns(bt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return LS(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:KA(s.bundledQuery),readTime:rs(s.readTime)}}(r)})}saveNamedQuery(e,t){return LS(e).put(function(i){return{name:i.name,readTime:ns(bt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function FS(n){return Xe(n,"bundles")}function LS(n){return Xe(n,"namedQueries")}var Th=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Ic(e).get(OS(this.userId,t)).next(r=>r?dv(this.serializer,r):null)}getOverlays(e,t){let r=Pn();return A.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new Uc(t,o);i.push(this.ht(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(Et(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Ic(e).j("collectionPathOverlayIndex",a))}),A.waitFor(s)}getOverlaysForCollection(e,t,r){let i=Pn(),s=Et(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ic(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=dv(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=Pn(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ic(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=dv(this.serializer,l);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return Ic(e).put(function(i,s,o){let[a,c,l]=OS(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:bh(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function Ic(n){return Xe(n,"documentOverlays")}var Xv=class{Pt(e){return Xe(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Je.fromUint8Array(r):Je.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var or=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Nc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ar(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Gr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?gA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):rf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Oe(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),j.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};or.vt=new or;function FB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function VS(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=FB(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var e_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=VS(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=VS(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},t_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},n_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},zi=class{constructor(){this.jt=new e_,this.Ht=new t_(this.jt),this.Jt=new n_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var qi=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Br(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=US(n.arrayValue,e.arrayValue),t!==0?t:(t=US(n.directionalValue,e.directionalValue),t!==0?t:j.comparator(n.documentKey,e.documentKey)))}function US(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Sh=class{constructor(e){this.Xt=new Ne((t,r)=>Ze.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(q(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Ev(e);if(t!==void 0&&!this.sn(t))return!1;let r=Bi(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ne(Ze.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Io(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Io(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Io(r.field,r.dir==="asc"?0:1)));return new Co(Co.UNKNOWN_ID,this.collectionId,t,Mc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function QA(n){var e,t;if(q(n instanceof ge||n instanceof Ae),n instanceof ge){if(n instanceof ph){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>ge.create(n.field,"==",s)))||[];return Ae.create(i,"or")}return n}let r=n.filters.map(i=>QA(i));return Ae.create(r,n.op)}function LB(n){if(n.getFilters().length===0)return[];let e=s_(QA(n));return q(YA(e)),r_(e)||i_(e)?[e]:e.getFilters()}function r_(n){return n instanceof ge}function i_(n){return n instanceof Ae&&uw(n)}function YA(n){return r_(n)||i_(n)||function(t){if(t instanceof Ae&&Rv(t)){for(let r of t.getFilters())if(!r_(r)&&!i_(r))return!1;return!0}return!1}(n)}function s_(n){if(q(n instanceof ge||n instanceof Ae),n instanceof ge)return n;if(n.filters.length===1)return s_(n.filters[0]);let e=n.filters.map(r=>s_(r)),t=Ae.create(e,n.op);return t=Ah(t),YA(t)?t:(q(t instanceof Ae),q(Ro(t)),q(t.filters.length>1),t.filters.reduce((r,i)=>hw(r,i)))}function hw(n,e){let t;return q(n instanceof ge||n instanceof Ae),q(e instanceof ge||e instanceof Ae),t=n instanceof ge?e instanceof ge?function(i,s){return Ae.create([i,s],"and")}(n,e):jS(n,e):e instanceof ge?jS(e,n):function(i,s){if(q(i.filters.length>0&&s.filters.length>0),Ro(i)&&Ro(s))return wA(i,s.getFilters());let o=Rv(i)?i:s,a=Rv(i)?s:i,c=o.filters.map(l=>hw(l,a));return Ae.create(c,"or")}(n,e),Ah(t)}function jS(n,e){if(Ro(e))return wA(e,n.getFilters());{let t=e.filters.map(r=>hw(n,r));return Ae.create(t,"or")}}function Ah(n){if(q(n instanceof ge||n instanceof Ae),n instanceof ge)return n;let e=n.getFilters();if(e.length===1)return Ah(e[0]);if(vA(n))return n;let t=e.map(i=>Ah(i)),r=[];return t.forEach(i=>{i instanceof ge?r.push(i):i instanceof Ae&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ae.create(r,n.op)}var o_=class{constructor(){this.un=new Bc}addToCollectionParentIndex(e,t){return this.un.add(t),A.resolve()}getCollectionParents(e,t){return A.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return A.resolve()}deleteFieldIndex(e,t){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,t){return A.resolve()}getDocumentsMatchingTarget(e,t){return A.resolve(null)}getIndexType(e,t){return A.resolve(0)}getFieldIndexes(e,t){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,t){return A.resolve(nn.min())}getMinOffsetFromCollectionGroup(e,t){return A.resolve(nn.min())}updateCollectionGroup(e,t,r){return A.resolve()}updateIndexEntries(e,t){return A.resolve()}},Bc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ne(Me.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ne(Me.comparator)).toArray()}};var Zd=new Uint8Array(0),a_=class{constructor(e,t){this.databaseId=t,this.cn=new Bc,this.ln=new Fn(r=>Xi(r),(r,i)=>Wc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:Et(i)};return BS(e).put(s)}return A.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[oA(t),""],!1,!0);return BS(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(Nn(o.parent))}return r})}addFieldIndex(e,t){let r=Ec(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=fo(e);return s.next(a=>{o.put(kS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=Ec(e),i=fo(e),s=ho(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Ec(e),r=ho(e),i=fo(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return A.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Sh(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=ho(e),i=!0,s=new Map;return A.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ue(),a=[];return A.forEach(s,(c,l)=>{P("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(c)} to execute ${Xi(t)}`);let h=function(F,H){let ne=Ev(H);if(ne===void 0)return null;for(let $ of mh(F,ne.fieldPath))switch($.op){case"array-contains-any":return $.value.arrayValue.values||[];case"array-contains":return[$.value]}return null}(l,c),p=function(F,H){let ne=new Map;for(let $ of Bi(H))for(let I of mh(F,$.fieldPath))switch(I.op){case"==":case"in":ne.set($.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ne.set($.fieldPath.canonicalString(),I.value),Array.from(ne.values())}return null}(l,c),m=function(F,H){let ne=[],$=!0;for(let I of Bi(H)){let y=I.kind===0?wS(F,I.fieldPath,F.startAt):IS(F,I.fieldPath,F.startAt);ne.push(y.value),$&&($=y.inclusive)}return new Kr(ne,$)}(l,c),v=function(F,H){let ne=[],$=!0;for(let I of Bi(H)){let y=I.kind===0?IS(F,I.fieldPath,F.endAt):wS(F,I.fieldPath,F.endAt);ne.push(y.value),$&&($=y.inclusive)}return new Kr(ne,$)}(l,c),T=this.In(c,l,m),M=this.In(c,l,v),R=this.Tn(c,l,p),k=this.En(c.indexId,h,T,m.inclusive,M,v.inclusive,R);return A.forEach(k,B=>r.G(B,t.limit).next(F=>{F.forEach(H=>{let ne=j.fromSegments(H.documentKey);o.has(ne)||(o=o.add(ne),a.push(ne))})}))}).next(()=>a)}return A.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=LB(Ae.create(e.filters,"and")).map(r=>Uv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){let c=(t!=null?t.length:1)*Math.max(r.length,s.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):Zd,v=this.An(e,m,r[p%l],i),T=this.Rn(e,m,s[p%l],o),M=a.map(R=>this.An(e,m,R,!0));h.push(...this.createRange(v,T,M))}return h}An(e,t,r,i){let s=new qi(e,j.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new qi(e,j.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new Sh(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return A.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Ne(Ze.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new zi;for(let i of Bi(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);or.vt.It(s,o)}return r.zt()}dn(e){let t=new zi;return or.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new zi;return or.vt.It(cw(this.databaseId,t),r.Yt(function(s){let o=Bi(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new zi);let s=0;for(let o of Bi(e)){let a=r[s++];for(let c of i)if(this.fn(t,o.fieldPath)&&Fc(a))i=this.gn(i,o,a);else{let l=c.Yt(o.kind);or.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new zi;c.seed(a.zt()),or.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof ge&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Ec(e),i=fo(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return A.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(h,p){let m=p?new Mc(p.sequenceNumber,new nn(rs(p.readTime),new j(Nn(p.documentKey)),p.largestBatchId)):Mc.empty(),v=h.fields.map(([T,M])=>new Io(Ze.fromServerFormat(T),M));return new Co(h.indexId,h.collectionGroup,v,m)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ie(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Ec(e),s=fo(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>A.forEach(a,c=>s.put(kS(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return A.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?A.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(s,c);return l.isEqual(h)?A.resolve():this.bn(e,s,c,l,h)}))))})}Dn(e,t,r,i){return ho(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return ho(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=ho(e),s=new Ne(Br);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new qi(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Ne(Br),i=this.Vn(t,e);if(i==null)return r;let s=Ev(t);if(s!=null){let o=e.data.field(s.fieldPath);if(Fc(o))for(let a of o.arrayValue.values||[])r=r.add(new qi(t.indexId,e.key,this.dn(a),i))}else r=r.add(new qi(t.indexId,e.key,Zd,i));return r}bn(e,t,r,i,s){P("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,l,h,p,m){let v=c.getIterator(),T=l.getIterator(),M=lo(v),R=lo(T);for(;M||R;){let k=!1,B=!1;if(M&&R){let F=h(M,R);F<0?B=!0:F>0&&(k=!0)}else M!=null?B=!0:k=!0;k?(p(R),R=lo(T)):B?(m(M),M=lo(v)):(M=lo(v),R=lo(T))}}(i,s,Br,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),A.waitFor(o)}yn(e){let t=1;return fo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Br(o,a)).filter((o,a,c)=>!a||Br(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Br(o,e),c=Br(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Zd,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Zd,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(e,t){return Br(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($S)}getMinOffset(e,t){return A.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next($S)}};function BS(n){return Xe(n,"collectionParents")}function ho(n){return Xe(n,"indexEntries")}function Ec(n){return Xe(n,"indexConfiguration")}function fo(n){return Xe(n,"indexState")}function $S(n){q(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;rw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new nn(e.readTime,e.documentKey,t)}var HS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function ZA(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:o},(h,p,m)=>(a++,m.delete()));s.push(c.next(()=>{q(a===1)}));let l=[];for(let h of t.mutations){let p=lA(e,h.key.path,t.batchId);s.push(i.delete(p)),l.push(h.key)}return A.waitFor(s).next(()=>l)}function xh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(41943040,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);var Rh=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){q(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=_o(e),o=$r(e);return o.add({}).next(a=>{q(typeof a=="number");let c=new Vc(a,t,r,i),l=function(v,T,M){let R=M.baseMutations.map(B=>bh(v.ct,B)),k=M.mutations.map(B=>bh(v.ct,B));return{userId:T,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:R,mutations:k}}(this.serializer,this.userId,c),h=[],p=new Ne((m,v)=>ie(m.canonicalString(),v.canonicalString()));for(let m of i){let v=lA(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(o.put(l)),h.push(s.put(v,Fj))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),A.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return $r(e).get(t).next(r=>r?(q(r.userId===this.userId),Hi(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?A.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return $r(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(q(a.batchId>=r),s=Hi(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return $r(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).U("userMutationsIndex",t).next(r=>r.map(i=>Hi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=th(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return _o(e).J({range:i},(o,a,c)=>{let[l,h,p]=o,m=Nn(h);if(l===this.userId&&t.path.isEqual(m))return $r(e).get(p).next(v=>{if(!v)throw z();q(v.userId===this.userId),s.push(Hi(this.serializer,v))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ne(ie),i=[];return t.forEach(s=>{let o=th(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=_o(e).J({range:a},(l,h,p)=>{let[m,v,T]=l,M=Nn(v);m===this.userId&&s.path.isEqual(M)?r=r.add(T):p.done()});i.push(c)}),A.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=th(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ne(ie);return _o(e).J({range:o},(c,l,h)=>{let[p,m,v]=c,T=Nn(m);p===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push($r(e).get(s).next(o=>{if(o===null)throw z();q(o.userId===this.userId),r.push(Hi(this.serializer,o))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ZA(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return A.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return _o(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Nn(s[1]);i.push(c)}else a.done()}).next(()=>{q(i.length===0)})})}containsKey(e,t){return JA(e,this.userId,t)}Nn(e){return XA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function JA(n,e,t){let r=th(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return _o(n).J({range:s,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(o=!0),l.done()}).next(()=>o)}function $r(n){return Xe(n,"mutations")}function _o(n){return Xe(n,"documentMutations")}function XA(n){return Xe(n,"mutationQueues")}var Fo=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var c_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Fo(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Y.fromTimestamp(new Be(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>po(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(q(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return po(e).J((o,a)=>{let c=Tc(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>A.waitFor(s)).next(()=>i)}forEachTarget(e,t){return po(e).J((r,i)=>{let s=Tc(i);t(s)})}qn(e){return zS(e).get("targetGlobalKey").next(t=>(q(t!==null),t))}Qn(e,t){return zS(e).put("targetGlobalKey",t)}Kn(e,t){return po(e).put(WA(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Xi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return po(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=Tc(a);Wc(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=Hr(e);return t.forEach(o=>{let a=Et(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),A.waitFor(i)}removeMatchingKeys(e,t,r){let i=Hr(e);return A.forEach(t,s=>{let o=Et(s.path);return A.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=Hr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Hr(e),s=ue();return i.J({range:r,H:!0},(o,a,c)=>{let l=Nn(o[1]),h=new j(l);s=s.add(h)}).next(()=>s)}containsKey(e,t){let r=Et(t.path),i=IDBKeyRange.bound([r],[oA(r)],!1,!0),s=0;return Hr(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return po(e).get(t).next(r=>r?Tc(r):null)}};function po(n){return Xe(n,"targets")}function zS(n){return Xe(n,"targetGlobal")}function Hr(n){return Xe(n,"targetDocuments")}function qS([n,e],[t,r]){let i=ie(n,t);return i===0?ie(e,r):i}var u_=class{constructor(e){this.Un=e,this.buffer=new Ne(qS),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();qS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},l_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){P("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ei(t)?P("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ss(t)}yield this.Hn(3e5)}))}},d_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return A.resolve(gn.oe);let r=new u_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(HS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HS):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),go()<=he.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function VB(n,e){return new d_(n,e)}var h_=class{constructor(e,t){this.db=e,this.garbageCollector=VB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Jd(e,r)}removeReference(e,t,r){return Jd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Jd(e,t)}nr(e,t){return function(i,s){let o=!1;return XA(i).Y(a=>JA(i,a,s).next(c=>(c&&(o=!0),A.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let c=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Y.min()),Hr(e).delete(function(p){return[0,Et(p.path)]}(o))))});i.push(c)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Jd(e,t)}tr(e,t){let r=Hr(e),i,s=gn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==gn.oe&&t(new j(Nn(i)),s),s=l,i=c):s=gn.oe}).next(()=>{s!==gn.oe&&t(new j(Nn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Jd(n,e){return Hr(n).put(function(r,i){return{targetId:0,path:Et(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Mh=class{constructor(){this.changes=new Fn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?A.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var f_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ji(e).put(r)}removeEntry(e,t,r){return ji(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ch(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=st.newInvalidDocument(t);return ji(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bc(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:st.newInvalidDocument(t)};return ji(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bc(t))},(i,s)=>{r={document:this.ir(t,s),size:xh(s)}}).next(()=>r)}getEntries(e,t){let r=Ht();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Ht(),i=new Fe(j.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,xh(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return A.resolve();let i=new Ne(KS);t.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(bc(i.first()),bc(i.last())),o=i.getIterator(),a=o.getNext();return ji(e).J({index:"documentKeyIndex",range:s},(c,l,h)=>{let p=j.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&KS(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.$(bc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Ch(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ji(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=Ht();for(let p of l){let m=this.ir(j.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Kc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=Ht(),o=WS(t,r),a=WS(t,nn.max());return ji(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,h)=>{let p=this.ir(j.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(p.key,p),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new p_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return GS(e).get("remoteDocumentGlobalKey").next(t=>(q(!!t),t))}rr(e,t){return GS(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=kB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Y.min())))return r}return st.newInvalidDocument(e)}};function ex(n){return new f_(n)}var p_=class extends Mh{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Fn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ne((s,o)=>ie(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=PS(this.cr.serializer,o);i=i.add(s.path.popLast());let l=xh(c);r+=l-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=PS(this.cr.serializer,o.convertToNoDocument(Y.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),A.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function GS(n){return Xe(n,"remoteDocumentGlobal")}function ji(n){return Xe(n,"remoteDocumentsV14")}function bc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WS(n,e){let t=e.documentKey.path.toArray();return[n,Ch(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function KS(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ie(t[s],r[s]),i)return i;return i=ie(t.length,r.length),i||(i=ie(t[t.length-2],r[r.length-2]),i||ie(t[t.length-1],r[r.length-1]))}var g_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Nh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Rc(r.mutation,i,mn.empty(),Be.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){let i=Pn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Cc();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Pn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ht(),o=xc(),a=function(){return xc()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Ln)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Rc(h.mutation,l,h.mutation.getFieldMask(),Be.now())):o.set(l.key,mn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new g_(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=xc(),i=new Fe((o,a)=>o-a),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||mn.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ue()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=SA();h.forEach(m=>{if(!s.has(m)){let v=PA(t.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return A.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sB(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):A.resolve(Pn()),a=-1,c=s;return o.next(l=>A.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?A.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ue())).next(h=>({batchId:a,changes:TA(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new j(t)).next(r=>{let i=Cc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Cc();return this.indexManager.getCollectionParents(e,s).next(a=>A.forEach(a,c=>{let l=function(p,m){return new Mo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,st.newInvalidDocument(h)))});let a=Cc();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&Rc(h.mutation,l,mn.empty(),Be.now()),Kc(t,l)&&(a=a.insert(c,l))}),a})}};var m_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return A.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:bt(i.createTime)}}(t)),A.resolve()}getNamedQuery(e,t){return A.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:KA(i.bundledQuery),readTime:bt(i.readTime)}}(t)),A.resolve()}};var y_=class{constructor(){this.overlays=new Fe(j.comparator),this.Ir=new Map}getOverlay(e,t){return A.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Pn();return A.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),A.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),A.resolve()}getOverlaysForCollection(e,t,r){let i=Pn(),s=t.length+1,o=new j(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return A.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Fe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Pn(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Pn(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return A.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Uc(t,r));let s=this.Ir.get(t);s===void 0&&(s=ue(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var v_=class{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,A.resolve()}};var $c=class{constructor(){this.Tr=new Ne(ze.Er),this.dr=new Ne(ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new ze(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ze(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new j(new Me([])),r=new ze(t,e),i=new ze(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new j(new Me([])),r=new ze(t,e),i=new ze(t,e+1),s=ue();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new ze(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ze=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return j.comparator(e.key,t.key)||ie(e.wr,t.wr)}static Ar(e,t){return ie(e.wr,t.wr)||j.comparator(e.key,t.key)}};var __=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ne(ze.Er)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Vc(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new ze(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(o)}lookupMutationBatch(e,t){return A.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return A.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ze(t,0),i=new ze(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),A.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ne(ie);return t.forEach(i=>{let s=new ze(i,0),o=new ze(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),A.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;j.isDocumentKey(s)||(s=s.child(""));let o=new ze(new j(s),0),a=new Ne(ie);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),A.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){q(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return A.forEach(t.mutations,i=>{let s=new ze(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new ze(t,0),i=this.br.firstAfterOrEqual(r);return A.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var w_=class{constructor(e){this.Mr=e,this.docs=function(){return new Fe(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return A.resolve(r?r.document.mutableCopy():st.newInvalidDocument(t))}getEntries(e,t){let r=Ht();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():st.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ht(),o=t.path,a=new j(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||rw(aA(h),r)<=0||(i.has(h.key)||Kc(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return A.resolve(s)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return A.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new I_(this)}getSize(e){return A.resolve(this.size)}},I_=class extends Mh{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),A.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var E_=class{constructor(e){this.persistence=e,this.Nr=new Fn(t=>Xi(t),Wc),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $c,this.targetCount=0,this.kr=Fo.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),A.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Fo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,A.resolve()}updateTargetData(e,t){return this.Kn(t),A.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(s).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return A.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),A.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),A.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),A.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return A.resolve(r)}containsKey(e,t){return A.resolve(this.Br.containsKey(t))}};var Ph=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new gn(0),this.Kr=!1,this.Kr=!0,this.$r=new v_,this.referenceDelegate=e(this),this.Ur=new E_(this),this.indexManager=new o_,this.remoteDocumentCache=function(i){return new w_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Dh(t),this.Gr=new m_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new y_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new __(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){P("MemoryPersistence","Starting transaction:",e);let i=new b_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return A.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},b_=class extends uh{constructor(e){super(),this.currentSequenceNumber=e}},Oh=class n{constructor(e){this.persistence=e,this.Jr=new $c,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),A.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),A.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Xr,r=>{let i=j.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Y.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return A.or([()=>A.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var D_=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new lh("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lS,{unique:!0}),c.createObjectStore("documentMutations")}(e),QS(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=A.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),QS(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Y.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lS,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return A.waitFor(m)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:Kj});l.createIndex("collectionPathOverlayIndex",Qj,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Yj,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:Lj});l.createIndex("documentKeyIndex",Vj),l.createIndex("collectionGroupIndex",Uj)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:zj}).createIndex("sequenceNumberIndex",qj,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Gj}).createIndex("documentKeyIndex",Wj,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=xh(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>A.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>A.forEach(a,c=>{q(c.userId===s.userId);let l=Hi(this.serializer,c);return ZA(e,s.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new Me(o),l=function(p){return[0,Et(p)]}(c);s.push(t.get(l).next(h=>h?A.resolve():(p=>t.put({targetId:0,path:Et(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>A.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Hj});let r=t.store("collectionParents"),i=new Bc,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Et(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new Me(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{let h=Nn(a);return s(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=Tc(i),o=WA(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new j(Me.fromString(p.document.name).popFirst(5)):p.noDocument?j.fromSegments(p.noDocument.path):p.unknownDocument?j.fromSegments(p.unknownDocument.path):z()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>A.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=ex(this.serializer),s=new Ph(Oh.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ue();Hi(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),A.forEach(a,(c,l)=>{let h=new Ye(l),p=Th.lt(this.serializer,h),m=s.getIndexManager(h),v=Rh.lt(h,this.serializer,m,s.referenceDelegate);return new Nh(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Pc(t,gn.oe),c).next()})})}};function QS(n){n.createObjectStore("targetDocuments",{keyPath:Bj}).createIndex("documentTargetsIndex",$j,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jj,{unique:!0}),n.createObjectStore("targetGlobal")}var hv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",C_=class n{constructor(e,t,r,i,s,o,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new U(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new h_(this,i),this.Ai=t+"main",this.serializer=new Dh(c),this.Ri=new To(this.Ai,this.hi,new D_(this.serializer)),this.$r=new Xv,this.Ur=new c_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ex(this.serializer),this.Gr=new Jv,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&It("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new U(N.FAILED_PRECONDITION,hv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new gn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>b(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>b(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>b(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ei(e))return P("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Dc(e).get("owner").next(t=>A.resolve(this.vi(t)))}Ci(e){return Xd(e).delete(this.clientId)}Fi(){return b(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Xe(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return A.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?A.resolve(!0):Dc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new U(N.FAILED_PRECONDITION,hv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&P("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return b(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Pc(e,gn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Xd(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Rh.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new a_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Th.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){P("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?Xj:c===16?Jj:c===15?sw:c===14?fA:c===13?hA:c===12?Zj:c===11?dA:void z()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new Pc(a,this.Qr?this.Qr.next():gn.oe),t==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw It(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new U(N.FAILED_PRECONDITION,cA);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Dc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new U(N.FAILED_PRECONDITION,hv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dc(e).put("owner",t)}static D(){return To.D()}bi(e){let t=Dc(e);return t.get("owner").next(r=>this.vi(r)?(P("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):A.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(It(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Ty()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return P("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return It("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){It("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Dc(n){return Xe(n,"owner")}function Xd(n){return Xe(n,"clientMetadata")}function UB(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var T_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ue(),i=ue();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var S_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var kh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ty()?8:uA(ft())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new S_;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(go()<=he.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),A.resolve()):(go()<=he.DEBUG&&P("QueryEngine","Query:",mo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(go()<=he.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tn(t))):A.resolve())}Yi(e,t){if(ES(t))return A.resolve(null);let r=tn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=jv(t,null,"F"),r=tn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ue(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,jv(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return ES(t)||i.isEqual(Y.min())?A.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?A.resolve(null):(go()<=he.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mo(t)),this.rs(e,o,t,Pj(i,-1)).next(a=>a))})}ts(e,t){let r=new Ne(DA(e));return t.forEach((i,s)=>{Kc(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return go()<=he.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",mo(t)),this.Ji.getDocumentsMatchingQuery(e,t,nn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var A_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Fe(ie),this._s=new Fn(s=>Xi(s),Wc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function tx(n,e,t,r){return new A_(n,e,t,r)}function nx(n,e){return b(this,null,function*(){let t=te(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ue();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function jB(n,e){let t=te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),v=A.resolve();return m.forEach(T=>{v=v.next(()=>h.getEntry(c,T)).next(M=>{let R=l.docVersions.get(T);q(R!==null),M.version.compareTo(R)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function rx(n){let e=te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function BB(n,e){let t=te(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Je.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(M,R,k){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(s,v))});let c=Ht(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push($B(s,o,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(Y.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return A.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function $B(n,e,t){let r=ue(),i=ue();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ht();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Y.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):P("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function HB(n,e){let t=te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zB(n,e){let t=te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,A.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new ko(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function x_(n,e,t){return b(this,null,function*(){let r=te(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ei(o))throw o;P("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function YS(n,e,t){let r=te(n),i=Y.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){let p=te(c),m=p._s.get(h);return m!==void 0?A.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,tn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Y.min(),t?s:ue())).next(a=>(qB(r,aB(e),a),{documents:a,Ts:s})))}function qB(n,e,t){let r=n.us.get(e)||Y.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Fh=class{constructor(){this.activeTargetIds=fB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Lh=class{constructor(){this.so=new Fh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Fh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var R_=class{_o(e){}shutdown(){}};var Vh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var eh=null;function fv(){return eh===null?eh=function(){return 268435456+Math.round(2147483648*Math.random())}():eh++,"0x"+eh.toString(16)}var GB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var M_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var pt="WebChannelConnection",N_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=fv(),c=this.xo(t,r.toUriEncodedString());P("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(h=>(P("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Zi("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=GB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=fv();return new Promise((o,a)=>{let c=new ov;c.setWithCredentials(!0),c.listenOnce(av.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case wc.NO_ERROR:let h=c.getResponseJson();P(pt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case wc.TIMEOUT:P(pt,`RPC '${e}' ${s} timed out`),a(new U(N.DEADLINE_EXCEEDED,"Request time out"));break;case wc.HTTP_ERROR:let p=c.getStatus();if(P(pt,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let T=function(R){let k=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(k)>=0?k:N.UNKNOWN}(v.status);a(new U(T,v.message))}else a(new U(N.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new U(N.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{P(pt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);P(pt,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=fv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lv(),a=uv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");P(pt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c),m=!1,v=!1,T=new M_({Io:R=>{v?P(pt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(P(pt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),P(pt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),M=(R,k,B)=>{R.listen(k,F=>{try{B(F)}catch(H){setTimeout(()=>{throw H},0)}})};return M(p,uo.EventType.OPEN,()=>{v||(P(pt,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),M(p,uo.EventType.CLOSE,()=>{v||(v=!0,P(pt,`RPC '${e}' stream ${i} transport closed`),T.So())}),M(p,uo.EventType.ERROR,R=>{v||(v=!0,Zi(pt,`RPC '${e}' stream ${i} transport errored:`,R),T.So(new U(N.UNAVAILABLE,"The operation could not be completed")))}),M(p,uo.EventType.MESSAGE,R=>{var k;if(!v){let B=R.data[0];q(!!B);let F=B,H=F.error||((k=F[0])===null||k===void 0?void 0:k.error);if(H){P(pt,`RPC '${e}' stream ${i} received error:`,H);let ne=H.status,$=function(_){let E=He[_];if(E!==void 0)return kA(E)}(ne),I=H.message;$===void 0&&($=N.INTERNAL,I="Unknown error status: "+ne+" with message "+H.message),v=!0,T.So(new U($,I)),p.close()}else P(pt,`RPC '${e}' stream ${i} received:`,B),T.bo(B)}}),M(a,cv.STAT_EVENT,R=>{R.stat===Yd.PROXY?P(pt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Yd.NOPROXY&&P(pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}};function WB(){return typeof window<"u"?window:null}function sh(){return typeof document<"u"?document:null}function af(n){return new Wv(n,!0)}var Uh=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var jh=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Uh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(It(t.toString()),It("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new U(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return P("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},P_=class extends jh{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=AB(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?bt(o.readTime):Y.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Yv(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=gh(c)?{documents:BA(s,c)}:{query:$A(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=FA(s,o.resumeToken);let l=Kv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Y.min())>0){a.readTime=Oo(s,o.snapshotVersion.toTimestamp());let l=Kv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=RB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Yv(this.serializer),t.removeTarget=e,this.a_(t)}},O_=class extends jh{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return q(!!e.streamToken),this.lastStreamToken=e.streamToken,q(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=xB(e.writeResults,e.commitTime),r=bt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Yv(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>bh(this.serializer,r))};this.a_(t)}};var k_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new U(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Qv(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(N.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Qv(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},F_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(It(t),this.D_=!1):P("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var L_=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>b(this,null,function*(){os(this)&&(P("RemoteStore","Restarting streams for network reachability change."),yield function(c){return b(this,null,function*(){let l=te(c);l.L_.add(4),yield Qc(l),l.q_.set("Unknown"),l.L_.delete(4),yield cf(l)})}(this))}))}),this.q_=new F_(r,i)}};function cf(n){return b(this,null,function*(){if(os(n))for(let e of n.B_)yield e(!0)})}function Qc(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function ix(n,e){let t=te(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),mw(t)?gw(t):Bo(t).r_()&&pw(t,e))}function fw(n,e){let t=te(n),r=Bo(t);t.N_.delete(e),r.r_()&&sx(t,e),t.N_.size===0&&(r.r_()?r.o_():os(t)&&t.q_.set("Unknown"))}function pw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bo(n).A_(e)}function sx(n,e){n.Q_.xe(e),Bo(n).R_(e)}function gw(n){n.Q_=new Gv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Bo(n).start(),n.q_.v_()}function mw(n){return os(n)&&!Bo(n).n_()&&n.N_.size>0}function os(n){return te(n).L_.size===0}function ox(n){n.Q_=void 0}function KB(n){return b(this,null,function*(){n.q_.set("Online")})}function QB(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{pw(n,e)})})}function YB(n,e){return b(this,null,function*(){ox(n),mw(n)?(n.q_.M_(e),gw(n)):n.q_.set("Unknown")})}function ZB(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof wh&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){P("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Bh(n,r)}else if(e instanceof Eo?n.Q_.Ke(e):e instanceof _h?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Y.min()))try{let r=yield rx(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(Je.EMPTY_BYTE_STRING,h.snapshotVersion)),sx(s,c);let p=new ko(h.target,c,l,h.sequenceNumber);pw(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){P("RemoteStore","Failed to raise snapshot:",r),yield Bh(n,r)}})}function Bh(n,e,t){return b(this,null,function*(){if(!ei(e))throw e;n.L_.add(1),yield Qc(n),n.q_.set("Offline"),t||(t=()=>rx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){P("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield cf(n)}))})}function ax(n,e){return e().catch(t=>Bh(n,t,e))}function Yc(n){return b(this,null,function*(){let e=te(n),t=Jr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;JB(e);)try{let i=yield HB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,XB(e,i)}catch(i){yield Bh(e,i)}cx(e)&&ux(e)})}function JB(n){return os(n)&&n.O_.length<10}function XB(n,e){n.O_.push(e);let t=Jr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function cx(n){return os(n)&&!Jr(n).n_()&&n.O_.length>0}function ux(n){Jr(n).start()}function e$(n){return b(this,null,function*(){Jr(n).p_()})}function t$(n){return b(this,null,function*(){let e=Jr(n);for(let t of n.O_)e.m_(t.mutations)})}function n$(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=Hv.from(r,e,t);yield ax(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Yc(n)})}function r$(n,e){return b(this,null,function*(){e&&Jr(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(o){return wB(o)&&o!==N.ABORTED}(i.code)){let s=r.O_.shift();Jr(r).s_(),yield ax(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Yc(r)}})}(n,e)),cx(n)&&ux(n)})}function ZS(n,e){return b(this,null,function*(){let t=te(n);t.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");let r=os(t);t.L_.add(3),yield Qc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield cf(t)})}function i$(n,e){return b(this,null,function*(){let t=te(n);e?(t.L_.delete(2),yield cf(t)):e||(t.L_.add(2),yield Qc(t),t.q_.set("Unknown"))})}function Bo(n){return n.K_||(n.K_=function(t,r,i){let s=te(t);return s.w_(),new P_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:KB.bind(null,n),Ro:QB.bind(null,n),mo:YB.bind(null,n),d_:ZB.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),mw(n)?gw(n):n.q_.set("Unknown")):(yield n.K_.stop(),ox(n))}))),n.K_}function Jr(n){return n.U_||(n.U_=function(t,r,i){let s=te(t);return s.w_(),new O_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:e$.bind(null,n),mo:r$.bind(null,n),f_:t$.bind(null,n),g_:n$.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield Yc(n)):(yield n.U_.stop(),n.O_.length>0&&(P("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var V_=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new en,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function yw(n,e){if(It("AsyncQueue",`${e}: ${n}`),ei(n))return new U(N.UNAVAILABLE,`${e}: ${n}`);throw n}var $h=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||j.comparator(t.key,r.key):(t,r)=>j.comparator(t.key,r.key),this.keyedMap=Cc(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Hh=class{constructor(){this.W_=new Fe(j.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Lo=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,$h.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var U_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},j_=class{constructor(){this.queries=JS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=te(t),s=i.queries;i.queries=JS(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new U(N.ABORTED,"Firestore shutting down"))}};function JS(){return new Fn(n=>bA(n),of)}function lx(n,e){return b(this,null,function*(){let t=te(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new U_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=yw(o,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&vw(t)})}function dx(n,e){return b(this,null,function*(){let t=te(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function s$(n,e){let t=te(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&vw(t)}function o$(n,e,t){let r=te(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function vw(n){n.Y_.forEach(e=>{e.next()})}var B_,XS;(XS=B_||(B_={})).ea="default",XS.Cache="cache";var zh=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Lo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==B_.Cache}};var qh=class{constructor(e){this.key=e}},Gh=class{constructor(e){this.key=e}},$_=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=DA(e),this.Ra=new $h(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Hh,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Kc(this.query,p)?p:null,T=!!m&&this.mutatedKeys.has(m.key),M=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),R=!1;m&&v?m.data.isEqual(v.data)?T!==M&&(r.track({type:3,doc:v}),R=!0):this.ga(m,v)||(r.track({type:2,doc:v}),R=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),R=!0):m&&!v&&(r.track({type:1,doc:m}),R=!0,(c||l)&&(a=!0)),R&&(v?(o=o.add(v),s=M?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(v,T){let M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return M(v)-M(T)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new Lo(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Hh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Gh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new qh(r))}),t}ba(e){this.Ta=e.Ts,this.da=ue();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Lo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},H_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},z_=class{constructor(e){this.key=e,this.va=!1}},q_=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Fn(a=>bA(a),of),this.Ma=new Map,this.xa=new Set,this.Oa=new Fe(j.comparator),this.Na=new Map,this.La=new $c,this.Ba={},this.ka=new Map,this.qa=Fo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function a$(n,e,t=!0){return b(this,null,function*(){let r=yx(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield hx(r,e,t,!0),i})}function c$(n,e){return b(this,null,function*(){let t=yx(n);yield hx(t,e,!0,!1)})}function hx(n,e,t,r){return b(this,null,function*(){let i=yield zB(n.localStore,tn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield u$(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&ix(n.remoteStore,i),a})}function u$(n,e,t,r,i){return b(this,null,function*(){n.Ka=(p,m,v)=>function(M,R,k,B){return b(this,null,function*(){let F=R.view.ma(k);F.ns&&(F=yield YS(M.localStore,R.query,!1).then(({documents:I})=>R.view.ma(I,F)));let H=B&&B.targetChanges.get(R.targetId),ne=B&&B.targetMismatches.get(R.targetId)!=null,$=R.view.applyChanges(F,M.isPrimaryClient,H,ne);return tA(M,R.targetId,$.wa),$.snapshot})}(n,p,m,v);let s=yield YS(n.localStore,e,!0),o=new $_(e,s.Ts),a=o.ma(s.documents),c=jc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);tA(n,t,l.wa);let h=new H_(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function l$(n,e,t){return b(this,null,function*(){let r=te(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!of(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield x_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&fw(r.remoteStore,i.targetId),G_(r,i.targetId)}).catch(ss))):(G_(r,i.targetId),yield x_(r.localStore,i.targetId,!0))})}function d$(n,e){return b(this,null,function*(){let t=te(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),fw(t.remoteStore,r.targetId))})}function h$(n,e,t){return b(this,null,function*(){let r=vx(n);try{let i=yield function(o,a){let c=te(o),l=Be.now(),h=a.reduce((v,T)=>v.add(T.key),ue()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=Ht(),M=ue();return c.cs.getEntries(v,h).next(R=>{T=R,T.forEach((k,B)=>{B.isValidDocument()||(M=M.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,T)).next(R=>{p=R;let k=[];for(let B of a){let F=_B(B,p.get(B.key).overlayedDocument);F!=null&&k.push(new Ln(B.key,F,yA(F.value.mapValue),yn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(v,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:TA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Fe(ie)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Zc(r,i.changes),yield Yc(r.remoteStore)}catch(i){let s=yw(i,"Failed to persist write");t.reject(s)}})}function fx(n,e){return b(this,null,function*(){let t=te(n);try{let r=yield BB(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?q(o.va):i.removedDocuments.size>0&&(q(o.va),o.va=!1))}),yield Zc(t,r,e)}catch(r){yield ss(r)}})}function eA(n,e,t){let r=te(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=te(o);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&vw(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function f$(n,e,t){return b(this,null,function*(){let r=te(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Fe(j.comparator);o=o.insert(s,st.newNoDocument(s,Y.min()));let a=ue().add(s),c=new vh(Y.min(),new Map,new Fe(ie),o,a);yield fx(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),_w(r)}else yield x_(r.localStore,e,!1).then(()=>G_(r,e,t)).catch(ss)})}function p$(n,e){return b(this,null,function*(){let t=te(n),r=e.batch.batchId;try{let i=yield jB(t.localStore,e);gx(t,r,null),px(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Zc(t,i)}catch(i){yield ss(i)}})}function g$(n,e,t){return b(this,null,function*(){let r=te(n);try{let i=yield function(o,a){let c=te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(q(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);gx(r,e,t),px(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Zc(r,i)}catch(i){yield ss(i)}})}function px(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function gx(n,e,t){let r=te(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function G_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||mx(n,r)})}function mx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(fw(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),_w(n))}function tA(n,e,t){for(let r of t)r instanceof qh?(n.La.addReference(r.key,e),m$(n,r)):r instanceof Gh?(P("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||mx(n,r.key)):z()}function m$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(P("SyncEngine","New document in limbo: "+t),n.xa.add(r),_w(n))}function _w(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new j(Me.fromString(e)),r=n.qa.next();n.Na.set(r,new z_(t)),n.Oa=n.Oa.insert(t,r),ix(n.remoteStore,new ko(tn(sf(t.path)),r,"TargetPurposeLimboResolution",gn.oe))}}function Zc(n,e,t){return b(this,null,function*(){let r=te(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=T_.Wi(c.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return b(this,null,function*(){let h=te(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>A.forEach(l,m=>A.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>A.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!ei(p))throw p;P("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),T=v.snapshotVersion,M=v.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(m,M)}}})}(r.localStore,s))})}function y$(n,e){return b(this,null,function*(){let t=te(n);if(!t.currentUser.isEqual(e)){P("SyncEngine","User change. New user:",e.toKey());let r=yield nx(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new U(N.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Zc(t,r.hs)}})}function v$(n,e){let t=te(n),r=t.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function yx(n){let e=te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=v$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f$.bind(null,e),e.Ca.d_=s$.bind(null,e.eventManager),e.Ca.$a=o$.bind(null,e.eventManager),e}function vx(n){let e=te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=p$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=g$.bind(null,e),e}var W_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=af(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return tx(this.persistence,new kh,t.initialUser,this.serializer)}Ga(t){return new Ph(Oh.Zr,this.serializer)}Wa(t){return new Lh}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var K_=class n extends W_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){yield zf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield vx(this.Ja.syncEngine),yield Yc(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return tx(this.persistence,new kh,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new l_(r,e.asyncQueue,t)}Ha(e,t){let r=new Tv(t,this.persistence);return new Cv(e.asyncQueue,r)}Ga(e){let t=UB(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new C_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,WB(),sh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Lh}};var _x=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>eA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=y$.bind(null,this.syncEngine),yield i$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new j_}()}createDatastore(t){let r=af(t.databaseInfo.databaseId),i=function(o){return new N_(o)}(t.databaseInfo);return function(o,a,c,l){return new k_(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new L_(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>eA(this.syncEngine,r,0),function(){return Vh.D()?new Vh:new R_}())}createSyncEngine(t,r){return function(s,o,a,c,l,h,p){let m=new q_(s,o,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield function(s){return b(this,null,function*(){let o=te(s);P("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Qc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Wh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):It("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Q_=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ye.UNAUTHENTICATED,this.clientId=ah.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>b(this,null,function*(){P("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(P("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new en;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=yw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function pv(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield nx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function nA(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield _$(n);P("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ZS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ZS(e.remoteStore,i)),n._onlineComponents=e})}function _$(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){P("FirestoreClient","Using user provided OfflineComponentProvider");try{yield pv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Zi("Error using user provided cache. Falling back to memory cache: "+t),yield pv(n,new W_)}}else P("FirestoreClient","Using default OfflineComponentProvider"),yield pv(n,new W_);return n._offlineComponents})}function wx(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(P("FirestoreClient","Using user provided OnlineComponentProvider"),yield nA(n,n._uninitializedComponentsProvider._online)):(P("FirestoreClient","Using default OnlineComponentProvider"),yield nA(n,new _x))),n._onlineComponents})}function w$(n){return wx(n).then(e=>e.syncEngine)}function Ix(n){return b(this,null,function*(){let e=yield wx(n),t=e.eventManager;return t.onListen=a$.bind(null,e.syncEngine),t.onUnlisten=l$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=c$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=d$.bind(null,e.syncEngine),t})}function I$(n,e,t={}){let r=new en;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,a,c,l){let h=new Wh({next:m=>{h.Za(),o.enqueueAndForget(()=>dx(s,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new U(N.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?l.reject(new U(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new zh(sf(a.path),h,{includeMetadataChanges:!0,_a:!0});return lx(s,p)}(yield Ix(n),n.asyncQueue,e,t,r)})),r.promise}function E$(n,e,t={}){let r=new en;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,a,c,l){let h=new Wh({next:m=>{h.Za(),o.enqueueAndForget(()=>dx(s,p)),m.fromCache&&c.source==="server"?l.reject(new U(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new zh(a,h,{includeMetadataChanges:!0,_a:!0});return lx(s,p)}(yield Ix(n),n.asyncQueue,e,t,r)})),r.promise}function Ex(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var rA=new Map;function bx(n,e,t){if(!t)throw new U(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function b$(n,e,t,r){if(e===!0&&r===!0)throw new U(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iA(n){if(!j.isDocumentKey(n))throw new U(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sA(n){if(j.isDocumentKey(n))throw new U(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ww(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function Xr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new U(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ww(n);throw new U(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Kh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ex((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new U(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new U(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new U(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Vo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gv;switch(r.type){case"firstParty":return new _v(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=rA.get(t);r&&(P("ComponentProvider","Removing Datastore"),rA.delete(t),r.terminate())}(this),Promise.resolve()}};function Dx(n,e,t,r={}){var i;let s=(n=Xr(n,Vo))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ye.MOCK_USER;else{a=Nd(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new U(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ye(l)}n._authCredentials=new mv(new oh(a,c))}}var Qh=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},zt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},qr=class n extends Qh{constructor(e,t,r){super(e,t,sf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new j(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Cx(n,e,...t){if(n=jt(n),bx("collection","path",e),n instanceof Vo){let r=Me.fromString(e,...t);return sA(r),new qr(n,null,r)}{if(!(n instanceof zt||n instanceof qr))throw new U(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Me.fromString(e,...t));return sA(r),new qr(n.firestore,null,r)}}function Tx(n,e,...t){if(n=jt(n),arguments.length===1&&(e=ah.newId()),bx("doc","path",e),n instanceof Vo){let r=Me.fromString(e,...t);return iA(r),new zt(n,null,new j(r))}{if(!(n instanceof zt||n instanceof qr))throw new U(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Me.fromString(e,...t));return iA(r),new zt(n.firestore,n instanceof qr?n.converter:null,new j(r))}}var Yh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Uh(this,"async_queue_retry"),this.Vu=()=>{let r=sh();r&&P("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=sh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=sh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new en;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return b(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ei(e))throw e;P("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw It("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=V_.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return b(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var is=class extends Vo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Yh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Yh(e),this._firestoreClient=void 0,yield e}})}};function Sx(n,e){let t=typeof n=="object"?n:Ni(),r=typeof n=="string"?n:e||"(default)",i=fc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Md("firestore");s&&Dx(i,...s)}return i}function Iw(n){if(n._terminated)throw new U(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ax(n),n._firestoreClient}function Ax(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,h){return new Sv(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Ex(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Q_(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function xx(n,e){Zi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return D$(n,_x.provider,{build:r=>new K_(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function D$(n,e,t){if((n=Xr(n,is))._firestoreClient||n._terminated)throw new U(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new U(N.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Ax(n)}var Hc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Je.fromBase64String(e))}catch(t){throw new U(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var zc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new U(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zh=class{constructor(e){this._methodName=e}};var qc=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new U(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}};var Gc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var C$=/^__.*__$/,Y_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ln(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zr(e,this.data,t,this.fieldTransforms)}};function Rx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var Z_=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Rx(this.Cu)&&C$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},J_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||af(e)}Qu(e,t,r,i=!1){return new Z_({Cu:e,methodName:t,qu:r,path:Ze.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function T$(n){let e=n._freezeSettings(),t=af(n._databaseId);return new J_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function S$(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);Ox("Data must be an object, but it was:",o,r);let a=Nx(r,o),c,l;if(s.merge)c=new mn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=A$(e,p,t);if(!o.contains(m))throw new U(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);R$(h,m)||h.push(m)}c=new mn(h),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new Y_(new $t(a),c,l)}function Mx(n,e){if(Px(n=jt(n)))return Ox("Unsupported field value:",e,n),Nx(n,e);if(n instanceof Zh)return function(r,i){if(!Rx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Mx(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Be.fromDate(r);return{timestampValue:Oo(i.serializer,s)}}if(r instanceof Be){let s=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oo(i.serializer,s)}}if(r instanceof qc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hc)return{bytesValue:FA(i.serializer,r._byteString)};if(r instanceof zt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return lw(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ww(r)}`)}(n,e)}function Nx(n,e){let t={};return pA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jo(n,(r,i)=>{let s=Mx(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Px(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Be||n instanceof qc||n instanceof Hc||n instanceof zt||n instanceof Zh||n instanceof Gc)}function Ox(n,e,t){if(!Px(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=ww(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function A$(n,e,t){if((e=jt(e))instanceof zc)return e._internalPath;if(typeof e=="string")return kx(n,e);throw Jh("Field path arguments must be of type string or ",n,!1,void 0,t)}var x$=new RegExp("[~\\*/\\[\\]]");function kx(n,e,t){if(e.search(x$)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zc(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jh(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new U(N.INVALID_ARGUMENT,a+n+c)}function R$(n,e){return n.some(t=>t.isEqual(e))}var Xh=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new X_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Fx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},X_=class extends Xh{data(){return super.data()}};function Fx(n,e){return typeof e=="string"?kx(n,e):e instanceof zc?e._internalPath:e._delegate._internalPath}function M$(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ew=class{convertValue(e,t="none"){switch(Ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return jo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Oe(o.doubleValue));return new Gc(s)}convertGeoPoint(e){return new qc(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=aw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){let t=ar(e);return new Be(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Me.fromString(e);q(GA(r));let i=new So(r.get(1),r.get(3)),s=new j(r.popFirst(5));return i.isEqual(t)||It(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function N$(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Wi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ef=class extends Xh{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new bo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Fx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},bo=class extends ef{data(e={}){return super.data(e)}},tw=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bo(this._firestore,this._userDataWriter,r.key,r,new Wi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new U(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new bo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new bo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:P$(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function P$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function Lx(n){n=Xr(n,zt);let e=Xr(n.firestore,is);return I$(Iw(e),n._key).then(t=>k$(e,n,t))}var tf=class extends ew{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,t)}};function Vx(n){n=Xr(n,Qh);let e=Xr(n.firestore,is),t=Iw(e),r=new tf(e);return M$(n._query),E$(t,n._query).then(i=>new tw(e,r,n,i))}function Ux(n,e,t){n=Xr(n,zt);let r=Xr(n.firestore,is),i=N$(n.converter,e,t);return O$(r,[S$(T$(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,yn.none())])}function O$(n,e){return function(r,i){let s=new en;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return h$(yield w$(r),i,s)})),s.promise}(Iw(n),e)}function k$(n,e,t){let r=t.docs.get(e._key),i=new tf(n);return new ef(n,i,e._key,r,new Wi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Uo=i})(Lr),Mn(new Pt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new is(new yv(r.getProvider("auth-internal")),new Iv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new U(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new So(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ke(aS,"4.7.3",e),ke(aS,"4.7.3","esm2017")})();var cr=class{constructor(e){return e}},jx="firestore",Ew=class{constructor(){return ki(jx)}};var bw=new Q("angularfire2.firestore-instances");function F$(n,e){let t=pc(jx,n,e);return t&&new cr(t)}function L$(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new cr(r)}}var V$={provide:Ew,deps:[[new rt,bw]]},U$={provide:cr,useFactory:F$,deps:[[new rt,bw],ir]};function Bx(n,...e){return ke("angularfire",Vr.full,"fst"),Sn([U$,V$,{provide:bw,useFactory:L$(n),multi:!0,deps:[Te,Tt,Fi,Li,[new rt,co],[new rt,Oi],...e]}])}var uf=Bt(Cx,!0);var vn=Bt(Tx,!0);var $x=Bt(xx,!0);var ur=Bt(Lx,!0);var lf=Bt(Vx,!0);var Hx=Bt(Sx,!0);var Jc=Bt(Ux,!0);var $o=class n{cache={};get(e){return this.cache[e]}set(e,t){this.cache[e]=t}clear(e){delete this.cache[e]}clearAll(){this.cache={}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ot=class n{constructor(e,t){this.firestore=e;this.cacheService=t;$x(this.firestore).catch(r=>{r.code=="failed-precondition"?console.warn("Persistencia fallida: m\xFAltiples pesta\xF1as abiertas en AuthService."):r.code=="unimplemented"&&console.warn("Persistencia no soportada en este navegador.")})}userExists(e){return b(this,null,function*(){try{if(this.cacheService.get(`user_${e}`))return console.log("Usuario encontrado en cach\xE9, evitando consulta en Firestore."),!0;let r=vn(this.firestore,`users/${e}`),i=yield ur(r);return i.exists()?(console.log("Usuario encontrado en Firestore."),this.cacheService.set(`user_${e}`,i.data()),!0):(console.warn("Usuario no encontrado en Firestore."),!1)}catch(t){return console.error("Error al verificar si el usuario existe:",t),!1}})}setUserSession(e){return b(this,null,function*(){let t=this.cacheService.get(`user_${e}`);if(t){console.log("Datos de usuario obtenidos del cach\xE9."),this.storeUserDataInLocalStorage(e,t);return}let r=vn(this.firestore,`users/${e}`),i=yield ur(r);if(i.exists()){let s=i.data();this.storeUserDataInLocalStorage(e,s),this.cacheService.set(`user_${e}`,s)}else console.error("El usuario no existe en la base de datos.")})}storeUserDataInLocalStorage(e,t){let r=t?.nombre||"",i=t?.correo||"",s=t?.telefono||"";localStorage.setItem("username",e),localStorage.setItem("name",r),localStorage.setItem("email",i),localStorage.setItem("phone",s)}hasSeenWelcome(e){return b(this,null,function*(){if(localStorage.getItem("welcomeSeen")==="true")return!0;let r=vn(this.firestore,`users/${e}`),i=yield ur(r),s=i.exists()&&i.data()?.welcomeSeen===!0;return s&&localStorage.setItem("welcomeSeen","true"),s})}IsSecurityAccess(e){return b(this,null,function*(){let t=vn(this.firestore,`users/${e}`),r=yield ur(t);return r.exists()&&r.data()?.security===!0})}registerAttendance(e){return b(this,null,function*(){try{if(!(yield this.userExists(e)))return console.warn(`El usuario ${e} no existe.`),"El usuario no existe. Acceso denegado.";let r=vn(this.firestore,`users/${e}`),i=yield ur(r);if(i.exists()&&i.data()?.asistencia===!0)return console.warn(`El usuario ${e} ya registr\xF3 su asistencia.`),`El usuario ${i.data()?.nombre||e} ya registr\xF3 su asistencia. Acceso denegado.`;yield Jc(r,{asistencia:!0},{merge:!0});let s=i.data()?.nombre||e;return console.log(`Asistencia registrada para el usuario ${s}.`),`Asistencia registrada exitosamente para ${s}. Acceso permitido.`}catch(t){return console.error("Error al registrar la asistencia:",t),"Ocurri\xF3 un error al registrar la asistencia. Int\xE9ntalo nuevamente."}})}markWelcomeAsSeen(e){return b(this,null,function*(){let t=vn(this.firestore,`users/${e}`);yield Jc(t,{welcomeSeen:!0},{merge:!0}),localStorage.setItem("welcomeSeen","true")})}isUserLoggedIn(){return localStorage.getItem("username")!==null}getUsername(){return localStorage.getItem("username")}getName(){return localStorage.getItem("name")}setTema(e){localStorage.setItem("tema",e)}getTema(){return localStorage.getItem("tema")}getUserSellos(e,t=!1){return b(this,null,function*(){let r=`user_sellos_${e}`;if(!t){let a=this.cacheService.get(r);if(a)return console.log("Sellos del usuario obtenidos del cach\xE9."),a}let i=uf(this.firestore,`users/${e}/sellos`),s=yield lf(i),o={};return s.forEach(a=>{let c=a.id,l=a.data();o[c]=l.completed===!0}),this.cacheService.set(r,o),o})}static \u0275fac=function(t){return new(t||n)(X(cr),X($o))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var df=class n{constructor(e,t){this.authService=e;this.router=t}username="";errorMessage="";login(){return b(this,null,function*(){if(this.errorMessage="",this.username.trim())try{if(yield this.authService.userExists(this.username)){yield this.authService.setUserSession(this.username);let t=yield this.authService.hasSeenWelcome(this.username),i=new URLSearchParams(window.location.search).get("nextUrl")||"/pasaporte";t?this.router.navigateByUrl(i):this.router.navigate(["/bienvenida"],{queryParams:{nextUrl:i}})}else this.errorMessage="El usuario no existe. Por favor, intenta con otro nombre."}catch(e){this.errorMessage="Ocurri\xF3 un error al iniciar sesi\xF3n. Por favor, intenta nuevamente.",console.error(e)}else this.errorMessage="Por favor, ingresa un nombre de usuario."})}static \u0275fac=function(t){return new(t||n)(Z(Ot),Z(ht))};static \u0275cmp=lt({type:n,selectors:[["app-login"]],standalone:!0,features:[Rt],decls:19,vars:2,consts:[[1,"background-container"],[1,"login-container"],[1,"login-box"],[1,"logo"],["src","imgs/wow-logo.png","alt","Logo OWOW"],[1,"welcome-title"],[1,"subtitle"],[1,"input-group"],[1,"input-icon"],["src","imgs/mail-icon.png","alt","Logo OWOW"],["type","text","placeholder","Correo electr\xF3nico",1,"input-field",3,"ngModelChange","ngModel"],["NgIf","errorMessage",1,"error-message"],[1,"login-button",3,"click"],[1,"button-icon"],["src","imgs/btn-login.png","alt","Logo OWOW"]],template:function(t,r){t&1&&(W(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Ie(4,"img",4),J(),W(5,"h1",5),Ce(6,"\xA1Bienvenido!"),J(),W(7,"p",6),Ce(8,"Inicia Sesi\xF3n"),J(),W(9,"div",7)(10,"span",8),Ie(11,"img",9),J(),W(12,"input",10),hm("ngModelChange",function(s){return AD(r.username,s)||(r.username=s),s}),J()(),W(13,"p",11),Ce(14),J(),W(15,"button",12),xt("click",function(){return r.login()}),W(16,"span",13),Ie(17,"img",14),J(),Ce(18," Ingresar "),J()()()()),t&2&&(be(12),dm("ngModel",r.username),be(2),Zn(r.errorMessage))},dependencies:[fT,Sd,lT,wy],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;width:100vw;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#ec671f}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-end;height:100vh;width:100%;padding:0;box-sizing:border-box;position:relative;z-index:1}.login-box[_ngcontent-%COMP%]{background-color:#611f78;border-radius:20px 20px 0 0;padding:20px 30px 40px;width:75%;max-width:320px;min-height:80vh;box-shadow:0 -4px 12px #0000001a;text-align:left;display:flex;flex-direction:column;justify-content:flex-start;border:3px solid #ffffff}.logo[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:40px;width:25vh}.welcome-title[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:bold;font-size:2.5rem;color:#fff;font-weight:700;text-align:center;margin-bottom:10px}.subtitle[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:bold;font-size:1.4rem;color:#fff;text-align:center;margin-top:0;margin-bottom:5px}.error-message[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;color:#fff;font-size:14px;text-align:center;margin-top:10px;text-align:left}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff;border-radius:50px;padding:12px;margin-top:50px}.input-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-right:30px;margin-left:10px}.input-field[_ngcontent-%COMP%]{border:none;outline:none;background:transparent;width:100%;font-size:16px;color:#333}.input-field[_ngcontent-%COMP%]::placeholder{color:#601f788a}.login-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:transparent;color:#fff;border:none;border-radius:25px;padding:10px;font-size:1rem;font-weight:700;cursor:pointer;transition:background-color .3s ease;border:2px solid #ffffff;margin:20px auto 0;width:180px}.login-button[_ngcontent-%COMP%]:hover{background-color:#5a3b7d}.button-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-right:8px}"]})};var hf=class n{constructor(e,t){this.authService=e;this.router=t}username="";name="";nextUrl=null;welcomeTitle="Bienvenido a una experiencia WOW";welcomeContent=`
   Ha sido un a\xF1o de logros, trabajo en equipo y crecimiento en WOW.<br />
   Fortalecimos nuestra red, innovaci\xF3n y compromiso con ustedes: nuestro valioso equipo, clientes y socios.<br /><br />
   Celebremos juntos este momento especial y sigamos so\xF1ando en grande.<br /><br />
 `;isOnRulesScreen=!1;ngOnInit(){return b(this,null,function*(){this.username=this.authService.getUsername(),this.name=this.authService.getName(),this.username&&(yield this.authService.markWelcomeAsSeen(this.username));let e=new URLSearchParams(window.location.search);this.nextUrl=e.get("nextUrl")||"/pasaporte"})}handleContinue(){this.isOnRulesScreen?this.continue():(this.welcomeTitle="Participa en el juego de la Trivia WOW",this.welcomeContent=`
      Juega y podr\xE1s participar en un sorteo con premios sorpresa. <br /><br />
      Reglas del juego: <br />
      \u2022 Conectarse a la aplicaci\xF3n TRIVIA utilizando la c\xE1mara del celular y enfocar el C\xF3digo QR que est\xE1 en cada STAND.<br />
      \u2022\u2060 Responder las preguntas de la TRIVIA y si logra responder 3 respuestas correctas, Ud ganar\xE1 un SELLO por cada STAND visitado.<br />
      \u2022\u2060 Si Ud acumula todos los SELLOS, participar\xE1 en un SORTEO con premios sorpresa.<br /><br />
      <strong>\xA1Mucha suerte!</strong>
    `,this.isOnRulesScreen=!0)}continue(){this.nextUrl?this.router.navigateByUrl(this.nextUrl):this.router.navigate(["pasaporte"])}static \u0275fac=function(t){return new(t||n)(Z(Ot),Z(ht))};static \u0275cmp=lt({type:n,selectors:[["app-bienvenida"]],decls:20,vars:3,consts:[[1,"background-container"],[1,"header"],[1,"greeting"],[1,"morning-text"],[1,"user-name"],[1,"profile-image"],["src","imgs/user.png","alt","Perfil de Usuario"],[1,"welcome-container"],[1,"welcome-box"],[1,"logo"],["src","imgs/wow-simple-logo.png","alt","Logo OWOW"],[1,"welcome-title"],[1,"welcome-content"],[1,"txt-content",3,"innerHTML"],[1,"btn-zone"],[1,"continue-button",3,"click"]],template:function(t,r){t&1&&(W(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),Ce(4,"\xA1Buenos d\xEDas!"),J(),W(5,"h2",4),Ce(6),J()(),W(7,"div",5),Ie(8,"img",6),J()(),W(9,"div",7)(10,"div",8)(11,"div",9),Ie(12,"img",10),J(),W(13,"h2",11),Ce(14),J(),W(15,"div",12),Ie(16,"p",13),W(17,"div",14)(18,"button",15),xt("click",function(){return r.handleContinue()}),Ce(19,"Continuar"),J()()()()()()),t&2&&(be(6),wt("Hola ",r.name,""),be(8),Zn(r.welcomeTitle),be(2),je("innerHTML",r.welcomeContent,B0))},styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;width:100vw;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;width:100%;box-sizing:border-box;color:#fff;margin-top:40px}.greeting[_ngcontent-%COMP%]{display:flex;flex-direction:column}.morning-text[_ngcontent-%COMP%]{font-size:20px;font-family:DM Sans,sans-serif;font-style:normal;margin:0;color:#fff}.user-name[_ngcontent-%COMP%]{font-size:26px;font-family:DM Sans,sans-serif;font-style:bold;margin:8px 0 0}.profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;border:2px solid #ffffff}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#ec671f}.welcome-container[_ngcontent-%COMP%]{z-index:1;display:flex;justify-content:center;align-items:flex-end;height:100vh;width:100%;padding:0;box-sizing:border-box;position:relative;overflow:auto}.welcome-box[_ngcontent-%COMP%]{background-color:#611f78;border-radius:20px 20px 0 0;padding:20px;width:90%;height:calc(100vh - 10px);box-sizing:border-box;box-shadow:0 -4px 12px #0000001a;border:3px solid #ffffff}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75px;object-fit:contain}.welcome-title[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:bold;font-size:18px;height:auto;margin-top:10px;margin-bottom:10px;color:#fff;font-weight:700;text-align:center}.welcome-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.txt-content[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:normal;font-size:13px;overflow-y:auto;height:35vh;padding:10px;color:#fff;font-weight:400;margin:0;flex-grow:.3;text-align:left}.continue-button[_ngcontent-%COMP%]{display:block;margin:10px auto 0;padding:15px 30px;font-size:18px;font-weight:700;color:#fff;background-color:#dd5b22;border:none;border-radius:25px;box-shadow:0 4px 8px #0003;cursor:pointer;transition:all .2s ease}.continue-button[_ngcontent-%COMP%]:hover{background-color:#bb4a1c}.continue-button[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:0 2px 4px #0003}"]})};var ff=class n{constructor(e,t){this.firestore=e;this.cacheService=t}getTriviaData(e){return b(this,null,function*(){let t=this.cacheService.get(`trivia_${e}`);if(t)return console.log("Datos de trivia obtenidos del cach\xE9."),t;let r=localStorage.getItem(`trivia_${e}`);if(r){let o=JSON.parse(r);return this.cacheService.set(`trivia_${e}`,o),console.log("Datos de trivia obtenidos de localStorage."),o}let i=yield ur(vn(this.firestore,`trivia/${e}`)),s=i.exists()?i.data():null;return s&&(this.cacheService.set(`trivia_${e}`,s),localStorage.setItem(`trivia_${e}`,JSON.stringify(s))),s})}getQuestionsByTema(e){return b(this,null,function*(){let t=this.cacheService.get(`questions_${e}`);if(t)return console.log("Preguntas obtenidas del cach\xE9."),t;let r=uf(this.firestore,`trivia/${e}/preguntas`),s=(yield lf(r)).docs.map(o=>L({id:o.id},o.data()));return this.cacheService.set(`questions_${e}`,s),s})}hasSello(e,t){return b(this,null,function*(){let r=`completed_${e}_${t}`,i=this.cacheService.get(r);if(i!==void 0)return console.log("Estado de trivia completada obtenido del cach\xE9."),i;let s=vn(this.firestore,`users/${e}/sellos/${t}`),o=yield ur(s),a=o.exists()&&o.data()?.completed===!0;return this.cacheService.set(r,a),a})}markTriviaAsCompleted(e,t){return b(this,null,function*(){let r=vn(this.firestore,`users/${e}/sellos/${t}`);yield Jc(r,{completed:!0},{merge:!0}),this.cacheService.set(`completed_${e}_${t}`,!0)})}static \u0275fac=function(t){return new(t||n)(X(cr),X($o))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var B$=(n,e,t)=>({opcion:!0,selected:n,correct:e,incorrect:t});function $$(n,e){if(n&1){let t=TD();W(0,"button",24),xt("click",function(){let i=Zb(t).$implicit,s=Yt();return Jb(s.handleOptionClick(i))}),Ce(1),J()}if(n&2){let t=e.$implicit,r=Yt();je("ngClass",RD(2,B$,r.selectedAnswer===t,r.showFeedback&&t===(r.currentQuestion==null?null:r.currentQuestion.respuesta),r.showFeedback&&t!==(r.currentQuestion==null?null:r.currentQuestion.respuesta)&&r.selectedAnswer===t)),be(),wt(" ",r.currentQuestion==null?null:r.currentQuestion[t]," ")}}var pf=class n{constructor(e,t,r,i){this.triviaService=e;this.route=t;this.router=r;this.authService=i}trivia="";questions=[];answeredQuestions=new Set;currentQuestionIndex=0;currentQuestion;feedbackMessage="";feedbackClass="";isAnswered=!1;sello="";objetivo=0;answeredCorrectly=0;userId="";timeLeft=12;timerInterval;selectedAnswer=null;showFeedback=!1;name="";ngOnInit(){return b(this,null,function*(){this.trivia=this.route.snapshot.paramMap.get("tema"),this.sello=this.route.snapshot.paramMap.get("sello"),this.userId=this.authService.getUsername()||"",this.name=this.authService.getName();let e=localStorage.getItem(`answeredQuestions_${this.trivia}`);if(e&&(this.answeredQuestions=new Set(JSON.parse(e))),this.sello){if(yield this.triviaService.hasSello(this.userId,this.sello)){this.router.navigate(["/pasaporte"]);return}yield this.loadTriviaData()}})}ngOnDestroy(){this.clearTimer()}handleOptionClick(e){if(this.isAnswered||this.showFeedback)return;this.selectedAnswer=e,this.isAnswered=!0,this.clearTimer();let t=this.currentQuestion.respuesta.toString();setTimeout(()=>{if(e===t){if(this.feedbackMessage="\xA1Correcto!",this.feedbackClass="feedback-box show",this.answeredQuestions.add(this.currentQuestion.id),localStorage.setItem(`answeredQuestions_${this.trivia}`,JSON.stringify([...this.answeredQuestions])),this.answeredCorrectly++,this.answeredCorrectly>=this.objetivo){console.log("\xA1Objetivo cumplido! Completando trivia..."),this.completeTrivia();return}}else this.feedbackMessage="\xA1Sigue intentando!",this.feedbackClass="feedback-box show";setTimeout(()=>{this.feedbackClass="feedback-box",this.resetForNextQuestion()},2e3)},500)}resetForNextQuestion(){if(this.showFeedback=!1,this.feedbackMessage="",this.feedbackClass="",this.selectedAnswer=null,this.isAnswered=!1,this.currentQuestionIndex>=this.questions.length-1){console.log("No hay m\xE1s preguntas. Reiniciando preguntas no contestadas."),this.resetUnansweredQuestions();return}this.currentQuestionIndex++,this.currentQuestion=this.questions[this.currentQuestionIndex],this.startTimer()}nextQuestion(){this.resetFeedback(),this.currentQuestionIndex<this.questions.length-1?(this.currentQuestionIndex++,this.currentQuestion=this.questions[this.currentQuestionIndex],this.startTimer()):this.resetUnansweredQuestions()}resetUnansweredQuestions(){return b(this,null,function*(){let e=this.questions.filter(t=>!this.answeredQuestions.has(t.id));if(e.length===0){console.log("No hay m\xE1s preguntas no contestadas. Cargando nuevas preguntas desde la base de datos.");let t=yield this.triviaService.getQuestionsByTema(this.trivia);if(t&&t.length>0){let r=this.shuffleArray(t).slice(0,5);this.questions=r,this.answeredQuestions.clear()}else console.error("No se pudieron cargar nuevas preguntas."),this.questions=[]}else console.log("Reiniciando preguntas no contestadas."),this.questions=this.shuffleArray(e);this.questions.length>0?(this.currentQuestionIndex=0,this.currentQuestion=this.questions[this.currentQuestionIndex],this.startTimer()):console.error("No hay preguntas disponibles. Verifica la base de datos.")})}startTimer(){let e=document.querySelector(".progress-ring__circle"),r=2*Math.PI*35;e&&(e.style.strokeDasharray=`${r} ${r}`,e.style.strokeDashoffset=`${r}`),this.timeLeft=12,this.timerInterval=setInterval(()=>{if(this.timeLeft>0){this.timeLeft--;let i=r-this.timeLeft/12*r;e&&(e.style.strokeDashoffset=`${i}`)}else clearInterval(this.timerInterval),this.handleTimeout()},1e3)}handleTimeout(){this.clearTimer(),this.showFeedback=!0,this.feedbackMessage="Tiempo agotado",this.feedbackClass="feedback-overlay show incorrecto",this.isAnswered=!0,setTimeout(()=>{this.resetForNextQuestion()},2e3)}clearTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)}loadTriviaData(){return b(this,null,function*(){let e=yield this.triviaService.getTriviaData(this.trivia);e&&(this.objetivo=Number(e.objetivo)||0,yield this.loadQuestions())})}loadQuestions(){return b(this,null,function*(){this.questions=this.shuffleArray((yield this.triviaService.getQuestionsByTema(this.trivia)).filter(e=>!this.answeredQuestions.has(e.id))),this.currentQuestionIndex=0,this.currentQuestion=this.questions[this.currentQuestionIndex],this.startTimer()})}shuffleArray(e){for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}getOptionKeys(e){return Object.keys(e).filter(t=>!isNaN(Number(t))).sort()}completeTrivia(){return b(this,null,function*(){if(!this.sello){console.error("No se puede completar la trivia: Sello es null o indefinido.");return}yield this.triviaService.markTriviaAsCompleted(this.userId,this.sello),this.router.navigate(["/felicitacion"],{queryParams:{sello:this.sello}})})}resetFeedback(){this.isAnswered=!1,this.feedbackMessage="",this.feedbackClass="",this.selectedAnswer=""}static \u0275fac=function(t){return new(t||n)(Z(ff),Z(Mt),Z(ht),Z(Ot))};static \u0275cmp=lt({type:n,selectors:[["app-trivia"]],standalone:!0,features:[Rt],decls:29,vars:6,consts:[[1,"background-container"],[1,"header"],[1,"greeting"],[1,"user-name"],[1,"morning-text"],[1,"profile-image"],["src","imgs/user.png","alt","Perfil de Usuario"],[1,"trivia-container"],["src","imgs/wow-circulos.png","alt","WOW Circulos",1,"background-image"],[1,"trivia-box"],[1,"header-with-timer"],[1,"logo"],["src","imgs/wow-simple-logo.png","alt","Logo OWOW"],[1,"timer-circle"],["width","80","height","80",1,"progress-ring"],["cx","40","cy","40","r","35","stroke-width","5","fill","transparent",1,"progress-ring__circle"],[1,"timer-text"],[1,"pregunta-card"],["src","imgs/pregunta-card.png","alt","Pregunta Card",1,"pregunta-card-image"],[1,"pregunta-text"],[1,"opciones-container"],[1,"opciones"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"feedback-box",3,"ngClass"],[3,"click","ngClass"]],template:function(t,r){t&1&&(W(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),Ce(4),J(),W(5,"p",4),Ce(6,"\xA1Juguemos!"),J()(),W(7,"div",5),Ie(8,"img",6),J()(),W(9,"div",7),Ie(10,"img",8),W(11,"div",9)(12,"div",10)(13,"div",11),Ie(14,"img",12),J(),W(15,"div",13),u0(),W(16,"svg",14),Ie(17,"circle",15),J(),l0(),W(18,"div",16),Ce(19),J()()(),W(20,"div",17),Ie(21,"img",18),W(22,"div",19),Ce(23),J()(),W(24,"div",20)(25,"div",21),An(26,$$,2,6,"button",22),J()(),W(27,"div",23),Ce(28),J()()()()),t&2&&(be(4),wt("Hola ",r.name,""),be(15),Zn(r.timeLeft),be(4),wt(" ",r.currentQuestion==null?null:r.currentQuestion.id," "),be(3),je("ngForOf",r.getOptionKeys(r.currentQuestion)),be(),je("ngClass",r.feedbackClass),be(),wt(" ",r.feedbackMessage," "))},dependencies:[Xn,td,nd],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;width:100vw;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;width:100%;box-sizing:border-box;color:#fff;margin-top:40px}.greeting[_ngcontent-%COMP%]{display:flex;flex-direction:column}.morning-text[_ngcontent-%COMP%]{font-size:20px;font-family:DM Sans,sans-serif;font-style:normal;margin:0;color:#f1d7ff}.user-name[_ngcontent-%COMP%]{font-size:26px;font-family:DM Sans,sans-serif;font-style:bold;margin:8px 0 0}.profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;border:2px solid #ffffff}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#ec671f}.trivia-container[_ngcontent-%COMP%]{z-index:1;display:flex;justify-content:center;align-items:flex-end;height:100vh;width:100%;padding:0;box-sizing:border-box;position:relative;overflow:auto}.background-image[_ngcontent-%COMP%]{position:absolute;top:45%;left:50%;transform:translate(-50%,-50%);width:auto;height:auto;max-width:87%;max-height:100%;z-index:0;pointer-events:none}.trivia-box[_ngcontent-%COMP%]{background-color:#611f78;border-radius:20px 20px 0 0;padding:20px 30px 40px;width:75%;max-width:320px;min-height:90vh;box-shadow:0 -4px 12px #0000001a;text-align:left;display:flex;flex-direction:column;justify-content:flex-start;border:3px solid #ffffff}.header-with-timer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:10px;width:100%}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15vh;object-fit:contain}.timer-circle[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:7vh;height:7vh;border-radius:50%;background-color:#fff;box-shadow:0 4px 8px #0003;margin-left:10px;position:relative}.progress-ring[_ngcontent-%COMP%]{position:absolute;transform:rotate(-90deg)}.progress-ring__circle[_ngcontent-%COMP%]{stroke:#dd5b22;stroke-dasharray:230;stroke-dashoffset:230;transition:stroke-dashoffset 1s linear;stroke-linecap:round;stroke-width:4;fill:none}.timer-text[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:bold;font-size:1.3em;font-weight:700;color:#4a1861;z-index:1}.trivia-header[_ngcontent-%COMP%]{position:relative;width:100%;height:60px;display:flex;align-items:center;justify-content:space-between;color:#333;font-size:1.2em;padding:0 20px;box-sizing:border-box}.progress-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:#d32f2f;z-index:1;transition:width 1s linear}.trivia-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .trivia-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .trivia-header[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{font-size:1.3em}.title[_ngcontent-%COMP%]{font-weight:700;flex:1;text-align:left}.timer[_ngcontent-%COMP%]{font-weight:700;margin-left:auto;font-size:1.1em}.image-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-top:20px}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border-radius:8px;box-shadow:0 4px 8px #0003}.pregunta-card[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;max-width:350px;margin:18px auto -5px}.pregunta-card-image[_ngcontent-%COMP%]{width:100%;border-radius:10px;object-fit:cover}.pregunta-text[_ngcontent-%COMP%]{position:absolute;font-family:DM Sans,sans-serif;font-style:normal;font-size:1.3em;font-weight:700;color:#611f78;text-align:center;padding:10px;word-wrap:break-word;max-width:90%}.opciones-container[_ngcontent-%COMP%]{position:relative;z-index:1;background-color:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 10px #0000001a;margin:0 auto;width:100%;max-width:350px;text-align:center}.opciones-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 10px #0000001a;margin:20px auto;width:250px;text-align:center}.opciones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.opcion[_ngcontent-%COMP%]{position:relative;background-color:#611f78;color:#fff;font-family:DM Sans,sans-serif;font-size:14px;font-weight:700;padding:15px;border:none;border-radius:20px;text-align:center;cursor:pointer;box-shadow:5px 7px #4a1861;transition:all .2s ease}.opcion[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px #2e0f3d}.opcion[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:0 2px #2e0f3d}.opcion.selected[_ngcontent-%COMP%]{background-color:#dd5b22;box-shadow:0 4px #8e3c17}.opcion.correct[_ngcontent-%COMP%]{background-color:#4caf50;box-shadow:0 4px #2e7d32}.opcion.incorrect[_ngcontent-%COMP%]{background-color:#f44336;box-shadow:0 4px #b71c1c}.feedback-box[_ngcontent-%COMP%]{position:absolute;border-radius:20px 20px 0 0;padding:20px 30px 40px;width:75%;max-width:320px;min-height:89vh;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#151515b3;color:#fff;font-family:DM Sans,sans-serif;font-style:bold;font-size:3.5em;align-content:center;font-weight:700;box-shadow:0 4px 8px #0000006e;text-align:center;z-index:10;pointer-events:none;opacity:0;transition:opacity .3s ease;text-shadow:-3px -3px 0 #DD5B22,3px -3px 0 #DD5B22,-3px 3px 0 #DD5B22,3px 3px 0 #DD5B22,0px 0px 0 #DD5B22}.feedback-box.show[_ngcontent-%COMP%]{display:block;pointer-events:auto;opacity:1}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f26522;text-align:center;position:absolute;top:0;left:0;width:100%;z-index:999}.spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}.spinner[_ngcontent-%COMP%]   .progress-ring[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate 1.5s linear infinite;width:80px;height:80px}.spinner[_ngcontent-%COMP%]   .progress-ring__circle[_ngcontent-%COMP%]{stroke:#fff;stroke-dasharray:220;stroke-dashoffset:0;animation:_ngcontent-%COMP%_dash 1.5s ease-in-out infinite;transform-origin:center;stroke-width:6;fill:transparent}@keyframes _ngcontent-%COMP%_rotate{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_dash{0%{stroke-dasharray:1,220;stroke-dashoffset:0}50%{stroke-dasharray:150,220;stroke-dashoffset:-75}to{stroke-dasharray:1,220;stroke-dashoffset:-220}}.spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-size:1.5em;color:#fff;margin:0}"]})};function H$(n,e){if(n&1&&Ie(0,"img",12),n&2){let t=Yt(2);je("src",t.currentImage,Oa)}}function z$(n,e){if(n&1&&Ie(0,"img",13),n&2){let t=Yt(2);je("src",t.currentStar,Oa)}}function q$(n,e){if(n&1&&(W(0,"div",9),An(1,H$,1,1,"img",10)(2,z$,1,1,"img",11),J()),n&2){let t=Yt();be(),je("ngIf",t.currentImage),be(),je("ngIf",t.currentStar)}}function G$(n,e){if(n&1&&(W(0,"div",14),Ce(1),J()),n&2){let t=Yt();be(),wt(" ",t.feedbackMessage," ")}}var gf=class n{constructor(e,t){this.router=e;this.route=t}selloImg=null;starImg=null;selloBackground="";ngOnInit(){this.route.queryParams.subscribe(e=>{let t=e.sello;t&&(this.selloImg=this.backgroundImages[`sello-${t}`]||null,this.starImg=this.backgroundStar[`sello-${t}`]||null,this.selloBackground="sello-"+t)})}feedbackMessage="\xA1Felicidades obtuviste un sello!";currentBackgroundClass="felicidades";backgroundImages={"sello-lima":"imgs/sello-Lima.png","sello-ica":"imgs/sello-Ica.png","sello-chiclayo":"imgs/sello-Chiclayo.png","sello-huancayo":"imgs/sello-Huancayo.png"};backgroundStar={"sello-lima":"imgs/estrella-lima.png","sello-ica":"imgs/estrella-ica.png","sello-chiclayo":"imgs/estrella-chiclayo.png","sello-huancayo":"imgs/estrella-huancayo.png"};currentImage="";currentStar="";actionBtn(){this.isSelloBackground()?this.redirectToPassport():this.setRandomSelloBackground()}isSelloBackground(){return this.backgroundImages.hasOwnProperty(this.currentBackgroundClass)}setRandomSelloBackground(){this.currentBackgroundClass=this.selloBackground,this.updateCurrentImage()}updateCurrentImage(){this.currentImage=this.selloImg||"",this.currentStar=this.starImg||""}redirectToPassport(){this.router.navigate(["/pasaporte"],{queryParams:{forceUpt:!0}})}updateFeedback(e){this.feedbackMessage=e}static \u0275fac=function(t){return new(t||n)(Z(ht),Z(Mt))};static \u0275cmp=lt({type:n,selectors:[["app-felicitacion"]],standalone:!0,features:[Rt],decls:10,vars:3,consts:[[1,"background-container"],[1,"header"],[1,"logo"],["src","imgs/wow-logo-horizontal.png","alt","Logo OWOW"],[1,"home-container"],[1,"home-box",3,"ngClass"],["class","content-container",4,"ngIf"],["class","feedback-text",4,"ngIf"],[1,"continue-button",3,"click"],[1,"content-container"],["alt","Sello","class","sello-image",3,"src",4,"ngIf"],["alt","Estrella","class","star-image",3,"src",4,"ngIf"],["alt","Sello",1,"sello-image",3,"src"],["alt","Estrella",1,"star-image",3,"src"],[1,"feedback-text"]],template:function(t,r){t&1&&(W(0,"div",0)(1,"div",1)(2,"div",2),Ie(3,"img",3),J()(),W(4,"div",4)(5,"div",5),An(6,q$,3,2,"div",6)(7,G$,2,1,"div",7),W(8,"button",8),xt("click",function(){return r.actionBtn()}),Ce(9,"Continuar"),J()()()()),t&2&&(be(5),je("ngClass",r.currentBackgroundClass),be(),je("ngIf",r.currentImage),be(),je("ngIf",!r.currentImage))},dependencies:[Xn,td,rd],styles:['body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;width:100vw;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;width:100%;box-sizing:border-box;color:#fff;margin-top:40px}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#ec671f}.logo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-bottom:10px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70%;object-fit:contain}.home-container[_ngcontent-%COMP%]{z-index:1;display:flex;justify-content:center;align-items:flex-end;height:98vh;width:100%;padding:0;box-sizing:border-box;position:relative;overflow:auto}.home-box.felicidades[_ngcontent-%COMP%]{position:relative;border-radius:20px 20px 0 0;padding:20px 30px;width:75%;max-width:320px;min-height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow:hidden;border:3px solid #ffffff;background:repeating-conic-gradient(#4a1861 0deg 6deg,#611f78 6deg 12deg)}.home-box.felicidades[_ngcontent-%COMP%]:before{content:"";position:absolute;top:40%;left:50%;width:200%;height:200%;background:repeating-conic-gradient(#4a1861 0deg 6deg,#611f78 6deg 12deg);transform:translate(-50%,-50%);z-index:0}.home-box.sello-lima[_ngcontent-%COMP%]{position:relative;border-radius:20px 20px 0 0;padding:20px 30px;width:75%;max-width:320px;min-height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow:hidden;border:3px solid #ffffff;background-image:url("./media/fondo-home-QM3F4GHF.jpg");background-size:cover;background-position:center -20px;background-repeat:no-repeat}.home-box.sello-ica[_ngcontent-%COMP%]{position:relative;border-radius:20px 20px 0 0;padding:20px 30px;width:75%;max-width:320px;min-height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow:hidden;border:3px solid #ffffff;background-image:url("./media/fondo-ica-FS32HJKM.jpg");background-size:cover;background-position:center -20px;background-repeat:no-repeat}.home-box.sello-chiclayo[_ngcontent-%COMP%]{position:relative;border-radius:20px 20px 0 0;padding:20px 30px;width:75%;max-width:320px;min-height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow:hidden;border:3px solid #ffffff;background-image:url("./media/fondo-chiclayo-KLNA4FYX.jpg");background-size:cover;background-position:center -20px;background-repeat:no-repeat}.home-box.sello-huancayo[_ngcontent-%COMP%]{position:relative;border-radius:20px 20px 0 0;padding:20px 30px;width:75%;max-width:320px;min-height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow:hidden;border:3px solid #ffffff;background-image:url("./media/fondo-huancayo-OFMI5XXL.jpg");background-size:cover;background-position:center -20px;background-repeat:no-repeat}.home-box[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1}.feedback-text[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;transform:translate(-50%,-50%);font-family:DM Sans,sans-serif;font-size:3rem;font-weight:700;color:#fff;text-align:center;-webkit-text-stroke:2px #f26522;text-shadow:-2px -2px 0 #DD5B22,2px -2px 0 #DD5B22,-2px 2px 0 #DD5B22,2px 2px 0 #DD5B22,0px 0px 0 #DD5B22}.content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;width:100%;height:70%;margin-bottom:10vh}.sello-image[_ngcontent-%COMP%]{width:180px;height:180px;border-radius:50%;box-shadow:0 8px 20px #00000059;object-fit:cover;z-index:2}.star-image[_ngcontent-%COMP%]{position:absolute;width:50vh;height:auto;z-index:1;pointer-events:none}.continue-button[_ngcontent-%COMP%]{display:block;margin:20px auto;padding:15px 30px;font-size:18px;font-weight:700;color:#fff;background-color:#dd5b22;border:none;border-radius:25px;box-shadow:0 4px 8px #0003;cursor:pointer;transition:all .2s ease}.continue-button[_ngcontent-%COMP%]:hover{background-color:#bb4a1c}.continue-button[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:0 2px 4px #0003}']})};var as=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(e,t){return b(this,null,function*(){let r=t.url,i=this.authService.getUsername();return i?(yield this.authService.hasSeenWelcome(i))?r?!0:this.router.createUrlTree(["/pasaporte"]):this.router.createUrlTree(["/bienvenida"],{queryParams:{nextUrl:r}}):this.router.createUrlTree(["/login"],{queryParams:{nextUrl:r}})})}static \u0275fac=function(t){return new(t||n)(X(Ot),X(ht))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};function W$(n,e){if(n&1&&(W(0,"div",16)(1,"div",17),Ie(2,"img",18),J()()),n&2){let t=e.$implicit,r=Yt();be(2),lm("alt","",t.key," sello"),je("src",r.getSelloImage(t.key),Oa)}}var mf=class n{constructor(e,t,r){this.authService=e;this.route=t;this.router=r}name="";sellosImgs={"sello-lima":"imgs/sello-Lima.png","sello-ica":"imgs/sello-Ica.png","sello-chiclayo":"imgs/sello-Chiclayo.png","sello-huancayo":"imgs/sello-Huancayo.png"};sellosUser={};ngOnInit(){return b(this,null,function*(){this.name=this.authService.getName();let e=this.authService.getUsername();try{let r=(yield hp(this.route.queryParams)).forceUpt==="true";this.sellosUser=yield this.authService.getUserSellos(e,r||!1),console.log("Sellos obtenidos:",this.sellosUser)}catch(t){console.error("Error al obtener los sellos:",t)}})}getSelloImage(e){return this.sellosImgs["sello-"+e]||"imgs/default.png"}logout(){localStorage.clear(),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(Z(Ot),Z(Mt),Z(ht))};static \u0275cmp=lt({type:n,selectors:[["app-home"]],standalone:!0,features:[Rt],decls:21,vars:4,consts:[[1,"background-container"],[1,"logout-container"],[1,"logout-button",3,"click"],[1,"header"],[1,"greeting"],[1,"morning-text"],[1,"user-name"],[1,"profile-image"],["src","imgs/user.png","alt","Perfil de Usuario"],[1,"home-container"],[1,"home-box"],[1,"logo"],["src","imgs/wow-simple-logo.png","alt","Logo OWOW"],[1,"home-title"],[1,"seal-container"],["class","seal-item",4,"ngFor","ngForOf"],[1,"seal-item"],[1,"seal-circle"],[3,"src","alt"]],template:function(t,r){t&1&&(W(0,"div",0)(1,"div",1)(2,"button",2),xt("click",function(){return r.logout()}),Ce(3,"Cerrar sesi\xF3n"),J()(),W(4,"div",3)(5,"div",4)(6,"p",5),Ce(7,"\xA1Buenos d\xEDas!"),J(),W(8,"h2",6),Ce(9),J()(),W(10,"div",7),Ie(11,"img",8),J()(),W(12,"div",9)(13,"div",10)(14,"div",11),Ie(15,"img",12),J(),W(16,"h2",13),Ce(17,"Pasaporte WOW"),J(),W(18,"div",14),An(19,W$,3,3,"div",15),ND(20,"keyvalue"),J()()()()),t&2&&(be(9),wt("Hola ",r.name,""),be(10),je("ngForOf",PD(20,2,r.sellosUser)))},dependencies:[Xn,nd,tC],styles:['body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;width:100vw;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;width:100%;box-sizing:border-box;color:#fff;margin-top:px}.greeting[_ngcontent-%COMP%]{display:flex;flex-direction:column}.morning-text[_ngcontent-%COMP%]{font-size:20px;font-family:DM Sans,sans-serif;font-style:normal;margin:0;color:#fff}.user-name[_ngcontent-%COMP%]{font-size:26px;font-family:DM Sans,sans-serif;font-style:bold;margin:8px 0 0}.profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;border:2px solid #ffffff}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#ec671f}.home-container[_ngcontent-%COMP%]{z-index:1;display:flex;justify-content:center;align-items:flex-end;height:100vh;width:100%;padding:0;box-sizing:border-box;position:relative;overflow:auto}.background-image[_ngcontent-%COMP%]{position:absolute;top:45%;left:50%;transform:translate(-50%,-50%);width:auto;height:auto;max-width:87%;max-height:100%;z-index:0;pointer-events:none}.home-box[_ngcontent-%COMP%]{background-image:url("./media/fondo-home-QM3F4GHF.jpg");background-size:cover;background-position:center -20px;background-repeat:no-repeat;border-radius:20px 20px 0 0;padding:20px 30px 40px;width:75%;max-width:320px;min-height:90vh;box-shadow:0 -4px 12px #0000001a;text-align:left;display:flex;flex-direction:column;justify-content:flex-start;border:3px solid #ffffff}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12vh;object-fit:contain}.home-title[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:bold;font-size:24px;color:#fff;font-weight:700;text-align:center;margin:20px 0}.seal-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:20px;margin-top:30px}.seal-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}.seal-circle[_ngcontent-%COMP%]{width:17vh;height:17vh;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #0003;overflow:hidden}.seal-circle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.seal-text[_ngcontent-%COMP%]{font-size:.9rem;font-family:DM Sans,sans-serif;font-style:bold;font-weight:700;color:#fff;margin-top:14px}.logout-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;padding:10px 20px;box-sizing:border-box}.logout-button[_ngcontent-%COMP%]{background-color:#6a4c93;color:#fff;border:none;border-radius:25px;padding:10px 15px;font-size:14px;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .2s ease}.logout-button[_ngcontent-%COMP%]:hover{background-color:#5a3b7d}.logout-button[_ngcontent-%COMP%]:active{transform:scale(.95)}']})};function K$(n,e){if(n&1&&(W(0,"div",2)(1,"div",3)(2,"div",4),Ie(3,"img",5),J()(),W(4,"div",6)(5,"div",7)(6,"h2",8),Ce(7),J(),W(8,"div",9)(9,"div",10),Ie(10,"img",11),J(),W(11,"p",12),Ce(12),J()()()()()),n&2){let t=Yt();be(7),Zn(t.welcomeTitle),be(5),wt(" ",t.welcomeMessage," ")}}function Q$(n,e){n&1&&(W(0,"div",13),Ie(1,"div",14),W(2,"p"),Ce(3,"Cargando..."),J()())}var yf=class n{constructor(e,t,r){this.route=e;this.router=t;this.authService=r}welcomeTitle="";welcomeMessage="";username="";securityUser="";isLoading=!0;ngOnInit(){return b(this,null,function*(){try{if(this.username=this.route.snapshot.paramMap.get("username")||"Usuario desconocido",this.securityUser=this.authService.getUsername()||"",!(yield this.authService.IsSecurityAccess(this.securityUser))){console.warn(`El usuario ${this.username} no tiene acceso de seguridad.`),this.router.navigate(["/pasaporte"]),this.isLoading=!1;return}let t=yield this.authService.registerAttendance(this.username),r=t.split(".")[0];t.includes("Acceso permitido")?(this.welcomeTitle="Acceso Permitido",this.welcomeMessage=r):(this.welcomeTitle="Acceso Denegado",this.welcomeMessage=r)}catch(e){console.error("Error al procesar la asistencia:",e),this.welcomeTitle="Error",this.welcomeMessage="Ocurri\xF3 un problema. Intenta nuevamente."}finally{this.isLoading=!1}})}static \u0275fac=function(t){return new(t||n)(Z(Mt),Z(ht),Z(Ot))};static \u0275cmp=lt({type:n,selectors:[["app-qr-verification"]],standalone:!0,features:[Rt],decls:2,vars:2,consts:[["class","background-container",4,"ngIf"],["class","loader-container",4,"ngIf"],[1,"background-container"],[1,"header"],[1,"logo"],["src","imgs/wow-logo-horizontal.png","alt","Logo OWOW"],[1,"welcome-container"],[1,"welcome-box"],[1,"welcome-title"],[1,"welcome-content"],[1,"profile-image"],["src","imgs/user.png","alt","Perfil de Usuario"],[1,"txt-content"],[1,"loader-container"],[1,"spinner"]],template:function(t,r){t&1&&An(0,K$,13,2,"div",0)(1,Q$,4,0,"div",1),t&2&&(je("ngIf",!r.isLoading),be(),je("ngIf",r.isLoading))},dependencies:[Xn,rd],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;width:100vw;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;width:100%;box-sizing:border-box;color:#fff;margin-top:40px}.profile-image[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px}.profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:180px;border-radius:50%;border:2px solid #ffffff}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#ec671f}.welcome-container[_ngcontent-%COMP%]{z-index:1;display:flex;justify-content:center;align-items:flex-end;height:100vh;width:100%;padding:0;box-sizing:border-box;position:relative;overflow:auto}.welcome-box[_ngcontent-%COMP%]{background-color:#611f78;border-radius:20px 20px 0 0;padding:20px;width:90%;height:calc(100vh - 10px);box-sizing:border-box;box-shadow:0 -4px 12px #0000001a;border:3px solid #ffffff}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:160px;object-fit:contain}.welcome-title[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:bold;font-size:24px;height:auto;margin-top:10px;margin-bottom:10px;color:#fff;font-weight:700;text-align:center}.welcome-content[_ngcontent-%COMP%]{flex-direction:column}.txt-content[_ngcontent-%COMP%]{font-family:DM Sans,sans-serif;font-style:normal;font-size:14px;overflow-y:auto;height:10vh;padding:10px;color:#fff;font-weight:400;margin:0;text-align:center}.continue-button[_ngcontent-%COMP%]{display:block;margin:10px auto 0;padding:15px 30px;font-size:18px;font-weight:700;color:#fff;background-color:#dd5b22;border:none;border-radius:25px;box-shadow:0 4px 8px #0003;cursor:pointer;transition:all .2s ease}.continue-button[_ngcontent-%COMP%]:hover{background-color:#bb4a1c}.continue-button[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:0 2px 4px #0003}.loader-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;background-color:#f9f9f9}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid #ccc;border-top:5px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var Gx=[{path:"login",component:df},{path:"pasaporte",component:mf,canActivate:[as]},{path:"bienvenida",component:hf},{path:"trivia/:tema/:sello",component:pf,canActivate:[as]},{path:"felicitacion",component:gf,canActivate:[as]},{path:"qr-verification/:username",component:yf,canActivate:[as]},{path:"",redirectTo:"pasaporte",pathMatch:"full"}];var Jx="firebasestorage.googleapis.com",Y$="storageBucket",Z$=2*60*1e3,J$=10*60*1e3;var Vn=class n extends Nt{constructor(e,t,r=0){super(Dw(e),`Firebase Storage: ${t} (${Dw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},dr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(dr||{});function Dw(n){return"storage/"+n}function X$(){let n="An unknown error occurred, please check the error payload for server response.";return new Vn(dr.UNKNOWN,n)}function eH(){return new Vn(dr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tH(){return new Vn(dr.CANCELED,"User canceled the upload/download.")}function nH(n){return new Vn(dr.INVALID_URL,"Invalid URL '"+n+"'.")}function rH(n){return new Vn(dr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Wx(n){return new Vn(dr.INVALID_ARGUMENT,n)}function Xx(){return new Vn(dr.APP_DELETED,"The Firebase app was deleted.")}function iH(n){return new Vn(dr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var lr=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw rH(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(H){H.path_=decodeURIComponent(H.path)}let h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),T={bucket:1,path:3},M=t===Jx?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",k=new RegExp(`^https?://${M}/${i}/${R}`,"i"),F=[{regex:a,indices:c,postModify:s},{regex:v,indices:T,postModify:l},{regex:k,indices:{bucket:1,path:2},postModify:l}];for(let H=0;H<F.length;H++){let ne=F[H],$=ne.regex.exec(e);if($){let I=$[ne.indices.bucket],y=$[ne.indices.path];y||(y=""),r=new n(I,y),ne.postModify(r);break}}if(r==null)throw nH(e);return r}},Cw=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function sH(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function h(...R){l||(l=!0,e.apply(null,R))}function p(R){i=setTimeout(()=>{i=null,n(v,c())},R)}function m(){s&&clearTimeout(s)}function v(R,...k){if(l){m();return}if(R){m(),h.call(null,R,...k);return}if(c()||o){m(),h.call(null,R,...k);return}r<64&&(r*=2);let F;a===1?(a=2,F=0):F=(r+Math.random())*1e3,p(F)}let T=!1;function M(R){T||(T=!0,m(),!l&&(i!==null?(R||(a=2),clearTimeout(i),p(0)):R||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,M(!0)},t),M}function oH(n){n(!1)}function aH(n){return n!==void 0}function Kx(n,e,t,r){if(r<e)throw Wx(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Wx(`Invalid value for '${n}'. Expected ${t} or less.`)}function cH(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Tw=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Tw||{});function uH(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var Sw=class{constructor(e,t,r,i,s,o,a,c,l,h,p,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,T)=>{this.resolve_=v,this.reject_=T,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new qo(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Tw.NO_ERROR,c=s.getStatus();if(!a||uH(c,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===Tw.ABORT;r(!1,new qo(!1,null,h));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new qo(l,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());aH(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=X$();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?Xx():tH();o(c)}else{let c=eH();o(c)}};this.canceled_?t(!1,new qo(!1,null,!0)):this.backoffId_=sH(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&oH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},qo=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function lH(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function dH(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hH(n,e){e&&(n["X-Firebase-GMPID"]=e)}function fH(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function pH(n,e,t,r,i,s,o=!0){let a=cH(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return hH(l,e),lH(l,t),dH(l,s),fH(l,r),new Sw(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function gH(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function mH(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var j7=256*1024;var Aw=class n{constructor(e,t){this._service=e,t instanceof lr?this._location=t:this._location=lr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new lr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mH(this._location.path)}get storage(){return this._service}get parent(){let e=gH(this._location.path);if(e===null)return null;let t=new lr(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw iH(e)}};function Qx(n,e){let t=e?.[Y$];return t==null?null:lr.makeFromBucketSpec(t,n)}function yH(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Nd(i,n.app.options.projectId))}var xw=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Jx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Z$,this._maxUploadRetryTime=J$,this._requests=new Set,i!=null?this._bucket=lr.makeFromBucketSpec(i,this._host):this._bucket=Qx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=lr.makeFromBucketSpec(this._url,e):this._bucket=Qx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Kx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Kx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return b(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return b(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Aw(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Cw(Xx());{let o=pH(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return b(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},Yx="@firebase/storage",Zx="0.13.2";var eR="storage";function tR(n=Ni(),e){n=jt(n);let r=fc(n,eR).getImmediate({identifier:e}),i=Md("storage");return i&&nR(r,...i),r}function nR(n,e,t,r={}){yH(n,e,t,r)}function vH(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new xw(t,r,i,e,Lr)}function _H(){Mn(new Pt(eR,vH,"PUBLIC").setMultipleInstances(!0)),ke(Yx,Zx,""),ke(Yx,Zx,"esm2017")}_H();var Xc=class{constructor(e){return e}},rR="storage",Rw=class{constructor(){return ki(rR)}};var Mw=new Q("angularfire2.storage-instances");function wH(n,e){let t=pc(rR,n,e);return t&&new Xc(t)}function IH(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Xc(r)}}var EH={provide:Rw,deps:[[new rt,Mw]]},bH={provide:Xc,useFactory:wH,deps:[[new rt,Mw],ir]};function iR(n,...e){return ke("angularfire",Vr.full,"gcs"),Sn([bH,EH,{provide:Mw,useFactory:IH(n),multi:!0,deps:[Te,Tt,Fi,Li,[new rt,co],[new rt,Oi],...e]}])}var sR=Bt(tR,!0);var oR={providers:[jD({eventCoalescing:!0}),WC(Gx),UT(()=>jT({projectId:"feria-wow",appId:"1:649771887294:web:171704f2e4a7ff4d35ccef",storageBucket:"feria-wow.firebasestorage.app",apiKey:"AIzaSyCHJiHlDv1Fk2JS7_v6UwlzutaM9cmU-bE",authDomain:"feria-wow.firebaseapp.com",messagingSenderId:"649771887294",measurementId:"G-WM7LLK7RJ4"})),Bx(()=>Hx()),iR(()=>sR())]};var vf=class n{title="feria-wow-passport";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lt({type:n,selectors:[["app-root"]],standalone:!0,features:[Rt],decls:1,vars:0,template:function(t,r){t&1&&Ie(0,"router-outlet")},dependencies:[uy],styles:['@font-face{font-family:DM Sans;src:url("./media/DMSans-Regular-EVH27TZS.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:DM Sans;src:url("./media/DMSans-Bold-LWHRSIJO.ttf") format("truetype");font-weight:700;font-style:normal}']})};lC(vf,oR).catch(n=>console.error(n));
