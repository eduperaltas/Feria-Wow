var zR=Object.defineProperty,GR=Object.defineProperties;var WR=Object.getOwnPropertyDescriptors;var ew=Object.getOwnPropertySymbols,KR=Object.getPrototypeOf,QR=Object.prototype.hasOwnProperty,YR=Object.prototype.propertyIsEnumerable,ZR=Reflect.get;var tw=(n,e,t)=>e in n?zR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})QR.call(e,t)&&tw(n,t,e[t]);if(ew)for(var t of ew(e))YR.call(e,t)&&tw(n,t,e[t]);return n},le=(n,e)=>GR(n,WR(e));var Ef=(n,e,t)=>ZR(KR(n),t,e);var D=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function nw(n,e){return Object.is(n,e)}var $e=null,su=!1,ou=1,On=Symbol("SIGNAL");function ye(n){let e=$e;return $e=n,e}function rw(){return $e}var ta={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Cf(n){if(su)throw new Error("");if($e===null)return;$e.consumerOnSignalRead(n);let e=$e.nextProducerIndex++;if(lu($e),e<$e.producerNode.length&&$e.producerNode[e]!==n&&ea($e)){let t=$e.producerNode[e];uu(t,$e.producerIndexOfThis[e])}$e.producerNode[e]!==n&&($e.producerNode[e]=n,$e.producerIndexOfThis[e]=ea($e)?aw(n,$e,e):0),$e.producerLastReadVersion[e]=n.version}function JR(){ou++}function iw(n){if(!(ea(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ou)){if(!n.producerMustRecompute(n)&&!Sf(n)){n.dirty=!1,n.lastCleanEpoch=ou;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ou}}function sw(n){if(n.liveConsumerNode===void 0)return;let e=su;su=!0;try{for(let t of n.liveConsumerNode)t.dirty||XR(t)}finally{su=e}}function ow(){return $e?.consumerAllowSignalWrites!==!1}function XR(n){n.dirty=!0,sw(n),n.consumerMarkedDirty?.(n)}function cu(n){return n&&(n.nextProducerIndex=0),ye(n)}function Tf(n,e){if(ye(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ea(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)uu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Sf(n){lu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(iw(t),r!==t.version))return!0}return!1}function Af(n){if(lu(n),ea(n))for(let e=0;e<n.producerNode.length;e++)uu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function aw(n,e,t){if(cw(n),n.liveConsumerNode.length===0&&uw(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=aw(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function uu(n,e){if(cw(n),n.liveConsumerNode.length===1&&uw(n))for(let r=0;r<n.producerNode.length;r++)uu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];lu(i),i.producerIndexOfThis[r]=e}}function ea(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function lu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function cw(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function uw(n){return n.producerNode!==void 0}function lw(n){let e=Object.create(eM);e.computation=n;let t=()=>{if(iw(e),Cf(e),e.value===au)throw e.error;return e.value};return t[On]=e,t}var Df=Symbol("UNSET"),bf=Symbol("COMPUTING"),au=Symbol("ERRORED"),eM=le(L({},ta),{value:Df,dirty:!0,error:null,equal:nw,producerMustRecompute(n){return n.value===Df||n.value===bf},producerRecomputeValue(n){if(n.value===bf)throw new Error("Detected cycle in computations.");let e=n.value;n.value=bf;let t=cu(n),r;try{r=n.computation()}catch(i){r=au,n.error=i}finally{Tf(n,t)}if(e!==Df&&e!==au&&r!==au&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function tM(){throw new Error}var dw=tM;function hw(){dw()}function fw(n){dw=n}var nM=null;function pw(n){let e=Object.create(mw);e.value=n;let t=()=>(Cf(e),e.value);return t[On]=e,t}function Rf(n,e){ow()||hw(),n.equal(n.value,e)||(n.value=e,rM(n))}function gw(n,e){ow()||hw(),Rf(n,e(n.value))}var mw=le(L({},ta),{equal:nw,value:void 0});function rM(n){n.version++,JR(),sw(n),nM?.()}function ee(n){return typeof n=="function"}function rs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var du=rs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Kr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ke=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(s){e=s instanceof du?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{yw(s)}catch(o){e=e??[],o instanceof du?e=[...e,...o.errors]:e.push(o)}}if(e)throw new du(e)}}add(e){var t;if(e&&e!==this)if(this.closed)yw(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Kr(t,e)}remove(e){let{_finalizers:t}=this;t&&Kr(t,e),e instanceof n&&e._removeParent(this)}};ke.EMPTY=(()=>{let n=new ke;return n.closed=!0,n})();var Mf=ke.EMPTY;function hu(n){return n instanceof ke||n&&"closed"in n&&ee(n.remove)&&ee(n.add)&&ee(n.unsubscribe)}function yw(n){ee(n)?n():n.unsubscribe()}var Qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var is={setTimeout(n,e,...t){let{delegate:r}=is;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=is;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function fu(n){is.setTimeout(()=>{let{onUnhandledError:e}=Qt;if(e)e(n);else throw n})}function na(){}var vw=Nf("C",void 0,void 0);function _w(n){return Nf("E",void 0,n)}function Iw(n){return Nf("N",n,void 0)}function Nf(n,e,t){return{kind:n,value:e,error:t}}var Qr=null;function ss(n){if(Qt.useDeprecatedSynchronousErrorHandling){let e=!Qr;if(e&&(Qr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Qr;if(Qr=null,t)throw r}}else n()}function ww(n){Qt.useDeprecatedSynchronousErrorHandling&&Qr&&(Qr.errorThrown=!0,Qr.error=n)}var Yr=class extends ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hu(e)&&e.add(this)):this.destination=oM}static create(e,t,r){return new os(e,t,r)}next(e){this.isStopped?Pf(Iw(e),this):this._next(e)}error(e){this.isStopped?Pf(_w(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Pf(vw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},iM=Function.prototype.bind;function xf(n,e){return iM.call(n,e)}var Of=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){pu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){pu(r)}else pu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){pu(t)}}},os=class extends Yr{constructor(e,t,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Qt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&xf(e.next,s),error:e.error&&xf(e.error,s),complete:e.complete&&xf(e.complete,s)}):i=e}this.destination=new Of(i)}};function pu(n){Qt.useDeprecatedSynchronousErrorHandling?ww(n):fu(n)}function sM(n){throw n}function Pf(n,e){let{onStoppedNotification:t}=Qt;t&&is.setTimeout(()=>t(n,e))}var oM={closed:!0,next:na,error:sM,complete:na};var as=typeof Symbol=="function"&&Symbol.observable||"@@observable";function St(n){return n}function kf(...n){return Ff(n)}function Ff(n){return n.length===0?St:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=cM(t)?t:new os(t,r,i);return ss(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Ew(r),new r((i,s)=>{let o=new os({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[as](){return this}pipe(...t){return Ff(t)(this)}toPromise(t){return t=Ew(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Ew(n){var e;return(e=n??Qt.Promise)!==null&&e!==void 0?e:Promise}function aM(n){return n&&ee(n.next)&&ee(n.error)&&ee(n.complete)}function cM(n){return n&&n instanceof Yr||aM(n)&&hu(n)}function Lf(n){return ee(n?.lift)}function ge(n){return e=>{if(Lf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new Vf(n,e,t,r,i)}var Vf=class extends Yr{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function cs(){return ge((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var us=class extends pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Lf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ke;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ke.EMPTY)}return e}refCount(){return cs()(this)}};var Dw=rs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Je=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new gu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Dw}next(t){ss(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ss(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ss(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Mf:(this.currentObservers=null,s.push(t),new ke(()=>{this.currentObservers=null,Kr(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new pe;return t.source=this,t}}return n.create=(e,t)=>new gu(e,t),n})(),gu=class extends Je{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Mf}};var Xe=class extends Je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Uf={now(){return(Uf.delegate||Date).now()},delegate:void 0};var mu=class extends ke{constructor(e,t){super()}schedule(e,t=0){return this}};var ra={setInterval(n,e,...t){let{delegate:r}=ra;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ra;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ls=class extends mu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return ra.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ra.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Kr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ds=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ds.now=Uf.now;var hs=class extends ds{constructor(e,t=ds.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var jf=new hs(ls);var yu=class extends ls{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var vu=class extends hs{};var Bf=new vu(yu);var At=new pe(n=>n.complete());function bw(n){return n&&ee(n.schedule)}function Cw(n){return n[n.length-1]}function _u(n){return ee(Cw(n))?n.pop():void 0}function ar(n){return bw(Cw(n))?n.pop():void 0}function $f(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Sw(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function c(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function Tw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zr(n){return this instanceof Zr?(this.v=n,this):new Zr(n)}function Aw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(T){return Promise.resolve(T).then(v,p)}}function a(v,T){r[v]&&(i[v]=function(N){return new Promise(function(M,k){s.push([v,N,M,k])>1||c(v,N)})},T&&(i[v]=T(i[v])))}function c(v,T){try{l(r[v](T))}catch(N){m(s[0][3],N)}}function l(v){v.value instanceof Zr?Promise.resolve(v.value.v).then(h,p):m(s[0][2],v)}function h(v){c("next",v)}function p(v){c("throw",v)}function m(v,T){v(T),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Rw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Tw=="function"?Tw(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Iu=n=>n&&typeof n.length=="number"&&typeof n!="function";function wu(n){return ee(n?.then)}function Eu(n){return ee(n[as])}function Du(n){return Symbol.asyncIterator&&ee(n?.[Symbol.asyncIterator])}function bu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function uM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Cu=uM();function Tu(n){return ee(n?.[Cu])}function Su(n){return Aw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Zr(t.read());if(i)return yield Zr(void 0);yield yield Zr(r)}}finally{t.releaseLock()}})}function Au(n){return ee(n?.getReader)}function Ue(n){if(n instanceof pe)return n;if(n!=null){if(Eu(n))return lM(n);if(Iu(n))return dM(n);if(wu(n))return hM(n);if(Du(n))return Mw(n);if(Tu(n))return fM(n);if(Au(n))return pM(n)}throw bu(n)}function lM(n){return new pe(e=>{let t=n[as]();if(ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dM(n){return new pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function hM(n){return new pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,fu)})}function fM(n){return new pe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Mw(n){return new pe(e=>{gM(n,e).catch(t=>e.error(t))})}function pM(n){return Mw(Su(n))}function gM(n,e){var t,r,i,s;return Sw(this,void 0,void 0,function*(){try{for(t=Rw(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function vt(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function cr(n,e=0){return ge((t,r)=>{t.subscribe(de(r,i=>vt(r,n,()=>r.next(i),e),()=>vt(r,n,()=>r.complete(),e),i=>vt(r,n,()=>r.error(i),e)))})}function ur(n,e=0){return ge((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Nw(n,e){return Ue(n).pipe(ur(e),cr(e))}function xw(n,e){return Ue(n).pipe(ur(e),cr(e))}function Pw(n,e){return new pe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Ow(n,e){return new pe(t=>{let r;return vt(t,e,()=>{r=n[Cu](),vt(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function Ru(n,e){if(!n)throw new Error("Iterable cannot be null");return new pe(t=>{vt(t,e,()=>{let r=n[Symbol.asyncIterator]();vt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function kw(n,e){return Ru(Su(n),e)}function Fw(n,e){if(n!=null){if(Eu(n))return Nw(n,e);if(Iu(n))return Pw(n,e);if(wu(n))return xw(n,e);if(Du(n))return Ru(n,e);if(Tu(n))return Ow(n,e);if(Au(n))return kw(n,e)}throw bu(n)}function Fe(n,e){return e?Fw(n,e):Ue(n)}function ne(...n){let e=ar(n);return Fe(n,e)}function fs(n,e){let t=ee(n)?n:()=>n,r=i=>i.error(t());return new pe(e?i=>e.schedule(r,0,i):r)}function Hf(n){return!!n&&(n instanceof pe||ee(n.lift)&&ee(n.subscribe))}var kn=rs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function oe(n,e){return ge((t,r)=>{let i=0;t.subscribe(de(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:mM}=Array;function yM(n,e){return mM(e)?n(...e):n(e)}function Mu(n){return oe(e=>yM(n,e))}var{isArray:vM}=Array,{getPrototypeOf:_M,prototype:IM,keys:wM}=Object;function Nu(n){if(n.length===1){let e=n[0];if(vM(e))return{args:e,keys:null};if(EM(e)){let t=wM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function EM(n){return n&&typeof n=="object"&&_M(n)===IM}function xu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Pu(...n){let e=ar(n),t=_u(n),{args:r,keys:i}=Nu(n);if(r.length===0)return Fe([],e);let s=new pe(DM(r,e,i?o=>xu(i,o):St));return t?s.pipe(Mu(t)):s}function DM(n,e,t=St){return r=>{Lw(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Lw(e,()=>{let l=Fe(n[c],e),h=!1;l.subscribe(de(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Lw(n,e,t){n?vt(t,n,e):e()}function Vw(n,e,t,r,i,s,o,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},v=N=>l<r?T(N):c.push(N),T=N=>{s&&e.next(N),l++;let M=!1;Ue(t(N,h++)).subscribe(de(e,k=>{i?.(k),s?v(k):e.next(k)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<r;){let k=c.shift();o?vt(e,o,()=>T(k)):T(k)}m()}catch(k){e.error(k)}}))};return n.subscribe(de(e,v,()=>{p=!0,m()})),()=>{a?.()}}function He(n,e,t=1/0){return ee(e)?He((r,i)=>oe((s,o)=>e(r,s,i,o))(Ue(n(r,i))),t):(typeof e=="number"&&(t=e),ge((r,i)=>Vw(r,i,n,t)))}function qf(n=1/0){return He(St,n)}function Uw(){return qf(1)}function ps(...n){return Uw()(Fe(n,ar(n)))}function Ou(n){return new pe(e=>{Ue(n()).subscribe(e)})}function zf(...n){let e=_u(n),{args:t,keys:r}=Nu(n),i=new pe(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let h=0;h<o;h++){let p=!1;Ue(t[h]).subscribe(de(s,m=>{p||(p=!0,l--),a[h]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||s.next(r?xu(r,a):a),s.complete())}))}});return e?i.pipe(Mu(e)):i}function Yt(n,e){return ge((t,r)=>{let i=0;t.subscribe(de(r,s=>n.call(e,s,i++)&&r.next(s)))})}function lr(n){return ge((e,t)=>{let r=null,i=!1,s;r=e.subscribe(de(t,void 0,void 0,o=>{s=Ue(n(o,lr(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function jw(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(de(o,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function gs(n,e){return ee(e)?He(n,e,1):He(n,1)}function dr(n){return ge((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Fn(n){return n<=0?()=>At:ge((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Gf(n){return oe(()=>n)}function ku(n=bM){return ge((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function bM(){return new kn}function ia(n){return ge((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ln(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Yt((i,s)=>n(i,s,r)):St,Fn(1),t?dr(e):ku(()=>new kn))}function ms(n){return n<=0?()=>At:ge((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Wf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Yt((i,s)=>n(i,s,r)):St,ms(1),t?dr(e):ku(()=>new kn))}function Kf(n,e){return ge(jw(n,e,arguments.length>=2,!0))}function Qf(...n){let e=ar(n);return ge((t,r)=>{(e?ps(n,t,e):ps(n,t)).subscribe(r)})}function Zt(n,e){return ge((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(de(r,c=>{i?.unsubscribe();let l=0,h=s++;Ue(n(c,h)).subscribe(i=de(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Yf(n){return ge((e,t)=>{Ue(n).subscribe(de(t,()=>t.complete(),na)),!t.closed&&e.subscribe(t)})}function qe(n,e,t){let r=ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?ge((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(de(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):St}var CM="https://g.co/ng/security#xss",K=class extends Error{constructor(e,t){super(Xp(e,t)),this.code=e}};function Xp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function ga(n){return{toString:n}.toString()}var Fu="__parameters__";function TM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function CE(n,e,t){return ga(()=>{let r=TM(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,h){let p=c.hasOwnProperty(Fu)?c[Fu]:Object.defineProperty(c,Fu,{value:[]})[Fu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Te(n){for(let e in n)if(n[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function SM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function It(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(It).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Bw(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var AM=Te({__forward_ref__:Te});function ma(n){return n.__forward_ref__=ma,n.toString=function(){return It(this())},n}function ht(n){return TE(n)?n():n}function TE(n){return typeof n=="function"&&n.hasOwnProperty(AM)&&n.__forward_ref__===ma}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ci(n){return{providers:n.providers||[],imports:n.imports||[]}}function gl(n){return $w(n,AE)||$w(n,RE)}function SE(n){return gl(n)!==null}function $w(n,e){return n.hasOwnProperty(e)?n[e]:null}function RM(n){let e=n&&(n[AE]||n[RE]);return e||null}function Hw(n){return n&&(n.hasOwnProperty(qw)||n.hasOwnProperty(MM))?n[qw]:null}var AE=Te({\u0275prov:Te}),qw=Te({\u0275inj:Te}),RE=Te({ngInjectableDef:Te}),MM=Te({ngInjectorDef:Te}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ME(n){return n&&!!n.\u0275providers}var NM=Te({\u0275cmp:Te}),xM=Te({\u0275dir:Te}),PM=Te({\u0275pipe:Te}),OM=Te({\u0275mod:Te}),zu=Te({\u0275fac:Te}),aa=Te({__NG_ELEMENT_ID__:Te}),zw=Te({__NG_ENV_ID__:Te});function NE(n){return typeof n=="string"?n:n==null?"":String(n)}function kM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():NE(n)}function FM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new K(-200,n)}function eg(n,e){throw new K(-201,!1)}var ie=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ie||{}),lp;function xE(){return lp}function _t(n){let e=lp;return lp=n,e}function PE(n,e,t){let r=gl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ie.Optional)return null;if(e!==void 0)return e;eg(n,"Injector")}var LM={},ca=LM,dp="__NG_DI_FLAG__",Gu="ngTempTokenPath",VM="ngTokenPath",UM=/\n/gm,jM="\u0275",Gw="__source",Is;function BM(){return Is}function hr(n){let e=Is;return Is=n,e}function $M(n,e=ie.Default){if(Is===void 0)throw new K(-203,!1);return Is===null?PE(n,void 0,e):Is.get(n,e&ie.Optional?null:void 0,e)}function Y(n,e=ie.Default){return(xE()||$M)(ht(n),e)}function V(n,e=ie.Default){return Y(n,ml(e))}function ml(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function hp(n){let e=[];for(let t=0;t<n.length;t++){let r=ht(n[t]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let i,s=ie.Default;for(let o=0;o<r.length;o++){let a=r[o],c=HM(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(Y(i,s))}else e.push(Y(r))}return e}function OE(n,e){return n[dp]=e,n.prototype[dp]=e,n}function HM(n){return n[dp]}function qM(n,e,t,r){let i=n[Gu];throw e[Gw]&&i.unshift(e[Gw]),n.message=zM(`
`+n.message,i,t,r),n[VM]=i,n[Gu]=null,n}function zM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==jM?n.slice(2):n;let i=It(e);if(Array.isArray(e))i=e.map(It).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):It(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(UM,`
  `)}`}var at=OE(CE("Optional"),8);var kE=OE(CE("SkipSelf"),4);function Xr(n,e){let t=n.hasOwnProperty(zu);return t?n[zu]:null}function tg(n,e){n.forEach(t=>Array.isArray(t)?tg(t,e):e(t))}function FE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Wu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function GM(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function WM(n,e,t){let r=ya(n,e);return r>=0?n[r|1]=t:(r=~r,GM(n,r,e,t)),r}function Zf(n,e){let t=ya(n,e);if(t>=0)return n[t|1]}function ya(n,e){return KM(n,e,1)}function KM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Es={},Lt=[],Ds=new W(""),LE=new W("",-1),VE=new W(""),Ku=class{get(e,t=ca){if(t===ca){let r=new Error(`NullInjectorError: No provider for ${It(e)}!`);throw r.name="NullInjectorError",r}return t}},UE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(UE||{}),fn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(fn||{}),gr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(gr||{});function QM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function fp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];ZM(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function YM(n){return n===3||n===4||n===6}function ZM(n){return n.charCodeAt(0)===64}function ua(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Ww(n,t,i,null,e[++r]):Ww(n,t,i,null,null))}}return n}function Ww(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var jE="ng-template";function JM(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&QM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(ng(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function ng(n){return n.type===4&&n.value!==jE}function XM(n,e,t){let r=n.type===4&&!t?jE:n.value;return e===r}function eN(n,e,t){let r=4,i=n.attrs,s=i!==null?rN(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Jt(r)&&!Jt(c))return!1;if(o&&Jt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!XM(n,c,t)||c===""&&e.length===1){if(Jt(r))return!1;o=!0}}else if(r&8){if(i===null||!JM(n,i,c,t)){if(Jt(r))return!1;o=!0}}else{let l=e[++a],h=tN(c,i,ng(n),t);if(h===-1){if(Jt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Jt(r))return!1;o=!0}}}}return Jt(r)||o}function Jt(n){return(n&1)===0}function tN(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return iN(e,n)}function nN(n,e,t=!1){for(let r=0;r<e.length;r++)if(eN(n,e[r],t))return!0;return!1}function rN(n){for(let e=0;e<n.length;e++){let t=n[e];if(YM(t))return e}return n.length}function iN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Kw(n,e){return n?":not("+e.trim()+")":e}function sN(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Jt(o)&&(e+=Kw(s,i),i=""),r=o,s=s||!Jt(r);t++}return i!==""&&(e+=Kw(s,i)),e}function oN(n){return n.map(sN).join(",")}function aN(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Jt(i))break;i=s}r++}return{attrs:e,classes:t}}function Bt(n){return ga(()=>{let e=GE(n),t=le(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===UE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||fn.Emulated,styles:n.styles||Lt,_:null,schemas:n.schemas||null,tView:null,id:""});WE(t);let r=n.dependencies;return t.directiveDefs=Yw(r,!1),t.pipeDefs=Yw(r,!0),t.id=lN(t),t})}function cN(n){return ei(n)||$E(n)}function uN(n){return n!==null}function ui(n){return ga(()=>({type:n.type,bootstrap:n.bootstrap||Lt,declarations:n.declarations||Lt,imports:n.imports||Lt,exports:n.exports||Lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Qw(n,e){if(n==null)return Es;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=gr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==gr.None?[r,a]:r,e[s]=o):t[s]=r}return t}function tn(n){return ga(()=>{let e=GE(n);return WE(e),e})}function BE(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function ei(n){return n[NM]||null}function $E(n){return n[xM]||null}function HE(n){return n[PM]||null}function qE(n){let e=ei(n)||$E(n)||HE(n);return e!==null?e.standalone:!1}function zE(n,e){let t=n[OM]||null;if(!t&&e===!0)throw new Error(`Type ${It(n)} does not have '\u0275mod' property.`);return t}function GE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Es,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Qw(n.inputs,e),outputs:Qw(n.outputs),debugInfo:null}}function WE(n){n.features?.forEach(e=>e(n))}function Yw(n,e){if(!n)return null;let t=e?HE:cN;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(uN)}function lN(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function yn(n){return{\u0275providers:n}}function dN(...n){return{\u0275providers:KE(!0,n),\u0275fromNgModule:!0}}function KE(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return tg(e,o=>{let a=o;pp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&QE(i,s),t}function QE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];rg(i,s=>{e(s,r)})}}function pp(n,e,t,r){if(n=ht(n),!n)return!1;let i=null,s=Hw(n),o=!s&&ei(n);if(!s&&!o){let c=n.ngModule;if(s=Hw(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)pp(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{tg(s.imports,h=>{pp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&QE(l,e)}if(!a){let l=Xr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Lt},i),e({provide:VE,useValue:i,multi:!0},i),e({provide:Ds,useValue:()=>Y(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;rg(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function rg(n,e){for(let t of n)ME(t)&&(t=t.\u0275providers),Array.isArray(t)?rg(t,e):e(t)}var hN=Te({provide:String,useValue:Te});function YE(n){return n!==null&&typeof n=="object"&&hN in n}function fN(n){return!!(n&&n.useExisting)}function pN(n){return!!(n&&n.useFactory)}function bs(n){return typeof n=="function"}function gN(n){return!!n.useClass}var yl=new W(""),ju={},mN={},Jf;function ig(){return Jf===void 0&&(Jf=new Ku),Jf}var jt=class{},la=class extends jt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mp(e,o=>this.processProvider(o)),this.records.set(LE,ys(void 0,this)),i.has("environment")&&this.records.set(jt,ys(void 0,this));let s=this.records.get(yl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(VE,Lt,ie.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=hr(this),r=_t(void 0),i;try{return e()}finally{hr(t),_t(r)}}get(e,t=ca,r=ie.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(zw))return e[zw](this);r=ml(r);let i,s=hr(this),o=_t(void 0);try{if(!(r&ie.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=wN(e)&&gl(e);l&&this.injectableDefInScope(l)?c=ys(gp(e),ju):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ie.Self?ig():this.parent;return t=r&ie.Optional&&t===ca?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Gu]=a[Gu]||[]).unshift(It(e)),s)throw a;return qM(a,e,"R3InjectorError",this.source)}else throw a}finally{_t(o),hr(s)}}resolveInjectorInitializers(){let e=ye(null),t=hr(this),r=_t(void 0),i;try{let s=this.get(Ds,Lt,ie.Self);for(let o of s)o()}finally{hr(t),_t(r),ye(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(It(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){e=ht(e);let t=bs(e)?e:ht(e&&e.provide),r=vN(e);if(!bs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ys(void 0,ju,!0),i.factory=()=>hp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ye(null);try{return t.value===ju&&(t.value=mN,t.value=t.factory()),typeof t.value=="object"&&t.value&&IN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ye(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ht(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function gp(n){let e=gl(n),t=e!==null?e.factory:Xr(n);if(t!==null)return t;if(n instanceof W)throw new K(204,!1);if(n instanceof Function)return yN(n);throw new K(204,!1)}function yN(n){if(n.length>0)throw new K(204,!1);let t=RM(n);return t!==null?()=>t.factory(n):()=>new n}function vN(n){if(YE(n))return ys(void 0,n.useValue);{let e=ZE(n);return ys(e,ju)}}function ZE(n,e,t){let r;if(bs(n)){let i=ht(n);return Xr(i)||gp(i)}else if(YE(n))r=()=>ht(n.useValue);else if(pN(n))r=()=>n.useFactory(...hp(n.deps||[]));else if(fN(n))r=()=>Y(ht(n.useExisting));else{let i=ht(n&&(n.useClass||n.provide));if(_N(n))r=()=>new i(...hp(n.deps));else return Xr(i)||gp(i)}return r}function ys(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function _N(n){return!!n.deps}function IN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function wN(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function mp(n,e){for(let t of n)Array.isArray(t)?mp(t,e):t&&ME(t)?mp(t.\u0275providers,e):e(t)}function Bn(n,e){n instanceof la&&n.assertNotDestroyed();let t,r=hr(n),i=_t(void 0);try{return e()}finally{hr(r),_t(i)}}function EN(){return xE()!==void 0||BM()!=null}function DN(n){return typeof n=="function"}var $n=0,ae=1,Z=2,ft=3,Xt=4,nn=5,Qu=6,Yu=7,en=8,Cs=9,Ln=10,Ye=11,da=12,Zw=13,Ps=14,pn=15,Ts=16,vs=17,Ss=18,vl=19,JE=20,fr=21,Xf=22,Vt=23,gn=25,XE=1;var ti=7,Zu=8,Ju=9,Ut=10,Xu=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Xu||{});function pr(n){return Array.isArray(n)&&typeof n[XE]=="object"}function Hn(n){return Array.isArray(n)&&n[XE]===!0}function eD(n){return(n.flags&4)!==0}function _l(n){return n.componentOffset>-1}function sg(n){return(n.flags&1)===1}function mr(n){return!!n.template}function yp(n){return(n[Z]&512)!==0}var vp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function tD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Os(){return nD}function nD(n){return n.type.prototype.ngOnChanges&&(n.setInput=CN),bN}Os.ngInherit=!0;function bN(){let n=iD(this),e=n?.current;if(e){let t=n.previous;if(t===Es)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function CN(n,e,t,r,i){let s=this.declaredInputs[r],o=iD(n)||TN(n,{previous:Es,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new vp(l&&l.currentValue,t,c===Es),tD(n,e,i,t)}var rD="__ngSimpleChanges__";function iD(n){return n[rD]||null}function TN(n,e){return n[rD]=e}var Jw=null;var dn=function(n,e,t){Jw?.(n,e,t)},SN="svg",AN="math";function mn(n){for(;Array.isArray(n);)n=n[$n];return n}function sD(n,e){return mn(e[n])}function rn(n,e){return mn(e[n.index])}function oD(n,e){return n.data[e]}function RN(n,e){return n[e]}function vr(n,e){let t=e[n];return pr(t)?t:t[$n]}function og(n){return(n[Z]&128)===128}function MN(n){return Hn(n[ft])}function el(n,e){return e==null?null:n[e]}function aD(n){n[vs]=0}function cD(n){n[Z]&1024||(n[Z]|=1024,og(n)&&wl(n))}function NN(n,e){for(;n>0;)e=e[Ps],n--;return e}function Il(n){return!!(n[Z]&9216||n[Vt]?.dirty)}function _p(n){n[Ln].changeDetectionScheduler?.notify(8),n[Z]&64&&(n[Z]|=1024),Il(n)&&wl(n)}function wl(n){n[Ln].changeDetectionScheduler?.notify(0);let e=ni(n);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!og(e)));)e=ni(e)}function uD(n,e){if((n[Z]&256)===256)throw new K(911,!1);n[fr]===null&&(n[fr]=[]),n[fr].push(e)}function xN(n,e){if(n[fr]===null)return;let t=n[fr].indexOf(e);t!==-1&&n[fr].splice(t,1)}function ni(n){let e=n[ft];return Hn(e)?e[ft]:e}var ce={lFrame:ID(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var lD=!1;function PN(){return ce.lFrame.elementDepthCount}function ON(){ce.lFrame.elementDepthCount++}function kN(){ce.lFrame.elementDepthCount--}function dD(){return ce.bindingsEnabled}function FN(){return ce.skipHydrationRootTNode!==null}function LN(n){return ce.skipHydrationRootTNode===n}function VN(){ce.skipHydrationRootTNode=null}function Me(){return ce.lFrame.lView}function Rt(){return ce.lFrame.tView}function hD(n){return ce.lFrame.contextLView=n,n[en]}function fD(n){return ce.lFrame.contextLView=null,n}function Et(){let n=pD();for(;n!==null&&n.type===64;)n=n.parent;return n}function pD(){return ce.lFrame.currentTNode}function UN(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function va(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function gD(){return ce.lFrame.isParent}function jN(){ce.lFrame.isParent=!1}function mD(){return lD}function Xw(n){lD=n}function BN(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function $N(n){return ce.lFrame.bindingIndex=n}function ag(){return ce.lFrame.bindingIndex++}function HN(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function qN(){return ce.lFrame.inI18n}function zN(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ip(e)}function GN(){return ce.lFrame.currentDirectiveIndex}function Ip(n){ce.lFrame.currentDirectiveIndex=n}function WN(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function yD(n){ce.lFrame.currentQueryIndex=n}function KN(n){let e=n[ae];return e.type===2?e.declTNode:e.type===1?n[nn]:null}function vD(n,e,t){if(t&ie.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ie.Host);)if(i=KN(s),i===null||(s=s[Ps],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=ce.lFrame=_D();return r.currentTNode=e,r.lView=n,!0}function cg(n){let e=_D(),t=n[ae];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function _D(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?ID(n):e}function ID(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function wD(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ED=wD;function ug(){let n=wD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function QN(n){return(ce.lFrame.contextLView=NN(n,ce.lFrame.contextLView))[en]}function ks(){return ce.lFrame.selectedIndex}function ri(n){ce.lFrame.selectedIndex=n}function DD(){let n=ce.lFrame;return oD(n.tView,n.selectedIndex)}function YN(){return ce.lFrame.currentNamespace}var bD=!0;function lg(){return bD}function dg(n){bD=n}function ZN(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=nD(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function hg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Bu(n,e,t){CD(n,e,3,t)}function $u(n,e,t,r){(n[Z]&3)===t&&CD(n,e,t,r)}function ep(n,e){let t=n[Z];(t&3)===e&&(t&=16383,t+=1,n[Z]=t)}function CD(n,e,t,r){let i=r!==void 0?n[vs]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[vs]+=65536),(a<s||s==-1)&&(JN(n,t,e,c),n[vs]=(n[vs]&4294901760)+c+2),c++}function eE(n,e){dn(4,n,e);let t=ye(null);try{e.call(n)}finally{ye(t),dn(5,n,e)}}function JN(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Z]>>14<n[vs]>>16&&(n[Z]&3)===e&&(n[Z]+=16384,eE(a,s)):eE(a,s)}var ws=-1,ii=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function XN(n){return n instanceof ii}function ex(n){return(n.flags&8)!==0}function tx(n){return(n.flags&16)!==0}var tp={},wp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ml(r);let i=this.injector.get(e,tp,r);return i!==tp||t===tp?i:this.parentInjector.get(e,t,r)}};function TD(n){return n!==ws}function tl(n){return n&32767}function nx(n){return n>>16}function nl(n,e){let t=nx(n),r=e;for(;t>0;)r=r[Ps],t--;return r}var Ep=!0;function rl(n){let e=Ep;return Ep=n,e}var rx=256,SD=rx-1,AD=5,ix=0,hn={};function sx(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(aa)&&(r=t[aa]),r==null&&(r=t[aa]=ix++);let i=r&SD,s=1<<i;e.data[n+(i>>AD)]|=s}function il(n,e){let t=RD(n,e);if(t!==-1)return t;let r=e[ae];r.firstCreatePass&&(n.injectorIndex=e.length,np(r.data,n),np(e,null),np(r.blueprint,null));let i=fg(n,e),s=n.injectorIndex;if(TD(i)){let o=tl(i),a=nl(i,e),c=a[ae].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function np(n,e){n.push(0,0,0,0,0,0,0,0,e)}function RD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function fg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=OD(i),r===null)return ws;if(t++,i=i[Ps],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ws}function Dp(n,e,t){sx(n,e,t)}function MD(n,e,t){if(t&ie.Optional||n!==void 0)return n;eg(e,"NodeInjector")}function ND(n,e,t,r){if(t&ie.Optional&&r===void 0&&(r=null),!(t&(ie.Self|ie.Host))){let i=n[Cs],s=_t(void 0);try{return i?i.get(e,r,t&ie.Optional):PE(e,r,t&ie.Optional)}finally{_t(s)}}return MD(r,e,t)}function xD(n,e,t,r=ie.Default,i){if(n!==null){if(e[Z]&2048&&!(r&ie.Self)){let o=lx(n,e,t,r,hn);if(o!==hn)return o}let s=PD(n,e,t,r,hn);if(s!==hn)return s}return ND(e,t,r,i)}function PD(n,e,t,r,i){let s=cx(t);if(typeof s=="function"){if(!vD(e,n,r))return r&ie.Host?MD(i,t,r):ND(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ie.Optional))eg(t);else return o}finally{ED()}}else if(typeof s=="number"){let o=null,a=RD(n,e),c=ws,l=r&ie.Host?e[pn][nn]:null;for((a===-1||r&ie.SkipSelf)&&(c=a===-1?fg(n,e):e[a+8],c===ws||!nE(r,!1)?a=-1:(o=e[ae],a=tl(c),e=nl(c,e)));a!==-1;){let h=e[ae];if(tE(s,a,h.data)){let p=ox(a,e,t,o,r,l);if(p!==hn)return p}c=e[a+8],c!==ws&&nE(r,e[ae].data[a+8]===l)&&tE(s,a,e)?(o=h,a=tl(c),e=nl(c,e)):a=-1}}return i}function ox(n,e,t,r,i,s){let o=e[ae],a=o.data[n+8],c=r==null?_l(a)&&Ep:r!=o&&(a.type&3)!==0,l=i&ie.Host&&s===a,h=ax(a,o,t,c,l);return h!==null?As(e,o,h,a):hn}function ax(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let T=o[v];if(v<c&&t===T||v>=c&&T.type===t)return v}if(i){let v=o[c];if(v&&mr(v)&&v.type===t)return c}return null}function As(n,e,t,r){let i=n[t],s=e.data;if(XN(i)){let o=i;o.resolving&&FM(kM(s[t]));let a=rl(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?_t(o.injectImpl):null,h=vD(n,r,ie.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&ZN(t,s[t],e)}finally{l!==null&&_t(l),rl(a),o.resolving=!1,ED()}}return i}function cx(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(aa)?n[aa]:void 0;return typeof e=="number"?e>=0?e&SD:ux:e}function tE(n,e,t){let r=1<<n;return!!(t[e+(n>>AD)]&r)}function nE(n,e){return!(n&ie.Self)&&!(n&ie.Host&&e)}var Jr=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return xD(this._tNode,this._lView,e,ml(r),t)}};function ux(){return new Jr(Et(),Me())}function _a(n){return ga(()=>{let e=n.prototype.constructor,t=e[zu]||bp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[zu]||bp(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function bp(n){return TE(n)?()=>{let e=bp(ht(n));return e&&e()}:Xr(n)}function lx(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Z]&2048&&!(o[Z]&512);){let a=PD(s,o,t,r|ie.Self,hn);if(a!==hn)return a;let c=s.parent;if(!c){let l=o[JE];if(l){let h=l.get(t,hn,r);if(h!==hn)return h}c=OD(o),o=o[Ps]}s=c}return i}function OD(n){let e=n[ae],t=e.type;return t===2?e.declTNode:t===1?n[nn]:null}function rE(n,e=null,t=null,r){let i=kD(n,e,t,r);return i.resolveInjectorInitializers(),i}function kD(n,e=null,t=null,r,i=new Set){let s=[t||Lt,dN(n)];return r=r||(typeof n=="object"?void 0:It(n)),new la(s,e||ig(),r||null,i)}var wt=class n{static{this.THROW_IF_NOT_FOUND=ca}static{this.NULL=new Ku}static create(e,t){if(Array.isArray(e))return rE({name:""},t,e,"");{let r=e.name??"";return rE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=G({token:n,providedIn:"any",factory:()=>Y(LE)})}static{this.__NG_ELEMENT_ID__=-1}};var dx=new W("");dx.__NG_ELEMENT_ID__=n=>{let e=Et();if(e===null)throw new K(204,!1);if(e.type&2)return e.value;if(n&ie.Optional)return null;throw new K(204,!1)};var hx="ngOriginalError";function rp(n){return n[hx]}var FD=!0,LD=(()=>{class n{static{this.__NG_ELEMENT_ID__=fx}static{this.__NG_ENV_ID__=t=>t}}return n})(),Cp=class extends LD{constructor(e){super(),this._lView=e}onDestroy(e){return uD(this._lView,e),()=>xN(this._lView,e)}};function fx(){return new Cp(Me())}var Fs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Xe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Tp=class extends Je{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,EN()&&(this.destroyRef=V(LD,{optional:!0})??void 0,this.pendingTasks=V(Fs,{optional:!0})??void 0)}emit(e){let t=ye(null);try{super.next(e)}finally{ye(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ke&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},ze=Tp;function sl(...n){}function VD(n){let e,t;function r(){n=sl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function iE(n){return queueMicrotask(()=>n()),()=>{n=sl}}var pg="isAngularZone",ol=pg+"_ID",px=0,Ee=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ze(!1),this.onMicrotaskEmpty=new ze(!1),this.onStable=new ze(!1),this.onError=new ze(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=FD}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,yx(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(pg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,gx,sl,sl);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},gx={};function gg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function mx(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){VD(()=>{n.callbackScheduled=!1,Sp(n),n.isCheckStableRunning=!0,gg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Sp(n)}function yx(n){let e=()=>{mx(n)},t=px++;n._inner=n._inner.fork({name:"angular",properties:{[pg]:!0,[ol]:t,[ol+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(vx(c))return r.invokeTask(s,o,a,c);try{return sE(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),oE(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return sE(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!_x(c)&&e(),oE(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Sp(n),gg(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Sp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function sE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function oE(n){n._nesting--,gg(n)}var Ap=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ze,this.onMicrotaskEmpty=new ze,this.onStable=new ze,this.onError=new ze}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function vx(n){return UD(n,"__ignore_ng_zone__")}function _x(n){return UD(n,"__scheduler_tick__")}function UD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Vn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&rp(e);for(;t&&rp(t);)t=rp(t);return t||null}},Ix=new W("",{providedIn:"root",factory:()=>{let n=V(Ee),e=V(Vn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function wx(){return El(Et(),Me())}function El(n,e){return new _r(rn(n,e))}var _r=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=wx}}return n})();function jD(n){return(n.flags&128)===128}var BD=new Map,Ex=0;function Dx(){return Ex++}function bx(n){BD.set(n[vl],n)}function Rp(n){BD.delete(n[vl])}var aE="__ngContext__";function si(n,e){pr(e)?(n[aE]=e[vl],bx(e)):n[aE]=e}function $D(n){return qD(n[da])}function HD(n){return qD(n[Xt])}function qD(n){for(;n!==null&&!Hn(n);)n=n[Xt];return n}var Mp;function zD(n){Mp=n}function Cx(){if(Mp!==void 0)return Mp;if(typeof document<"u")return document;throw new K(210,!1)}var mg=new W("",{providedIn:"root",factory:()=>Tx}),Tx="ng",yg=new W(""),Ir=new W("",{providedIn:"platform",factory:()=>"unknown"});var vg=new W("",{providedIn:"root",factory:()=>Cx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Sx="h",Ax="b";var Rx=()=>null;function _g(n,e,t=!1){return Rx(n,e,t)}var GD=!1,Mx=new W("",{providedIn:"root",factory:()=>GD});var Np=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${CM})`}};function Ig(n){return n instanceof Np?n.changingThisBreaksApplicationSecurity:n}function WD(n){return n instanceof Function?n():n}var Un=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Un||{}),Nx;function wg(n,e){return Nx(n,e)}function _s(n,e,t,r,i){if(r!=null){let s,o=!1;Hn(r)?s=r:pr(r)&&(o=!0,r=r[$n]);let a=mn(r);n===0&&t!==null?i==null?JD(e,t,a):al(e,t,a,i||null,!0):n===1&&t!==null?al(e,t,a,i||null,!0):n===2?Gx(e,a,o):n===3&&e.destroyNode(a),s!=null&&Kx(e,n,s,t,i)}}function xx(n,e){return n.createText(e)}function Px(n,e,t){n.setValue(e,t)}function KD(n,e,t){return n.createElement(e,t)}function Ox(n,e){QD(n,e),e[$n]=null,e[nn]=null}function kx(n,e,t,r,i,s){r[$n]=i,r[nn]=e,Dl(n,r,t,1,i,s)}function QD(n,e){e[Ln].changeDetectionScheduler?.notify(9),Dl(n,e,e[Ye],2,null,null)}function Fx(n){let e=n[da];if(!e)return ip(n[ae],n);for(;e;){let t=null;if(pr(e))t=e[da];else{let r=e[Ut];r&&(t=r)}if(!t){for(;e&&!e[Xt]&&e!==n;)pr(e)&&ip(e[ae],e),e=e[ft];e===null&&(e=n),pr(e)&&ip(e[ae],e),t=e&&e[Xt]}e=t}}function Lx(n,e,t,r){let i=Ut+r,s=t.length;r>0&&(t[i-1][Xt]=e),r<s-Ut?(e[Xt]=t[i],FE(t,Ut+r,e)):(t.push(e),e[Xt]=null),e[ft]=t;let o=e[Ts];o!==null&&t!==o&&YD(o,e);let a=e[Ss];a!==null&&a.insertView(n),_p(e),e[Z]|=128}function YD(n,e){let t=n[Ju],r=e[ft];if(pr(r))n[Z]|=Xu.HasTransplantedViews;else{let i=r[ft][pn];e[pn]!==i&&(n[Z]|=Xu.HasTransplantedViews)}t===null?n[Ju]=[e]:t.push(e)}function Eg(n,e){let t=n[Ju],r=t.indexOf(e);t.splice(r,1)}function xp(n,e){if(n.length<=Ut)return;let t=Ut+e,r=n[t];if(r){let i=r[Ts];i!==null&&i!==n&&Eg(i,r),e>0&&(n[t-1][Xt]=r[Xt]);let s=Wu(n,Ut+e);Ox(r[ae],r);let o=s[Ss];o!==null&&o.detachView(s[ae]),r[ft]=null,r[Xt]=null,r[Z]&=-129}return r}function ZD(n,e){if(!(e[Z]&256)){let t=e[Ye];t.destroyNode&&Dl(n,e,t,3,null,null),Fx(e)}}function ip(n,e){if(e[Z]&256)return;let t=ye(null);try{e[Z]&=-129,e[Z]|=256,e[Vt]&&Af(e[Vt]),Ux(n,e),Vx(n,e),e[ae].type===1&&e[Ye].destroy();let r=e[Ts];if(r!==null&&Hn(e[ft])){r!==e[ft]&&Eg(r,e);let i=e[Ss];i!==null&&i.detachView(n)}Rp(e)}finally{ye(t)}}function Vx(n,e){let t=n.cleanup,r=e[Yu];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Yu]=null);let i=e[fr];if(i!==null){e[fr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function Ux(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ii)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];dn(4,a,c);try{c.call(a)}finally{dn(5,a,c)}}else{dn(4,i,s);try{s.call(i)}finally{dn(5,i,s)}}}}}function jx(n,e,t){return Bx(n,e.parent,t)}function Bx(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[$n];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===fn.None||s===fn.Emulated)return null}return rn(r,t)}}function al(n,e,t,r,i){n.insertBefore(e,t,r,i)}function JD(n,e,t){n.appendChild(e,t)}function cE(n,e,t,r,i){r!==null?al(n,e,t,r,i):JD(n,e,t)}function XD(n,e){return n.parentNode(e)}function $x(n,e){return n.nextSibling(e)}function Hx(n,e,t){return zx(n,e,t)}function qx(n,e,t){return n.type&40?rn(n,t):null}var zx=qx,uE;function Dg(n,e,t,r){let i=jx(n,r,e),s=e[Ye],o=r.parent||e[nn],a=Hx(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)cE(s,i,t[c],a,!1);else cE(s,i,t,a,!1);uE!==void 0&&uE(s,r,e,t,i)}function sa(n,e){if(e!==null){let t=e.type;if(t&3)return rn(e,n);if(t&4)return Pp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return sa(n,r);{let i=n[e.index];return Hn(i)?Pp(-1,i):mn(i)}}else{if(t&128)return sa(n,e.next);if(t&32)return wg(e,n)()||mn(n[e.index]);{let r=eb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ni(n[pn]);return sa(i,r)}else return sa(n,e.next)}}}return null}function eb(n,e){if(e!==null){let r=n[pn][nn],i=e.projection;return r.projection[i]}return null}function Pp(n,e){let t=Ut+n+1;if(t<e.length){let r=e[t],i=r[ae].firstChild;if(i!==null)return sa(r,i)}return e[ti]}function Gx(n,e,t){n.removeChild(null,e,t)}function bg(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&si(mn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)bg(n,e,t.child,r,i,s,!1),_s(e,n,i,a,s);else if(c&32){let l=wg(t,r),h;for(;h=l();)_s(e,n,i,h,s);_s(e,n,i,a,s)}else c&16?Wx(n,e,r,t,i,s):_s(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Dl(n,e,t,r,i,s){bg(t,r,n.firstChild,e,i,s,!1)}function Wx(n,e,t,r,i,s){let o=t[pn],c=o[nn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];_s(e,n,i,h,s)}else{let l=c,h=o[ft];jD(r)&&(l.flags|=128),bg(n,e,l,h,i,s,!0)}}function Kx(n,e,t,r,i){let s=t[ti],o=mn(t);s!==o&&_s(e,n,r,s,i);for(let a=Ut;a<t.length;a++){let c=t[a];Dl(c[ae],c,n,e,r,s)}}function Qx(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Un.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Un.Important),n.setStyle(t,r,i,s))}}function Yx(n,e,t){n.setAttribute(e,"style",t)}function tb(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function nb(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&fp(n,e,r),i!==null&&tb(n,e,i),s!==null&&Yx(n,e,s)}var li={};function pt(n=1){rb(Rt(),Me(),ks()+n,!1)}function rb(n,e,t,r){if(!r)if((e[Z]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Bu(e,s,t)}else{let s=n.preOrderHooks;s!==null&&$u(e,s,0,t)}ri(t)}function he(n,e=ie.Default){let t=Me();if(t===null)return Y(n,e);let r=Et();return xD(r,t,ht(n),e)}function ib(n,e,t,r,i,s){let o=ye(null);try{let a=null;i&gr.SignalBased&&(a=e[r][On]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&gr.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):tD(e,a,r,s)}finally{ye(o)}}function Zx(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ri(~i);else{let s=i,o=t[++r],a=t[++r];zN(o,s);let c=e[s];a(2,c)}}}finally{ri(-1)}}function bl(n,e,t,r,i,s,o,a,c,l,h){let p=e.blueprint.slice();return p[$n]=i,p[Z]=r|4|128|8|64,(l!==null||n&&n[Z]&2048)&&(p[Z]|=2048),aD(p),p[ft]=p[Ps]=n,p[en]=t,p[Ln]=o||n&&n[Ln],p[Ye]=a||n&&n[Ye],p[Cs]=c||n&&n[Cs]||null,p[nn]=s,p[vl]=Dx(),p[Qu]=h,p[JE]=l,p[pn]=e.type==2?n[pn]:p,p}function Cl(n,e,t,r,i){let s=n.data[e];if(s===null)s=Jx(n,e,t,r,i),qN()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=UN();s.injectorIndex=o===null?-1:o.injectorIndex}return va(s,!0),s}function Jx(n,e,t,r,i){let s=pD(),o=gD(),a=o?s:s&&s.parent,c=n.data[e]=rP(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function sb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ob(n,e,t,r,i){let s=ks(),o=r&2;try{ri(-1),o&&e.length>gn&&rb(n,e,gn,!1),dn(o?2:0,i),t(r,i)}finally{ri(s),dn(o?3:1,i)}}function ab(n,e,t){if(eD(e)){let r=ye(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{ye(r)}}}function cb(n,e,t){dD()&&(uP(n,e,t,rn(t,e)),(t.flags&64)===64&&pb(n,e,t))}function ub(n,e,t=rn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function lb(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Cg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Cg(n,e,t,r,i,s,o,a,c,l,h){let p=gn+r,m=p+i,v=Xx(p,m),T=typeof l=="function"?l():l;return v[ae]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:h}}function Xx(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:li);return t}function eP(n,e,t,r){let s=r.get(Mx,GD)||t===fn.ShadowDom,o=n.selectRootElement(e,s);return tP(o),o}function tP(n){nP(n)}var nP=()=>null;function rP(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return FN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lE(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=gr.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?dE(r,t,l,a,c):dE(r,t,l,a)}return r}function dE(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function iP(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=t?t.get(p):null,v=m?m.inputs:null,T=m?m.outputs:null;c=lE(0,p.inputs,h,c,v),l=lE(1,p.outputs,h,l,T);let N=c!==null&&o!==null&&!ng(e)?vP(c,h,o):null;a.push(N)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function sP(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function db(n,e,t,r,i,s,o,a){let c=rn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Tg(n,t,h,r,i),_l(e)&&oP(t,e.index)):e.type&3?(r=sP(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function oP(n,e){let t=vr(e,n);t[Z]&16||(t[Z]|=64)}function hb(n,e,t,r){if(dD()){let i=r===null?null:{"":-1},s=dP(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&fb(n,e,t,o,i,a),i&&hP(t,r,i)}t.mergedAttrs=ua(t.mergedAttrs,t.attrs)}function fb(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Dp(il(t,e),n,r[l].type);pP(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,c=sb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=ua(t.mergedAttrs,h.hostAttrs),gP(n,t,e,c,h),fP(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}iP(n,t,s)}function aP(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;cP(o)!=a&&o.push(a),o.push(t,r,s)}}function cP(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function uP(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;_l(t)&&mP(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||il(t,e),si(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=As(e,n,a,t);if(si(l,e),o!==null&&yP(e,a-i,l,c,t,o),mr(c)){let h=vr(t.index,e);h[en]=As(e,n,a,t)}}}function pb(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=GN();try{ri(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Ip(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&lP(c,l)}}finally{ri(-1),Ip(o)}}function lP(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function dP(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(nN(e,o.selectors,!1))if(r||(r=[]),mr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Op(n,e,c)}else r.unshift(o),Op(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Op(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function hP(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new K(-301,!1);r.push(e[i],s)}}}function fP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;mr(e)&&(t[""]=n)}}function pP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function gP(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Xr(i.type,!0)),o=new ii(s,mr(i),he);n.blueprint[r]=o,t[r]=o,aP(n,e,r,sb(n,t,i.hostVars,li),i)}function mP(n,e,t){let r=rn(e,n),i=lb(t),s=n[Ln].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Tl(n,bl(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function yP(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],h=o[a++],p=o[a++];ib(r,t,c,l,h,p)}}function vP(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function gb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function mb(n,e){let t=n.contentQueries;if(t!==null){let r=ye(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];yD(s),a.contentQueries(2,e[o],o)}}}finally{ye(r)}}}function Tl(n,e){return n[da]?n[Zw][Xt]=e:n[da]=e,n[Zw]=e,e}function kp(n,e,t){yD(0);let r=ye(null);try{e(n,t)}finally{ye(r)}}function _P(n){return n[Yu]??=[]}function IP(n){return n.cleanup??=[]}function yb(n,e){let t=n[Cs],r=t?t.get(Vn,null):null;r&&r.handleError(e)}function Tg(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],h=n.data[o];ib(h,l,r,a,c,i)}}function wP(n,e,t){let r=sD(e,n);Px(n[Ye],r,t)}function EP(n,e){let t=vr(e,n),r=t[ae];DP(r,t);let i=t[$n];i!==null&&t[Qu]===null&&(t[Qu]=_g(i,t[Cs])),Sg(r,t,t[en])}function DP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Sg(n,e,t){cg(e);try{let r=n.viewQuery;r!==null&&kp(1,r,t);let i=n.template;i!==null&&ob(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ss]?.finishViewCreation(n),n.staticContentQueries&&mb(n,e),n.staticViewQueries&&kp(2,n.viewQuery,t);let s=n.components;s!==null&&bP(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Z]&=-5,ug()}}function bP(n,e){for(let t=0;t<e.length;t++)EP(n,e[t])}function CP(n,e,t,r){let i=ye(null);try{let s=e.tView,a=n[Z]&4096?4096:16,c=bl(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Ts]=l;let h=n[Ss];return h!==null&&(c[Ss]=h.createEmbeddedView(s)),Sg(s,c,t),c}finally{ye(i)}}function hE(n,e){return!e||e.firstChild===null||jD(n)}function TP(n,e,t,r=!0){let i=e[ae];if(Lx(i,e,n,t),r){let o=Pp(t,n),a=e[Ye],c=XD(a,n[ti]);c!==null&&kx(i,n[nn],a,e,c,o)}let s=e[Qu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function cl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(mn(s)),Hn(s)&&SP(s,r);let o=t.type;if(o&8)cl(n,e,t.child,r);else if(o&32){let a=wg(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=eb(e,t);if(Array.isArray(a))r.push(...a);else{let c=ni(e[pn]);cl(c[ae],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function SP(n,e){for(let t=Ut;t<n.length;t++){let r=n[t],i=r[ae].firstChild;i!==null&&cl(r[ae],r,i,e)}n[ti]!==n[$n]&&e.push(n[ti])}var vb=[];function AP(n){return n[Vt]??RP(n)}function RP(n){let e=vb.pop()??Object.create(NP);return e.lView=n,e}function MP(n){n.lView[Vt]!==n&&(n.lView=null,vb.push(n))}var NP=le(L({},ta),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{wl(n.lView)},consumerOnSignalRead(){this.lView[Vt]=this}});function xP(n){let e=n[Vt]??Object.create(PP);return e.lView=n,e}var PP=le(L({},ta),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ni(n.lView);for(;e&&!_b(e[ae]);)e=ni(e);e&&cD(e)},consumerOnSignalRead(){this.lView[Vt]=this}});function _b(n){return n.type!==2}var OP=100;function Ib(n,e=!0,t=0){let r=n[Ln],i=r.rendererFactory,s=!1;s||i.begin?.();try{kP(n,t)}catch(o){throw e&&yb(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function kP(n,e){let t=mD();try{Xw(!0),Fp(n,e);let r=0;for(;Il(n);){if(r===OP)throw new K(103,!1);r++,Fp(n,1)}}finally{Xw(t)}}function FP(n,e,t,r){let i=e[Z];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Ln].inlineEffectRunner?.flush(),cg(e);let a=!0,c=null,l=null;s||(_b(n)?(l=AP(e),c=cu(l)):rw()===null?(a=!1,l=xP(e),c=cu(l)):e[Vt]&&(Af(e[Vt]),e[Vt]=null));try{aD(e),$N(n.bindingStartIndex),t!==null&&ob(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let v=n.preOrderCheckHooks;v!==null&&Bu(e,v,null)}else{let v=n.preOrderHooks;v!==null&&$u(e,v,0,null),ep(e,0)}if(o||LP(e),wb(e,0),n.contentQueries!==null&&mb(n,e),!s)if(h){let v=n.contentCheckHooks;v!==null&&Bu(e,v)}else{let v=n.contentHooks;v!==null&&$u(e,v,1),ep(e,1)}Zx(n,e);let p=n.components;p!==null&&Db(e,p,0);let m=n.viewQuery;if(m!==null&&kp(2,m,r),!s)if(h){let v=n.viewCheckHooks;v!==null&&Bu(e,v)}else{let v=n.viewHooks;v!==null&&$u(e,v,2),ep(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Xf]){for(let v of e[Xf])v();e[Xf]=null}s||(e[Z]&=-73)}catch(h){throw s||wl(e),h}finally{l!==null&&(Tf(l,c),a&&MP(l)),ug()}}function wb(n,e){for(let t=$D(n);t!==null;t=HD(t))for(let r=Ut;r<t.length;r++){let i=t[r];Eb(i,e)}}function LP(n){for(let e=$D(n);e!==null;e=HD(e)){if(!(e[Z]&Xu.HasTransplantedViews))continue;let t=e[Ju];for(let r=0;r<t.length;r++){let i=t[r];cD(i)}}}function VP(n,e,t){let r=vr(e,n);Eb(r,t)}function Eb(n,e){og(n)&&Fp(n,e)}function Fp(n,e){let r=n[ae],i=n[Z],s=n[Vt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Sf(s)),o||=!1,s&&(s.dirty=!1),n[Z]&=-9217,o)FP(r,n,r.template,n[en]);else if(i&8192){wb(n,1);let a=r.components;a!==null&&Db(n,a,1)}}function Db(n,e,t){for(let r=0;r<e.length;r++)VP(n,e[r],t)}function Ag(n,e){let t=mD()?64:1088;for(n[Ln].changeDetectionScheduler?.notify(e);n;){n[Z]|=t;let r=ni(n);if(yp(n)&&!r)return n;n=r}return null}var oi=class{get rootNodes(){let e=this._lView,t=e[ae];return cl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[en]}set context(e){this._lView[en]=e}get destroyed(){return(this._lView[Z]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ft];if(Hn(e)){let t=e[Zu],r=t?t.indexOf(this):-1;r>-1&&(xp(e,r),Wu(t,r))}this._attachedToViewContainer=!1}ZD(this._lView[ae],this._lView)}onDestroy(e){uD(this._lView,e)}markForCheck(){Ag(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){_p(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,Ib(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=yp(this._lView),t=this._lView[Ts];t!==null&&!e&&Eg(t,this._lView),QD(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;let t=yp(this._lView),r=this._lView[Ts];r!==null&&!t&&YD(r,this._lView),_p(this._lView)}},Rg=(()=>{class n{static{this.__NG_ELEMENT_ID__=BP}}return n})(),UP=Rg,jP=class extends UP{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=CP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new oi(i)}};function BP(){return $P(Et(),Me())}function $P(n,e){return n.type&4?new jP(e,n,El(n,e)):null}var EW=new RegExp(`^(\\d+)*(${Ax}|${Sx})*(.*)`);var HP=()=>null;function fE(n,e){return HP(n,e)}var Rs=class{},Sl=new W("",{providedIn:"root",factory:()=>!1});var bb=new W(""),Cb=new W(""),Lp=class{},ul=class{};function qP(n){let e=Error(`No component factory found for ${It(n)}.`);return e[zP]=n,e}var zP="ngComponent";var Vp=class{resolveComponentFactory(e){throw qP(e)}},Ms=class{static{this.NULL=new Vp}},Ns=class{},di=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>GP()}}return n})();function GP(){let n=Me(),e=Et(),t=vr(e.index,n);return(pr(t)?t:n)[Ye]}var WP=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>null})}}return n})();function Up(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Bw(i,a);else if(s==2){let c=a,l=e[++o];r=Bw(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var ll=class extends Ms{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ei(e);return new ha(t,this.ngModule)}};function pE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:gr.None;e?t.push({propName:o,templateName:r,isSignal:(a&gr.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function KP(n){let e=n.toLowerCase();return e==="svg"?SN:e==="math"?AN:null}var ha=class extends ul{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=pE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return pE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=oN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=ye(null);try{i=i||this.ngModule;let o=i instanceof jt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new wp(e,o):e,c=a.get(Ns,null);if(c===null)throw new K(407,!1);let l=a.get(WP,null),h=a.get(Rs,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",T=r?eP(m,r,this.componentDef.encapsulation,a):KD(m,v,KP(v)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let M=null;T!==null&&(M=_g(T,a,!0));let k=Cg(0,null,null,1,0,null,null,null,null,null,null),B=bl(null,k,null,N,null,null,p,m,a,null,M);cg(B);let F,H,X=null;try{let $=this.componentDef,w,y=null;$.findHostDirectiveDefs?(w=[],y=new Map,$.findHostDirectiveDefs($,w,y),w.push($)):w=[$];let _=QP(B,T);X=YP(_,T,$,w,B,p,m),H=oD(k,gn),T&&XP(m,$,T,r),t!==void 0&&eO(H,this.ngContentSelectors,t),F=JP(X,$,w,y,B,[tO]),Sg(k,B,null)}catch($){throw X!==null&&Rp(X),Rp(B),$}finally{ug()}return new jp(this.componentType,F,El(H,B),B,H)}finally{ye(s)}}},jp=class extends Lp{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new oi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Tg(s[ae],s,i,e,t),this.previousInputValues.set(e,t);let o=vr(this._tNode.index,s);Ag(o,1)}}get injector(){return new Jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function QP(n,e){let t=n[ae],r=gn;return n[r]=e,Cl(t,r,2,"#host",null)}function YP(n,e,t,r,i,s,o){let a=i[ae];ZP(r,n,e,o);let c=null;e!==null&&(c=_g(e,i[Cs]));let l=s.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=bl(i,lb(t),null,h,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Op(a,n,r.length-1),Tl(i,p),i[n.index]=p}function ZP(n,e,t,r){for(let i of n)e.mergedAttrs=ua(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Up(e,e.mergedAttrs,!0),t!==null&&nb(r,t,e))}function JP(n,e,t,r,i,s){let o=Et(),a=i[ae],c=rn(o,i);fb(a,i,o,t,null,r);for(let h=0;h<t.length;h++){let p=o.directiveStart+h,m=As(i,a,p,o);si(m,i)}pb(a,i,o),c&&si(c,i);let l=As(i,a,o.directiveStart+o.componentOffset,o);if(n[en]=i[en]=l,s!==null)for(let h of s)h(l,e);return ab(a,o,i),l}function XP(n,e,t,r){if(r)fp(n,t,["ng-version","18.2.10"]);else{let{attrs:i,classes:s}=aN(e.selectors[0]);i&&fp(n,t,i),s&&s.length>0&&tb(n,t,s.join(" "))}}function eO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function tO(){let n=Et();hg(Me()[ae],n)}var Ia=(()=>{class n{static{this.__NG_ELEMENT_ID__=nO}}return n})();function nO(){let n=Et();return iO(n,Me())}var rO=Ia,Tb=class extends rO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return El(this._hostTNode,this._hostLView)}get injector(){return new Jr(this._hostTNode,this._hostLView)}get parentInjector(){let e=fg(this._hostTNode,this._hostLView);if(TD(e)){let t=nl(e,this._hostLView),r=tl(e),i=t[ae].data[r+8];return new Jr(i,t)}else return new Jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=gE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ut}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=fE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,hE(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!DN(e),a;if(o)a=t;else{let T=t||{};a=T.index,r=T.injector,i=T.projectableNodes,s=T.environmentInjector||T.ngModuleRef}let c=o?e:new ha(ei(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let N=(o?l:this.parentInjector).get(jt,null);N&&(s=N)}let h=ei(c.componentType??{}),p=fE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=c.create(l,i,m,s);return this.insertImpl(v.hostView,a,hE(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(MN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[ft],l=new Tb(c,c[nn],c[ft]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return TP(o,i,s,r),e.attachToViewContainerRef(),FE(sp(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=gE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=xp(this._lContainer,t);r&&(Wu(sp(this._lContainer),t),ZD(r[ae],r))}detach(e){let t=this._adjustIndex(e,-1),r=xp(this._lContainer,t);return r&&Wu(sp(this._lContainer),t)!=null?new oi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function gE(n){return n[Zu]}function sp(n){return n[Zu]||(n[Zu]=[])}function iO(n,e){let t,r=e[n.index];return Hn(r)?t=r:(t=gb(r,e,null,n),e[n.index]=t,Tl(e,t)),oO(t,e,n,r),new Tb(t,n,e)}function sO(n,e){let t=n[Ye],r=t.createComment(""),i=rn(e,n),s=XD(t,i);return al(t,s,r,$x(t,i),!1),r}var oO=uO,aO=()=>!1;function cO(n,e,t){return aO(n,e,t)}function uO(n,e,t,r){if(n[ti])return;let i;t.type&8?i=mn(r):i=sO(e,t),n[ti]=i}var mE=new Set;function wa(n){mE.has(n)||(mE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function lO(n){return typeof n=="function"&&n[On]!==void 0}function Al(n,e){wa("NgSignals");let t=pw(n),r=t[On];return e?.equal&&(r.equal=e.equal),t.set=i=>Rf(r,i),t.update=i=>gw(r,i),t.asReadonly=dO.bind(t),t}function dO(){let n=this[On];if(n.readonlyFn===void 0){let e=()=>this();e[On]=n,n.readonlyFn=e}return n.readonlyFn}function Sb(n){return lO(n)&&typeof n.set=="function"}function hO(n){return Object.getPrototypeOf(n.prototype).constructor}function Ls(n){let e=hO(n.type),t=!0,r=[n];for(;e;){let i;if(mr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Lu(n.inputs),o.inputTransforms=Lu(n.inputTransforms),o.declaredInputs=Lu(n.declaredInputs),o.outputs=Lu(n.outputs);let a=i.hostBindings;a&&yO(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&gO(n,c),l&&mO(n,l),fO(n,i),SM(n.outputs,i.outputs),mr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Ls&&(t=!1)}}e=Object.getPrototypeOf(e)}pO(r)}function fO(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function pO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ua(i.hostAttrs,t=ua(t,i.hostAttrs))}}function Lu(n){return n===Es?{}:n===Lt?[]:n}function gO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function mO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function yO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var yr=class{},fa=class{};var Bp=class extends yr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ll(this);let s=zE(e);this._bootstrapComponents=WD(s.bootstrap),this._r3Injector=kD(e,t,[{provide:yr,useValue:this},{provide:Ms,useValue:this.componentFactoryResolver},...r],It(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},$p=class extends fa{constructor(e){super(),this.moduleType=e}create(e){return new Bp(this.moduleType,e,[])}};var dl=class extends yr{constructor(e){super(),this.componentFactoryResolver=new ll(this),this.instance=null;let t=new la([...e.providers,{provide:yr,useValue:this},{provide:Ms,useValue:this.componentFactoryResolver}],e.parent||ig(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Mg(n,e,t=null){return new dl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Ab(n){return _O(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function vO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function _O(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function IO(n,e,t){return n[e]=t}function Ea(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function wO(n){return(n.flags&32)===32}function EO(n,e,t,r,i,s,o,a,c){let l=e.consts,h=Cl(e,n,4,o||null,a||null);hb(e,t,h,el(l,c)),hg(e,h);let p=h.tView=Cg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function DO(n,e,t,r,i,s,o,a,c,l){let h=t+gn,p=e.firstCreatePass?EO(h,e,n,r,i,s,o,a,c):e.data[h];va(p,!1);let m=bO(e,n,p,t);lg()&&Dg(e,n,m,p),si(m,n);let v=gb(m,n,m,p);return n[h]=v,Tl(n,v),cO(v,p,n),sg(p)&&cb(e,n,p),c!=null&&ub(n,p,l),p}function Ng(n,e,t,r,i,s,o,a){let c=Me(),l=Rt(),h=el(l.consts,s);return DO(c,l,n,e,t,r,i,h,o,a),Ng}var bO=CO;function CO(n,e,t,r){return dg(!0),e[Ye].createComment("")}var oa=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(oa||{}),TO=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})(),yE=class n{constructor(){this.ngZone=V(Ee),this.scheduler=V(Rs),this.errorHandler=V(Vn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[oa.EarlyRead,oa.Write,oa.MixedReadWrite,oa.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}};function SO(n,e,t,r){return Ea(n,ag(),t)?e+NE(t)+r:li}function Vu(n,e){return n<<17|e<<2}function ai(n){return n>>17&32767}function AO(n){return(n&2)==2}function RO(n,e){return n&131071|e<<17}function Hp(n){return n|2}function xs(n){return(n&131068)>>2}function op(n,e){return n&-131069|e<<2}function MO(n){return(n&1)===1}function qp(n){return n|1}function NO(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ai(o),c=xs(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||ya(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let m=ai(n[a+1]);n[r+1]=Vu(m,a),m!==0&&(n[m+1]=op(n[m+1],r)),n[a+1]=RO(n[a+1],r)}else n[r+1]=Vu(a,0),a!==0&&(n[a+1]=op(n[a+1],r)),a=r;else n[r+1]=Vu(c,0),a===0?a=r:n[c+1]=op(n[c+1],r),c=r;l&&(n[r+1]=Hp(n[r+1])),vE(n,h,r,!0),vE(n,h,r,!1),xO(e,h,n,r,s),o=Vu(a,c),s?e.classBindings=o:e.styleBindings=o}function xO(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&ya(s,e)>=0&&(t[r+1]=qp(t[r+1]))}function vE(n,e,t,r){let i=n[t+1],s=e===null,o=r?ai(i):xs(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];PO(c,e)&&(a=!0,n[o+1]=r?qp(l):Hp(l)),o=r?ai(l):xs(l)}a&&(n[t+1]=r?Hp(i):qp(i))}function PO(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ya(n,e)>=0:!1}function Da(n,e,t){let r=Me(),i=ag();if(Ea(r,i,e)){let s=Rt(),o=DD();db(s,o,r,n,e,r[Ye],t,!1)}return Da}function _E(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";Tg(n,t,s[o],o,r)}function Rl(n,e,t){return Rb(n,e,t,!1),Rl}function ba(n,e){return Rb(n,e,null,!0),ba}function Rb(n,e,t,r){let i=Me(),s=Rt(),o=HN(2);if(s.firstUpdatePass&&kO(s,n,o,r),e!==li&&Ea(i,o,e)){let a=s.data[ks()];jO(s,a,i,i[Ye],n,i[o+1]=BO(e,t),r,o)}}function OO(n,e){return e>=n.expandoStartIndex}function kO(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[ks()],o=OO(n,t);$O(s,r)&&e===null&&!o&&(e=!1),e=FO(i,s,e,r),NO(i,s,e,t,o,r)}}function FO(n,e,t,r){let i=WN(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=ap(null,n,e,t,r),t=pa(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=ap(i,n,e,t,r),s===null){let c=LO(n,e,r);c!==void 0&&Array.isArray(c)&&(c=ap(null,n,e,c[1],r),c=pa(c,e.attrs,r),VO(n,e,r,c))}else s=UO(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function LO(n,e,t){let r=t?e.classBindings:e.styleBindings;if(xs(r)!==0)return n[ai(r)]}function VO(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ai(i)]=r}function UO(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=pa(r,o,t)}return pa(r,e.attrs,t)}function ap(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=pa(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function pa(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),WM(n,o,t?!0:e[++s]))}return n===void 0?null:n}function jO(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=MO(l)?IE(c,e,t,i,xs(l),o):void 0;if(!hl(h)){hl(s)||AO(l)&&(s=IE(c,null,t,i,a,o));let p=sD(ks(),t);Qx(r,o,p,i,s)}}function IE(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=t[i+1];m===li&&(m=p?Lt:void 0);let v=p?Zf(m,r):h===r?m:void 0;if(l&&!hl(v)&&(v=Zf(c,r)),hl(v)&&(a=v,o))return a;let T=n[i+1];i=o?ai(T):xs(T)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Zf(c,r))}return a}function hl(n){return n!==void 0}function BO(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=It(Ig(n)))),n}function $O(n,e){return(n.flags&(e?8:16))!==0}function HO(n,e,t,r,i,s){let o=e.consts,a=el(o,i),c=Cl(e,n,2,r,a);return hb(e,t,c,el(o,s)),c.attrs!==null&&Up(c,c.attrs,!1),c.mergedAttrs!==null&&Up(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ve(n,e,t,r){let i=Me(),s=Rt(),o=gn+n,a=i[Ye],c=s.firstCreatePass?HO(o,s,i,e,t,r):s.data[o],l=qO(s,i,c,a,e,n);i[o]=l;let h=sg(c);return va(c,!0),nb(a,l,c),!wO(c)&&lg()&&Dg(s,i,l,c),PN()===0&&si(l,i),ON(),h&&(cb(s,i,c),ab(s,c,i)),r!==null&&ub(i,c),ve}function De(){let n=Et();gD()?jN():(n=n.parent,va(n,!1));let e=n;LN(e)&&VN(),kN();let t=Rt();return t.firstCreatePass&&(hg(t,n),eD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&ex(e)&&_E(t,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&tx(e)&&_E(t,e,Me(),e.stylesWithoutHost,!1),De}function et(n,e,t,r){return ve(n,e,t,r),De(),et}var qO=(n,e,t,r,i,s)=>(dg(!0),KD(r,i,YN()));function Mb(){return Me()}var fl="en-US";var zO=fl;function GO(n){typeof n=="string"&&(zO=n.toLowerCase().replace(/_/g,"-"))}var WO=(n,e,t)=>{};function sn(n,e,t,r){let i=Me(),s=Rt(),o=Et();return Nb(s,i,i[Ye],o,n,e,r),sn}function KO(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Yu],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function Nb(n,e,t,r,i,s,o){let a=sg(r),l=n.firstCreatePass&&IP(n),h=e[en],p=_P(e),m=!0;if(r.type&3||o){let N=rn(r,e),M=o?o(N):N,k=p.length,B=o?H=>o(mn(H[r.index])):r.index,F=null;if(!o&&a&&(F=KO(n,e,i,r.index)),F!==null){let H=F.__ngLastListenerFn__||F;H.__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,m=!1}else{s=EE(r,e,h,s),WO(N,i,s);let H=t.listen(M,i,s);p.push(s,H),l&&l.push(i,B,k,k+1)}}else s=EE(r,e,h,s);let v=r.outputs,T;if(m&&v!==null&&(T=v[i])){let N=T.length;if(N)for(let M=0;M<N;M+=2){let k=T[M],B=T[M+1],X=e[k][B].subscribe(s),$=p.length;p.push(s,X),l&&l.push(i,r.index,$,-($+1))}}}function wE(n,e,t,r){let i=ye(null);try{return dn(6,e,t),t(r)!==!1}catch(s){return yb(n,s),!1}finally{dn(7,e,t),ye(i)}}function EE(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?vr(n.index,e):e;Ag(o,5);let a=wE(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=wE(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function xg(n=1){return QN(n)}function QO(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Le(n,e=""){let t=Me(),r=Rt(),i=n+gn,s=r.firstCreatePass?Cl(r,i,1,e,null):r.data[i],o=YO(r,t,s,e,n);t[i]=o,lg()&&Dg(r,t,o,s),va(s,!1)}var YO=(n,e,t,r,i)=>(dg(!0),xx(e[Ye],r));function hi(n){return fi("",n,""),hi}function fi(n,e,t){let r=Me(),i=SO(r,n,e,t);return i!==li&&wP(r,ks(),i),fi}function Pg(n,e,t){Sb(e)&&(e=e());let r=Me(),i=ag();if(Ea(r,i,e)){let s=Rt(),o=DD();db(s,o,r,n,e,r[Ye],t,!1)}return Pg}function xb(n,e){let t=Sb(n);return t&&n.set(e),t}function Og(n,e){let t=Me(),r=Rt(),i=Et();return Nb(r,t,t[Ye],i,n,e),Og}function ZO(n,e,t){let r=Rt();if(r.firstCreatePass){let i=mr(n);zp(t,r.data,r.blueprint,i,!0),zp(e,r.data,r.blueprint,i,!1)}}function zp(n,e,t,r,i){if(n=ht(n),Array.isArray(n))for(let s=0;s<n.length;s++)zp(n[s],e,t,r,i);else{let s=Rt(),o=Me(),a=Et(),c=bs(n)?n:ht(n.provide),l=ZE(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(bs(n)||!n.multi){let v=new ii(l,i,he),T=up(c,e,i?h:h+m,p);T===-1?(Dp(il(a,o),s,c),cp(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),o.push(v)):(t[T]=v,o[T]=v)}else{let v=up(c,e,h+m,p),T=up(c,e,h,h+m),N=v>=0&&t[v],M=T>=0&&t[T];if(i&&!M||!i&&!N){Dp(il(a,o),s,c);let k=ek(i?XO:JO,t.length,i,r,l);!i&&M&&(t[T].providerFactory=k),cp(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),o.push(k)}else{let k=Pb(t[i?T:v],l,!i&&r);cp(s,n,v>-1?v:T,k)}!i&&r&&M&&t[T].componentProviders++}}}function cp(n,e,t,r){let i=bs(e),s=gN(e);if(i||s){let c=(s?ht(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function Pb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function up(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function JO(n,e,t,r){return Gp(this.multi,[])}function XO(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=As(t,t[ae],this.providerFactory.index,r);s=a.slice(0,o),Gp(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Gp(i,s);return s}function Gp(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function ek(n,e,t,r,i){let s=new ii(n,t,he);return s.multi=[],s.index=e,s.componentProviders=0,Pb(s,i,r&&!t),s}function kg(n,e=[]){return t=>{t.providersResolver=(r,i)=>ZO(r,i?i(n):n,e)}}var tk=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=KE(!1,t.type),i=r.length>0?Mg([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(Y(jt))})}}return n})();function vn(n){wa("NgStandalone"),n.getStandaloneInjector=e=>e.get(tk).getOrCreateStandaloneInjector(n)}function nk(n,e){let t=n[e];return t===li?void 0:t}function rk(n,e,t,r,i,s){let o=e+t;return Ea(n,o,i)?IO(n,o+1,s?r.call(s,i):r(i)):nk(n,o+1)}function Ob(n,e){let t=Rt(),r,i=n+gn;t.firstCreatePass?(r=ik(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Xr(r.type,!0)),o,a=_t(he);try{let c=rl(!1),l=s();return rl(c),QO(t,Me(),i,l),l}finally{_t(a)}}function ik(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function kb(n,e,t){let r=n+gn,i=Me(),s=RN(i,r);return sk(i,r)?rk(i,BN(),e,s.transform,t,s):s.transform(t)}function sk(n,e){return n[ae].data[e].pure}var jn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Fb=new jn("18.2.10");var Ml=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Lb=new W("");function pi(n){return!!n&&typeof n.then=="function"}function Vb(n){return!!n&&typeof n.subscribe=="function"}var Ub=new W(""),jb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=V(Ub,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(pi(s))t.push(s);else if(Vb(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fg=new W("");function ok(){fw(()=>{throw new K(600,!1)})}function ak(n){return n.isBoundToModule}var ck=10;function uk(n,e,t){try{let r=t();return pi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var gi=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(Ix),this.afterRenderManager=V(TO),this.zonelessEnabled=V(Sl),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Je,this.afterTick=new Je,this.componentTypes=[],this.components=[],this.isStable=V(Fs).hasPendingTasks.pipe(oe(t=>!t)),this._injector=V(jt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof ul;if(!this._injector.get(jb).done){let m=!i&&qE(t),v=!1;throw new K(405,v)}let o;i?o=t:o=this._injector.get(Ms).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=ak(o)?void 0:this._injector.get(yr),c=r||o.selector,l=o.create(wt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(Lb,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Hu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new K(101,!1);let t=ye(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ye(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Ns,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<ck;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)lk(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Il(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Hu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Fg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Hu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Hu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function lk(n,e,t,r){if(!t&&!Il(n))return;Ib(n,e,t&&!r?0:1)}var Wp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Lg=(()=>{class n{compileModuleSync(t){return new $p(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=zE(t),s=WD(i.declarations).reduce((o,a)=>{let c=ei(a);return c&&o.push(new ha(c)),o},[]);return new Wp(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var dk=(()=>{class n{constructor(){this.zone=V(Ee),this.changeDetectionScheduler=V(Rs),this.applicationRef=V(gi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hk=new W("",{factory:()=>!1});function Bb({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ee(le(L({},Hb()),{scheduleInRootZone:t})),[{provide:Ee,useFactory:n},{provide:Ds,multi:!0,useFactory:()=>{let r=V(dk,{optional:!0});return()=>r.initialize()}},{provide:Ds,multi:!0,useFactory:()=>{let r=V(fk);return()=>{r.initialize()}}},e===!0?{provide:bb,useValue:!0}:[],{provide:Cb,useValue:t??FD}]}function $b(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Bb({ngZoneFactory:()=>{let i=Hb(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&wa("NgZone_CoalesceEvent"),new Ee(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return yn([{provide:hk,useValue:!0},{provide:Sl,useValue:!1},r])}function Hb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var fk=(()=>{class n{constructor(){this.subscription=new ke,this.initialized=!1,this.zone=V(Ee),this.pendingTasks=V(Fs)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ee.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var pk=(()=>{class n{constructor(){this.appRef=V(gi),this.taskService=V(Fs),this.ngZone=V(Ee),this.zonelessEnabled=V(Sl),this.disableScheduling=V(bb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ke,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ol):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(Cb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ap||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?iE:VD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ol+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,iE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gk(){return typeof $localize<"u"&&$localize.locale||fl}var Vg=new W("",{providedIn:"root",factory:()=>V(Vg,ie.Optional|ie.SkipSelf)||gk()});var Kp=new W("");function Uu(n){return!n.moduleRef}function mk(n){let e=Uu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ee);return t.run(()=>{Uu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Vn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Uu(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Kp);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Kp);o.add(s),n.moduleRef.onDestroy(()=>{Hu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return uk(r,t,()=>{let s=e.get(jb);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Vg,fl);if(GO(o||fl),Uu(n)){let a=e.get(gi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return yk(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function yk(n,e){let t=n.injector.get(gi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new K(-403,!1);e.push(n)}var qu=null;function vk(n=[],e){return wt.create({name:e,providers:[{provide:yl,useValue:"platform"},{provide:Kp,useValue:new Set([()=>qu=null])},...n]})}function _k(n=[]){if(qu)return qu;let e=vk(n);return qu=e,ok(),Ik(e),e}function Ik(n){n.get(yg,null)?.forEach(t=>t())}var mi=(()=>{class n{static{this.__NG_ELEMENT_ID__=wk}}return n})();function wk(n){return Ek(Et(),Me(),(n&16)===16)}function Ek(n,e,t){if(_l(n)&&!t){let r=vr(n.index,e);return new oi(r,r)}else if(n.type&175){let r=e[pn];return new oi(r,e)}return null}var Qp=class{constructor(){}supports(e){return Ab(e)}create(e){return new Yp(e)}},Dk=(n,e)=>e,Yp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Dk}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<DE(r,i,s)?t:r,a=DE(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let v=m<s.length?s[m]:s[m]=0,T=v+m;h<=T&&T<l&&(s[m]=v+1)}let p=o.previousIndex;s[p]=h-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Ab(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,vO(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Zp(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new pl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new pl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Zp=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Jp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},pl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Jp,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function DE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function bE(){return new Ug([new Qp])}var Ug=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:bE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||bE()),deps:[[n,new kE,new at]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new K(901,!1)}}return n})();function qb(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=_k(r),s=[Bb({}),{provide:Rs,useExisting:pk},...t||[]],o=new dl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return mk({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Nl(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function xl(n,e){wa("NgSignals");let t=lw(n);return e?.equal&&(t[On].equal=e.equal),t}function wr(n){let e=ye(null);try{return n()}finally{ye(e)}}var Qb=null;function qn(){return Qb}function Yb(n){Qb??=n}var Pl=class{};var $t=new W(""),Zb=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(Tk),providedIn:"platform"})}}return n})();var Tk=(()=>{class n extends Zb{constructor(){super(),this._doc=V($t),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qn().getBaseHref(this._doc)}onPopState(t){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Jb(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function zb(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function yi(n){return n&&n[0]!=="?"?"?"+n:n}var kl=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(Xb),providedIn:"root"})}}return n})(),Sk=new W(""),Xb=(()=>{class n extends kl{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V($t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Jb(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+yi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+yi(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+yi(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Y(Zb),Y(Sk,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ca=(()=>{class n{constructor(t){this._subject=new ze,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Mk(zb(Gb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+yi(r))}normalize(t){return n.stripTrailingSlash(Rk(this._basePath,Gb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=yi}static{this.joinWithSlash=Jb}static{this.stripTrailingSlash=zb}static{this.\u0275fac=function(r){return new(r||n)(Y(kl))}}static{this.\u0275prov=G({token:n,factory:()=>Ak(),providedIn:"root"})}}return n})();function Ak(){return new Ca(Y(kl))}function Rk(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Gb(n){return n.replace(/\/index.html$/,"")}function Mk(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function eC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var jg=/\s+/,Wb=[],tC=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=Wb,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(jg):Wb}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(jg):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(jg).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(he(_r),he(di))}}static{this.\u0275dir=tn({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Bg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},nC=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Bg(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),Kb(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);Kb(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(he(Ia),he(Rg),he(Ug))}}static{this.\u0275dir=tn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Kb(n,e){n.context.$implicit=e.item}function Nk(n,e){return new K(2100,!1)}var rC=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw Nk(n,t);return t.toUpperCase()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=BE({name:"uppercase",type:n,pure:!0,standalone:!0})}}return n})();var $g=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ui({type:n})}static{this.\u0275inj=ci({})}}return n})(),iC="browser",xk="server";function Hg(n){return n===xk}var Ol=class{};var Gg=class extends Pl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Wg=class n extends Gg{static makeCurrent(){Yb(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Ok();return t==null?null:kk(t)}resetBaseElement(){Ta=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return eC(document.cookie,e)}},Ta=null;function Ok(){return Ta=Ta||document.querySelector("base"),Ta?Ta.getAttribute("href"):null}function kk(n){return new URL(n,document.baseURI).pathname}var Fk=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Kg=new W(""),cC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Y(Kg),Y(Ee))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Fl=class{constructor(e){this._doc=e}},qg="ng-app-id",uC=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Hg(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${qg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(qg),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(qg,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Y($t),Y(mg),Y(vg,8),Y(Ir))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),zg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Yg=/%COMP%/g,lC="%COMP%",Lk=`_nghost-${lC}`,Vk=`_ngcontent-${lC}`,Uk=!0,jk=new W("",{providedIn:"root",factory:()=>Uk});function Bk(n){return Vk.replace(Yg,n)}function $k(n){return Lk.replace(Yg,n)}function dC(n,e){return e.map(t=>t.replace(Yg,n))}var sC=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Hg(a),this.defaultRenderer=new Sa(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===fn.ShadowDom&&(r=le(L({},r),{encapsulation:fn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Ll?i.applyToHost(t):i instanceof Aa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case fn.Emulated:s=new Ll(c,l,r,this.appId,h,o,a,p);break;case fn.ShadowDom:return new Qg(c,l,t,r,o,a,this.nonce,p);default:s=new Aa(c,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Y(cC),Y(uC),Y(mg),Y(jk),Y($t),Y(Ir),Y(Ee),Y(vg))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Sa=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(zg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(oC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(oC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=zg[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=zg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Un.DashCase|Un.Important)?e.style.setProperty(t,r,i&Un.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Un.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=qn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function oC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Qg=class extends Sa{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=dC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Aa=class extends Sa{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?dC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ll=class extends Aa{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=Bk(l),this.hostAttr=$k(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Hk=(()=>{class n extends Fl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Y($t))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),aC=["alt","control","meta","shift"],qk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Gk=(()=>{class n extends Fl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qn().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),aC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=qk[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),aC.forEach(o=>{if(o!==i){let a=zk[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Y($t))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function hC(n,e){return qb(L({rootComponent:n},Wk(e)))}function Wk(n){return{appProviders:[...Jk,...n?.providers??[]],platformProviders:Zk}}function Kk(){Wg.makeCurrent()}function Qk(){return new Vn}function Yk(){return zD(document),document}var Zk=[{provide:Ir,useValue:iC},{provide:yg,useValue:Kk,multi:!0},{provide:$t,useFactory:Yk,deps:[]}];var Jk=[{provide:yl,useValue:"root"},{provide:Vn,useFactory:Qk,deps:[]},{provide:Kg,useClass:Hk,multi:!0,deps:[$t,Ee,Ir]},{provide:Kg,useClass:Gk,multi:!0,deps:[$t]},sC,uC,cC,{provide:Ns,useExisting:sC},{provide:Ol,useClass:Fk,deps:[]},[]];var fC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Y($t))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var re="primary",za=Symbol("RouteTitle"),tm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Hs(n){return new tm(n)}function t1(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function n1(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_n(n[t],e[t]))return!1;return!0}function _n(n,e){let t=n?nm(n):void 0,r=e?nm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!wC(n[i],e[i]))return!1;return!0}function nm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function EC(n){return n.length>0?n[n.length-1]:null}function Dr(n){return Hf(n)?n:pi(n)?Fe(Promise.resolve(n)):ne(n)}var r1={exact:bC,subset:CC},DC={exact:i1,subset:s1,ignored:()=>!0};function pC(n,e,t){return r1[t.paths](n.root,e.root,t.matrixParams)&&DC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function i1(n,e){return _n(n,e)}function bC(n,e,t){if(!_i(n.segments,e.segments)||!jl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!bC(n.children[r],e.children[r],t))return!1;return!0}function s1(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wC(n[t],e[t]))}function CC(n,e,t){return TC(n,e,e.segments,t)}function TC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!_i(i,t)||e.hasChildren()||!jl(i,t,r))}else if(n.segments.length===t.length){if(!_i(n.segments,t)||!jl(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!CC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!_i(n.segments,i)||!jl(n.segments,i,r)||!n.children[re]?!1:TC(n.children[re],e,s,r)}}function jl(n,e,t){return e.every((r,i)=>DC[t](n[i].parameters,r.parameters))}var Gn=class{constructor(e=new we([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Hs(this.queryParams),this._queryParamMap}toString(){return c1.serialize(this)}},we=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bl(this)}},vi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Hs(this.parameters),this._parameterMap}toString(){return AC(this)}};function o1(n,e){return _i(n,e)&&n.every((t,r)=>_n(t.parameters,e[r].parameters))}function _i(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function a1(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(t=t.concat(e(i,r)))}),t}var Am=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new ka,providedIn:"root"})}}return n})(),ka=class{parse(e){let t=new im(e);return new Gn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ra(e.root,!0)}`,r=d1(e.queryParams),i=typeof e.fragment=="string"?`#${u1(e.fragment)}`:"";return`${t}${r}${i}`}},c1=new ka;function Bl(n){return n.segments.map(e=>AC(e)).join("/")}function Ra(n,e){if(!n.hasChildren())return Bl(n);if(e){let t=n.children[re]?Ra(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==re&&r.push(`${i}:${Ra(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=a1(n,(r,i)=>i===re?[Ra(n.children[re],!1)]:[`${i}:${Ra(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${Bl(n)}/${t[0]}`:`${Bl(n)}/(${t.join("//")})`}}function SC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vl(n){return SC(n).replace(/%3B/gi,";")}function u1(n){return encodeURI(n)}function rm(n){return SC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $l(n){return decodeURIComponent(n)}function gC(n){return $l(n.replace(/\+/g,"%20"))}function AC(n){return`${rm(n.path)}${l1(n.parameters)}`}function l1(n){return Object.entries(n).map(([e,t])=>`;${rm(e)}=${rm(t)}`).join("")}function d1(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Vl(t)}=${Vl(i)}`).join("&"):`${Vl(t)}=${Vl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var h1=/^[^\/()?;#]+/;function Zg(n){let e=n.match(h1);return e?e[0]:""}var f1=/^[^\/()?;=#]+/;function p1(n){let e=n.match(f1);return e?e[0]:""}var g1=/^[^=?&#]+/;function m1(n){let e=n.match(g1);return e?e[0]:""}var y1=/^[^&#]+/;function v1(n){let e=n.match(y1);return e?e[0]:""}var im=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[re]=new we(e,t)),r}parseSegment(){let e=Zg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new vi($l(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=p1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Zg(this.remaining);i&&(r=i,this.capture(r))}e[$l(t)]=$l(r)}parseQueryParam(e){let t=m1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=v1(this.remaining);o&&(r=o,this.capture(r))}let i=gC(t),s=gC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Zg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new K(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=re);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[re]:new we([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}};function RC(n){return n.segments.length>0?new we([],{[re]:n}):n}function MC(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=MC(i);if(r===re&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new we(n.segments,e);return _1(t)}function _1(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new we(n.segments.concat(e.segments),e.children)}return n}function Fa(n){return n instanceof Gn}function I1(n,e,t=null,r=null){let i=NC(n);return xC(i,e,t,r)}function NC(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new we(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=RC(r);return e??i}function xC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Jg(i,i,i,t,r);let s=w1(e);if(s.toRoot())return Jg(i,i,new we([],{}),t,r);let o=E1(s,i,n),a=o.processChildren?xa(o.segmentGroup,o.index,s.commands):OC(o.segmentGroup,o.index,s.commands);return Jg(i,o.segmentGroup,a,t,r)}function Hl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function La(n){return typeof n=="object"&&n!=null&&n.outlets}function Jg(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;n===e?o=t:o=PC(n,e,t);let a=RC(MC(o));return new Gn(a,s,i)}function PC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=PC(s,e,t)}),new we(n.segments,r)}var ql=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Hl(r[0]))throw new K(4003,!1);let i=r.find(La);if(i&&i!==EC(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function w1(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ql(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new ql(t,e,r)}var js=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function E1(n,e,t){if(n.isAbsolute)return new js(e,!0,0);if(!t)return new js(e,!1,NaN);if(t.parent===null)return new js(t,!0,0);let r=Hl(n.commands[0])?0:1,i=t.segments.length-1+r;return D1(t,i,n.numberOfDoubleDots)}function D1(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new js(r,!1,i-s)}function b1(n){return La(n[0])?n[0].outlets:{[re]:n}}function OC(n,e,t){if(n??=new we([],{}),n.segments.length===0&&n.hasChildren())return xa(n,e,t);let r=C1(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new we(n.segments.slice(0,r.pathIndex),{});return s.children[re]=new we(n.segments.slice(r.pathIndex),n.children),xa(s,0,i)}else return r.match&&i.length===0?new we(n.segments,{}):r.match&&!n.hasChildren()?sm(n,e,t):r.match?xa(n,0,i):sm(n,e,t)}function xa(n,e,t){if(t.length===0)return new we(n.segments,{});{let r=b1(t),i={};if(Object.keys(r).some(s=>s!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let s=xa(n.children[re],e,t);return new we(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=OC(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new we(n.segments,i)}}function C1(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(La(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!yC(c,l,o))return s;r+=2}else{if(!yC(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function sm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(La(s)){let c=T1(s.outlets);return new we(r,c)}if(i===0&&Hl(t[0])){let c=n.segments[e];r.push(new vi(c.path,mC(t[0]))),i++;continue}let o=La(s)?s.outlets[re]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Hl(a)?(r.push(new vi(o,mC(a))),i+=2):(r.push(new vi(o,{})),i++)}return new we(r,{})}function T1(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=sm(new we([],{}),0,r))}),e}function mC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function yC(n,e,t){return n==t.path&&_n(e,t.parameters)}var Pa="imperative",tt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(tt||{}),Ht=class{constructor(e,t){this.id=e,this.url=t}},Va=class extends Ht{constructor(e,t,r="imperative",i=null){super(e,t),this.type=tt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ii=class extends Ht{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=tt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Nt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Nt||{}),om=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(om||{}),zn=class extends Ht{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=tt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},wi=class extends Ht{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=tt.NavigationSkipped}},Ua=class extends Ht{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=tt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},zl=class extends Ht{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=tt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},am=class extends Ht{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=tt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cm=class extends Ht{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=tt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},um=class extends Ht{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=tt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lm=class extends Ht{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=tt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dm=class{constructor(e){this.route=e,this.type=tt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hm=class{constructor(e){this.route=e,this.type=tt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},fm=class{constructor(e){this.snapshot=e,this.type=tt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pm=class{constructor(e){this.snapshot=e,this.type=tt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gm=class{constructor(e){this.snapshot=e,this.type=tt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mm=class{constructor(e){this.snapshot=e,this.type=tt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ja=class{},qs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function S1(n,e){return n.providers&&!n._injector&&(n._injector=Mg(n.providers,e,`Route: ${n.path}`)),n._injector??e}function on(n){return n.outlet||re}function A1(n,e){let t=n.filter(r=>on(r)===e);return t.push(...n.filter(r=>on(r)!==e)),t}function Ga(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ym=class{get injector(){return Ga(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Jl(this.rootInjector),this.attachRef=null}},Jl=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ym(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Y(jt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Gl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=vm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=vm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=_m(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return _m(e,this._root).map(t=>t.value)}};function vm(n,e){if(n===e.value)return e;for(let t of e.children){let r=vm(n,t);if(r)return r}return null}function _m(n,e){if(n===e.value)return[e];for(let t of e.children){let r=_m(n,t);if(r.length)return r.unshift(e),r}return[]}var Mt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Us(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Wl=class extends Gl{constructor(e,t){super(e),this.snapshot=t,Rm(this,e)}toString(){return this.snapshot.toString()}};function kC(n){let e=R1(n),t=new Xe([new vi("",{})]),r=new Xe({}),i=new Xe({}),s=new Xe({}),o=new Xe(""),a=new Er(t,r,s,o,i,re,n,e.root);return a.snapshot=e.root,new Wl(new Mt(a,[]),e)}function R1(n){let e={},t={},r={},i="",s=new Bs([],e,r,i,t,re,n,null,{});return new Ql("",new Mt(s,[]))}var Er=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(oe(l=>l[za]))??ne(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>Hs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>Hs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Kl(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&LC(i)&&(r.resolve[za]=i.title),r}var Bs=class{get title(){return this.data?.[za]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Hs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Hs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ql=class extends Gl{constructor(e,t){super(t),this.url=e,Rm(this,t)}toString(){return FC(this._root)}};function Rm(n,e){e.value._routerState=n,e.children.forEach(t=>Rm(n,t))}function FC(n){let e=n.children.length>0?` { ${n.children.map(FC).join(", ")} } `:"";return`${n.value}${e}`}function Xg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_n(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),_n(e.params,t.params)||n.paramsSubject.next(t.params),n1(e.url,t.url)||n.urlSubject.next(t.url),_n(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Im(n,e){let t=_n(n.params,e.params)&&o1(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Im(n.parent,e.parent))}function LC(n){return typeof n.title=="string"||n.title===null}var Mm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new ze,this.deactivateEvents=new ze,this.attachEvents=new ze,this.detachEvents=new ze,this.parentContexts=V(Jl),this.location=V(Ia),this.changeDetector=V(mi),this.inputBinder=V(Nm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new wm(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=tn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Os]})}}return n})(),wm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Er?this.route:e===Jl?this.childContexts:this.parent.get(e,t)}},Nm=new W("");function M1(n,e,t){let r=Ba(n,e._root,t?t._root:void 0);return new Wl(r,e)}function Ba(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=N1(n,e,t);return new Mt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ba(n,a)),o}}let r=x1(e.value),i=e.children.map(s=>Ba(n,s));return new Mt(r,i)}}function N1(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ba(n,r,i);return Ba(n,r)})}function x1(n){return new Er(new Xe(n.url),new Xe(n.params),new Xe(n.queryParams),new Xe(n.fragment),new Xe(n.data),n.outlet,n.component,n)}var $a=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},VC="ngNavigationCancelingError";function Yl(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Fa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=UC(!1,Nt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function UC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[VC]=!0,t.cancellationCode=e,t}function P1(n){return jC(n)&&Fa(n.url)}function jC(n){return!!n&&n[VC]}var O1=(n,e,t,r)=>oe(i=>(new Em(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Em=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Us(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Us(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Us(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Us(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new mm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new pm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Xg(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Xg(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Zl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$s=class{constructor(e,t){this.component=e,this.route=t}};function k1(n,e,t){let r=n._root,i=e?e._root:null;return Ma(r,i,t,[r.value])}function F1(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Gs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!SE(n)?n:e.get(n):r}function Ma(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Us(e);return n.children.forEach(o=>{L1(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Oa(a,t.getContext(o),i)),i}function L1(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=V1(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Zl(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ma(n,e,a?a.children:null,r,i):Ma(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $s(a.outlet.component,o))}else o&&Oa(e,a,i),i.canActivateChecks.push(new Zl(r)),s.component?Ma(n,null,a?a.children:null,r,i):Ma(n,null,t,r,i);return i}function V1(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!_i(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_i(n.url,e.url)||!_n(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Im(n,e)||!_n(n.queryParams,e.queryParams);case"paramsChange":default:return!Im(n,e)}}function Oa(n,e,t){let r=Us(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Oa(o,e.children.getContext(s),t):Oa(o,null,t):Oa(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new $s(e.outlet.component,i)):t.canDeactivateChecks.push(new $s(null,i)):t.canDeactivateChecks.push(new $s(null,i))}function Wa(n){return typeof n=="function"}function U1(n){return typeof n=="boolean"}function j1(n){return n&&Wa(n.canLoad)}function B1(n){return n&&Wa(n.canActivate)}function $1(n){return n&&Wa(n.canActivateChild)}function H1(n){return n&&Wa(n.canDeactivate)}function q1(n){return n&&Wa(n.canMatch)}function BC(n){return n instanceof kn||n?.name==="EmptyError"}var Ul=Symbol("INITIAL_VALUE");function zs(){return Zt(n=>Pu(n.map(e=>e.pipe(Fn(1),Qf(Ul)))).pipe(oe(e=>{for(let t of e)if(t!==!0){if(t===Ul)return Ul;if(t===!1||z1(t))return t}return!0}),Yt(e=>e!==Ul),Fn(1)))}function z1(n){return Fa(n)||n instanceof $a}function G1(n,e){return He(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?ne(le(L({},t),{guardsResult:!0})):W1(o,r,i,n).pipe(He(a=>a&&U1(a)?K1(r,s,n,e):ne(a)),oe(a=>le(L({},t),{guardsResult:a})))})}function W1(n,e,t,r){return Fe(n).pipe(He(i=>X1(i.component,i.route,t,e,r)),ln(i=>i!==!0,!0))}function K1(n,e,t,r){return Fe(e).pipe(gs(i=>ps(Y1(i.route.parent,r),Q1(i.route,r),J1(n,i.path,t),Z1(n,i.route,t))),ln(i=>i!==!0,!0))}function Q1(n,e){return n!==null&&e&&e(new gm(n)),ne(!0)}function Y1(n,e){return n!==null&&e&&e(new fm(n)),ne(!0)}function Z1(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ne(!0);let i=r.map(s=>Ou(()=>{let o=Ga(e)??t,a=Gs(s,o),c=B1(a)?a.canActivate(e,n):Bn(o,()=>a(e,n));return Dr(c).pipe(ln())}));return ne(i).pipe(zs())}function J1(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>F1(o)).filter(o=>o!==null).map(o=>Ou(()=>{let a=o.guards.map(c=>{let l=Ga(o.node)??t,h=Gs(c,l),p=$1(h)?h.canActivateChild(r,n):Bn(l,()=>h(r,n));return Dr(p).pipe(ln())});return ne(a).pipe(zs())}));return ne(s).pipe(zs())}function X1(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ne(!0);let o=s.map(a=>{let c=Ga(e)??i,l=Gs(a,c),h=H1(l)?l.canDeactivate(n,e,t,r):Bn(c,()=>l(n,e,t,r));return Dr(h).pipe(ln())});return ne(o).pipe(zs())}function eF(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ne(!0);let s=i.map(o=>{let a=Gs(o,n),c=j1(a)?a.canLoad(e,t):Bn(n,()=>a(e,t));return Dr(c)});return ne(s).pipe(zs(),$C(r))}function $C(n){return kf(qe(e=>{if(typeof e!="boolean")throw Yl(n,e)}),oe(e=>e===!0))}function tF(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ne(!0);let s=i.map(o=>{let a=Gs(o,n),c=q1(a)?a.canMatch(e,t):Bn(n,()=>a(e,t));return Dr(c)});return ne(s).pipe(zs(),$C(r))}var Ha=class{constructor(e){this.segmentGroup=e||null}},qa=class extends Error{constructor(e){super(),this.urlTree=e}};function Vs(n){return fs(new Ha(n))}function nF(n){return fs(new K(4e3,!1))}function rF(n){return fs(UC(!1,Nt.GuardRejected))}var Dm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ne(r);if(i.numberOfChildren>1||!i.children[re])return nF(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:T,title:N}=i,M=Bn(s,()=>a({params:v,data:T,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(M instanceof Gn)throw new qa(M);t=M}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new qa(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Gn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new we(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},bm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function iF(n,e,t,r,i){let s=HC(n,e,t);return s.matched?(r=S1(e,r),tF(r,e,t,i).pipe(oe(o=>o===!0?s:L({},bm)))):ne(s)}function HC(n,e,t){if(e.path==="**")return sF(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},bm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||t1)(t,n,e);if(!i)return L({},bm);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function sF(n){return{matched:!0,parameters:n.length>0?EC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function vC(n,e,t,r){return t.length>0&&cF(n,t,r)?{segmentGroup:new we(e,aF(r,new we(t,n.children))),slicedSegments:[]}:t.length===0&&uF(n,t,r)?{segmentGroup:new we(n.segments,oF(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new we(n.segments,n.children),slicedSegments:t}}function oF(n,e,t,r){let i={};for(let s of t)if(Xl(n,e,s)&&!r[on(s)]){let o=new we([],{});i[on(s)]=o}return L(L({},r),i)}function aF(n,e){let t={};t[re]=e;for(let r of n)if(r.path===""&&on(r)!==re){let i=new we([],{});t[on(r)]=i}return t}function cF(n,e,t){return t.some(r=>Xl(n,e,r)&&on(r)!==re)}function uF(n,e,t){return t.some(r=>Xl(n,e,r))}function Xl(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function lF(n,e,t){return e.length===0&&!n.children[t]}var Cm=class{};function dF(n,e,t,r,i,s,o="emptyOnly"){return new Tm(n,e,t,r,i,o,s).recognize()}var hF=31,Tm=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Dm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){let e=vC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(({children:t,rootSnapshot:r})=>{let i=new Mt(r,t),s=new Ql("",i),o=I1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Bs([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,t).pipe(oe(r=>({children:r,rootSnapshot:t})),lr(r=>{if(r instanceof qa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ha?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(oe(o=>o instanceof Mt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Fe(s).pipe(gs(o=>{let a=r.children[o],c=A1(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Kf((o,a)=>(o.push(...a),o)),dr(null),Wf(),He(o=>{if(o===null)return Vs(r);let a=qC(o);return fF(a),ne(a)}))}processSegment(e,t,r,i,s,o,a){return Fe(t).pipe(gs(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(lr(l=>{if(l instanceof Ha)return ne(null);throw l}))),ln(c=>!!c),lr(c=>{if(BC(c))return lF(r,i,s)?ne(new Cm):Vs(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return on(r)!==o&&(o===re||!Xl(i,s,r))?Vs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Vs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=HC(t,i,s);if(!c)return Vs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hF&&(this.allowRedirects=!1));let v=new Bs(s,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,_C(i),on(i),i.component??i._loadedComponent??null,i,IC(i)),T=Kl(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(T.params),v.data=Object.freeze(T.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(He(M=>this.processSegment(e,r,t,M.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=iF(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Zt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Zt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=c,T=new Bs(m,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,_C(r),on(r),r.component??r._loadedComponent??null,r,IC(r)),N=Kl(T,o,this.paramsInheritanceStrategy);T.params=Object.freeze(N.params),T.data=Object.freeze(N.data);let{segmentGroup:M,slicedSegments:k}=vC(t,m,v,l);if(k.length===0&&M.hasChildren())return this.processChildren(h,l,M,T).pipe(oe(F=>new Mt(T,F)));if(l.length===0&&k.length===0)return ne(new Mt(T,[]));let B=on(r)===s;return this.processSegment(h,l,M,k,B?re:s,!0,T).pipe(oe(F=>new Mt(T,F instanceof Mt?[F]:[])))}))):Vs(t)))}getChildConfig(e,t,r){return t.children?ne({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ne({routes:t._loadedRoutes,injector:t._loadedInjector}):eF(e,t,r,this.urlSerializer).pipe(He(i=>i?this.configLoader.loadChildren(e,t).pipe(qe(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):rF(t))):ne({routes:[],injector:e})}};function fF(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function pF(n){let e=n.value.routeConfig;return e&&e.path===""}function qC(n){let e=[],t=new Set;for(let r of n){if(!pF(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=qC(r.children);e.push(new Mt(r.value,i))}return e.filter(r=>!t.has(r))}function _C(n){return n.data||{}}function IC(n){return n.resolve||{}}function gF(n,e,t,r,i,s){return He(o=>dF(n,e,t,r,o.extractedUrl,i,s).pipe(oe(({state:a,tree:c})=>le(L({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function mF(n,e){return He(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ne(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of zC(c))o.add(l);let a=0;return Fe(o).pipe(gs(c=>s.has(c)?yF(c,r,n,e):(c.data=Kl(c,c.parent,n).resolve,ne(void 0))),qe(()=>a++),ms(1),He(c=>a===o.size?ne(t):At))})}function zC(n){let e=n.children.map(t=>zC(t)).flat();return[n,...e]}function yF(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!LC(i)&&(s[za]=i.title),vF(s,n,e,r).pipe(oe(o=>(n._resolvedData=o,n.data=Kl(n,n.parent,t).resolve,null)))}function vF(n,e,t,r){let i=nm(n);if(i.length===0)return ne({});let s={};return Fe(i).pipe(He(o=>_F(n[o],e,t,r).pipe(ln(),qe(a=>{if(a instanceof $a)throw Yl(new ka,a);s[o]=a}))),ms(1),Gf(s),lr(o=>BC(o)?At:fs(o)))}function _F(n,e,t,r){let i=Ga(e)??r,s=Gs(n,i),o=s.resolve?s.resolve(e,t):Bn(i,()=>s(e,t));return Dr(o)}function em(n){return Zt(e=>{let t=n(e);return t?Fe(t).pipe(oe(()=>e)):ne(e)})}var GC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===re);return r}getResolvedTitleForRoute(t){return t.data[za]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(IF),providedIn:"root"})}}return n})(),IF=(()=>{class n extends GC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Y(fC))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xm=new W("",{providedIn:"root",factory:()=>({})}),wF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Bt({type:n,selectors:[["ng-component"]],standalone:!0,features:[vn],decls:1,vars:0,template:function(r,i){r&1&&et(0,"router-outlet")},dependencies:[Mm],encapsulation:2})}}return n})();function Pm(n){let e=n.children&&n.children.map(Pm),t=e?le(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=wF),t}var Om=new W(""),EF=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(Lg)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ne(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Dr(t.loadComponent()).pipe(oe(WC),qe(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ia(()=>{this.componentLoaders.delete(t)})),i=new us(r,()=>new Je).pipe(cs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=DF(r,this.compiler,t,this.onLoadEndListener).pipe(ia(()=>{this.childrenLoaders.delete(r)})),o=new us(s,()=>new Je).pipe(cs());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function DF(n,e,t,r){return Dr(n.loadChildren()).pipe(oe(WC),He(i=>i instanceof fa||Array.isArray(i)?ne(i):Fe(e.compileModuleAsync(i))),oe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Om,[],{optional:!0,self:!0}).flat()),{routes:o.map(Pm),injector:s}}))}function bF(n){return n&&typeof n=="object"&&"default"in n}function WC(n){return bF(n)?n.default:n}var km=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(CF),providedIn:"root"})}}return n})(),CF=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),TF=new W("");var SF=new W(""),AF=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Je,this.transitionAbortSubject=new Je,this.configLoader=V(EF),this.environmentInjector=V(jt),this.urlSerializer=V(Am),this.rootContexts=V(Jl),this.location=V(Ca),this.inputBindingEnabled=V(Nm,{optional:!0})!==null,this.titleStrategy=V(GC),this.options=V(xm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(km),this.createViewTransition=V(TF,{optional:!0}),this.navigationErrorHandler=V(SF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ne(void 0),this.rootComponentType=null;let t=i=>this.events.next(new dm(i)),r=i=>this.events.next(new hm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(le(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Xe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Pa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Yt(s=>s.id!==0),oe(s=>le(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Zt(s=>{let o=!1,a=!1;return ne(s).pipe(Zt(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Nt.SupersededByNewNavigation),At;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?le(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new wi(c.id,this.urlSerializer.serialize(c.rawUrl),p,om.IgnoredSameUrlNavigation)),c.resolve(!1),At}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ne(c).pipe(Zt(p=>{let m=this.transitions?.getValue();return this.events.next(new Va(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?At:Promise.resolve(p)}),gF(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),qe(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=le(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new zl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:T,extras:N}=c,M=new Va(p,this.urlSerializer.serialize(m),v,T);this.events.next(M);let k=kC(this.rootComponentType).snapshot;return this.currentTransition=s=le(L({},c),{targetSnapshot:k,urlAfterRedirects:m,extras:le(L({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ne(s)}else{let p="";return this.events.next(new wi(c.id,this.urlSerializer.serialize(c.extractedUrl),p,om.IgnoredByUrlHandlingStrategy)),c.resolve(!1),At}}),qe(c=>{let l=new am(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),oe(c=>(this.currentTransition=s=le(L({},c),{guards:k1(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),G1(this.environmentInjector,c=>this.events.next(c)),qe(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Yl(this.urlSerializer,c.guardsResult);let l=new cm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Yt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Nt.GuardRejected),!1)),em(c=>{if(c.guards.canActivateChecks.length)return ne(c).pipe(qe(l=>{let h=new um(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Zt(l=>{let h=!1;return ne(l).pipe(mF(this.paramsInheritanceStrategy,this.environmentInjector),qe({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Nt.NoDataFromResolver)}}))}),qe(l=>{let h=new lm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),em(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(qe(m=>{h.component=m}),oe(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Pu(l(c.targetSnapshot.root)).pipe(dr(null),Fn(1))}),em(()=>this.afterPreactivation()),Zt(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Fe(h).pipe(oe(()=>s)):ne(s)}),oe(c=>{let l=M1(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=le(L({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),qe(()=>{this.events.next(new ja)}),O1(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Fn(1),qe({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ii(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Yf(this.transitionAbortSubject.pipe(qe(c=>{throw c}))),ia(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Nt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),lr(c=>{if(a=!0,jC(c))this.events.next(new zn(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),P1(c)?this.events.next(new qs(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Ua(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let h=Bn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof $a){let{message:p,cancellationCode:m}=Yl(this.urlSerializer,h);this.events.next(new zn(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new qs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return At}))}))}cancelNavigationTransition(t,r,i){let s=new zn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RF(n){return n!==Pa}var MF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(NF),providedIn:"root"})}}return n})(),Sm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},NF=(()=>{class n extends Sm{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_a(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),KC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>V(xF),providedIn:"root"})}}return n})(),xF=(()=>{class n extends KC{constructor(){super(...arguments),this.location=V(Ca),this.urlSerializer=V(Am),this.options=V(xm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(km),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Gn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=kC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Va)this.stateMemento=this.createStateMemento();else if(t instanceof wi)this.rawUrlTree=r.initialUrl;else if(t instanceof zl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof ja?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof zn&&(t.code===Nt.GuardRejected||t.code===Nt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ua?this.restoreHistory(r,!0):t instanceof Ii&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Gn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_a(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Na=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Na||{});function PF(n,e){n.events.pipe(Yt(t=>t instanceof Ii||t instanceof zn||t instanceof Ua||t instanceof wi),oe(t=>t instanceof Ii||t instanceof wi?Na.COMPLETE:(t instanceof zn?t.code===Nt.Redirect||t.code===Nt.SupersededByNewNavigation:!1)?Na.REDIRECTING:Na.FAILED),Yt(t=>t!==Na.REDIRECTING),Fn(1)).subscribe(()=>{e()})}function OF(n){throw n}var kF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},In=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=V(Ml),this.stateManager=V(KC),this.options=V(xm,{optional:!0})||{},this.pendingTasks=V(Fs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(AF),this.urlSerializer=V(Am),this.location=V(Ca),this.urlHandlingStrategy=V(km),this._events=new Je,this.errorHandler=this.options.errorHandler||OF,this.navigated=!1,this.routeReuseStrategy=V(MF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(Om,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(Nm,{optional:!0}),this.eventsSubscription=new ke,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof zn&&r.code!==Nt.Redirect&&r.code!==Nt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ii)this.navigated=!0;else if(r instanceof qs){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||RF(i.source)},o);this.scheduleNavigation(a,Pa,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}VF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=L({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Pm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=NC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return xC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Fa(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Pa,null,r)}navigate(t,r={skipLocationChange:!1}){return LF(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},kF):r===!1?i=L({},FF):i=r,Fa(t))return pC(this.currentUrlTree,t,i);let s=this.parseUrl(t);return pC(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return PF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LF(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new K(4008,!1)}function VF(n){return!(n instanceof ja)&&!(n instanceof qs)}var UF=new W("");function QC(n,...e){return yn([{provide:Om,multi:!0,useValue:n},[],{provide:Er,useFactory:jF,deps:[In]},{provide:Fg,multi:!0,useFactory:BF},e.map(t=>t.\u0275providers)])}function jF(n){return n.routerState.root}function BF(){let n=V(wt);return e=>{let t=n.get(gi);if(e!==t.components[0])return;let r=n.get(In),i=n.get($F);n.get(HF)===1&&r.initialNavigation(),n.get(qF,null,ie.Optional)?.setUpPreloading(),n.get(UF,null,ie.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var $F=new W("",{factory:()=>new Je}),HF=new W("",{providedIn:"root",factory:()=>1});var qF=new W("");var rT=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(he(di),he(_r))}}static{this.\u0275dir=tn({type:n})}}return n})(),zF=(()=>{class n extends rT{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_a(n)))(i||n)}})()}static{this.\u0275dir=tn({type:n,features:[Ls]})}}return n})(),iT=new W("");var GF={provide:iT,useExisting:ma(()=>sd),multi:!0};function WF(){let n=qn()?qn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var KF=new W(""),sd=(()=>{class n extends rT{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!WF())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(he(di),he(_r),he(KF,8))}}static{this.\u0275dir=tn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&sn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[kg([GF]),Ls]})}}return n})();var QF=new W(""),YF=new W("");function sT(n){return n!=null}function oT(n){return pi(n)?Fe(n):n}function aT(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function cT(n,e){return e.map(t=>t(n))}function ZF(n){return!n.validate}function uT(n){return n.map(e=>ZF(e)?e:t=>e.validate(t))}function JF(n){if(!n)return null;let e=n.filter(sT);return e.length==0?null:function(t){return aT(cT(t,e))}}function lT(n){return n!=null?JF(uT(n)):null}function XF(n){if(!n)return null;let e=n.filter(sT);return e.length==0?null:function(t){let r=cT(t,e).map(oT);return zf(r).pipe(oe(aT))}}function dT(n){return n!=null?XF(uT(n)):null}function YC(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function eL(n){return n._rawValidators}function tL(n){return n._rawAsyncValidators}function Fm(n){return n?Array.isArray(n)?n:[n]:[]}function nd(n,e){return Array.isArray(n)?n.includes(e):n===e}function ZC(n,e){let t=Fm(e);return Fm(n).forEach(i=>{nd(t,i)||t.push(i)}),t}function JC(n,e){return Fm(e).filter(t=>!nd(n,t))}var rd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Lm=class extends rd{get formDirective(){return null}get path(){return null}},Ja=class extends rd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Vm=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},nL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},d9=le(L({},nL),{"[class.ng-submitted]":"isSubmitted"}),hT=(()=>{class n extends Vm{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(he(Ja,2))}}static{this.\u0275dir=tn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ba("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ls]})}}return n})();var Ka="VALID",td="INVALID",Ws="PENDING",Qa="DISABLED",Qs=class{},id=class extends Qs{constructor(e,t){super(),this.value=e,this.source=t}},Ya=class extends Qs{constructor(e,t){super(),this.pristine=e,this.source=t}},Za=class extends Qs{constructor(e,t){super(),this.touched=e,this.source=t}},Ks=class extends Qs{constructor(e,t){super(),this.status=e,this.source=t}};function rL(n){return(od(n)?n.validators:n)||null}function iL(n){return Array.isArray(n)?lT(n):n||null}function sL(n,e){return(od(e)?e.asyncValidators:n)||null}function oL(n){return Array.isArray(n)?dT(n):n||null}function od(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var Um=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=xl(()=>this.statusReactive()),this.statusReactive=Al(void 0),this._pristine=xl(()=>this.pristineReactive()),this.pristineReactive=Al(!0),this._touched=xl(()=>this.touchedReactive()),this.touchedReactive=Al(!1),this._events=new Je,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return wr(this.statusReactive)}set status(e){wr(()=>this.statusReactive.set(e))}get valid(){return this.status===Ka}get invalid(){return this.status===td}get pending(){return this.status==Ws}get disabled(){return this.status===Qa}get enabled(){return this.status!==Qa}get pristine(){return wr(this.pristineReactive)}set pristine(e){wr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return wr(this.touchedReactive)}set touched(e){wr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ZC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ZC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(JC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(JC(e,this._rawAsyncValidators))}hasValidator(e){return nd(this._rawValidators,e)}hasAsyncValidator(e){return nd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(le(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Za(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Za(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(le(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ya(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ya(!0,r))}markAsPending(e={}){this.status=Ws;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ks(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(le(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Qa,this.errors=null,this._forEachChild(i=>{i.disable(le(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new id(this.value,r)),this._events.next(new Ks(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ka,this._forEachChild(r=>{r.enable(le(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ka||this.status===Ws)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new id(this.value,t)),this._events.next(new Ks(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(le(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qa:Ka}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ws,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=oT(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ks(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ze,this.statusChanges=new ze}_calculateStatus(){return this._allControlsDisabled()?Qa:this.errors?td:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ws)?Ws:this._anyControlsHaveStatus(td)?td:Ka}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ya(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Za(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){od(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=iL(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=oL(this._rawAsyncValidators)}};var fT=new W("CallSetDisabledState",{providedIn:"root",factory:()=>jm}),jm="always";function aL(n,e){return[...e.path,n]}function cL(n,e,t=jm){lL(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),dL(n,e),fL(n,e),hL(n,e),uL(n,e)}function XC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function uL(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function lL(n,e){let t=eL(n);e.validator!==null?n.setValidators(YC(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=tL(n);e.asyncValidator!==null?n.setAsyncValidators(YC(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();XC(e._rawValidators,i),XC(e._rawAsyncValidators,i)}function dL(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&pT(n,e)})}function hL(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&pT(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function pT(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function fL(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function pL(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function gL(n){return Object.getPrototypeOf(n.constructor)===zF}function mL(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===sd?t=s:gL(s)?r=s:i=s}),i||r||t||null}function eT(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function tT(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var yL=class extends Um{constructor(e=null,t,r){super(rL(t),sL(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),od(t)&&(t.nonNullable||t.initialValueIsDefault)&&(tT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){tT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var vL={provide:Ja,useExisting:ma(()=>Bm)},nT=Promise.resolve(),Bm=(()=>{class n extends Ja{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new yL,this._registered=!1,this.name="",this.update=new ze,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=mL(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),pL(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){cL(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){nT.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Nl(r);nT.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?aL(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(he(Lm,9),he(QF,10),he(YF,10),he(iT,10),he(mi,8),he(fT,8))}}static{this.\u0275dir=tn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[kg([vL]),Ls,Os]})}}return n})();var _L=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ui({type:n})}static{this.\u0275inj=ci({})}}return n})();var gT=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fT,useValue:t.callSetDisabledState??jm}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ui({type:n})}static{this.\u0275inj=ci({imports:[_L]})}}return n})();var yT=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},wL=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,v=l&63;c||(v=64,o||(m=64)),r.push(t[h],t[p],t[m],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):wL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Hm;let m=s<<2|a>>4;if(r.push(m),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Hm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},EL=function(n){let e=yT(n);return vT.encodeByteArray(e,!0)},Xa=function(n){return EL(n).replace(/\./g,"")},zm=function(n){try{return vT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function DL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var bL=()=>DL().__FIREBASE_DEFAULTS__,CL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},TL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&zm(n[1]);return e&&JSON.parse(e)},cd=()=>{try{return bL()||CL()||TL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_T=n=>{var e,t;return(t=(e=cd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},ud=n=>{let e=_T(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Gm=()=>{var n;return(n=cd())===null||n===void 0?void 0:n.config},IT=n=>{var e;return(e=cd())===null||e===void 0?void 0:e[`_${n}`]};var ad=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ld(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Xa(JSON.stringify(t)),Xa(JSON.stringify(o)),""].join(".")}function ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function SL(){var n;let e=(n=cd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ET(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DT(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function bT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Wm(){return!SL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dd(){try{return typeof indexedDB=="object"}catch{return!1}}function CT(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var AL="FirebaseError",bt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=AL,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wn.prototype.create)}},Wn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?RL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new bt(i,a,r)}};function RL(n,e){return n.replace(ML,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var ML=/\{\$([^}]+)}/g;function Ys(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(mT(s)&&mT(o)){if(!Ys(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function mT(n){return n!==null&&typeof n=="object"}function Km(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function TT(n,e){let t=new qm(n,e);return t.subscribe.bind(t)}var qm=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");NL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=$m),i.error===void 0&&(i.error=$m),i.complete===void 0&&(i.complete=$m);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function NL(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function $m(){}var p9=4*60*60*1e3;function xt(n){return n&&n._delegate?n._delegate:n}var Ct=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ei="[DEFAULT]";var Qm=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ad;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PL(e))try{this.getOrInitializeService({instanceIdentifier:Ei})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ei){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return D(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ei){return this.instances.has(e)}getOptions(e=Ei){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ei){return this.component?this.component.multipleInstances?e:Ei:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function xL(n){return n===Ei?void 0:n}function PL(n){return n.instantiationMode==="EAGER"}var hd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Qm(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var OL=[],ue=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ue||{}),kL={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},FL=ue.INFO,LL={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},VL=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=LL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},br=class{constructor(e){this.name=e,this._logLevel=FL,this._logHandler=VL,this._userLogHandler=null,OL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var UL=(n,e)=>e.some(t=>n instanceof t),ST,AT;function jL(){return ST||(ST=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BL(){return AT||(AT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var RT=new WeakMap,Zm=new WeakMap,MT=new WeakMap,Ym=new WeakMap,Xm=new WeakMap;function $L(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(wn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&RT.set(t,n)}).catch(()=>{}),Xm.set(e,n),e}function HL(n){if(Zm.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Zm.set(n,e)}var Jm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Zm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||MT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function NT(n){Jm=n(Jm)}function qL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(fd(this),e,...t);return MT.set(r,e.sort?e.sort():[e]),wn(r)}:BL().includes(n)?function(...e){return n.apply(fd(this),e),wn(RT.get(this))}:function(...e){return wn(n.apply(fd(this),e))}}function zL(n){return typeof n=="function"?qL(n):(n instanceof IDBTransaction&&HL(n),UL(n,jL())?new Proxy(n,Jm):n)}function wn(n){if(n instanceof IDBRequest)return $L(n);if(Ym.has(n))return Ym.get(n);let e=zL(n);return e!==n&&(Ym.set(n,e),Xm.set(e,n)),e}var fd=n=>Xm.get(n);function PT(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=wn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(wn(o.result),c.oldVersion,c.newVersion,wn(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var GL=["get","getKey","getAll","getAllKeys","count"],WL=["put","add","delete","clear"],ey=new Map;function xT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ey.get(e))return ey.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=WL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||GL.includes(t)))return;let s=function(o,...a){return D(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return ey.set(e,s),s}NT(n=>le(L({},n),{get:(e,t,r)=>xT(e,t)||n.get(e,t,r),has:(e,t)=>!!xT(e,t)||n.has(e,t)}));var ny=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(KL(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function KL(n){let e=n.getComponent();return e?.type==="VERSION"}var ry="@firebase/app",OT="0.10.13";var Kn=new br("@firebase/app"),QL="@firebase/app-compat",YL="@firebase/analytics-compat",ZL="@firebase/analytics",JL="@firebase/app-check-compat",XL="@firebase/app-check",eV="@firebase/auth",tV="@firebase/auth-compat",nV="@firebase/database",rV="@firebase/data-connect",iV="@firebase/database-compat",sV="@firebase/functions",oV="@firebase/functions-compat",aV="@firebase/installations",cV="@firebase/installations-compat",uV="@firebase/messaging",lV="@firebase/messaging-compat",dV="@firebase/performance",hV="@firebase/performance-compat",fV="@firebase/remote-config",pV="@firebase/remote-config-compat",gV="@firebase/storage",mV="@firebase/storage-compat",yV="@firebase/firestore",vV="@firebase/vertexai-preview",_V="@firebase/firestore-compat",IV="firebase",wV="10.14.1";var iy="[DEFAULT]",EV={[ry]:"fire-core",[QL]:"fire-core-compat",[ZL]:"fire-analytics",[YL]:"fire-analytics-compat",[XL]:"fire-app-check",[JL]:"fire-app-check-compat",[eV]:"fire-auth",[tV]:"fire-auth-compat",[nV]:"fire-rtdb",[rV]:"fire-data-connect",[iV]:"fire-rtdb-compat",[sV]:"fire-fn",[oV]:"fire-fn-compat",[aV]:"fire-iid",[cV]:"fire-iid-compat",[uV]:"fire-fcm",[lV]:"fire-fcm-compat",[dV]:"fire-perf",[hV]:"fire-perf-compat",[fV]:"fire-rc",[pV]:"fire-rc-compat",[gV]:"fire-gcs",[mV]:"fire-gcs-compat",[yV]:"fire-fst",[_V]:"fire-fst-compat",[vV]:"fire-vertex","fire-js":"fire-js",[IV]:"fire-js-all"};var ec=new Map,DV=new Map,sy=new Map;function kT(n,e){try{n.container.addComponent(e)}catch(t){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function En(n){let e=n.name;if(sy.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;sy.set(e,n);for(let t of ec.values())kT(t,n);for(let t of DV.values())kT(t,n);return!0}function nc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zs(n){return n.settings!==void 0}var bV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new Wn("app","Firebase",bV);var oy=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ct("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}};var Tr=wV;function uy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:iy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Cr.create("bad-app-name",{appName:String(i)});if(t||(t=Gm()),!t)throw Cr.create("no-options");let s=ec.get(i);if(s){if(Ys(t,s.options)&&Ys(r,s.config))return s;throw Cr.create("duplicate-app",{appName:i})}let o=new hd(i);for(let c of sy.values())o.addComponent(c);let a=new oy(t,r,o);return ec.set(i,a),a}function Di(n=iy){let e=ec.get(n);if(!e&&n===iy&&Gm())return uy();if(!e)throw Cr.create("no-app",{appName:n});return e}function pd(){return Array.from(ec.values())}function xe(n,e,t){var r;let i=(r=EV[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(a.join(" "));return}En(new Ct(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var CV="firebase-heartbeat-database",TV=1,tc="firebase-heartbeat-store",ty=null;function UT(){return ty||(ty=PT(CV,TV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(tc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Cr.create("idb-open",{originalErrorMessage:n.message})})),ty}function SV(n){return D(this,null,function*(){try{let t=(yield UT()).transaction(tc),r=yield t.objectStore(tc).get(jT(n));return yield t.done,r}catch(e){if(e instanceof bt)Kn.warn(e.message);else{let t=Cr.create("idb-get",{originalErrorMessage:e?.message});Kn.warn(t.message)}}})}function FT(n,e){return D(this,null,function*(){try{let r=(yield UT()).transaction(tc,"readwrite");yield r.objectStore(tc).put(e,jT(n)),yield r.done}catch(t){if(t instanceof bt)Kn.warn(t.message);else{let r=Cr.create("idb-set",{originalErrorMessage:t?.message});Kn.warn(r.message)}}})}function jT(n){return`${n.name}!${n.options.appId}`}var AV=1024,RV=30*24*60*60*1e3,ay=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new cy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return D(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=LT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=RV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Kn.warn(r)}})}getHeartbeatsHeader(){return D(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=LT(),{heartbeatsToSend:r,unsentEntries:i}=MV(this._heartbeatsCache.heartbeats),s=Xa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Kn.warn(t),""}})}};function LT(){return new Date().toISOString().substring(0,10)}function MV(n,e=AV){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),VT(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),VT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var cy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return D(this,null,function*(){return dd()?CT().then(()=>!0).catch(()=>!1):!1})}read(){return D(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield SV(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return D(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return FT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return D(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return FT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function VT(n){return Xa(JSON.stringify({version:2,heartbeats:n})).length}function NV(n){En(new Ct("platform-logger",e=>new ny(e),"PRIVATE")),En(new Ct("heartbeat",e=>new ay(e),"PRIVATE")),xe(ry,OT,n),xe(ry,OT,"esm2017"),xe("fire-js","")}NV("");var xV="firebase",PV="10.14.1";xe(xV,PV,"app");var Sr=new jn("ANGULARFIRE2_VERSION");function rc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ti=(n,e)=>{let t=e?[e]:pd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ci=class{constructor(){return Ti(OV)}},OV="app-check";function Js(){}var gd=class{zone;delegate;constructor(e,t=Bf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},ly=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Js,{},Js,Js)),t.pipe(qe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Si=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new gd(Zone.current)),this.insideAngular=t.run(()=>new gd(Zone.current,jf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Y(Ee))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function md(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function kV(n){return md().ngZone.runOutsideAngular(()=>n())}function bi(n){return md().ngZone.run(()=>n())}function FV(n){return LV(md())(n)}function LV(n){return function(t){return t=t.lift(new ly(n.ngZone)),t.pipe(ur(n.outsideAngular),cr(n.insideAngular))}}var VV=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),bi(()=>n.apply(void 0,r))},Pt=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=bi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Js,{},Js,Js))),r[s]=VV(r[s],t));let i=kV(()=>n.apply(this,r));if(!e)if(i instanceof pe){let s=md();return i.pipe(ur(s.outsideAngular),cr(s.insideAngular))}else return bi(()=>i);return i instanceof pe?i.pipe(FV):i instanceof Promise?bi(()=>new Promise((s,o)=>i.then(a=>bi(()=>s(a)),a=>bi(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:bi(()=>i)};var Qn=class{constructor(e){return e}},Ai=class{constructor(){return pd()}};function UV(n){return n&&n.length===1?n[0]:new Qn(Di())}var dy=new W("angularfire2._apps"),jV={provide:Qn,useFactory:UV,deps:[[new at,dy]]},BV={provide:Ai,deps:[[new at,dy]]};function $V(n){return(e,t)=>{let r=t.get(Ir);xe("angularfire",Sr.full,"core"),xe("angularfire",Sr.full,"app"),xe("angular",Fb.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Qn(i)}}function BT(n,...e){return yn([jV,BV,{provide:dy,useFactory:$V(n),multi:!0,deps:[Ee,wt,Si,...e]}])}var $T=Pt(uy,!0);function YT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ZT=YT,JT=new Wn("auth","Firebase",YT());var Id=new br("@firebase/auth");function HV(n,...e){Id.logLevel<=ue.WARN&&Id.warn(`Auth (${Tr}): ${n}`,...e)}function vd(n,...e){Id.logLevel<=ue.ERROR&&Id.error(`Auth (${Tr}): ${n}`,...e)}function HT(n,...e){throw Dy(n,...e)}function Ey(n,...e){return Dy(n,...e)}function XT(n,e,t){let r=Object.assign(Object.assign({},ZT()),{[e]:t});return new Wn("auth","Firebase",r).create(e,{appName:n.name})}function _d(n){return XT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dy(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return JT.create(n,...e)}function Ie(n,e,...t){if(!n)throw Dy(e,...t)}function ic(n){let e="INTERNAL ASSERTION FAILED: "+n;throw vd(e),new Error(e)}function wd(n,e){n||ic(e)}function qV(){return qT()==="http:"||qT()==="https:"}function qT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function zV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qV()||DT()||"connection"in navigator)?navigator.onLine:!0}function GV(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Mi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,wd(t>e,"Short delay should be less than long delay!"),this.isMobile=wT()||bT()}get(){return zV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function WV(n,e){wd(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ed=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ic("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ic("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ic("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var KV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var QV=new Mi(3e4,6e4);function e0(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Td(s,o,a,c){return D(this,arguments,function*(n,e,t,r,i={}){return t0(n,i,()=>D(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Km(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:m},l);return ET()||(v.referrerPolicy="no-referrer"),Ed.fetch()(n0(n,n.config.apiHost,t,p),v)}))})}function t0(n,e,t){return D(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},KV),e);try{let i=new py(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw yd(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw yd(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw yd(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw yd(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw XT(n,h,l);HT(n,h)}}catch(i){if(i instanceof bt)throw i;HT(n,"network-request-failed",{message:String(i)})}})}function n0(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?WV(n.config,i):`${n.config.apiScheme}://${i}`}var py=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ey(this.auth,"network-request-failed")),QV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function yd(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ey(n,e,r);return i.customData._tokenResponse=t,i}function YV(n,e){return D(this,null,function*(){return Td(n,"POST","/v1/accounts:delete",e)})}function r0(n,e){return D(this,null,function*(){return Td(n,"POST","/v1/accounts:lookup",e)})}function sc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function by(n,e=!1){return D(this,null,function*(){let t=xt(n),r=yield t.getIdToken(e),i=i0(r);Ie(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:sc(hy(i.auth_time)),issuedAtTime:sc(hy(i.iat)),expirationTime:sc(hy(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function hy(n){return Number(n)*1e3}function i0(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return vd("JWT malformed, contained fewer than 3 sections"),null;try{let i=zm(t);return i?JSON.parse(i):(vd("Failed to decode base64 JWT payload"),null)}catch(i){return vd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zT(n){let e=i0(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function gy(n,e,t=!1){return D(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof bt&&ZV(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function ZV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var my=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>D(this,null,function*(){yield this.iteration()}),t)}iteration(){return D(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ac=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sc(this.lastLoginAt),this.creationTime=sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Dd(n){return D(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield gy(n,r0(t,{idToken:r}));Ie(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?s0(s.providerUserInfo):[],a=JV(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ac(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function Cy(n){return D(this,null,function*(){let e=xt(n);yield Dd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function JV(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function s0(n){return n.map(e=>{var{providerId:t}=e,r=$f(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function XV(n,e){return D(this,null,function*(){let t=yield t0(n,{},()=>D(this,null,function*(){let r=Km({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=n0(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ed.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function eU(n,e){return D(this,null,function*(){return Td(n,"POST","/v2/accounts:revokeToken",e0(n,e))})}var oc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");let t=zT(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return D(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return D(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield XV(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ic("not implemented")}};function Ar(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var cc=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=$f(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new my(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ac(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return D(this,null,function*(){let t=yield gy(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return by(this,e)}reload(){return Cy(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return D(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Dd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return D(this,null,function*(){if(Zs(this.auth.app))return Promise.reject(_d(this.auth));let e=yield this.getIdToken();return yield gy(this,YV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=t.photoURL)!==null&&o!==void 0?o:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,k=(l=t.createdAt)!==null&&l!==void 0?l:void 0,B=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:F,emailVerified:H,isAnonymous:X,providerData:$,stsTokenManager:w}=t;Ie(F&&w,e,"internal-error");let y=oc.fromJSON(this.name,w);Ie(typeof F=="string",e,"internal-error"),Ar(p,e.name),Ar(m,e.name),Ie(typeof H=="boolean",e,"internal-error"),Ie(typeof X=="boolean",e,"internal-error"),Ar(v,e.name),Ar(T,e.name),Ar(N,e.name),Ar(M,e.name),Ar(k,e.name),Ar(B,e.name);let _=new n({uid:F,auth:e,email:m,emailVerified:H,displayName:p,isAnonymous:X,photoURL:T,phoneNumber:v,tenantId:N,stsTokenManager:y,createdAt:k,lastLoginAt:B});return $&&Array.isArray($)&&(_.providerData=$.map(E=>Object.assign({},E))),M&&(_._redirectEventId=M),_}static _fromIdTokenResponse(e,t,r=!1){return D(this,null,function*(){let i=new oc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Dd(s),s})}static _fromGetAccountInfoResponse(e,t,r){return D(this,null,function*(){let i=t.users[0];Ie(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?s0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new oc;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ac(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var GT=new Map;function Ri(n){wd(n instanceof Function,"Expected a class definition");let e=GT.get(n);return e?(wd(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,GT.set(n,e),e)}var tU=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return D(this,null,function*(){return!0})}_set(t,r){return D(this,null,function*(){this.storage[t]=r})}_get(t){return D(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return D(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),yy=tU;function fy(n,e,t){return`firebase:${n}:${e}:${t}`}var bd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=fy(this.userKey,i.apiKey,s),this.fullPersistenceKey=fy("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return D(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?cc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return D(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return D(this,null,function*(){if(!t.length)return new n(Ri(yy),e,r);let i=(yield Promise.all(t.map(l=>D(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Ri(yy),o=fy(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let p=cc._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>D(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function WT(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aU(e))return"Blackberry";if(cU(e))return"Webos";if(rU(e))return"Safari";if((e.includes("chrome/")||iU(e))&&!e.includes("edge/"))return"Chrome";if(oU(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function nU(n=ct()){return/firefox\//i.test(n)}function rU(n=ct()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iU(n=ct()){return/crios\//i.test(n)}function sU(n=ct()){return/iemobile/i.test(n)}function oU(n=ct()){return/android/i.test(n)}function aU(n=ct()){return/blackberry/i.test(n)}function cU(n=ct()){return/webos/i.test(n)}function o0(n,e=[]){let t;switch(n){case"Browser":t=WT(ct());break;case"Worker":t=`${WT(ct())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Tr}/${r}`}var vy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return D(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function uU(t){return D(this,arguments,function*(n,e={}){return Td(n,"GET","/v2/passwordPolicy",e0(n,e))})}var lU=6,_y=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:lU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Iy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cd(this),this.idTokenSubscription=new Cd(this),this.beforeStateQueue=new vy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ri(t)),this._initializationPromise=this.queue(()=>D(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield bd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return D(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return D(this,null,function*(){try{let t=yield r0(this,{idToken:e}),r=yield cc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return D(this,null,function*(){var t;if(Zs(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return D(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return D(this,null,function*(){try{yield Dd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=GV()}_delete(){return D(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return D(this,null,function*(){if(Zs(this.app))return Promise.reject(_d(this));let t=e?xt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return D(this,null,function*(){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>D(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return D(this,null,function*(){return Zs(this.app)?Promise.reject(_d(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Zs(this.app)?Promise.reject(_d(this)):this.queue(()=>D(this,null,function*(){yield this.assertedPersistence.setPersistence(Ri(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return D(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return D(this,null,function*(){let e=yield uU(this),t=new _y(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return D(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield eU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return D(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return D(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ri(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=yield bd.create(this,[Ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return D(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>D(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return D(this,null,function*(){if(e===this.currentUser)return this.queue(()=>D(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return D(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return D(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return D(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&HV(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function dU(n){return xt(n)}var Cd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=TT(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var hU={loadJS(){return D(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fU(n){hU=n}function pU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function gU(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ri);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var d6=pU("rcb"),h6=new Mi(3e4,6e4);var f6=new Mi(2e3,1e4);var p6=10*60*1e3;var g6=new Mi(3e4,6e4);var m6=new Mi(5e3,15e3);var y6=encodeURIComponent("fac");var KT="@firebase/auth",QT="1.7.9";var wy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return D(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function mU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yU(n){En(new Ct("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o0(n)},l=new Iy(r,i,s,c);return gU(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),En(new Ct("auth-internal",e=>{let t=dU(e.getProvider("auth").getImmediate());return(r=>new wy(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xe(KT,QT,mU(n)),xe(KT,QT,"esm2017")}var vU=5*60,v6=IT("authIdTokenMaxAge")||vU;function _U(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}fU({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Ey("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",_U().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yU("Browser");var vj="auth";var Xs=class{constructor(){return Ti(vj)}};var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c0={};var Rr,Ty;(function(){var n;function e(w,y){function _(){}_.prototype=y.prototype,w.D=y.prototype,w.prototype=new _,w.prototype.constructor=w,w.C=function(E,b,S){for(var I=Array(arguments.length-2),Nn=2;Nn<arguments.length;Nn++)I[Nn-2]=arguments[Nn];return y.prototype[b].apply(E,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)E[b]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(b=0;16>b;++b)E[b]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=w.g[0],_=w.g[1],b=w.g[2];var S=w.g[3],I=y+(S^_&(b^S))+E[0]+3614090360&4294967295;y=_+(I<<7&4294967295|I>>>25),I=S+(b^y&(_^b))+E[1]+3905402710&4294967295,S=y+(I<<12&4294967295|I>>>20),I=b+(_^S&(y^_))+E[2]+606105819&4294967295,b=S+(I<<17&4294967295|I>>>15),I=_+(y^b&(S^y))+E[3]+3250441966&4294967295,_=b+(I<<22&4294967295|I>>>10),I=y+(S^_&(b^S))+E[4]+4118548399&4294967295,y=_+(I<<7&4294967295|I>>>25),I=S+(b^y&(_^b))+E[5]+1200080426&4294967295,S=y+(I<<12&4294967295|I>>>20),I=b+(_^S&(y^_))+E[6]+2821735955&4294967295,b=S+(I<<17&4294967295|I>>>15),I=_+(y^b&(S^y))+E[7]+4249261313&4294967295,_=b+(I<<22&4294967295|I>>>10),I=y+(S^_&(b^S))+E[8]+1770035416&4294967295,y=_+(I<<7&4294967295|I>>>25),I=S+(b^y&(_^b))+E[9]+2336552879&4294967295,S=y+(I<<12&4294967295|I>>>20),I=b+(_^S&(y^_))+E[10]+4294925233&4294967295,b=S+(I<<17&4294967295|I>>>15),I=_+(y^b&(S^y))+E[11]+2304563134&4294967295,_=b+(I<<22&4294967295|I>>>10),I=y+(S^_&(b^S))+E[12]+1804603682&4294967295,y=_+(I<<7&4294967295|I>>>25),I=S+(b^y&(_^b))+E[13]+4254626195&4294967295,S=y+(I<<12&4294967295|I>>>20),I=b+(_^S&(y^_))+E[14]+2792965006&4294967295,b=S+(I<<17&4294967295|I>>>15),I=_+(y^b&(S^y))+E[15]+1236535329&4294967295,_=b+(I<<22&4294967295|I>>>10),I=y+(b^S&(_^b))+E[1]+4129170786&4294967295,y=_+(I<<5&4294967295|I>>>27),I=S+(_^b&(y^_))+E[6]+3225465664&4294967295,S=y+(I<<9&4294967295|I>>>23),I=b+(y^_&(S^y))+E[11]+643717713&4294967295,b=S+(I<<14&4294967295|I>>>18),I=_+(S^y&(b^S))+E[0]+3921069994&4294967295,_=b+(I<<20&4294967295|I>>>12),I=y+(b^S&(_^b))+E[5]+3593408605&4294967295,y=_+(I<<5&4294967295|I>>>27),I=S+(_^b&(y^_))+E[10]+38016083&4294967295,S=y+(I<<9&4294967295|I>>>23),I=b+(y^_&(S^y))+E[15]+3634488961&4294967295,b=S+(I<<14&4294967295|I>>>18),I=_+(S^y&(b^S))+E[4]+3889429448&4294967295,_=b+(I<<20&4294967295|I>>>12),I=y+(b^S&(_^b))+E[9]+568446438&4294967295,y=_+(I<<5&4294967295|I>>>27),I=S+(_^b&(y^_))+E[14]+3275163606&4294967295,S=y+(I<<9&4294967295|I>>>23),I=b+(y^_&(S^y))+E[3]+4107603335&4294967295,b=S+(I<<14&4294967295|I>>>18),I=_+(S^y&(b^S))+E[8]+1163531501&4294967295,_=b+(I<<20&4294967295|I>>>12),I=y+(b^S&(_^b))+E[13]+2850285829&4294967295,y=_+(I<<5&4294967295|I>>>27),I=S+(_^b&(y^_))+E[2]+4243563512&4294967295,S=y+(I<<9&4294967295|I>>>23),I=b+(y^_&(S^y))+E[7]+1735328473&4294967295,b=S+(I<<14&4294967295|I>>>18),I=_+(S^y&(b^S))+E[12]+2368359562&4294967295,_=b+(I<<20&4294967295|I>>>12),I=y+(_^b^S)+E[5]+4294588738&4294967295,y=_+(I<<4&4294967295|I>>>28),I=S+(y^_^b)+E[8]+2272392833&4294967295,S=y+(I<<11&4294967295|I>>>21),I=b+(S^y^_)+E[11]+1839030562&4294967295,b=S+(I<<16&4294967295|I>>>16),I=_+(b^S^y)+E[14]+4259657740&4294967295,_=b+(I<<23&4294967295|I>>>9),I=y+(_^b^S)+E[1]+2763975236&4294967295,y=_+(I<<4&4294967295|I>>>28),I=S+(y^_^b)+E[4]+1272893353&4294967295,S=y+(I<<11&4294967295|I>>>21),I=b+(S^y^_)+E[7]+4139469664&4294967295,b=S+(I<<16&4294967295|I>>>16),I=_+(b^S^y)+E[10]+3200236656&4294967295,_=b+(I<<23&4294967295|I>>>9),I=y+(_^b^S)+E[13]+681279174&4294967295,y=_+(I<<4&4294967295|I>>>28),I=S+(y^_^b)+E[0]+3936430074&4294967295,S=y+(I<<11&4294967295|I>>>21),I=b+(S^y^_)+E[3]+3572445317&4294967295,b=S+(I<<16&4294967295|I>>>16),I=_+(b^S^y)+E[6]+76029189&4294967295,_=b+(I<<23&4294967295|I>>>9),I=y+(_^b^S)+E[9]+3654602809&4294967295,y=_+(I<<4&4294967295|I>>>28),I=S+(y^_^b)+E[12]+3873151461&4294967295,S=y+(I<<11&4294967295|I>>>21),I=b+(S^y^_)+E[15]+530742520&4294967295,b=S+(I<<16&4294967295|I>>>16),I=_+(b^S^y)+E[2]+3299628645&4294967295,_=b+(I<<23&4294967295|I>>>9),I=y+(b^(_|~S))+E[0]+4096336452&4294967295,y=_+(I<<6&4294967295|I>>>26),I=S+(_^(y|~b))+E[7]+1126891415&4294967295,S=y+(I<<10&4294967295|I>>>22),I=b+(y^(S|~_))+E[14]+2878612391&4294967295,b=S+(I<<15&4294967295|I>>>17),I=_+(S^(b|~y))+E[5]+4237533241&4294967295,_=b+(I<<21&4294967295|I>>>11),I=y+(b^(_|~S))+E[12]+1700485571&4294967295,y=_+(I<<6&4294967295|I>>>26),I=S+(_^(y|~b))+E[3]+2399980690&4294967295,S=y+(I<<10&4294967295|I>>>22),I=b+(y^(S|~_))+E[10]+4293915773&4294967295,b=S+(I<<15&4294967295|I>>>17),I=_+(S^(b|~y))+E[1]+2240044497&4294967295,_=b+(I<<21&4294967295|I>>>11),I=y+(b^(_|~S))+E[8]+1873313359&4294967295,y=_+(I<<6&4294967295|I>>>26),I=S+(_^(y|~b))+E[15]+4264355552&4294967295,S=y+(I<<10&4294967295|I>>>22),I=b+(y^(S|~_))+E[6]+2734768916&4294967295,b=S+(I<<15&4294967295|I>>>17),I=_+(S^(b|~y))+E[13]+1309151649&4294967295,_=b+(I<<21&4294967295|I>>>11),I=y+(b^(_|~S))+E[4]+4149444226&4294967295,y=_+(I<<6&4294967295|I>>>26),I=S+(_^(y|~b))+E[11]+3174756917&4294967295,S=y+(I<<10&4294967295|I>>>22),I=b+(y^(S|~_))+E[2]+718787259&4294967295,b=S+(I<<15&4294967295|I>>>17),I=_+(S^(b|~y))+E[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,w.g[2]=w.g[2]+b&4294967295,w.g[3]=w.g[3]+S&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var _=y-this.blockSize,E=this.B,b=this.h,S=0;S<y;){if(b==0)for(;S<=_;)i(this,w,S),S+=this.blockSize;if(typeof w=="string"){for(;S<y;)if(E[b++]=w.charCodeAt(S++),b==this.blockSize){i(this,E),b=0;break}}else for(;S<y;)if(E[b++]=w[S++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var _=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=_&255,_/=256;for(this.u(w),w=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)w[_++]=this.g[y]>>>E&255;return w};function s(w,y){var _=a;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=y(w)}function o(w,y){this.h=y;for(var _=[],E=!0,b=w.length-1;0<=b;b--){var S=w[b]|0;E&&S==y||(_[b]=S,E=!1)}this.g=_}var a={};function c(w){return-128<=w&&128>w?s(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return M(l(-w));for(var y=[],_=1,E=0;w>=_;E++)y[E]=w/_|0,_*=4294967296;return new o(y,0)}function h(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return M(h(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,b=0;b<w.length;b+=8){var S=Math.min(8,w.length-b),I=parseInt(w.substring(b,b+S),y);8>S?(S=l(Math.pow(y,S)),E=E.j(S).add(l(I))):(E=E.j(_),E=E.add(l(I)))}return E}var p=c(0),m=c(1),v=c(16777216);n=o.prototype,n.m=function(){if(N(this))return-M(this).m();for(var w=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);w+=(0<=E?E:4294967296+E)*y,y*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T(this))return"0";if(N(this))return"-"+M(this).toString(w);for(var y=l(Math.pow(w,6)),_=this,E="";;){var b=H(_,y).g;_=k(_,b.j(y));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(w);if(_=b,T(_))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function T(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function N(w){return w.h==-1}n.l=function(w){return w=k(this,w),N(w)?-1:T(w)?0:1};function M(w){for(var y=w.g.length,_=[],E=0;E<y;E++)_[E]=~w.g[E];return new o(_,~w.h).add(m)}n.abs=function(){return N(this)?M(this):this},n.add=function(w){for(var y=Math.max(this.g.length,w.g.length),_=[],E=0,b=0;b<=y;b++){var S=E+(this.i(b)&65535)+(w.i(b)&65535),I=(S>>>16)+(this.i(b)>>>16)+(w.i(b)>>>16);E=I>>>16,S&=65535,I&=65535,_[b]=I<<16|S}return new o(_,_[_.length-1]&-2147483648?-1:0)};function k(w,y){return w.add(M(y))}n.j=function(w){if(T(this)||T(w))return p;if(N(this))return N(w)?M(this).j(M(w)):M(M(this).j(w));if(N(w))return M(this.j(M(w)));if(0>this.l(v)&&0>w.l(v))return l(this.m()*w.m());for(var y=this.g.length+w.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<w.g.length;b++){var S=this.i(E)>>>16,I=this.i(E)&65535,Nn=w.i(b)>>>16,ko=w.i(b)&65535;_[2*E+2*b]+=I*ko,B(_,2*E+2*b),_[2*E+2*b+1]+=S*ko,B(_,2*E+2*b+1),_[2*E+2*b+1]+=I*Nn,B(_,2*E+2*b+1),_[2*E+2*b+2]+=S*Nn,B(_,2*E+2*b+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new o(_,0)};function B(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function F(w,y){this.g=w,this.h=y}function H(w,y){if(T(y))throw Error("division by zero");if(T(w))return new F(p,p);if(N(w))return y=H(M(w),y),new F(M(y.g),M(y.h));if(N(y))return y=H(w,M(y)),new F(M(y.g),y.h);if(30<w.g.length){if(N(w)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(w);)_=X(_),E=X(E);var b=$(_,1),S=$(E,1);for(E=$(E,2),_=$(_,2);!T(E);){var I=S.add(E);0>=I.l(w)&&(b=b.add(_),S=I),E=$(E,1),_=$(_,1)}return y=k(w,b.j(y)),new F(b,y)}for(b=p;0<=w.l(y);){for(_=Math.max(1,Math.floor(w.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(_),I=S.j(y);N(I)||0<I.l(w);)_-=E,S=l(_),I=S.j(y);T(S)&&(S=m),b=b.add(S),w=k(w,I)}return new F(b,w)}n.A=function(w){return H(this,w).h},n.and=function(w){for(var y=Math.max(this.g.length,w.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&w.i(E);return new o(_,this.h&w.h)},n.or=function(w){for(var y=Math.max(this.g.length,w.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|w.i(E);return new o(_,this.h|w.h)},n.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^w.i(E);return new o(_,this.h^w.h)};function X(w){for(var y=w.g.length+1,_=[],E=0;E<y;E++)_[E]=w.i(E)<<1|w.i(E-1)>>>31;return new o(_,w.h)}function $(w,y){var _=y>>5;y%=32;for(var E=w.g.length-_,b=[],S=0;S<E;S++)b[S]=0<y?w.i(S+_)>>>y|w.i(S+_+1)<<32-y:w.i(S+_);return new o(b,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ty=c0.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Rr=c0.Integer=o}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});var Sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yn={};var Sy,_j,eo,Ay,uc,Ad,Ry,My,Ny;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sd=="object"&&Sd];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var C=u[g];if(!(C in f))break e;f=f[C]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var f=0,g=!1,C={next:function(){if(!g&&f<u.length){var R=f++;return{value:d(R,u[R]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function T(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,C,R){for(var O=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)O[Ce-2]=arguments[Ce];return d.prototype[C].apply(g,O)}}function N(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function M(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=u.length||0,R=g.length||0;u.length=C+R;for(let O=0;O<R;O++)u[C+O]=g[O]}else u.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function B(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function H(u){return H[" "](u),u}H[" "]=function(){};var X=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function $(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function w(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function y(u){let d={};for(let f in u)d[f]=u[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)u[f]=g[f];for(let R=0;R<_.length;R++)f=_[R],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function b(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function S(u){a.setTimeout(()=>{throw u},0)}function I(){var u=Yh;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Nn{constructor(){this.h=this.g=null}add(d,f){let g=ko.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ko=new k(()=>new dR,u=>u.reset());class dR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Fo,Lo=!1,Yh=new Nn,X_=()=>{let u=a.Promise.resolve(void 0);Fo=()=>{u.then(hR)}};var hR=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(f){S(f)}var d=ko;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Lo=!1};function rr(){this.s=this.s,this.C=this.C}rr.prototype.s=!1,rr.prototype.ma=function(){this.s||(this.s=!0,this.N())},rr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var fR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Vo(u,d){if(rt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(X){e:{try{H(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:pR[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Vo.aa.h.call(this)}}T(Vo,rt);var pR={2:"touch",3:"pen",4:"mouse"};Vo.prototype.h=function(){Vo.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Uo="closure_listenable_"+(1e6*Math.random()|0),gR=0;function mR(u,d,f,g,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++gR,this.da=this.fa=!1}function $c(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Hc(u){this.src=u,this.g={},this.h=0}Hc.prototype.add=function(u,d,f,g,C){var R=u.toString();u=this.g[R],u||(u=this.g[R]=[],this.h++);var O=Jh(u,d,g,C);return-1<O?(d=u[O],f||(d.fa=!1)):(d=new mR(d,this.src,R,!!g,C),d.fa=f,u.push(d)),d};function Zh(u,d){var f=d.type;if(f in u.g){var g=u.g[f],C=Array.prototype.indexOf.call(g,d,void 0),R;(R=0<=C)&&Array.prototype.splice.call(g,C,1),R&&($c(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Jh(u,d,f,g){for(var C=0;C<u.length;++C){var R=u[C];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==g)return C}return-1}var Xh="closure_lm_"+(1e6*Math.random()|0),ef={};function eI(u,d,f,g,C){if(g&&g.once)return nI(u,d,f,g,C);if(Array.isArray(d)){for(var R=0;R<d.length;R++)eI(u,d[R],f,g,C);return null}return f=sf(f),u&&u[Uo]?u.K(d,f,l(g)?!!g.capture:!!g,C):tI(u,d,f,!1,g,C)}function tI(u,d,f,g,C,R){if(!d)throw Error("Invalid event type");var O=l(C)?!!C.capture:!!C,Ce=nf(u);if(Ce||(u[Xh]=Ce=new Hc(u)),f=Ce.add(d,f,g,O,R),f.proxy)return f;if(g=yR(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)fR||(C=O),C===void 0&&(C=!1),u.addEventListener(d.toString(),g,C);else if(u.attachEvent)u.attachEvent(iI(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function yR(){function u(f){return d.call(u.src,u.listener,f)}let d=vR;return u}function nI(u,d,f,g,C){if(Array.isArray(d)){for(var R=0;R<d.length;R++)nI(u,d[R],f,g,C);return null}return f=sf(f),u&&u[Uo]?u.L(d,f,l(g)?!!g.capture:!!g,C):tI(u,d,f,!0,g,C)}function rI(u,d,f,g,C){if(Array.isArray(d))for(var R=0;R<d.length;R++)rI(u,d[R],f,g,C);else g=l(g)?!!g.capture:!!g,f=sf(f),u&&u[Uo]?(u=u.i,d=String(d).toString(),d in u.g&&(R=u.g[d],f=Jh(R,f,g,C),-1<f&&($c(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete u.g[d],u.h--)))):u&&(u=nf(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Jh(d,f,g,C)),(f=-1<u?d[u]:null)&&tf(f))}function tf(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Uo])Zh(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(iI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=nf(d))?(Zh(f,u),f.h==0&&(f.src=null,d[Xh]=null)):$c(u)}}}function iI(u){return u in ef?ef[u]:ef[u]="on"+u}function vR(u,d){if(u.da)u=!0;else{d=new Vo(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&tf(u),u=f.call(g,d)}return u}function nf(u){return u=u[Xh],u instanceof Hc?u:null}var rf="__closure_events_fn_"+(1e9*Math.random()>>>0);function sf(u){return typeof u=="function"?u:(u[rf]||(u[rf]=function(d){return u.handleEvent(d)}),u[rf])}function it(){rr.call(this),this.i=new Hc(this),this.M=this,this.F=null}T(it,rr),it.prototype[Uo]=!0,it.prototype.removeEventListener=function(u,d,f,g){rI(this,u,d,f,g)};function lt(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new rt(d,u);else if(d instanceof rt)d.target=d.target||u;else{var C=d;d=new rt(g,u),E(d,C)}if(C=!0,f)for(var R=f.length-1;0<=R;R--){var O=d.g=f[R];C=qc(O,g,!0,d)&&C}if(O=d.g=u,C=qc(O,g,!0,d)&&C,C=qc(O,g,!1,d)&&C,f)for(R=0;R<f.length;R++)O=d.g=f[R],C=qc(O,g,!1,d)&&C}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)$c(f[g]);delete u.g[d],u.h--}}this.F=null},it.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},it.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function qc(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,R=0;R<d.length;++R){var O=d[R];if(O&&!O.da&&O.capture==f){var Ce=O.listener,Ze=O.ha||O.src;O.fa&&Zh(u.i,O),C=Ce.call(Ze,g)!==!1&&C}}return C&&!g.defaultPrevented}function sI(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function oI(u){u.g=sI(()=>{u.g=null,u.i&&(u.i=!1,oI(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class _R extends rr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:oI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jo(u){rr.call(this),this.h=u,this.g={}}T(jo,rr);var aI=[];function cI(u){$(u.g,function(d,f){this.g.hasOwnProperty(f)&&tf(d)},u),u.g={}}jo.prototype.N=function(){jo.aa.N.call(this),cI(this)},jo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var of=a.JSON.stringify,IR=a.JSON.parse,wR=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function af(){}af.prototype.h=null;function uI(u){return u.h||(u.h=u.i())}function lI(){}var Bo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cf(){rt.call(this,"d")}T(cf,rt);function uf(){rt.call(this,"c")}T(uf,rt);var qr={},dI=null;function zc(){return dI=dI||new it}qr.La="serverreachability";function hI(u){rt.call(this,qr.La,u)}T(hI,rt);function $o(u){let d=zc();lt(d,new hI(d))}qr.STAT_EVENT="statevent";function fI(u,d){rt.call(this,qr.STAT_EVENT,u),this.stat=d}T(fI,rt);function dt(u){let d=zc();lt(d,new fI(d,u))}qr.Ma="timingevent";function pI(u,d){rt.call(this,qr.Ma,u),this.size=d}T(pI,rt);function Ho(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function qo(){this.g=!0}qo.prototype.xa=function(){this.g=!1};function ER(u,d,f,g,C,R){u.info(function(){if(u.g)if(R)for(var O="",Ce=R.split("&"),Ze=0;Ze<Ce.length;Ze++){var _e=Ce[Ze].split("=");if(1<_e.length){var st=_e[0];_e=_e[1];var ot=st.split("_");O=2<=ot.length&&ot[1]=="type"?O+(st+"="+_e+"&"):O+(st+"=redacted&")}}else O=null;else O=R;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+O})}function DR(u,d,f,g,C,R,O){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+R+" "+O})}function Xi(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+CR(u,f)+(g?" "+g:"")})}function bR(u,d){u.info(function(){return"TIMEOUT: "+d})}qo.prototype.info=function(){};function CR(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var R=C[0];if(R!="noop"&&R!="stop"&&R!="close")for(var O=1;O<C.length;O++)C[O]=""}}}}return of(f)}catch{return d}}var Gc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lf;function Wc(){}T(Wc,af),Wc.prototype.g=function(){return new XMLHttpRequest},Wc.prototype.i=function(){return{}},lf=new Wc;function ir(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new jo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mI}function mI(){this.i=null,this.g="",this.h=!1}var yI={},df={};function hf(u,d,f){u.L=1,u.v=Zc(xn(d)),u.m=f,u.P=!0,vI(u,null)}function vI(u,d){u.F=Date.now(),Kc(u),u.A=xn(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),xI(f.i,"t",g),u.C=0,f=u.j.J,u.h=new mI,u.g=YI(u.j,f?d:null,!u.m),0<u.O&&(u.M=new _R(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(aI[0]=C.toString()),C=aI);for(var R=0;R<C.length;R++){var O=eI(f,C[R],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),$o(),ER(u.i,u.u,u.A,u.l,u.R,u.m)}ir.prototype.ca=function(u){u=u.target;let d=this.M;d&&Pn(u)==3?d.j():this.Y(u)},ir.prototype.Y=function(u){try{if(u==this.g)e:{let ot=Pn(this.g);var d=this.g.Ba();let ns=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||UI(this.g)))){this.J||ot!=4||d==7||(d==8||0>=ns?$o(3):$o(2)),ff(this);var f=this.g.Z();this.X=f;t:if(_I(this)){var g=UI(this.g);u="";var C=g.length,R=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zr(this),zo(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(R&&d==C-1)});g.length=0,this.h.g+=u,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,DR(this.i,this.u,this.A,this.l,this.R,ot,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,Ze=this.g;if((Ce=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Ce)){var _e=Ce;break t}}_e=null}if(f=_e)Xi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pf(this,f);else{this.o=!1,this.s=3,dt(12),zr(this),zo(this);break e}}if(this.P){f=!0;let Kt;for(;!this.J&&this.C<O.length;)if(Kt=TR(this,O),Kt==df){ot==4&&(this.s=4,dt(14),f=!1),Xi(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==yI){this.s=4,dt(15),Xi(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else Xi(this.i,this.l,Kt,null),pf(this,Kt);if(_I(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||O.length!=0||this.h.h||(this.s=1,dt(16),f=!1),this.o=this.o&&f,!f)Xi(this.i,this.l,O,"[Invalid Chunked Response]"),zr(this),zo(this);else if(0<O.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),If(st),st.M=!0,dt(11))}}else Xi(this.i,this.l,O,null),pf(this,O);ot==4&&zr(this),this.o&&!this.J&&(ot==4?GI(this.j,this):(this.o=!1,Kc(this)))}else HR(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),zr(this),zo(this)}}}catch{}finally{}};function _I(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function TR(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?df:(f=Number(d.substring(f,g)),isNaN(f)?yI:(g+=1,g+f>d.length?df:(d=d.slice(g,g+f),u.C=g+f,d)))}ir.prototype.cancel=function(){this.J=!0,zr(this)};function Kc(u){u.S=Date.now()+u.I,II(u,u.I)}function II(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ho(m(u.ba,u),d)}function ff(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ir.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(bR(this.i,this.A),this.L!=2&&($o(),dt(17)),zr(this),this.s=2,zo(this)):II(this,this.S-u)};function zo(u){u.j.G==0||u.J||GI(u.j,u)}function zr(u){ff(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,cI(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function pf(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||gf(f.h,u))){if(!u.K&&gf(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)nu(f),eu(f);else break e;_f(f),dt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ho(m(f.Za,f),6e3));if(1>=DI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Wr(f,11)}else if((u.K||f.g==u)&&nu(f),!B(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let _e=C[d];if(f.T=_e[0],_e=_e[1],f.G==2)if(_e[0]=="c"){f.K=_e[1],f.ia=_e[2];let st=_e[3];st!=null&&(f.la=st,f.j.info("VER="+f.la));let ot=_e[4];ot!=null&&(f.Aa=ot,f.j.info("SVER="+f.Aa));let ns=_e[5];ns!=null&&typeof ns=="number"&&0<ns&&(g=1.5*ns,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Kt=u.g;if(Kt){let iu=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iu){var R=g.h;R.g||iu.indexOf("spdy")==-1&&iu.indexOf("quic")==-1&&iu.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(mf(R,R.h),R.h=null))}if(g.D){let wf=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;wf&&(g.ya=wf,Re(g.I,g.D,wf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=u;if(g.qa=QI(g,g.J?g.ia:null,g.W),O.K){bI(g.h,O);var Ce=O,Ze=g.L;Ze&&(Ce.I=Ze),Ce.B&&(ff(Ce),Kc(Ce)),g.g=O}else qI(g);0<f.i.length&&tu(f)}else _e[0]!="stop"&&_e[0]!="close"||Wr(f,7);else f.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Wr(f,7):vf(f):_e[0]!="noop"&&f.l&&f.l.ta(_e),f.v=0)}}$o(4)}catch{}}var SR=class{constructor(u,d){this.g=u,this.map=d}};function wI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function EI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function DI(u){return u.h?1:u.g?u.g.size:0}function gf(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function mf(u,d){u.g?u.g.add(d):u.h=d}function bI(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}wI.prototype.cancel=function(){if(this.i=CI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function CI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return N(u.i)}function AR(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function RR(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function TI(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=RR(u),g=AR(u),C=g.length,R=0;R<C;R++)d.call(void 0,g[R],f&&f[R],u)}var SI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MR(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),C=null;if(0<=g){var R=u[f].substring(0,g);C=u[f].substring(g+1)}else R=u[f];d(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Gr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Gr){this.h=u.h,Qc(this,u.j),this.o=u.o,this.g=u.g,Yc(this,u.s),this.l=u.l;var d=u.i,f=new Ko;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),AI(this,f),this.m=u.m}else u&&(d=String(u).match(SI))?(this.h=!1,Qc(this,d[1]||"",!0),this.o=Go(d[2]||""),this.g=Go(d[3]||"",!0),Yc(this,d[4]),this.l=Go(d[5]||"",!0),AI(this,d[6]||"",!0),this.m=Go(d[7]||"")):(this.h=!1,this.i=new Ko(null,this.h))}Gr.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Wo(d,RI,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Wo(d,RI,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Wo(f,f.charAt(0)=="/"?PR:xR,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Wo(f,kR)),u.join("")};function xn(u){return new Gr(u)}function Qc(u,d,f){u.j=f?Go(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Yc(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function AI(u,d,f){d instanceof Ko?(u.i=d,FR(u.i,u.h)):(f||(d=Wo(d,OR)),u.i=new Ko(d,u.h))}function Re(u,d,f){u.i.set(d,f)}function Zc(u){return Re(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Go(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Wo(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,NR),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function NR(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var RI=/[#\/\?@]/g,xR=/[#\?:]/g,PR=/[#\?]/g,OR=/[#\?@]/g,kR=/#/g;function Ko(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function sr(u){u.g||(u.g=new Map,u.h=0,u.i&&MR(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Ko.prototype,n.add=function(u,d){sr(this),this.i=null,u=es(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function MI(u,d){sr(u),d=es(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function NI(u,d){return sr(u),d=es(u,d),u.g.has(d)}n.forEach=function(u,d){sr(this),this.g.forEach(function(f,g){f.forEach(function(C){u.call(d,C,g,this)},this)},this)},n.na=function(){sr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=u[g];for(let R=0;R<C.length;R++)f.push(d[g])}return f},n.V=function(u){sr(this);let d=[];if(typeof u=="string")NI(this,u)&&(d=d.concat(this.g.get(es(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return sr(this),this.i=null,u=es(this,u),NI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function xI(u,d,f){MI(u,d),0<f.length&&(u.i=null,u.g.set(es(u,d),N(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let R=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var C=R;O[g]!==""&&(C+="="+encodeURIComponent(String(O[g]))),u.push(C)}}return this.i=u.join("&")};function es(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function FR(u,d){d&&!u.j&&(sr(u),u.i=null,u.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(MI(this,g),xI(this,C,f))},u)),u.j=d}function LR(u,d){let f=new qo;if(a.Image){let g=new Image;g.onload=v(or,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(or,f,"TestLoadImage: error",!1,d,g),g.onabort=v(or,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(or,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function VR(u,d){let f=new qo,g=new AbortController,C=setTimeout(()=>{g.abort(),or(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(R=>{clearTimeout(C),R.ok?or(f,"TestPingServer: ok",!0,d):or(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),or(f,"TestPingServer: error",!1,d)})}function or(u,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function UR(){this.g=new wR}function jR(u,d,f){let g=f||"";try{TI(u,function(C,R){let O=C;l(C)&&(O=of(C)),d.push(g+R+"="+encodeURIComponent(O))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Qo(u){this.l=u.Ub||null,this.j=u.eb||!1}T(Qo,af),Qo.prototype.g=function(){return new Jc(this.l,this.j)},Qo.prototype.i=function(u){return function(){return u}}({});function Jc(u,d){it.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Jc,it),n=Jc.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Zo(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yo(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Zo(this)),this.g&&(this.readyState=3,Zo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;PI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function PI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Yo(this):Zo(this),this.readyState==3&&PI(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Yo(this))},n.Qa=function(u){this.g&&(this.response=u,Yo(this))},n.ga=function(){this.g&&Yo(this)};function Yo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Zo(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function Zo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function OI(u){let d="";return $(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function yf(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=OI(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Re(u,d,f))}function Oe(u){it.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Oe,it);var BR=/^https?$/i,$R=["POST","PUT"];n=Oe.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lf.g(),this.v=this.o?uI(this.o):uI(lf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(R){kI(this,R);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let R of g.keys())f.set(R,g.get(R));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call($R,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,O]of f)this.g.setRequestHeader(R,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{VI(this),this.u=!0,this.g.send(u),this.u=!1}catch(R){kI(this,R)}};function kI(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,FI(u),Xc(u)}function FI(u){u.A||(u.A=!0,lt(u,"complete"),lt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,lt(this,"complete"),lt(this,"abort"),Xc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xc(this,!0)),Oe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?LI(this):this.bb())},n.bb=function(){LI(this)};function LI(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Pn(u)!=4||u.Z()!=2)){if(u.u&&Pn(u)==4)sI(u.Ea,0,u);else if(lt(u,"readystatechange"),Pn(u)==4){u.h=!1;try{let O=u.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var C=String(u.D).match(SI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!BR.test(C?C.toLowerCase():"")}f=g}if(f)lt(u,"complete"),lt(u,"success");else{u.m=6;try{var R=2<Pn(u)?u.g.statusText:""}catch{R=""}u.l=R+" ["+u.Z()+"]",FI(u)}}finally{Xc(u)}}}}function Xc(u,d){if(u.g){VI(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||lt(u,"ready");try{f.onreadystatechange=g}catch{}}}function VI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Pn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),IR(d)}};function UI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function HR(u){let d={};u=(u.g&&2<=Pn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(B(u[g]))continue;var f=b(u[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[C]||[];d[C]=R,R.push(f)}w(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jo(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function jI(u){this.Aa=0,this.i=[],this.j=new qo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jo("baseRetryDelayMs",5e3,u),this.cb=Jo("retryDelaySeedMs",1e4,u),this.Wa=Jo("forwardChannelMaxRetries",2,u),this.wa=Jo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new wI(u&&u.concurrentRequestLimit),this.Da=new UR,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=jI.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){dt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=QI(this,null,this.W),tu(this)};function vf(u){if(BI(u),u.G==3){var d=u.U++,f=xn(u.I);if(Re(f,"SID",u.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),Xo(u,f),d=new ir(u,u.j,d),d.L=2,d.v=Zc(xn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=YI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Kc(d)}KI(u)}function eu(u){u.g&&(If(u),u.g.cancel(),u.g=null)}function BI(u){eu(u),u.u&&(a.clearTimeout(u.u),u.u=null),nu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function tu(u){if(!EI(u.h)&&!u.s){u.s=!0;var d=u.Ga;Fo||X_(),Lo||(Fo(),Lo=!0),Yh.add(d,u),u.B=0}}function qR(u,d){return DI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ho(m(u.Ga,u,d),WI(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new ir(this,this.j,u),R=this.o;if(this.S&&(R?(R=y(R),E(R,this.S)):R=this.S),this.m!==null||this.O||(C.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=HI(this,C,d),f=xn(this.I),Re(f,"RID",u),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),Xo(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(OI(R)))+"&"+d:this.m&&yf(f,this.m,R)),mf(this.h,C),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),C.T=!0,hf(C,f,null)):hf(C,f,d),this.G=2}}else this.G==3&&(u?$I(this,u):this.i.length==0||EI(this.h)||$I(this))};function $I(u,d){var f;d?f=d.l:f=u.U++;let g=xn(u.I);Re(g,"SID",u.K),Re(g,"RID",f),Re(g,"AID",u.T),Xo(u,g),u.m&&u.o&&yf(g,u.m,u.o),f=new ir(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=HI(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),mf(u.h,f),hf(f,g,d)}function Xo(u,d){u.H&&$(u.H,function(f,g){Re(d,g,f)}),u.l&&TI({},function(f,g){Re(d,g,f)})}function HI(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var C=u.i;let R=-1;for(;;){let O=["count="+f];R==-1?0<f?(R=C[0].g,O.push("ofs="+R)):R=0:O.push("ofs="+R);let Ce=!0;for(let Ze=0;Ze<f;Ze++){let _e=C[Ze].g,st=C[Ze].map;if(_e-=R,0>_e)R=Math.max(0,C[Ze].g-100),Ce=!1;else try{jR(st,O,"req"+_e+"_")}catch{g&&g(st)}}if(Ce){g=O.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function qI(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Fo||X_(),Lo||(Fo(),Lo=!0),Yh.add(d,u),u.v=0}}function _f(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ho(m(u.Fa,u),WI(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,zI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ho(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),eu(this),zI(this))};function If(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function zI(u){u.g=new ir(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=xn(u.qa);Re(d,"RID","rpc"),Re(d,"SID",u.K),Re(d,"AID",u.T),Re(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Re(d,"TO",u.ja),Re(d,"TYPE","xmlhttp"),Xo(u,d),u.m&&u.o&&yf(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=Zc(xn(d)),f.m=null,f.P=!0,vI(f,u)}n.Za=function(){this.C!=null&&(this.C=null,eu(this),_f(this),dt(19))};function nu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function GI(u,d){var f=null;if(u.g==d){nu(u),If(u),u.g=null;var g=2}else if(gf(u.h,d))f=d.D,bI(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;g=zc(),lt(g,new pI(g,f)),tu(u)}else qI(u);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&qR(u,d)||g==2&&_f(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:Wr(u,5);break;case 4:Wr(u,10);break;case 3:Wr(u,6);break;default:Wr(u,2)}}}function WI(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function Wr(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let C=!g;g=new Gr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qc(g,"https"),Zc(g),C?LR(g.toString(),f):VR(g.toString(),f)}else dt(2);u.G=0,u.l&&u.l.sa(d),KI(u),BI(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function KI(u){if(u.G=0,u.ka=[],u.l){let d=CI(u.h);(d.length!=0||u.i.length!=0)&&(M(u.ka,d),M(u.ka,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.ra()}}function QI(u,d,f){var g=f instanceof Gr?xn(f):new Gr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Yc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var R=new Gr(null);g&&Qc(R,g),d&&(R.g=d),C&&Yc(R,C),f&&(R.l=f),g=R}return f=u.D,d=u.ya,f&&d&&Re(g,f,d),Re(g,"VER",u.la),Xo(u,g),g}function YI(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Oe(new Qo({eb:f})):new Oe(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZI(){}n=ZI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ru(){}ru.prototype.g=function(u,d){return new Tt(u,d)};function Tt(u,d){it.call(this),this.g=new jI(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!B(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!B(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new ts(this)}T(Tt,it),Tt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){vf(this.g)},Tt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=of(u),u=f);d.i.push(new SR(d.Ya++,u)),d.G==3&&tu(d)},Tt.prototype.N=function(){this.g.l=null,delete this.j,vf(this.g),delete this.g,Tt.aa.N.call(this)};function JI(u){cf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}T(JI,cf);function XI(){uf.call(this),this.status=1}T(XI,uf);function ts(u){this.g=u}T(ts,ZI),ts.prototype.ua=function(){lt(this.g,"a")},ts.prototype.ta=function(u){lt(this.g,new JI(u))},ts.prototype.sa=function(u){lt(this.g,new XI)},ts.prototype.ra=function(){lt(this.g,"b")},ru.prototype.createWebChannel=ru.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,Ny=Yn.createWebChannelTransport=function(){return new ru},My=Yn.getStatEventTarget=function(){return zc()},Ry=Yn.Event=qr,Ad=Yn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gc.NO_ERROR=0,Gc.TIMEOUT=8,Gc.HTTP_ERROR=6,uc=Yn.ErrorCode=Gc,gI.COMPLETE="complete",Ay=Yn.EventType=gI,lI.EventType=Bo,Bo.OPEN="a",Bo.CLOSE="b",Bo.ERROR="c",Bo.MESSAGE="d",it.prototype.listen=it.prototype.K,eo=Yn.WebChannel=lI,_j=Yn.FetchXmlHttpFactory=Qo,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,Sy=Yn.XhrIo=Oe}).apply(typeof Sd<"u"?Sd:typeof self<"u"?self:typeof window<"u"?window:{});var u0="@firebase/firestore";var Ge=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");var Mo="10.14.0";var Bi=new br("@firebase/firestore");function so(){return Bi.logLevel}function P(n,...e){if(Bi.logLevel<=ue.DEBUG){let t=e.map(D_);Bi.debug(`Firestore (${Mo}): ${n}`,...t)}}function gt(n,...e){if(Bi.logLevel<=ue.ERROR){let t=e.map(D_);Bi.error(`Firestore (${Mo}): ${n}`,...t)}}function $i(n,...e){if(Bi.logLevel<=ue.WARN){let t=e.map(D_);Bi.warn(`Firestore (${Mo}): ${n}`,...t)}}function D_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function q(n="Unexpected state"){let e=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: `+n;throw gt(e),new Error(e)}function z(n,e){n||q()}function J(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends bt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var zt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Vd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Fy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ge.UNAUTHENTICATED))}shutdown(){}},Ly=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Vy=class{constructor(e){this.t=e,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){z(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new zt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>D(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(z(typeof r.accessToken=="string"),new Vd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return z(e===null||typeof e=="string"),new Ge(e)}},Uy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},jy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Uy(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}},By=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$y=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){z(this.o===void 0);let r=s=>{s.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,P("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(z(typeof t.token=="string"),this.R=t.token,new By(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Ij(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ud=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Ij(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function te(n,e){return n<e?-1:n>e?1:0}function go(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function cS(n){return n+"\0"}var Ve=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new U(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new U(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new U(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ve(0,0))}static max(){return new n(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var jd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(),r===void 0?r=e.length-t:r>e.length-t&&q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Se=class n extends jd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},wj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,We=class n extends jd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return wj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new U(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new U(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new U(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var j=class n{constructor(e){this.path=e}static fromPath(e){return new n(Se.fromString(e))}static fromName(e){return new n(Se.fromString(e).popFirst(5))}static empty(){return new n(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Se(e.slice()))}};var mo=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Hy(n){return n.fields.find(e=>e.kind===2)}function xi(n){return n.fields.filter(e=>e.kind!==2)}mo.UNKNOWN_ID=-1;var ho=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Ic=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Wt.min())}};function Ej(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new Ve(t+1,0):new Ve(t,r));return new Wt(i,j.empty(),e)}function uS(n){return new Wt(n.readTime,n.key,-1)}var Wt=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Q.min(),j.empty(),-1)}static max(){return new n(Q.max(),j.empty(),-1)}};function b_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=j.comparator(n.documentKey,e.documentKey),t!==0?t:te(n.largestBatchId,e.largestBatchId))}var lS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Bd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Yi(n){return D(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==lS)throw n;P("LocalStore","Unexpectedly lost primary lease")})}var A=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var $d=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new zt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ui(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=C_(r.target.error);this.V.reject(new Ui(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new Ui(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(P("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new zy(t)}},yo=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ct())===12.2&&gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return P("SimpleDb","Removing database:",e),Pi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!dd())return!1;if(n.v())return!0;let e=ct(),t=n.S(e),r=0<t&&t<10,i=dS(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return D(this,null,function*(){return this.db||(P("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new Ui(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new U(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new U(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ui(e,o))},i.onupgradeneeded=s=>{P("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{P("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return D(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=$d.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),A.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(P("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function dS(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var qy=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Pi(this.B.delete())}},Ui=class extends U{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Hr(n){return n.name==="IndexedDbTransactionError"}var zy=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(P("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(P("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Pi(r)}add(e){return P("SimpleDb","ADD",this.store.name,e,e),Pi(this.store.add(e))}get(e){return Pi(this.store.get(e)).next(t=>(t===void 0&&(t=null),P("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return P("SimpleDb","DELETE",this.store.name,e),Pi(this.store.delete(e))}count(){return P("SimpleDb","COUNT",this.store.name),Pi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new A((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new A((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){P("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new A((r,i)=>{t.onerror=s=>{let o=C_(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new A((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new qy(a),l=t(a.primaryKey,a.value,c);if(l instanceof A){let h=l.catch(p=>(c.done(),A.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>A.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Pi(n){return new A((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=C_(r.target.error);t(i)}})}var l0=!1;function C_(n){let e=yo.S(ct());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new U("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return l0||(l0=!0,setTimeout(()=>{throw r},0)),r}}return n}var Gy=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){P("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>D(this,null,function*(){this.task=null;try{P("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Hr(t)?P("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Yi(t)}yield this.X(6e4)}))}},Wy=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return D(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return A.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return P("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(P("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=uS(s);b_(o,r)>0&&(r=o)}),new Wt(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var an=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Oh(n){return n==null}function wc(n){return n===0&&1/n==-1/0}function Dj(n){return typeof n=="number"&&Number.isInteger(n)&&!wc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function mt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=d0(e)),e=bj(n.get(t),e);return d0(e)}function bj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function d0(n){return n+""}function Dn(n){let e=n.length;if(z(e>=2),e===2)return z(n.charAt(0)===""&&n.charAt(1)===""),Se.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&q(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:q()}s=o+2}return new Se(r)}var h0=["userId","batchId"];function Pd(n,e){return[n,mt(e)]}function hS(n,e,t){return[n,mt(e),t]}var Cj={},Tj=["prefixPath","collectionGroup","readTime","documentId"],Sj=["prefixPath","collectionGroup","documentId"],Aj=["collectionGroup","readTime","prefixPath","documentId"],Rj=["canonicalId","targetId"],Mj=["targetId","path"],Nj=["path","targetId"],xj=["collectionId","parent"],Pj=["indexId","uid"],Oj=["uid","sequenceNumber"],kj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Fj=["indexId","uid","orderedDocumentKey"],Lj=["userId","collectionPath","documentId"],Vj=["userId","collectionPath","largestBatchId"],Uj=["userId","collectionGroup","largestBatchId"],fS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jj=[...fS,"documentOverlays"],pS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gS=pS,T_=[...gS,"indexConfiguration","indexState","indexEntries"],Bj=T_,$j=[...T_,"globals"];var Ec=class extends Bd{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Qe(n,e){let t=J(n);return yo.F(t._e,e)}function f0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function No(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Pe=class n{constructor(e,t){this.comparator=e,this.root=t||Cn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lo(this.root,e,this.comparator,!1)}getReverseIterator(){return new lo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lo(this.root,e,this.comparator,!0)}},lo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Cn=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();let e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class n{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hd(this.data.getIterator())}getIteratorFrom(e){return new Hd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Hd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function to(n){return n.hasNext()?n.getNext():void 0}var cn=class n{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ae(We.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var qd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ke=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new qd("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ke.EMPTY_BYTE_STRING=new Ke("");var Hj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jn(n){if(z(!!n),typeof n=="string"){let e=0,t=Hj.exec(n);if(z(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function kr(n){return typeof n=="string"?Ke.fromBase64String(n):Ke.fromUint8Array(n)}function S_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function A_(n){let e=n.mapValue.fields.__previous_value__;return S_(e)?A_(e):e}function Dc(n){let e=Jn(n.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}var Ky=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},vo=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Pr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Od={nullValue:"NULL_VALUE"};function Hi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?S_(n)?4:yS(n)?9007199254740991:kh(n)?10:11:q()}function Tn(n,e){if(n===e)return!0;let t=Hi(n);if(t!==Hi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dc(n).isEqual(Dc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Jn(i.timestampValue),a=Jn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return kr(i.bytesValue).isEqual(kr(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ne(i.geoPointValue.latitude)===Ne(s.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ne(i.integerValue)===Ne(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ne(i.doubleValue),a=Ne(s.doubleValue);return o===a?wc(o)===wc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return go(n.arrayValue.values||[],e.arrayValue.values||[],Tn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(f0(o)!==f0(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Tn(o[c],a[c])))return!1;return!0}(n,e);default:return q()}}function bc(n,e){return(n.values||[]).find(t=>Tn(t,e))!==void 0}function Fr(n,e){if(n===e)return 0;let t=Hi(n),r=Hi(e);if(t!==r)return te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return te(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ne(s.integerValue||s.doubleValue),c=Ne(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return p0(n.timestampValue,e.timestampValue);case 4:return p0(Dc(n),Dc(e));case 5:return te(n.stringValue,e.stringValue);case 6:return function(s,o){let a=kr(s),c=kr(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=te(a[l],c[l]);if(h!==0)return h}return te(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=te(Ne(s.latitude),Ne(o.latitude));return a!==0?a:te(Ne(s.longitude),Ne(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return g0(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,h;let p=s.fields||{},m=o.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,T=(c=m.value)===null||c===void 0?void 0:c.arrayValue,N=te(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:g0(v,T)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Pr.mapValue&&o===Pr.mapValue)return 0;if(s===Pr.mapValue)return 1;if(o===Pr.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=te(c[p],h[p]);if(m!==0)return m;let v=Fr(a[c[p]],l[h[p]]);if(v!==0)return v}return te(c.length,h.length)}(n.mapValue,e.mapValue);default:throw q()}}function p0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return te(n,e);let t=Jn(n),r=Jn(e),i=te(t.seconds,r.seconds);return i!==0?i:te(t.nanos,r.nanos)}function g0(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Fr(t[i],r[i]);if(s)return s}return te(t.length,r.length)}function _o(n){return Qy(n)}function Qy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Jn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return kr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return j.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Qy(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Qy(t.fields[o])}`;return i+"}"}(n.mapValue):q()}function R_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Yy(n){return!!n&&"integerValue"in n}function Cc(n){return!!n&&"arrayValue"in n}function m0(n){return!!n&&"nullValue"in n}function y0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kd(n){return!!n&&"mapValue"in n}function kh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function mc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return No(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=mc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var vS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function qj(n){return"nullValue"in n?Od:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?R_(vo.empty(),j.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?kh(n)?vS:{mapValue:{}}:q()}function zj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?R_(vo.empty(),j.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?vS:"mapValue"in n?kh(n)?{mapValue:{}}:Pr:q()}function v0(n,e){let t=Fr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function _0(n,e){let t=Fr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Ot=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!kd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mc(t)}setAll(e){let t=We.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=mc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());kd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];kd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){No(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(mc(this.value))}};function _S(n){let e=[];return No(n.fields,(t,r)=>{let i=new We([t]);if(kd(r)){let s=_S(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new cn(e)}var nt=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Q.min(),Q.min(),Q.min(),Ot.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Q.min(),Q.min(),Ot.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Q.min(),Q.min(),Ot.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Lr=class{constructor(e,t){this.position=e,this.inclusive=t}};function I0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=j.comparator(j.fromName(o.referenceValue),t.key):r=Fr(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function w0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tn(n.position[t],e.position[t]))return!1;return!0}var Io=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Gj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var zd=class{},fe=class n extends zd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Xy(e,t,r):t==="array-contains"?new nv(e,r):t==="in"?new Gd(e,r):t==="not-in"?new rv(e,r):t==="array-contains-any"?new iv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ev(e,r):new tv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Fr(t,this.value)):t!==null&&Hi(this.value)===Hi(t)&&this.matchesComparison(Fr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},be=class n extends zd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return wo(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function wo(n){return n.op==="and"}function Zy(n){return n.op==="or"}function M_(n){return IS(n)&&wo(n)}function IS(n){for(let e of n.filters)if(e instanceof be)return!1;return!0}function Jy(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+_o(n.value);if(M_(n))return n.filters.map(e=>Jy(e)).join(",");{let e=n.filters.map(t=>Jy(t)).join(",");return`${n.op}(${e})`}}function wS(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&Tn(r.value,i.value)}(n,e):n instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&wS(o,i.filters[a]),!0):!1}(n,e):void q()}function ES(n,e){let t=n.filters.concat(e);return be.create(t,n.op)}function DS(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${_o(t.value)}`}(n):n instanceof be?function(t){return t.op.toString()+" {"+t.getFilters().map(DS).join(" ,")+"}"}(n):"Filter"}var Xy=class extends fe{constructor(e,t,r){super(e,t,r),this.key=j.fromName(r.referenceValue)}matches(e){let t=j.comparator(e.key,this.key);return this.matchesComparison(t)}},ev=class extends fe{constructor(e,t){super(e,"in",t),this.keys=bS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},tv=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=bS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function bS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>j.fromName(r.referenceValue))}var nv=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Cc(t)&&bc(t.arrayValue,this.value)}},Gd=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&bc(this.value.arrayValue,t)}},rv=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!bc(this.value.arrayValue,t)}},iv=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Cc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>bc(this.value.arrayValue,r))}};var sv=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function ov(n,e=null,t=[],r=[],i=null,s=null,o=null){return new sv(n,e,t,r,i,s,o)}function qi(n){let e=J(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Jy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Oh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_o(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_o(r)).join(",")),e.ue=t}return e.ue}function Fc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Gj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!w0(n.startAt,e.startAt)&&w0(n.endAt,e.endAt)}function Wd(n){return j.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Kd(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function E0(n,e,t){let r=Od,i=!0;for(let s of Kd(n,e)){let o=Od,a=!0;switch(s.op){case"<":case"<=":o=qj(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Od}v0({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];v0({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function D0(n,e,t){let r=Pr,i=!0;for(let s of Kd(n,e)){let o=Pr,a=!0;switch(s.op){case">=":case">":o=zj(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Pr}_0({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];_0({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var Eo=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Wj(n,e,t,r,i,s,o,a){return new Eo(n,e,t,r,i,s,o,a)}function Fh(n){return new Eo(n)}function b0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Kj(n){return n.collectionGroup!==null}function yc(n){let e=J(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ae(We.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Io(s,r))}),t.has(We.keyField().canonicalString())||e.ce.push(new Io(We.keyField(),r))}return e.ce}function Gt(n){let e=J(n);return e.le||(e.le=Qj(e,yc(n))),e.le}function Qj(n,e){if(n.limitType==="F")return ov(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Io(i.field,s)});let t=n.endAt?new Lr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Lr(n.startAt.position,n.startAt.inclusive):null;return ov(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function av(n,e,t){return new Eo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lh(n,e){return Fc(Gt(n),Gt(e))&&n.limitType===e.limitType}function CS(n){return`${qi(Gt(n))}|lt:${n.limitType}`}function oo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>DS(i)).join(", ")}]`),Oh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>_o(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>_o(i)).join(",")),`Target(${r})`}(Gt(n))}; limitType=${n.limitType})`}function Lc(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):j.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of yc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=I0(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,yc(r),i)||r.endAt&&!function(o,a,c){let l=I0(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,yc(r),i))}(n,e)}function Yj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TS(n){return(e,t)=>{let r=!1;for(let i of yc(n)){let s=Zj(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Zj(n,e,t){let r=n.field.isKeyField()?j.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Fr(c,l):q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}var Sn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){No(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return mS(this.inner)}size(){return this.innerSize}};var Jj=new Pe(j.comparator);function kt(){return Jj}var SS=new Pe(j.comparator);function pc(...n){let e=SS;for(let t of n)e=e.insert(t.key,t);return e}function AS(n){let e=SS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bn(){return vc()}function RS(){return vc()}function vc(){return new Sn(n=>n.toString(),(n,e)=>n.isEqual(e))}var Xj=new Pe(j.comparator),e2=new Ae(j.comparator);function se(...n){let e=e2;for(let t of n)e=e.add(t);return e}var t2=new Ae(te);function n2(){return t2}function N_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function MS(n){return{integerValue:""+n}}function r2(n,e){return Dj(e)?MS(e):N_(n,e)}var Do=class{constructor(){this._=void 0}};function i2(n,e,t){return n instanceof zi?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&S_(s)&&(s=A_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Vr?xS(n,e):n instanceof Ur?PS(n,e):function(i,s){let o=NS(i,s),a=C0(o)+C0(i.Pe);return Yy(o)&&Yy(i.Pe)?MS(a):N_(i.serializer,a)}(n,e)}function s2(n,e,t){return n instanceof Vr?xS(n,e):n instanceof Ur?PS(n,e):t}function NS(n,e){return n instanceof Gi?function(r){return Yy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var zi=class extends Do{},Vr=class extends Do{constructor(e){super(),this.elements=e}};function xS(n,e){let t=OS(e);for(let r of n.elements)t.some(i=>Tn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ur=class extends Do{constructor(e){super(),this.elements=e}};function PS(n,e){let t=OS(e);for(let r of n.elements)t=t.filter(i=>!Tn(i,r));return{arrayValue:{values:t}}}var Gi=class extends Do{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function C0(n){return Ne(n.integerValue||n.doubleValue)}function OS(n){return Cc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var cv=class{constructor(e,t){this.field=e,this.transform=t}};function o2(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Vr&&i instanceof Vr||r instanceof Ur&&i instanceof Ur?go(r.elements,i.elements,Tn):r instanceof Gi&&i instanceof Gi?Tn(r.Pe,i.Pe):r instanceof zi&&i instanceof zi}(n.transform,e.transform)}var uv=class{constructor(e,t){this.version=e,this.transformResults=t}},un=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Fd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var bo=class{};function kS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Tc(n.key,un.none()):new jr(n.key,n.data,un.none());{let t=n.data,r=Ot.empty(),i=new Ae(We.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new An(n.key,r,new cn(i.toArray()),un.none())}}function a2(n,e,t){n instanceof jr?function(i,s,o){let a=i.value.clone(),c=S0(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof An?function(i,s,o){if(!Fd(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=S0(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(FS(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function _c(n,e,t,r){return n instanceof jr?function(s,o,a,c){if(!Fd(s.precondition,o))return a;let l=s.value.clone(),h=A0(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof An?function(s,o,a,c){if(!Fd(s.precondition,o))return a;let l=A0(s.fieldTransforms,c,o),h=o.data;return h.setAll(FS(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return Fd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function c2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=NS(r.transform,i||null);s!=null&&(t===null&&(t=Ot.empty()),t.set(r.field,s))}return t||null}function T0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&go(r,i,(s,o)=>o2(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var jr=class extends bo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},An=class extends bo{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function FS(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function S0(n,e,t){let r=new Map;z(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,s2(o,a,t[i]))}return r}function A0(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,i2(s,o,e))}return r}var Tc=class extends bo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Qd=class extends bo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&a2(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=_c(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=_c(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=RS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=kS(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,(t,r)=>T0(t,r))&&go(this.baseMutations,e.baseMutations,(t,r)=>T0(t,r))}},lv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){z(e.mutations.length===r.length);let i=function(){return Xj}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Ac=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var dv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var je,me;function u2(n){switch(n){default:return q();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function LS(n){if(n===void 0)return gt("GRPC error has no .code"),x.UNKNOWN;switch(n){case je.OK:return x.OK;case je.CANCELLED:return x.CANCELLED;case je.UNKNOWN:return x.UNKNOWN;case je.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case je.INTERNAL:return x.INTERNAL;case je.UNAVAILABLE:return x.UNAVAILABLE;case je.UNAUTHENTICATED:return x.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case je.NOT_FOUND:return x.NOT_FOUND;case je.ALREADY_EXISTS:return x.ALREADY_EXISTS;case je.PERMISSION_DENIED:return x.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case je.ABORTED:return x.ABORTED;case je.OUT_OF_RANGE:return x.OUT_OF_RANGE;case je.UNIMPLEMENTED:return x.UNIMPLEMENTED;case je.DATA_LOSS:return x.DATA_LOSS;default:return q()}}(me=je||(je={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var R0=null;function l2(){return new TextEncoder}var d2=new Rr([4294967295,4294967295],0);function M0(n){let e=l2().encode(n),t=new Ty;return t.update(e),new Uint8Array(t.digest())}function N0(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Rr([t,r],0),new Rr([i,s],0)]}var hv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Li(`Invalid padding: ${t}`);if(r<0)throw new Li(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Li(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Li(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Rr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Rr.fromNumber(r)));return i.compare(d2)===1&&(i=new Rr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=M0(e),[r,i]=N0(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=M0(e),[r,i]=N0(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Li=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Yd=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Rc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Q.min(),i,new Pe(te),kt(),se())}},Rc=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,se(),se(),se())}};var fo=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Zd=class{constructor(e,t){this.targetId=e,this.me=t}},Jd=class{constructor(e,t,r=Ke.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Xd=class{constructor(){this.fe=0,this.ge=P0(),this.pe=Ke.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),t=se(),r=se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:q()}}),new Rc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=P0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},fv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=kt(),this.qe=x0(),this.Qe=new Pe(te)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Wd(s))if(r===0){let o=new j(s.path);this.Ue(t,o,nt.newNoDocument(o,Q.min()))}else z(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}R0?.et(function(h,p,m,v,T){var N,M,k,B,F,H;let X={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},$=p.unchangedNames;return $&&(X.bloomFilter={applied:T===0,hashCount:(N=$?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(B=(k=(M=$?.bits)===null||M===void 0?void 0:M.bitmap)===null||k===void 0?void 0:k.length)!==null&&B!==void 0?B:0,padding:(H=(F=$?.bits)===null||F===void 0?void 0:F.padding)!==null&&H!==void 0?H:0,mightContain:w=>{var y;return(y=v?.mightContain(w))!==null&&y!==void 0&&y}}),X}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=kr(r).toUint8Array()}catch(c){if(c instanceof qd)return $i("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new hv(o,i,s)}catch(c){return $i(c instanceof Li?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Wd(a.target)){let c=new j(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,nt.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Yd(e,t,this.Qe,this.ke,r);return this.ke=kt(),this.qe=x0(),this.Qe=new Pe(te),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Xd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ae(te),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||P("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Xd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function x0(){return new Pe(j.comparator)}function P0(){return new Pe(j.comparator)}var h2={asc:"ASCENDING",desc:"DESCENDING"},f2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p2={and:"AND",or:"OR"},pv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function gv(n,e){return n.useProto3Json||Oh(e)?e:{value:e}}function Co(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function g2(n,e){return Co(n,e.toTimestamp())}function yt(n){return z(!!n),Q.fromTimestamp(function(t){let r=Jn(t);return new Ve(r.seconds,r.nanos)}(n))}function x_(n,e){return mv(n,e).canonicalString()}function mv(n,e){let t=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function US(n){let e=Se.fromString(n);return z(KS(e)),e}function eh(n,e){return x_(n.databaseId,e.path)}function ji(n,e){let t=US(e);if(t.get(1)!==n.databaseId.projectId)throw new U(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new U(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new j($S(t))}function jS(n,e){return x_(n.databaseId,e)}function BS(n){let e=US(n);return e.length===4?Se.emptyPath():$S(e)}function yv(n){return new Se(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $S(n){return z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function O0(n,e,t){return{name:eh(n,e),fields:t.value.mapValue.fields}}function m2(n,e,t){let r=ji(n,e.name),i=yt(e.updateTime),s=e.createTime?yt(e.createTime):Q.min(),o=new Ot({mapValue:{fields:e.fields}}),a=nt.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function y2(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(z(h===void 0||typeof h=="string"),Ke.fromBase64String(h||"")):(z(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ke.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?x.UNKNOWN:LS(l.code);return new U(h,l.message||"")}(o);t=new Jd(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ji(n,r.document.name),s=yt(r.document.updateTime),o=r.document.createTime?yt(r.document.createTime):Q.min(),a=new Ot({mapValue:{fields:r.document.fields}}),c=nt.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new fo(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ji(n,r.document),s=r.readTime?yt(r.readTime):Q.min(),o=nt.newNoDocument(i,s),a=r.removedTargetIds||[];t=new fo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ji(n,r.document),s=r.removedTargetIds||[];t=new fo([],s,i,null)}else{if(!("filter"in e))return q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new dv(i,s),a=r.targetId;t=new Zd(a,o)}}return t}function th(n,e){let t;if(e instanceof jr)t={update:O0(n,e.key,e.value)};else if(e instanceof Tc)t={delete:eh(n,e.key)};else if(e instanceof An)t={update:O0(n,e.key,e.data),updateMask:D2(e.fieldMask)};else{if(!(e instanceof Qd))return q();t={verify:eh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof zi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ur)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gi)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:g2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:q()}(n,e.precondition)),t}function vv(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?un.updateTime(yt(s.updateTime)):s.exists!==void 0?un.exists(s.exists):un.none()}(e.currentDocument):un.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)z(a.setToServerValue==="REQUEST_TIME"),c=new zi;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new Vr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new Ur(h)}else"increment"in a?c=new Gi(o,a.increment):q();let l=We.fromServerFormat(a.fieldPath);return new cv(l,c)}(n,i)):[];if(e.update){e.update.name;let i=ji(n,e.update.name),s=new Ot({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new cn(l.map(h=>We.fromServerFormat(h)))}(e.updateMask);return new An(i,s,o,t,r)}return new jr(i,s,t,r)}if(e.delete){let i=ji(n,e.delete);return new Tc(i,t)}if(e.verify){let i=ji(n,e.verify);return new Qd(i,t)}return q()}function v2(n,e){return n&&n.length>0?(z(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?yt(i.updateTime):yt(s);return o.isEqual(Q.min())&&(o=yt(s)),new uv(o,i.transformResults||[])}(t,e))):[]}function HS(n,e){return{documents:[jS(n,e.path)]}}function qS(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=jS(n,i);let s=function(l){if(l.length!==0)return WS(be.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ao(m.field),direction:I2(m.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=gv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function zS(n){let e=BS(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){z(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){let m=GS(p);return m instanceof be&&M_(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(m=>function(T){return new Io(co(T.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Oh(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new Lr(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Lr(v,m)}(t.endAt)),Wj(e,i,o,s,a,"F",c,l)}function _2(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function GS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=co(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=co(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=co(t.unaryFilter.field);return fe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=co(t.unaryFilter.field);return fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(co(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return be.create(t.compositeFilter.filters.map(r=>GS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q()}}(t.compositeFilter.op))}(n):q()}function I2(n){return h2[n]}function w2(n){return f2[n]}function E2(n){return p2[n]}function ao(n){return{fieldPath:n.canonicalString()}}function co(n){return We.fromServerFormat(n.fieldPath)}function WS(n){return n instanceof fe?function(t){if(t.op==="=="){if(y0(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NAN"}};if(m0(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(y0(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NOT_NAN"}};if(m0(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(t.field),op:w2(t.op),value:t.value}}}(n):n instanceof be?function(t){let r=t.getFilters().map(i=>WS(i));return r.length===1?r[0]:{compositeFilter:{op:E2(t.op),filters:r}}}(n):q()}function D2(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function KS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var To=class n{constructor(e,t,r,i,s=Q.min(),o=Q.min(),a=Ke.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var nh=class{constructor(e){this.ct=e}};function b2(n,e){let t;if(e.document)t=m2(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=j.fromSegments(e.noDocument.path),i=Ki(e.noDocument.readTime);t=nt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return q();{let r=j.fromSegments(e.unknownDocument.path),i=Ki(e.unknownDocument.version);t=nt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new Ve(i[0],i[1]);return Q.fromTimestamp(s)}(e.readTime)),t}function k0(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:eh(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Co(s,o.version.toTimestamp()),createTime:Co(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Wi(e.version)};else{if(!e.isUnknownDocument())return q();r.unknownDocument={path:t.path.toArray(),version:Wi(e.version)}}return r}function rh(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Wi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ki(n){let e=new Ve(n.seconds,n.nanoseconds);return Q.fromTimestamp(e)}function Oi(n,e){let t=(e.baseMutations||[]).map(s=>vv(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>vv(n.ct,s)),i=Ve.fromMillis(e.localWriteTimeMs);return new Sc(e.batchId,i,t,r)}function gc(n){let e=Ki(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ki(n.lastLimboFreeSnapshotVersion):Q.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return z(s.documents.length===1),Gt(Fh(BS(s.documents[0])))}(n.query):function(s){return Gt(zS(s))}(n.query),new To(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ke.fromBase64String(n.resumeToken))}function QS(n,e){let t=Wi(e.snapshotVersion),r=Wi(e.lastLimboFreeSnapshotVersion),i;i=Wd(e.target)?HS(n.ct,e.target):qS(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qi(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function YS(n){let e=zS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?av(e,e.limit,"L"):e}function xy(n,e){return new Ac(e.largestBatchId,vv(n.ct,e.overlayMutation))}function F0(n,e){let t=e.path.lastSegment();return[n,mt(e.path.popLast()),t]}function L0(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Wi(r.readTime),documentKey:mt(r.documentKey.path),largestBatchId:r.largestBatchId}}var _v=class{getBundleMetadata(e,t){return V0(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ki(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return V0(e).put(function(i){return{bundleId:i.id,createTime:Wi(yt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return U0(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:YS(s.bundledQuery),readTime:Ki(s.readTime)}}(r)})}saveNamedQuery(e,t){return U0(e).put(function(i){return{name:i.name,readTime:Wi(yt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function V0(n){return Qe(n,"bundles")}function U0(n){return Qe(n,"namedQueries")}var ih=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return lc(e).get(F0(this.userId,t)).next(r=>r?xy(this.serializer,r):null)}getOverlays(e,t){let r=bn();return A.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new Ac(t,o);i.push(this.ht(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(mt(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(lc(e).j("collectionPathOverlayIndex",a))}),A.waitFor(s)}getOverlaysForCollection(e,t,r){let i=bn(),s=mt(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return lc(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=xy(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=bn(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lc(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=xy(this.serializer,l);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return lc(e).put(function(i,s,o){let[a,c,l]=F0(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:th(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function lc(n){return Qe(n,"documentOverlays")}var Iv=class{Pt(e){return Qe(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ke.fromUint8Array(r):Ke.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Zn=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),wc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Jn(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(kr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?yS(e)?this.dt(t,Number.MAX_SAFE_INTEGER):kh(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):q()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ne(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),j.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Zn.vt=new Zn;function C2(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function j0(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=C2(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var wv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=j0(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=j0(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Ev=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Dv=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},ki=class{constructor(){this.jt=new wv,this.Ht=new Ev(this.jt),this.Jt=new Dv(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Fi=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Mr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=B0(n.arrayValue,e.arrayValue),t!==0?t:(t=B0(n.directionalValue,e.directionalValue),t!==0?t:j.comparator(n.documentKey,e.documentKey)))}function B0(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var sh=class{constructor(e){this.Xt=new Ae((t,r)=>We.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(z(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Hy(e);if(t!==void 0&&!this.sn(t))return!1;let r=xi(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(We.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ho(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ho(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ho(r.field,r.dir==="asc"?0:1)));return new mo(mo.UNKNOWN_ID,this.collectionId,t,Ic.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function ZS(n){var e,t;if(z(n instanceof fe||n instanceof be),n instanceof fe){if(n instanceof Gd){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>fe.create(n.field,"==",s)))||[];return be.create(i,"or")}return n}let r=n.filters.map(i=>ZS(i));return be.create(r,n.op)}function T2(n){if(n.getFilters().length===0)return[];let e=Tv(ZS(n));return z(JS(e)),bv(e)||Cv(e)?[e]:e.getFilters()}function bv(n){return n instanceof fe}function Cv(n){return n instanceof be&&M_(n)}function JS(n){return bv(n)||Cv(n)||function(t){if(t instanceof be&&Zy(t)){for(let r of t.getFilters())if(!bv(r)&&!Cv(r))return!1;return!0}return!1}(n)}function Tv(n){if(z(n instanceof fe||n instanceof be),n instanceof fe)return n;if(n.filters.length===1)return Tv(n.filters[0]);let e=n.filters.map(r=>Tv(r)),t=be.create(e,n.op);return t=oh(t),JS(t)?t:(z(t instanceof be),z(wo(t)),z(t.filters.length>1),t.filters.reduce((r,i)=>P_(r,i)))}function P_(n,e){let t;return z(n instanceof fe||n instanceof be),z(e instanceof fe||e instanceof be),t=n instanceof fe?e instanceof fe?function(i,s){return be.create([i,s],"and")}(n,e):$0(n,e):e instanceof fe?$0(e,n):function(i,s){if(z(i.filters.length>0&&s.filters.length>0),wo(i)&&wo(s))return ES(i,s.getFilters());let o=Zy(i)?i:s,a=Zy(i)?s:i,c=o.filters.map(l=>P_(l,a));return be.create(c,"or")}(n,e),oh(t)}function $0(n,e){if(wo(e))return ES(e,n.getFilters());{let t=e.filters.map(r=>P_(n,r));return be.create(t,"or")}}function oh(n){if(z(n instanceof fe||n instanceof be),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return oh(e[0]);if(IS(n))return n;let t=e.map(i=>oh(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof be&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:be.create(r,n.op)}var Sv=class{constructor(){this.un=new Mc}addToCollectionParentIndex(e,t){return this.un.add(t),A.resolve()}getCollectionParents(e,t){return A.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return A.resolve()}deleteFieldIndex(e,t){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,t){return A.resolve()}getDocumentsMatchingTarget(e,t){return A.resolve(null)}getIndexType(e,t){return A.resolve(0)}getFieldIndexes(e,t){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,t){return A.resolve(Wt.min())}getMinOffsetFromCollectionGroup(e,t){return A.resolve(Wt.min())}updateCollectionGroup(e,t,r){return A.resolve()}updateIndexEntries(e,t){return A.resolve()}},Mc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ae(Se.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(Se.comparator)).toArray()}};var Rd=new Uint8Array(0),Av=class{constructor(e,t){this.databaseId=t,this.cn=new Mc,this.ln=new Sn(r=>qi(r),(r,i)=>Fc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:mt(i)};return H0(e).put(s)}return A.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[cS(t),""],!1,!0);return H0(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(Dn(o.parent))}return r})}addFieldIndex(e,t){let r=dc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=ro(e);return s.next(a=>{o.put(L0(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=dc(e),i=ro(e),s=no(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=dc(e),r=no(e),i=ro(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return A.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new sh(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=no(e),i=!0,s=new Map;return A.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=se(),a=[];return A.forEach(s,(c,l)=>{P("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(c)} to execute ${qi(t)}`);let h=function(F,H){let X=Hy(H);if(X===void 0)return null;for(let $ of Kd(F,X.fieldPath))switch($.op){case"array-contains-any":return $.value.arrayValue.values||[];case"array-contains":return[$.value]}return null}(l,c),p=function(F,H){let X=new Map;for(let $ of xi(H))for(let w of Kd(F,$.fieldPath))switch(w.op){case"==":case"in":X.set($.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return X.set($.fieldPath.canonicalString(),w.value),Array.from(X.values())}return null}(l,c),m=function(F,H){let X=[],$=!0;for(let w of xi(H)){let y=w.kind===0?E0(F,w.fieldPath,F.startAt):D0(F,w.fieldPath,F.startAt);X.push(y.value),$&&($=y.inclusive)}return new Lr(X,$)}(l,c),v=function(F,H){let X=[],$=!0;for(let w of xi(H)){let y=w.kind===0?D0(F,w.fieldPath,F.endAt):E0(F,w.fieldPath,F.endAt);X.push(y.value),$&&($=y.inclusive)}return new Lr(X,$)}(l,c),T=this.In(c,l,m),N=this.In(c,l,v),M=this.Tn(c,l,p),k=this.En(c.indexId,h,T,m.inclusive,N,v.inclusive,M);return A.forEach(k,B=>r.G(B,t.limit).next(F=>{F.forEach(H=>{let X=j.fromSegments(H.documentKey);o.has(X)||(o=o.add(X),a.push(X))})}))}).next(()=>a)}return A.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=T2(be.create(e.filters,"and")).map(r=>ov(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){let c=(t!=null?t.length:1)*Math.max(r.length,s.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):Rd,v=this.An(e,m,r[p%l],i),T=this.Rn(e,m,s[p%l],o),N=a.map(M=>this.An(e,m,M,!0));h.push(...this.createRange(v,T,N))}return h}An(e,t,r,i){let s=new Fi(e,j.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new Fi(e,j.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new sh(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return A.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Ae(We.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new ki;for(let i of xi(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);Zn.vt.It(s,o)}return r.zt()}dn(e){let t=new ki;return Zn.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new ki;return Zn.vt.It(R_(this.databaseId,t),r.Yt(function(s){let o=xi(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new ki);let s=0;for(let o of xi(e)){let a=r[s++];for(let c of i)if(this.fn(t,o.fieldPath)&&Cc(a))i=this.gn(i,o,a);else{let l=c.Yt(o.kind);Zn.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new ki;c.seed(a.zt()),Zn.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=dc(e),i=ro(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return A.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(h,p){let m=p?new Ic(p.sequenceNumber,new Wt(Ki(p.readTime),new j(Dn(p.documentKey)),p.largestBatchId)):Ic.empty(),v=h.fields.map(([T,N])=>new ho(We.fromServerFormat(T),N));return new mo(h.indexId,h.collectionGroup,v,m)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:te(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=dc(e),s=ro(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>A.forEach(a,c=>s.put(L0(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return A.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?A.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(s,c);return l.isEqual(h)?A.resolve():this.bn(e,s,c,l,h)}))))})}Dn(e,t,r,i){return no(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return no(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=no(e),s=new Ae(Mr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Fi(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Ae(Mr),i=this.Vn(t,e);if(i==null)return r;let s=Hy(t);if(s!=null){let o=e.data.field(s.fieldPath);if(Cc(o))for(let a of o.arrayValue.values||[])r=r.add(new Fi(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Fi(t.indexId,e.key,Rd,i));return r}bn(e,t,r,i,s){P("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,l,h,p,m){let v=c.getIterator(),T=l.getIterator(),N=to(v),M=to(T);for(;N||M;){let k=!1,B=!1;if(N&&M){let F=h(N,M);F<0?B=!0:F>0&&(k=!0)}else N!=null?B=!0:k=!0;k?(p(M),M=to(T)):B?(m(N),N=to(v)):(N=to(v),M=to(T))}}(i,s,Mr,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),A.waitFor(o)}yn(e){let t=1;return ro(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Mr(o,a)).filter((o,a,c)=>!a||Mr(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Mr(o,e),c=Mr(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Rd,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Rd,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(e,t){return Mr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(q0)}getMinOffset(e,t){return A.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||q())).next(q0)}};function H0(n){return Qe(n,"collectionParents")}function no(n){return Qe(n,"indexEntries")}function dc(n){return Qe(n,"indexConfiguration")}function ro(n){return Qe(n,"indexState")}function q0(n){z(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;b_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Wt(e.readTime,e.documentKey,t)}var z0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function XS(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:o},(h,p,m)=>(a++,m.delete()));s.push(c.next(()=>{z(a===1)}));let l=[];for(let h of t.mutations){let p=hS(e,h.key.path,t.batchId);s.push(i.delete(p)),l.push(h.key)}return A.waitFor(s).next(()=>l)}function ah(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw q();e=n.noDocument}return JSON.stringify(e).length}qt.DEFAULT_COLLECTION_PERCENTILE=10,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qt.DEFAULT=new qt(41943040,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qt.DISABLED=new qt(-1,0,0);var ch=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){z(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nr(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=uo(e),o=Nr(e);return o.add({}).next(a=>{z(typeof a=="number");let c=new Sc(a,t,r,i),l=function(v,T,N){let M=N.baseMutations.map(B=>th(v.ct,B)),k=N.mutations.map(B=>th(v.ct,B));return{userId:T,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:M,mutations:k}}(this.serializer,this.userId,c),h=[],p=new Ae((m,v)=>te(m.canonicalString(),v.canonicalString()));for(let m of i){let v=hS(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(o.put(l)),h.push(s.put(v,Cj))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),A.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Nr(e).get(t).next(r=>r?(z(r.userId===this.userId),Oi(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?A.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Nr(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(z(a.batchId>=r),s=Oi(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Nr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Oi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Pd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return uo(e).J({range:i},(o,a,c)=>{let[l,h,p]=o,m=Dn(h);if(l===this.userId&&t.path.isEqual(m))return Nr(e).get(p).next(v=>{if(!v)throw q();z(v.userId===this.userId),s.push(Oi(this.serializer,v))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(te),i=[];return t.forEach(s=>{let o=Pd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=uo(e).J({range:a},(l,h,p)=>{let[m,v,T]=l,N=Dn(v);m===this.userId&&s.path.isEqual(N)?r=r.add(T):p.done()});i.push(c)}),A.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=Pd(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ae(te);return uo(e).J({range:o},(c,l,h)=>{let[p,m,v]=c,T=Dn(m);p===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push(Nr(e).get(s).next(o=>{if(o===null)throw q();z(o.userId===this.userId),r.push(Oi(this.serializer,o))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return XS(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return A.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return uo(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Dn(s[1]);i.push(c)}else a.done()}).next(()=>{z(i.length===0)})})}containsKey(e,t){return eA(e,this.userId,t)}Nn(e){return tA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function eA(n,e,t){let r=Pd(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return uo(n).J({range:s,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(o=!0),l.done()}).next(()=>o)}function Nr(n){return Qe(n,"mutations")}function uo(n){return Qe(n,"documentMutations")}function tA(n){return Qe(n,"mutationQueues")}var So=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Rv=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new So(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Q.fromTimestamp(new Ve(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>io(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(z(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return io(e).J((o,a)=>{let c=gc(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>A.waitFor(s)).next(()=>i)}forEachTarget(e,t){return io(e).J((r,i)=>{let s=gc(i);t(s)})}qn(e){return G0(e).get("targetGlobalKey").next(t=>(z(t!==null),t))}Qn(e,t){return G0(e).put("targetGlobalKey",t)}Kn(e,t){return io(e).put(QS(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=qi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return io(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=gc(a);Fc(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=xr(e);return t.forEach(o=>{let a=mt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),A.waitFor(i)}removeMatchingKeys(e,t,r){let i=xr(e);return A.forEach(t,s=>{let o=mt(s.path);return A.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=xr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=xr(e),s=se();return i.J({range:r,H:!0},(o,a,c)=>{let l=Dn(o[1]),h=new j(l);s=s.add(h)}).next(()=>s)}containsKey(e,t){let r=mt(t.path),i=IDBKeyRange.bound([r],[cS(r)],!1,!0),s=0;return xr(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return io(e).get(t).next(r=>r?gc(r):null)}};function io(n){return Qe(n,"targets")}function G0(n){return Qe(n,"targetGlobal")}function xr(n){return Qe(n,"targetDocuments")}function W0([n,e],[t,r]){let i=te(n,t);return i===0?te(e,r):i}var Mv=class{constructor(e){this.Un=e,this.buffer=new Ae(W0),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();W0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Nv=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){P("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>D(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hr(t)?P("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Yi(t)}yield this.Hn(3e5)}))}},xv=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return A.resolve(an.oe);let r=new Mv(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(z0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z0):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),so()<=ue.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function S2(n,e){return new xv(n,e)}var Pv=class{constructor(e,t){this.db=e,this.garbageCollector=S2(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Md(e,r)}removeReference(e,t,r){return Md(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Md(e,t)}nr(e,t){return function(i,s){let o=!1;return tA(i).Y(a=>eA(i,a,s).next(c=>(c&&(o=!0),A.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let c=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Q.min()),xr(e).delete(function(p){return[0,mt(p.path)]}(o))))});i.push(c)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Md(e,t)}tr(e,t){let r=xr(e),i,s=an.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==an.oe&&t(new j(Dn(i)),s),s=l,i=c):s=an.oe}).next(()=>{s!==an.oe&&t(new j(Dn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Md(n,e){return xr(n).put(function(r,i){return{targetId:0,path:mt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var uh=class{constructor(){this.changes=new Sn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?A.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ov=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ni(e).put(r)}removeEntry(e,t,r){return Ni(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],rh(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=nt.newInvalidDocument(t);return Ni(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hc(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:nt.newInvalidDocument(t)};return Ni(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hc(t))},(i,s)=>{r={document:this.ir(t,s),size:ah(s)}}).next(()=>r)}getEntries(e,t){let r=kt();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=kt(),i=new Pe(j.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,ah(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return A.resolve();let i=new Ae(Y0);t.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(hc(i.first()),hc(i.last())),o=i.getIterator(),a=o.getNext();return Ni(e).J({index:"documentKeyIndex",range:s},(c,l,h)=>{let p=j.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Y0(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.$(hc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),rh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ni(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=kt();for(let p of l){let m=this.ir(j.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Lc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=kt(),o=Q0(t,r),a=Q0(t,Wt.max());return Ni(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,h)=>{let p=this.ir(j.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(p.key,p),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new kv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return K0(e).get("remoteDocumentGlobalKey").next(t=>(z(!!t),t))}rr(e,t){return K0(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=b2(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Q.min())))return r}return nt.newInvalidDocument(e)}};function nA(n){return new Ov(n)}var kv=class extends uh{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Sn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ae((s,o)=>te(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=k0(this.cr.serializer,o);i=i.add(s.path.popLast());let l=ah(c);r+=l-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=k0(this.cr.serializer,o.convertToNoDocument(Q.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),A.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function K0(n){return Qe(n,"remoteDocumentGlobal")}function Ni(n){return Qe(n,"remoteDocumentsV14")}function hc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Q0(n,e){let t=e.documentKey.path.toArray();return[n,rh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Y0(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=te(t[s],r[s]),i)return i;return i=te(t.length,r.length),i||(i=te(t[t.length-2],r[r.length-2]),i||te(t[t.length-1],r[r.length-1]))}var Fv=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var lh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&_c(r.mutation,i,cn.empty(),Ve.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){let i=bn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=pc();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=bn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=kt(),o=vc(),a=function(){return vc()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof An)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),_c(h.mutation,l,h.mutation.getFieldMask(),Ve.now())):o.set(l.key,cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Fv(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=vc(),i=new Pe((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||cn.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||se()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=RS();h.forEach(m=>{if(!s.has(m)){let v=kS(t.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return A.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):A.resolve(bn()),a=-1,c=s;return o.next(l=>A.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?A.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,se())).next(h=>({batchId:a,changes:AS(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new j(t)).next(r=>{let i=pc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=pc();return this.indexManager.getCollectionParents(e,s).next(a=>A.forEach(a,c=>{let l=function(p,m){return new Eo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,nt.newInvalidDocument(h)))});let a=pc();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&_c(h.mutation,l,cn.empty(),Ve.now()),Lc(t,l)&&(a=a.insert(c,l))}),a})}};var Lv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return A.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:yt(i.createTime)}}(t)),A.resolve()}getNamedQuery(e,t){return A.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:YS(i.bundledQuery),readTime:yt(i.readTime)}}(t)),A.resolve()}};var Vv=class{constructor(){this.overlays=new Pe(j.comparator),this.Ir=new Map}getOverlay(e,t){return A.resolve(this.overlays.get(t))}getOverlays(e,t){let r=bn();return A.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),A.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),A.resolve()}getOverlaysForCollection(e,t,r){let i=bn(),s=t.length+1,o=new j(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return A.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Pe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=bn(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=bn(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return A.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ac(t,r));let s=this.Ir.get(t);s===void 0&&(s=se(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var Uv=class{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,A.resolve()}};var Nc=class{constructor(){this.Tr=new Ae(Be.Er),this.dr=new Ae(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Be(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Be(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new j(new Se([])),r=new Be(t,e),i=new Be(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new j(new Se([])),r=new Be(t,e),i=new Be(t,e+1),s=se();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Be(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Be=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return j.comparator(e.key,t.key)||te(e.wr,t.wr)}static Ar(e,t){return te(e.wr,t.wr)||j.comparator(e.key,t.key)}};var jv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ae(Be.Er)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Sc(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Be(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(o)}lookupMutationBatch(e,t){return A.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return A.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Be(t,0),i=new Be(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),A.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(te);return t.forEach(i=>{let s=new Be(i,0),o=new Be(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),A.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;j.isDocumentKey(s)||(s=s.child(""));let o=new Be(new j(s),0),a=new Ae(te);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),A.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){z(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return A.forEach(t.mutations,i=>{let s=new Be(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Be(t,0),i=this.br.firstAfterOrEqual(r);return A.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Bv=class{constructor(e){this.Mr=e,this.docs=function(){return new Pe(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return A.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(t))}getEntries(e,t){let r=kt();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():nt.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=kt(),o=t.path,a=new j(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||b_(uS(h),r)<=0||(i.has(h.key)||Lc(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return A.resolve(s)}getAllFromCollectionGroup(e,t,r,i){q()}Or(e,t){return A.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $v(this)}getSize(e){return A.resolve(this.size)}},$v=class extends uh{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),A.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Hv=class{constructor(e){this.persistence=e,this.Nr=new Sn(t=>qi(t),Fc),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Nc,this.targetCount=0,this.kr=So.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),A.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new So(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,A.resolve()}updateTargetData(e,t){return this.Kn(t),A.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(s).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return A.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),A.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),A.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),A.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return A.resolve(r)}containsKey(e,t){return A.resolve(this.Br.containsKey(t))}};var dh=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new an(0),this.Kr=!1,this.Kr=!0,this.$r=new Uv,this.referenceDelegate=e(this),this.Ur=new Hv(this),this.indexManager=new Sv,this.remoteDocumentCache=function(i){return new Bv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new nh(t),this.Gr=new Lv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new jv(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){P("MemoryPersistence","Starting transaction:",e);let i=new qv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return A.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},qv=class extends Bd{constructor(e){super(),this.currentSequenceNumber=e}},hh=class n{constructor(e){this.persistence=e,this.Jr=new Nc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw q()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),A.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),A.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Xr,r=>{let i=j.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Q.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return A.or([()=>A.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var zv=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new $d("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",h0,{unique:!0}),c.createObjectStore("documentMutations")}(e),Z0(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=A.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Z0(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Q.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",h0,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return A.waitFor(m)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:Lj});l.createIndex("collectionPathOverlayIndex",Vj,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Uj,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:Tj});l.createIndex("documentKeyIndex",Sj),l.createIndex("collectionGroupIndex",Aj)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Pj}).createIndex("sequenceNumberIndex",Oj,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:kj}).createIndex("documentKeyIndex",Fj,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=ah(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>A.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>A.forEach(a,c=>{z(c.userId===s.userId);let l=Oi(this.serializer,c);return XS(e,s.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new Se(o),l=function(p){return[0,mt(p)]}(c);s.push(t.get(l).next(h=>h?A.resolve():(p=>t.put({targetId:0,path:mt(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>A.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:xj});let r=t.store("collectionParents"),i=new Mc,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:mt(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new Se(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{let h=Dn(a);return s(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=gc(i),o=QS(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new j(Se.fromString(p.document.name).popFirst(5)):p.noDocument?j.fromSegments(p.noDocument.path):p.unknownDocument?j.fromSegments(p.unknownDocument.path):q()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>A.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=nA(this.serializer),s=new dh(hh.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:se();Oi(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),A.forEach(a,(c,l)=>{let h=new Ge(l),p=ih.lt(this.serializer,h),m=s.getIndexManager(h),v=ch.lt(h,this.serializer,m,s.referenceDelegate);return new lh(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Ec(t,an.oe),c).next()})})}};function Z0(n){n.createObjectStore("targetDocuments",{keyPath:Mj}).createIndex("documentTargetsIndex",Nj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Rj,{unique:!0}),n.createObjectStore("targetGlobal")}var Py="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Gv=class n{constructor(e,t,r,i,s,o,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new U(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pv(this,i),this.Ai=t+"main",this.serializer=new nh(c),this.Ri=new yo(this.Ai,this.hi,new zv(this.serializer)),this.$r=new Iv,this.Ur=new Rv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=nA(this.serializer),this.Gr=new _v,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&gt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new U(x.FAILED_PRECONDITION,Py);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new an(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>D(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>D(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>D(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Nd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Hr(e))return P("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return fc(e).get("owner").next(t=>A.resolve(this.vi(t)))}Ci(e){return Nd(e).delete(this.clientId)}Fi(){return D(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Qe(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return A.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?A.resolve(!0):fc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new U(x.FAILED_PRECONDITION,Py);return!1}}return!(!this.networkEnabled||!this.inForeground)||Nd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&P("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return D(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Ec(e,an.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Nd(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return ch.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Av(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ih.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){P("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?$j:c===16?Bj:c===15?T_:c===14?gS:c===13?pS:c===12?jj:c===11?fS:void q()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new Ec(a,this.Qr?this.Qr.next():an.oe),t==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw gt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new U(x.FAILED_PRECONDITION,lS);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return fc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new U(x.FAILED_PRECONDITION,Py)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fc(e).put("owner",t)}static D(){return yo.D()}bi(e){let t=fc(e);return t.get("owner").next(r=>this.vi(r)?(P("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):A.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(gt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Wm()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return P("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){gt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function fc(n){return Qe(n,"owner")}function Nd(n){return Qe(n,"clientMetadata")}function A2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Wv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=se(),i=se();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Kv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var fh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Wm()?8:dS(ct())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Kv;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(so()<=ue.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),A.resolve()):(so()<=ue.DEBUG&&P("QueryEngine","Query:",oo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(so()<=ue.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gt(t))):A.resolve())}Yi(e,t){if(b0(t))return A.resolve(null);let r=Gt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=av(t,null,"F"),r=Gt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=se(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,av(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return b0(t)||i.isEqual(Q.min())?A.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?A.resolve(null):(so()<=ue.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),oo(t)),this.rs(e,o,t,Ej(i,-1)).next(a=>a))})}ts(e,t){let r=new Ae(TS(e));return t.forEach((i,s)=>{Lc(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return so()<=ue.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",oo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Wt.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Qv=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Pe(te),this._s=new Sn(s=>qi(s),Fc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function rA(n,e,t,r){return new Qv(n,e,t,r)}function iA(n,e){return D(this,null,function*(){let t=J(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=se();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function R2(n,e){let t=J(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),v=A.resolve();return m.forEach(T=>{v=v.next(()=>h.getEntry(c,T)).next(N=>{let M=l.docVersions.get(T);z(M!==null),N.version.compareTo(M)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function sA(n){let e=J(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function M2(n,e){let t=J(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ke.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(N,M,k){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(s,v))});let c=kt(),l=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(N2(s,o,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(Q.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return A.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function N2(n,e,t){let r=se(),i=se();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=kt();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Q.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):P("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function x2(n,e){let t=J(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function P2(n,e){let t=J(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,A.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new To(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Yv(n,e,t){return D(this,null,function*(){let r=J(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Hr(o))throw o;P("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function J0(n,e,t){let r=J(n),i=Q.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){let p=J(c),m=p._s.get(h);return m!==void 0?A.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,Gt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Q.min(),t?s:se())).next(a=>(O2(r,Yj(e),a),{documents:a,Ts:s})))}function O2(n,e,t){let r=n.us.get(e)||Q.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var ph=class{constructor(){this.activeTargetIds=n2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var gh=class{constructor(){this.so=new ph,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ph,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Zv=class{_o(e){}shutdown(){}};var mh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var xd=null;function Oy(){return xd===null?xd=function(){return 268435456+Math.round(2147483648*Math.random())}():xd++,"0x"+xd.toString(16)}var k2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Jv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ut="WebChannelConnection",Xv=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=Oy(),c=this.xo(t,r.toUriEncodedString());P("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(h=>(P("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw $i("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=k2[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Oy();return new Promise((o,a)=>{let c=new Sy;c.setWithCredentials(!0),c.listenOnce(Ay.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case uc.NO_ERROR:let h=c.getResponseJson();P(ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case uc.TIMEOUT:P(ut,`RPC '${e}' ${s} timed out`),a(new U(x.DEADLINE_EXCEEDED,"Request time out"));break;case uc.HTTP_ERROR:let p=c.getStatus();if(P(ut,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let T=function(M){let k=M.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(k)>=0?k:x.UNKNOWN}(v.status);a(new U(T,v.message))}else a(new U(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new U(x.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{P(ut,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);P(ut,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Oy(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ny(),a=My(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");P(ut,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c),m=!1,v=!1,T=new Jv({Io:M=>{v?P(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(P(ut,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),P(ut,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),N=(M,k,B)=>{M.listen(k,F=>{try{B(F)}catch(H){setTimeout(()=>{throw H},0)}})};return N(p,eo.EventType.OPEN,()=>{v||(P(ut,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),N(p,eo.EventType.CLOSE,()=>{v||(v=!0,P(ut,`RPC '${e}' stream ${i} transport closed`),T.So())}),N(p,eo.EventType.ERROR,M=>{v||(v=!0,$i(ut,`RPC '${e}' stream ${i} transport errored:`,M),T.So(new U(x.UNAVAILABLE,"The operation could not be completed")))}),N(p,eo.EventType.MESSAGE,M=>{var k;if(!v){let B=M.data[0];z(!!B);let F=B,H=F.error||((k=F[0])===null||k===void 0?void 0:k.error);if(H){P(ut,`RPC '${e}' stream ${i} received error:`,H);let X=H.status,$=function(_){let E=je[_];if(E!==void 0)return LS(E)}(X),w=H.message;$===void 0&&($=x.INTERNAL,w="Unknown error status: "+X+" with message "+H.message),v=!0,T.So(new U($,w)),p.close()}else P(ut,`RPC '${e}' stream ${i} received:`,B),T.bo(B)}}),N(a,Ry.STAT_EVENT,M=>{M.stat===Ad.PROXY?P(ut,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Ad.NOPROXY&&P(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}};function F2(){return typeof window<"u"?window:null}function Ld(){return typeof document<"u"?document:null}function Vh(n){return new pv(n,!0)}var yh=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var vh=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new yh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return D(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return D(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return D(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(gt(t.toString()),gt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new U(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>D(this,null,function*(){this.state=0,this.start()}))}I_(e){return P("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},e_=class extends vh{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=y2(this.serializer,e),r=function(s){if(!("targetChange"in s))return Q.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?yt(o.readTime):Q.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=yv(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=Wd(c)?{documents:HS(s,c)}:{query:qS(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=VS(s,o.resumeToken);let l=gv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Q.min())>0){a.readTime=Co(s,o.snapshotVersion.toTimestamp());let l=gv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=_2(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=yv(this.serializer),t.removeTarget=e,this.a_(t)}},t_=class extends vh{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return z(!!e.streamToken),this.lastStreamToken=e.streamToken,z(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=v2(e.writeResults,e.commitTime),r=yt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=yv(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>th(this.serializer,r))};this.a_(t)}};var n_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new U(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,mv(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(x.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,mv(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(x.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},r_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gt(t),this.D_=!1):P("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var i_=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>D(this,null,function*(){Zi(this)&&(P("RemoteStore","Restarting streams for network reachability change."),yield function(c){return D(this,null,function*(){let l=J(c);l.L_.add(4),yield Vc(l),l.q_.set("Unknown"),l.L_.delete(4),yield Uh(l)})}(this))}))}),this.q_=new r_(r,i)}};function Uh(n){return D(this,null,function*(){if(Zi(n))for(let e of n.B_)yield e(!0)})}function Vc(n){return D(this,null,function*(){for(let e of n.B_)yield e(!1)})}function oA(n,e){let t=J(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),L_(t)?F_(t):xo(t).r_()&&k_(t,e))}function O_(n,e){let t=J(n),r=xo(t);t.N_.delete(e),r.r_()&&aA(t,e),t.N_.size===0&&(r.r_()?r.o_():Zi(t)&&t.q_.set("Unknown"))}function k_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xo(n).A_(e)}function aA(n,e){n.Q_.xe(e),xo(n).R_(e)}function F_(n){n.Q_=new fv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),xo(n).start(),n.q_.v_()}function L_(n){return Zi(n)&&!xo(n).n_()&&n.N_.size>0}function Zi(n){return J(n).L_.size===0}function cA(n){n.Q_=void 0}function L2(n){return D(this,null,function*(){n.q_.set("Online")})}function V2(n){return D(this,null,function*(){n.N_.forEach((e,t)=>{k_(n,e)})})}function U2(n,e){return D(this,null,function*(){cA(n),L_(n)?(n.q_.M_(e),F_(n)):n.q_.set("Unknown")})}function j2(n,e,t){return D(this,null,function*(){if(n.q_.set("Online"),e instanceof Jd&&e.state===2&&e.cause)try{yield function(i,s){return D(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){P("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _h(n,r)}else if(e instanceof fo?n.Q_.Ke(e):e instanceof Zd?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Q.min()))try{let r=yield sA(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(Ke.EMPTY_BYTE_STRING,h.snapshotVersion)),aA(s,c);let p=new To(h.target,c,l,h.sequenceNumber);k_(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){P("RemoteStore","Failed to raise snapshot:",r),yield _h(n,r)}})}function _h(n,e,t){return D(this,null,function*(){if(!Hr(e))throw e;n.L_.add(1),yield Vc(n),n.q_.set("Offline"),t||(t=()=>sA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>D(this,null,function*(){P("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Uh(n)}))})}function uA(n,e){return e().catch(t=>_h(n,t,e))}function Uc(n){return D(this,null,function*(){let e=J(n),t=Br(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;B2(e);)try{let i=yield x2(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,$2(e,i)}catch(i){yield _h(e,i)}lA(e)&&dA(e)})}function B2(n){return Zi(n)&&n.O_.length<10}function $2(n,e){n.O_.push(e);let t=Br(n);t.r_()&&t.V_&&t.m_(e.mutations)}function lA(n){return Zi(n)&&!Br(n).n_()&&n.O_.length>0}function dA(n){Br(n).start()}function H2(n){return D(this,null,function*(){Br(n).p_()})}function q2(n){return D(this,null,function*(){let e=Br(n);for(let t of n.O_)e.m_(t.mutations)})}function z2(n,e,t){return D(this,null,function*(){let r=n.O_.shift(),i=lv.from(r,e,t);yield uA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Uc(n)})}function G2(n,e){return D(this,null,function*(){e&&Br(n).V_&&(yield function(r,i){return D(this,null,function*(){if(function(o){return u2(o)&&o!==x.ABORTED}(i.code)){let s=r.O_.shift();Br(r).s_(),yield uA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Uc(r)}})}(n,e)),lA(n)&&dA(n)})}function X0(n,e){return D(this,null,function*(){let t=J(n);t.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");let r=Zi(t);t.L_.add(3),yield Vc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Uh(t)})}function W2(n,e){return D(this,null,function*(){let t=J(n);e?(t.L_.delete(2),yield Uh(t)):e||(t.L_.add(2),yield Vc(t),t.q_.set("Unknown"))})}function xo(n){return n.K_||(n.K_=function(t,r,i){let s=J(t);return s.w_(),new e_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:L2.bind(null,n),Ro:V2.bind(null,n),mo:U2.bind(null,n),d_:j2.bind(null,n)}),n.B_.push(e=>D(this,null,function*(){e?(n.K_.s_(),L_(n)?F_(n):n.q_.set("Unknown")):(yield n.K_.stop(),cA(n))}))),n.K_}function Br(n){return n.U_||(n.U_=function(t,r,i){let s=J(t);return s.w_(),new t_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:H2.bind(null,n),mo:G2.bind(null,n),f_:q2.bind(null,n),g_:z2.bind(null,n)}),n.B_.push(e=>D(this,null,function*(){e?(n.U_.s_(),yield Uc(n)):(yield n.U_.stop(),n.O_.length>0&&(P("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var s_=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new zt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function V_(n,e){if(gt("AsyncQueue",`${e}: ${n}`),Hr(n))return new U(x.UNAVAILABLE,`${e}: ${n}`);throw n}var Ih=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||j.comparator(t.key,r.key):(t,r)=>j.comparator(t.key,r.key),this.keyedMap=pc(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var wh=class{constructor(){this.W_=new Pe(j.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):q():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ao=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Ih.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var o_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},a_=class{constructor(){this.queries=eS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=J(t),s=i.queries;i.queries=eS(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new U(x.ABORTED,"Firestore shutting down"))}};function eS(){return new Sn(n=>CS(n),Lh)}function hA(n,e){return D(this,null,function*(){let t=J(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new o_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=V_(o,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&U_(t)})}function fA(n,e){return D(this,null,function*(){let t=J(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function K2(n,e){let t=J(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&U_(t)}function Q2(n,e,t){let r=J(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function U_(n){n.Y_.forEach(e=>{e.next()})}var c_,tS;(tS=c_||(c_={})).ea="default",tS.Cache="cache";var Eh=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==c_.Cache}};var Dh=class{constructor(e){this.key=e}},bh=class{constructor(e){this.key=e}},u_=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=TS(e),this.Ra=new Ih(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new wh,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Lc(this.query,p)?p:null,T=!!m&&this.mutatedKeys.has(m.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),M=!1;m&&v?m.data.isEqual(v.data)?T!==N&&(r.track({type:3,doc:v}),M=!0):this.ga(m,v)||(r.track({type:2,doc:v}),M=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),M=!0):m&&!v&&(r.track({type:1,doc:m}),M=!0,(c||l)&&(a=!0)),M&&(v?(o=o.add(v),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(v,T){let N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return N(v)-N(T)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new Ao(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new wh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new bh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Dh(r))}),t}ba(e){this.Ta=e.Ts,this.da=se();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ao.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},l_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},d_=class{constructor(e){this.key=e,this.va=!1}},h_=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Sn(a=>CS(a),Lh),this.Ma=new Map,this.xa=new Set,this.Oa=new Pe(j.comparator),this.Na=new Map,this.La=new Nc,this.Ba={},this.ka=new Map,this.qa=So.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Y2(n,e,t=!0){return D(this,null,function*(){let r=_A(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield pA(r,e,t,!0),i})}function Z2(n,e){return D(this,null,function*(){let t=_A(n);yield pA(t,e,!0,!1)})}function pA(n,e,t,r){return D(this,null,function*(){let i=yield P2(n.localStore,Gt(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield J2(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&oA(n.remoteStore,i),a})}function J2(n,e,t,r,i){return D(this,null,function*(){n.Ka=(p,m,v)=>function(N,M,k,B){return D(this,null,function*(){let F=M.view.ma(k);F.ns&&(F=yield J0(N.localStore,M.query,!1).then(({documents:w})=>M.view.ma(w,F)));let H=B&&B.targetChanges.get(M.targetId),X=B&&B.targetMismatches.get(M.targetId)!=null,$=M.view.applyChanges(F,N.isPrimaryClient,H,X);return rS(N,M.targetId,$.wa),$.snapshot})}(n,p,m,v);let s=yield J0(n.localStore,e,!0),o=new u_(e,s.Ts),a=o.ma(s.documents),c=Rc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);rS(n,t,l.wa);let h=new l_(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function X2(n,e,t){return D(this,null,function*(){let r=J(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Lh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Yv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&O_(r.remoteStore,i.targetId),f_(r,i.targetId)}).catch(Yi))):(f_(r,i.targetId),yield Yv(r.localStore,i.targetId,!0))})}function eB(n,e){return D(this,null,function*(){let t=J(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),O_(t.remoteStore,r.targetId))})}function tB(n,e,t){return D(this,null,function*(){let r=IA(n);try{let i=yield function(o,a){let c=J(o),l=Ve.now(),h=a.reduce((v,T)=>v.add(T.key),se()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=kt(),N=se();return c.cs.getEntries(v,h).next(M=>{T=M,T.forEach((k,B)=>{B.isValidDocument()||(N=N.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,T)).next(M=>{p=M;let k=[];for(let B of a){let F=c2(B,p.get(B.key).overlayedDocument);F!=null&&k.push(new An(B.key,F,_S(F.value.mapValue),un.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,k,a)}).next(M=>{m=M;let k=M.applyToLocalDocumentSet(p,N);return c.documentOverlayCache.saveOverlays(v,M.batchId,k)})}).then(()=>({batchId:m.batchId,changes:AS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Pe(te)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield jc(r,i.changes),yield Uc(r.remoteStore)}catch(i){let s=V_(i,"Failed to persist write");t.reject(s)}})}function gA(n,e){return D(this,null,function*(){let t=J(n);try{let r=yield M2(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?z(o.va):i.removedDocuments.size>0&&(z(o.va),o.va=!1))}),yield jc(t,r,e)}catch(r){yield Yi(r)}})}function nS(n,e,t){let r=J(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=J(o);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&U_(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nB(n,e,t){return D(this,null,function*(){let r=J(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Pe(j.comparator);o=o.insert(s,nt.newNoDocument(s,Q.min()));let a=se().add(s),c=new Yd(Q.min(),new Map,new Pe(te),o,a);yield gA(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),j_(r)}else yield Yv(r.localStore,e,!1).then(()=>f_(r,e,t)).catch(Yi)})}function rB(n,e){return D(this,null,function*(){let t=J(n),r=e.batch.batchId;try{let i=yield R2(t.localStore,e);yA(t,r,null),mA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield jc(t,i)}catch(i){yield Yi(i)}})}function iB(n,e,t){return D(this,null,function*(){let r=J(n);try{let i=yield function(o,a){let c=J(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(z(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);yA(r,e,t),mA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield jc(r,i)}catch(i){yield Yi(i)}})}function mA(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function yA(n,e,t){let r=J(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function f_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||vA(n,r)})}function vA(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(O_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),j_(n))}function rS(n,e,t){for(let r of t)r instanceof Dh?(n.La.addReference(r.key,e),sB(n,r)):r instanceof bh?(P("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||vA(n,r.key)):q()}function sB(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(P("SyncEngine","New document in limbo: "+t),n.xa.add(r),j_(n))}function j_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new j(Se.fromString(e)),r=n.qa.next();n.Na.set(r,new d_(t)),n.Oa=n.Oa.insert(t,r),oA(n.remoteStore,new To(Gt(Fh(t.path)),r,"TargetPurposeLimboResolution",an.oe))}}function jc(n,e,t){return D(this,null,function*(){let r=J(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Wv.Wi(c.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return D(this,null,function*(){let h=J(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>A.forEach(l,m=>A.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>A.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Hr(p))throw p;P("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),T=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function oB(n,e){return D(this,null,function*(){let t=J(n);if(!t.currentUser.isEqual(e)){P("SyncEngine","User change. New user:",e.toKey());let r=yield iA(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new U(x.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield jc(t,r.hs)}})}function aB(n,e){let t=J(n),r=t.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function _A(n){let e=J(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nB.bind(null,e),e.Ca.d_=K2.bind(null,e.eventManager),e.Ca.$a=Q2.bind(null,e.eventManager),e}function IA(n){let e=J(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iB.bind(null,e),e}var p_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return D(this,null,function*(){this.serializer=Vh(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return rA(this.persistence,new fh,t.initialUser,this.serializer)}Ga(t){return new dh(hh.Zr,this.serializer)}Wa(t){return new gh}terminate(){return D(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var g_=class n extends p_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return D(this,null,function*(){yield Ef(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield IA(this.Ja.syncEngine),yield Uc(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return rA(this.persistence,new fh,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Nv(r,e.asyncQueue,t)}Ha(e,t){let r=new Wy(t,this.persistence);return new Gy(e.asyncQueue,r)}Ga(e){let t=A2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?qt.withCacheSize(this.cacheSizeBytes):qt.DEFAULT;return new Gv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,F2(),Ld(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new gh}};var wA=(()=>{class n{initialize(t,r){return D(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oB.bind(null,this.syncEngine),yield W2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new a_}()}createDatastore(t){let r=Vh(t.databaseInfo.databaseId),i=function(o){return new Xv(o)}(t.databaseInfo);return function(o,a,c,l){return new n_(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new i_(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>nS(this.syncEngine,r,0),function(){return mh.D()?new mh:new Zv}())}createSyncEngine(t,r){return function(s,o,a,c,l,h,p){let m=new h_(s,o,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return D(this,null,function*(){var t,r;yield function(s){return D(this,null,function*(){let o=J(s);P("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Vc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Ch=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var m_=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ge.UNAUTHENTICATED,this.clientId=Ud.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>D(this,null,function*(){P("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(P("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new zt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=V_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ky(n,e){return D(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>D(this,null,function*(){r.isEqual(i)||(yield iA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function iS(n,e){return D(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield cB(n);P("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>X0(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>X0(e.remoteStore,i)),n._onlineComponents=e})}function cB(n){return D(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){P("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ky(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;$i("Error using user provided cache. Falling back to memory cache: "+t),yield ky(n,new p_)}}else P("FirestoreClient","Using default OfflineComponentProvider"),yield ky(n,new p_);return n._offlineComponents})}function EA(n){return D(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(P("FirestoreClient","Using user provided OnlineComponentProvider"),yield iS(n,n._uninitializedComponentsProvider._online)):(P("FirestoreClient","Using default OnlineComponentProvider"),yield iS(n,new wA))),n._onlineComponents})}function uB(n){return EA(n).then(e=>e.syncEngine)}function DA(n){return D(this,null,function*(){let e=yield EA(n),t=e.eventManager;return t.onListen=Y2.bind(null,e.syncEngine),t.onUnlisten=X2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Z2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eB.bind(null,e.syncEngine),t})}function lB(n,e,t={}){let r=new zt;return n.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(s,o,a,c,l){let h=new Ch({next:m=>{h.Za(),o.enqueueAndForget(()=>fA(s,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new U(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?l.reject(new U(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Eh(Fh(a.path),h,{includeMetadataChanges:!0,_a:!0});return hA(s,p)}(yield DA(n),n.asyncQueue,e,t,r)})),r.promise}function dB(n,e,t={}){let r=new zt;return n.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(s,o,a,c,l){let h=new Ch({next:m=>{h.Za(),o.enqueueAndForget(()=>fA(s,p)),m.fromCache&&c.source==="server"?l.reject(new U(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Eh(a,h,{includeMetadataChanges:!0,_a:!0});return hA(s,p)}(yield DA(n),n.asyncQueue,e,t,r)})),r.promise}function bA(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var sS=new Map;function CA(n,e,t){if(!t)throw new U(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hB(n,e,t,r){if(e===!0&&r===!0)throw new U(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oS(n){if(!j.isDocumentKey(n))throw new U(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aS(n){if(j.isDocumentKey(n))throw new U(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function B_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q()}function $r(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new U(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=B_(n);throw new U(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Th=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new U(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new U(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new U(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ro=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Th({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Th(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Fy;switch(r.type){case"firstParty":return new jy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return D(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=sS.get(t);r&&(P("ComponentProvider","Removing Datastore"),sS.delete(t),r.terminate())}(this),Promise.resolve()}};function TA(n,e,t,r={}){var i;let s=(n=$r(n,Ro))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&$i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ge.MOCK_USER;else{a=ld(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new U(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ge(l)}n._authCredentials=new Ly(new Vd(a,c))}}var Sh=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ft=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Or=class n extends Sh{constructor(e,t,r){super(e,t,Fh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new j(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function SA(n,e,...t){if(n=xt(n),CA("collection","path",e),n instanceof Ro){let r=Se.fromString(e,...t);return aS(r),new Or(n,null,r)}{if(!(n instanceof Ft||n instanceof Or))throw new U(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Se.fromString(e,...t));return aS(r),new Or(n.firestore,null,r)}}function AA(n,e,...t){if(n=xt(n),arguments.length===1&&(e=Ud.newId()),CA("doc","path",e),n instanceof Ro){let r=Se.fromString(e,...t);return oS(r),new Ft(n,null,new j(r))}{if(!(n instanceof Ft||n instanceof Or))throw new U(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Se.fromString(e,...t));return oS(r),new Ft(n.firestore,n instanceof Or?n.converter:null,new j(r))}}var Ah=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new yh(this,"async_queue_retry"),this.Vu=()=>{let r=Ld();r&&P("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Ld();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Ld();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new zt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return D(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Hr(e))throw e;P("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw gt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=s_.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&q()}verifyOperationInProgress(){}wu(){return D(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Qi=class extends Ro{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ah,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return D(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ah(e),this._firestoreClient=void 0,yield e}})}};function RA(n,e){let t=typeof n=="object"?n:Di(),r=typeof n=="string"?n:e||"(default)",i=nc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=ud("firestore");s&&TA(i,...s)}return i}function $_(n){if(n._terminated)throw new U(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||MA(n),n._firestoreClient}function MA(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,h){return new Ky(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,bA(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new m_(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function NA(n,e){$i("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return fB(n,wA.provider,{build:r=>new g_(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function fB(n,e,t){if((n=$r(n,Qi))._firestoreClient||n._terminated)throw new U(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new U(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},MA(n)}var xc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ke.fromBase64String(e))}catch(t){throw new U(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Pc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new U(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Rh=class{constructor(e){this._methodName=e}};var Oc=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new U(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}};var kc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var pB=/^__.*__$/,y_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new An(e,this.data,this.fieldMask,t,this.fieldTransforms):new jr(e,this.data,t,this.fieldTransforms)}};function xA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}var v_=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Mh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xA(this.Cu)&&pB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},__=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Vh(e)}Qu(e,t,r,i=!1){return new v_({Cu:e,methodName:t,qu:r,path:We.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function gB(n){let e=n._freezeSettings(),t=Vh(n._databaseId);return new __(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mB(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);FA("Data must be an object, but it was:",o,r);let a=OA(r,o),c,l;if(s.merge)c=new cn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=yB(e,p,t);if(!o.contains(m))throw new U(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);_B(h,m)||h.push(m)}c=new cn(h),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new y_(new Ot(a),c,l)}function PA(n,e){if(kA(n=xt(n)))return FA("Unsupported field value:",e,n),OA(n,e);if(n instanceof Rh)return function(r,i){if(!xA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=PA(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return r2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ve.fromDate(r);return{timestampValue:Co(i.serializer,s)}}if(r instanceof Ve){let s=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Co(i.serializer,s)}}if(r instanceof Oc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xc)return{bytesValue:VS(i.serializer,r._byteString)};if(r instanceof Ft){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:x_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof kc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return N_(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${B_(r)}`)}(n,e)}function OA(n,e){let t={};return mS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):No(n,(r,i)=>{let s=PA(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function kA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ve||n instanceof Oc||n instanceof xc||n instanceof Ft||n instanceof Rh||n instanceof kc)}function FA(n,e,t){if(!kA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=B_(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function yB(n,e,t){if((e=xt(e))instanceof Pc)return e._internalPath;if(typeof e=="string")return LA(n,e);throw Mh("Field path arguments must be of type string or ",n,!1,void 0,t)}var vB=new RegExp("[~\\*/\\[\\]]");function LA(n,e,t){if(e.search(vB)>=0)throw Mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pc(...e.split("."))._internalPath}catch{throw Mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Mh(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new U(x.INVALID_ARGUMENT,a+n+c)}function _B(n,e){return n.some(t=>t.isEqual(e))}var Nh=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new I_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(VA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},I_=class extends Nh{data(){return super.data()}};function VA(n,e){return typeof e=="string"?LA(n,e):e instanceof Pc?e._internalPath:e._delegate._internalPath}function IB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var w_=class{convertValue(e,t="none"){switch(Hi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return No(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ne(o.doubleValue));return new kc(s)}convertGeoPoint(e){return new Oc(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=A_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dc(e));default:return null}}convertTimestamp(e){let t=Jn(e);return new Ve(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Se.fromString(e);z(KS(r));let i=new vo(r.get(1),r.get(3)),s=new j(r.popFirst(5));return i.isEqual(t)||gt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function wB(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Vi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xh=class extends Nh{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new po(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(VA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},po=class extends xh{data(e={}){return super.data(e)}},E_=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Vi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new po(this._firestore,this._userDataWriter,r.key,r,new Vi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new U(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new po(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new po(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:EB(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function EB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}function UA(n){n=$r(n,Ft);let e=$r(n.firestore,Qi);return lB($_(e),n._key).then(t=>bB(e,n,t))}var Ph=class extends w_{constructor(e){super(),this.firestore=e}convertBytes(e){return new xc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,t)}};function jA(n){n=$r(n,Sh);let e=$r(n.firestore,Qi),t=$_(e),r=new Ph(e);return IB(n._query),dB(t,n._query).then(i=>new E_(e,r,n,i))}function BA(n,e,t){n=$r(n,Ft);let r=$r(n.firestore,Qi),i=wB(n.converter,e,t);return DB(r,[mB(gB(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,un.none())])}function DB(n,e){return function(r,i){let s=new zt;return r.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return tB(yield uB(r),i,s)})),s.promise}($_(n),e)}function bB(n,e,t){let r=t.docs.get(e._key),i=new Ph(n);return new xh(n,i,e._key,r,new Vi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Mo=i})(Tr),En(new Ct("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Qi(new Vy(r.getProvider("auth-internal")),new $y(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new U(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vo(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),xe(u0,"4.7.3",e),xe(u0,"4.7.3","esm2017")})();var Xn=class{constructor(e){return e}},$A="firestore",H_=class{constructor(){return Ti($A)}};var q_=new W("angularfire2.firestore-instances");function CB(n,e){let t=rc($A,n,e);return t&&new Xn(t)}function TB(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Xn(r)}}var SB={provide:H_,deps:[[new at,q_]]},AB={provide:Xn,useFactory:CB,deps:[[new at,q_],Qn]};function HA(n,...e){return xe("angularfire",Sr.full,"fst"),yn([AB,SB,{provide:q_,useFactory:TB(n),multi:!0,deps:[Ee,wt,Si,Ai,[new at,Xs],[new at,Ci],...e]}])}var qA=Pt(SA,!0);var er=Pt(AA,!0);var zA=Pt(NA,!0);var Ji=Pt(UA,!0);var GA=Pt(jA,!0);var WA=Pt(RA,!0);var jh=Pt(BA,!0);var Po=class n{cache={};get(e){return this.cache[e]}set(e,t){this.cache[e]=t}clear(e){delete this.cache[e]}clearAll(){this.cache={}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var Rn=class n{constructor(e,t){this.firestore=e;this.cacheService=t;zA(this.firestore).catch(r=>{r.code=="failed-precondition"?console.warn("Persistencia fallida: m\xFAltiples pesta\xF1as abiertas en AuthService."):r.code=="unimplemented"&&console.warn("Persistencia no soportada en este navegador.")})}userExists(e){return D(this,null,function*(){if(this.cacheService.get(`user_${e}`))return console.log("Usuario encontrado en cach\xE9, evitando consulta en Firestore."),!0;let r=er(this.firestore,`users/${e}`),i=yield Ji(r),s=i.exists();return s&&this.cacheService.set(`user_${e}`,i.data()),s})}setUserSession(e){return D(this,null,function*(){let t=this.cacheService.get(`user_${e}`);if(t){console.log("Datos de usuario obtenidos del cach\xE9."),this.storeUserDataInLocalStorage(e,t);return}let r=er(this.firestore,`users/${e}`),i=yield Ji(r);if(i.exists()){let s=i.data();this.storeUserDataInLocalStorage(e,s),this.cacheService.set(`user_${e}`,s)}else console.error("El usuario no existe en la base de datos.")})}storeUserDataInLocalStorage(e,t){let r=t?.nombre||"",i=t?.correo||"",s=t?.telefono||"";localStorage.setItem("username",e),localStorage.setItem("name",r),localStorage.setItem("email",i),localStorage.setItem("phone",s)}hasSeenWelcome(e){return D(this,null,function*(){if(localStorage.getItem("welcomeSeen")==="true")return!0;let r=er(this.firestore,`users/${e}`),i=yield Ji(r),s=i.exists()&&i.data()?.welcomeSeen===!0;return s&&localStorage.setItem("welcomeSeen","true"),s})}markWelcomeAsSeen(e){return D(this,null,function*(){let t=er(this.firestore,`users/${e}`);yield jh(t,{welcomeSeen:!0},{merge:!0}),localStorage.setItem("welcomeSeen","true")})}isUserLoggedIn(){return localStorage.getItem("username")!==null}getUsername(){return localStorage.getItem("username")}getName(){return localStorage.getItem("name")}setTema(e){localStorage.setItem("tema",e)}getTema(){return localStorage.getItem("tema")}static \u0275fac=function(t){return new(t||n)(Y(Xn),Y(Po))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var $h=class n{constructor(e,t){this.authService=e;this.router=t}username="";errorMessage="";login(){return D(this,null,function*(){this.errorMessage="",this.username.trim()?(yield this.authService.userExists(this.username))?(yield this.authService.setUserSession(this.username),this.router.navigate(["/bienvenida"])):this.errorMessage="El usuario no existe. Por favor, intenta con otro nombre.":this.errorMessage="Por favor, ingresa un nombre de usuario."})}static \u0275fac=function(t){return new(t||n)(he(Rn),he(In))};static \u0275cmp=Bt({type:n,selectors:[["app-login"]],standalone:!0,features:[vn],decls:18,vars:2,consts:[[1,"background-container"],["src","imgs/fondo.png","alt","Fondo",1,"background-image"],[1,"login-container"],[1,"login-box"],[1,"logo"],["src","imgs/wow-logo.png","alt","Logo OWOW"],[1,"welcome-title"],[1,"subtitle"],[1,"input-group"],[1,"input-icon"],["type","text","placeholder","Correo electr\xF3nico",1,"input-field",3,"ngModelChange","ngModel"],["NgIf","errorMessage",1,"error-message"],[1,"login-button",3,"click"],[1,"button-icon"]],template:function(t,r){t&1&&(ve(0,"div",0),et(1,"img",1),ve(2,"div",2)(3,"div",3)(4,"div",4),et(5,"img",5),De(),ve(6,"h1",6),Le(7,"Bienvenido de vuelta"),De(),ve(8,"p",7),Le(9,"Inicia Sesi\xF3n"),De(),ve(10,"div",8),et(11,"span",9),ve(12,"input",10),Og("ngModelChange",function(s){return xb(r.username,s)||(r.username=s),s}),De()(),ve(13,"p",11),Le(14),De(),ve(15,"button",12),sn("click",function(){return r.login()}),et(16,"span",13),Le(17," Ingresar "),De()()()()),t&2&&(pt(12),Pg("ngModel",r.username),pt(2),hi(r.errorMessage))},dependencies:[gT,sd,hT,Bm],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;width:100vw;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden}.background-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;position:absolute;top:0;left:0;z-index:-1}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-end;height:100vh;width:100%;padding:0;box-sizing:border-box;position:relative;z-index:1}.login-box[_ngcontent-%COMP%]{background-color:#fff;border-radius:20px 20px 0 0;padding:20px 30px 40px;width:100%;max-width:350px;min-height:70vh;box-shadow:0 -4px 12px #0000001a;text-align:left;display:flex;flex-direction:column;justify-content:flex-start}.logo[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px}.welcome-title[_ngcontent-%COMP%]{font-size:26px;color:#333;font-weight:700;margin:0 0 5px}.subtitle[_ngcontent-%COMP%]{font-size:18px;color:#666;margin-bottom:20px}.error-message[_ngcontent-%COMP%]{color:#ff4d4f;font-size:14px;margin-top:10px;text-align:left}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#f0f0f0;border-radius:10px;padding:12px;margin-bottom:20px}.input-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-right:10px}.input-field[_ngcontent-%COMP%]{border:none;outline:none;background:transparent;width:100%;font-size:16px;color:#333}.input-field[_ngcontent-%COMP%]::placeholder{color:#aaa}.login-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#6a4c93;color:#fff;border:none;border-radius:25px;width:100%;padding:12px;font-size:16px;font-weight:700;cursor:pointer;transition:background-color .3s ease;margin-top:20px}.login-button[_ngcontent-%COMP%]:hover{background-color:#5a3b7d}.button-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-right:8px}"]})};var qh=class n{constructor(e,t){this.authService=e;this.router=t}username="";name="";ngOnInit(){return D(this,null,function*(){this.username=this.authService.getUsername(),this.name=this.authService.getName(),this.username?yield this.authService.markWelcomeAsSeen(this.username):this.router.navigate(["/login"])})}continue(){let e=this.authService.getTema();e?this.router.navigate([`/trivia/${e}`]):console.log("No hay tema guardado. Permanecer en la p\xE1gina de bienvenida o ejecutar otra l\xF3gica.")}static \u0275fac=function(t){return new(t||n)(he(Rn),he(In))};static \u0275cmp=Bt({type:n,selectors:[["app-bienvenida"]],decls:21,vars:1,consts:[[1,"background-container"],["src","imgs/fondo.png","alt","Fondo",1,"background-image"],[1,"header"],[1,"greeting"],[1,"morning-text"],[1,"user-name"],[1,"profile-image"],["src","imgs/wow-logo.png","alt","Perfil de Usuario"],[1,"welcome-container"],[1,"welcome-box"],[1,"content"],[1,"logo"],["src","imgs/wow-logo.png","alt","Logo OWOW"],[1,"welcome-title"],[1,"welcome-content"],[1,"continue-button",3,"click"]],template:function(t,r){t&1&&(ve(0,"div",0),et(1,"img",1),ve(2,"div",2)(3,"div",3)(4,"p",4),Le(5,"\u{1F31E} Buen d\xEDa"),De(),ve(6,"h2",5),Le(7),De()(),ve(8,"div",6),et(9,"img",7),De()(),ve(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11),et(14,"img",12),De(),ve(15,"h1",13),Le(16,"Bienvenido a la experiencia"),De(),ve(17,"p",14),Le(18," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod malesuada. "),De()(),ve(19,"button",15),sn("click",function(){return r.continue()}),Le(20,"Continuar"),De()()()()),t&2&&(pt(7),hi(r.name))},styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;width:100vw;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden}.background-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;position:absolute;top:0;left:0;z-index:-1}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:30px 20px;width:100%;box-sizing:border-box;color:#fff;margin-top:40px}.greeting[_ngcontent-%COMP%]{display:flex;flex-direction:column}.morning-text[_ngcontent-%COMP%]{font-size:18px;font-weight:400;margin:0;color:#f1d7ff}.user-name[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin:8px 0 0}.profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;border:2px solid #ffffff}.welcome-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-end;height:100vh;width:100%;padding:0;box-sizing:border-box;position:relative;z-index:1}.welcome-box[_ngcontent-%COMP%]{background-color:#fff;border-radius:20px 20px 0 0;padding:30px;width:100%;max-width:350px;min-height:90vh;box-shadow:0 -4px 12px #0000001a;text-align:left;display:flex;flex-direction:column;justify-content:flex-start}.continue-button[_ngcontent-%COMP%]{background-color:#6a4c93;color:#fff;border:none;border-radius:25px;width:100%;padding:12px;font-size:16px;font-weight:700;cursor:pointer;text-align:center;transition:background-color .3s ease;margin-top:20px}.continue-button[_ngcontent-%COMP%]:hover{background-color:#5a3b7d}.logo[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px}.welcome-title[_ngcontent-%COMP%]{font-size:22px;color:#333;font-weight:700;margin:0 0 20px}.welcome-content[_ngcontent-%COMP%]{font-size:16px;color:#666;line-height:1.6}"]})};var zh=class n{constructor(e,t){this.firestore=e;this.cacheService=t}getTriviaData(e){return D(this,null,function*(){let t=this.cacheService.get(`trivia_${e}`);if(t)return console.log("Datos de trivia obtenidos del cach\xE9."),t;let r=localStorage.getItem(`trivia_${e}`);if(r){let o=JSON.parse(r);return this.cacheService.set(`trivia_${e}`,o),console.log("Datos de trivia obtenidos de localStorage."),o}let i=yield Ji(er(this.firestore,`trivia/${e}`)),s=i.exists()?i.data():null;return s&&(this.cacheService.set(`trivia_${e}`,s),localStorage.setItem(`trivia_${e}`,JSON.stringify(s))),s})}getQuestionsByTema(e){return D(this,null,function*(){let t=this.cacheService.get(`questions_${e}`);if(t)return console.log("Preguntas obtenidas del cach\xE9."),t;let r=qA(this.firestore,`trivia/${e}/preguntas`),s=(yield GA(r)).docs.map(o=>L({id:o.id},o.data()));return this.cacheService.set(`questions_${e}`,s),s})}hasCompletedTrivia(e,t){return D(this,null,function*(){let r=`completed_${e}_${t}`,i=this.cacheService.get(r);if(i!==void 0)return console.log("Estado de trivia completada obtenido del cach\xE9."),i;let s=er(this.firestore,`users/${e}/trivias/${t}`),o=yield Ji(s),a=o.exists()&&o.data()?.completed===!0;return this.cacheService.set(r,a),a})}markTriviaAsCompleted(e,t){return D(this,null,function*(){let r=er(this.firestore,`users/${e}/trivias/${t}`);yield jh(r,{completed:!0},{merge:!0}),this.cacheService.set(`completed_${e}_${t}`,!0)})}static \u0275fac=function(t){return new(t||n)(Y(Xn),Y(Po))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};function MB(n,e){if(n&1){let t=Mb();ve(0,"button",14),sn("click",function(){let i=hD(t).$implicit,s=xg();return fD(s.selectAnswer(i))}),Le(1),De()}if(n&2){let t=e.$implicit,r=xg();ba("selected",r.selectedAnswer===t),pt(),fi(" ",r.currentQuestion==null?null:r.currentQuestion[t]," ")}}var Gh=class n{constructor(e,t,r,i){this.triviaService=e;this.route=t;this.router=r;this.authService=i}tema="";questions=[];answeredQuestions=new Set;currentQuestionIndex=0;currentQuestion;feedbackMessage="";feedbackClass="";isAnswered=!1;triviaName="";objetivo=0;answeredCorrectly=0;userId="";timeLeft=10;timerInterval;selectedAnswer="";ngOnInit(){return D(this,null,function*(){if(this.tema=this.route.snapshot.paramMap.get("tema"),this.userId=this.authService.getUsername()||"",this.tema){if(yield this.triviaService.hasCompletedTrivia(this.userId,this.tema)){this.router.navigate(["/bienvenida"]);return}yield this.loadTriviaData()}})}ngOnDestroy(){this.clearTimer()}loadTriviaData(){return D(this,null,function*(){let e=yield this.triviaService.getTriviaData(this.tema);e&&(this.triviaName=e.nombre||"",this.objetivo=Number(e.objetivo)||0,yield this.loadQuestions())})}loadQuestions(){return D(this,null,function*(){this.questions=this.shuffleArray((yield this.triviaService.getQuestionsByTema(this.tema)).filter(e=>!this.answeredQuestions.has(e.id))),this.currentQuestionIndex=0,this.currentQuestion=this.questions[this.currentQuestionIndex],this.startTimer()})}shuffleArray(e){for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}getOptionKeys(e){return Object.keys(e).filter(t=>!isNaN(Number(t))).sort()}selectAnswer(e){if(this.isAnswered)return;this.selectedAnswer=e,this.isAnswered=!0,this.clearTimer();let t=this.currentQuestion.respuesta.toString();e===t?this.processCorrectAnswer():this.processIncorrectAnswer(),setTimeout(()=>this.nextQuestion(),2e3)}processCorrectAnswer(){this.feedbackMessage="\xA1Correcto!",this.feedbackClass="feedback-overlay show correcto",this.answeredCorrectly++,this.answeredQuestions.add(this.currentQuestion.id),this.answeredCorrectly>=this.objetivo&&this.completeTrivia()}processIncorrectAnswer(){this.feedbackMessage="Incorrecto",this.feedbackClass="feedback-overlay show incorrecto"}nextQuestion(){this.resetFeedback(),this.currentQuestionIndex<this.questions.length-1?(this.currentQuestionIndex++,this.currentQuestion=this.questions[this.currentQuestionIndex],this.startTimer()):this.resetUnansweredQuestions()}resetUnansweredQuestions(){this.questions=this.shuffleArray(this.questions.filter(e=>!this.answeredQuestions.has(e.id))),this.questions.length===0?(console.log("No hay preguntas restantes. Reiniciando todas las preguntas."),this.loadQuestions()):(console.log("Reiniciando preguntas no contestadas."),this.currentQuestionIndex=0,this.currentQuestion=this.questions[this.currentQuestionIndex],this.startTimer())}completeTrivia(){return D(this,null,function*(){yield this.triviaService.markTriviaAsCompleted(this.userId,this.triviaName),this.router.navigate(["/bienvenida"])})}startTimer(){this.timeLeft=10,this.timerInterval=setInterval(()=>{this.timeLeft>0?this.timeLeft--:this.processTimeOut()},1e3)}processTimeOut(){this.clearTimer(),this.feedbackMessage="Tiempo agotado",this.feedbackClass="feedback-overlay show incorrecto",this.isAnswered=!0,setTimeout(()=>this.nextQuestion(),2e3)}clearTimer(){this.timerInterval&&clearInterval(this.timerInterval)}resetFeedback(){this.isAnswered=!1,this.feedbackMessage="",this.feedbackClass="",this.selectedAnswer=""}static \u0275fac=function(t){return new(t||n)(he(zh),he(Er),he(In),he(Rn))};static \u0275cmp=Bt({type:n,selectors:[["app-trivia"]],standalone:!0,features:[vn],decls:21,vars:11,consts:[[1,"background-container"],["src","imgs/fondo.png","alt","Fondo",1,"background-image"],[1,"trivia-header"],[1,"progress-fill"],[1,"icon"],[1,"title"],[1,"timer"],[1,"trivia-container"],[1,"pregunta-card"],[1,"pregunta"],[1,"opciones"],["class","opcion",3,"selected","click",4,"ngFor","ngForOf"],[1,"confirmar",3,"click","disabled"],[1,"feedback-overlay",3,"ngClass"],[1,"opcion",3,"click"]],template:function(t,r){t&1&&(ve(0,"div",0),et(1,"img",1),ve(2,"div",2),et(3,"div",3),ve(4,"span",4),Le(5,"\u{1F37F}"),De(),ve(6,"span",5),Le(7),Ob(8,"uppercase"),De(),ve(9,"span",6),Le(10),De()(),ve(11,"div",7)(12,"div",8)(13,"div",9),Le(14),De()(),ve(15,"div",10),Ng(16,MB,2,3,"button",11),De(),ve(17,"button",12),sn("click",function(){return r.nextQuestion()}),Le(18,"Siguiente"),De(),ve(19,"div",13),Le(20),De()()()),t&2&&(pt(3),Rl("width",r.timeLeft/10*100,"%"),pt(4),hi(kb(8,9,r.triviaName)),pt(3),fi("",r.timeLeft,"'"),pt(4),fi(" ",r.currentQuestion==null?null:r.currentQuestion.id," "),pt(2),Da("ngForOf",r.getOptionKeys(r.currentQuestion)),pt(),Da("disabled",!r.isAnswered),pt(2),Da("ngClass",r.feedbackClass),pt(),fi(" ",r.feedbackMessage," "))},dependencies:[$g,tC,nC,rC],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100vh;width:100vw;margin:0;overflow:auto;display:flex;align-items:center;justify-content:center;font-family:Arial,sans-serif}.background-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:auto}.background-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;position:absolute;top:0;left:0;z-index:-1}.trivia-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;width:100%;max-width:500px;height:90vh;border-radius:20px 20px 0 0;box-shadow:0 -4px 12px #0000001a;padding:20px;box-sizing:border-box;overflow:auto}.trivia-header[_ngcontent-%COMP%]{position:relative;width:100%;height:60px;display:flex;align-items:center;justify-content:space-between;color:#333;font-size:1.2em;padding:0 20px;box-sizing:border-box}.progress-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:#d32f2f;z-index:1;transition:width 1s linear}.trivia-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .trivia-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .trivia-header[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{font-size:1.3em}.title[_ngcontent-%COMP%]{font-weight:700;flex:1;text-align:left}.timer[_ngcontent-%COMP%]{font-weight:700;margin-left:auto;font-size:1.1em}.image-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-top:20px}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border-radius:8px;box-shadow:0 4px 8px #0003}.pregunta-card[_ngcontent-%COMP%]{width:90%;background-color:#f7f8fa;color:#333;padding:15px;border-radius:12px;box-shadow:0 4px 8px #0003;margin:15px 0;min-height:20%;display:flex;align-items:center;justify-content:center}.pregunta[_ngcontent-%COMP%]{font-size:1.3em;font-style:italic;text-align:center}.opciones[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:10px}.opcion[_ngcontent-%COMP%]{background-color:#e0e0e0;color:#333;padding:15px;border-radius:8px;font-size:1.2em;cursor:pointer;text-align:center;transition:all .3s ease;border:1px solid #ccc}.opcion[_ngcontent-%COMP%]:hover{background-color:#d0d0d0}.opcion.selected[_ngcontent-%COMP%]{background-color:#bbdefb;border-color:#1976d2;color:#1976d2}.confirmar[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;padding:15px;margin-top:20px;border:none;border-radius:8px;font-size:1.2em;cursor:pointer;transition:background-color .3s ease,transform .2s ease;box-shadow:0 4px 8px #0003;width:100%;max-width:200px}.confirmar[_ngcontent-%COMP%]:disabled{background-color:#9e9e9e;cursor:not-allowed;box-shadow:none}.confirmar[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0d47a1}.confirmar[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98)}.feedback-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000c;color:#fff;display:flex;align-items:center;justify-content:center;font-size:2em;text-align:center;z-index:1000;opacity:0;visibility:hidden;transition:opacity .5s ease,visibility .5s ease}.feedback-overlay.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.feedback-overlay.correcto[_ngcontent-%COMP%]{background-color:#4caf50e6}.feedback-overlay.incorrecto[_ngcontent-%COMP%]{background-color:#e53935e6}"]})};var Wh=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bt({type:n,selectors:[["app-felicitacion"]],standalone:!0,features:[vn],decls:2,vars:0,template:function(t,r){t&1&&(ve(0,"p"),Le(1,"felicitacion works!"),De())}})};var Kh=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(e,t){return D(this,null,function*(){let r=e.paramMap.get("tema");r&&(localStorage.removeItem("tema"),this.authService.setTema(r));let i=this.authService.getUsername();return i?(yield this.authService.hasSeenWelcome(i))?!0:this.router.createUrlTree(["/bienvenida"]):this.router.createUrlTree(["/login"])})}static \u0275fac=function(t){return new(t||n)(Y(Rn),Y(In))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var YA=[{path:"login",component:$h},{path:"bienvenida",component:qh},{path:"trivia/:tema",component:Gh,canActivate:[Kh]},{path:"felicitacion",component:Wh},{path:"",redirectTo:"/login",pathMatch:"full"}];var nR="firebasestorage.googleapis.com",NB="storageBucket",xB=2*60*1e3,PB=10*60*1e3;var Mn=class n extends bt{constructor(e,t,r=0){super(z_(e),`Firebase Storage: ${t} (${z_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return z_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},nr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(nr||{});function z_(n){return"storage/"+n}function OB(){let n="An unknown error occurred, please check the error payload for server response.";return new Mn(nr.UNKNOWN,n)}function kB(){return new Mn(nr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FB(){return new Mn(nr.CANCELED,"User canceled the upload/download.")}function LB(n){return new Mn(nr.INVALID_URL,"Invalid URL '"+n+"'.")}function VB(n){return new Mn(nr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function ZA(n){return new Mn(nr.INVALID_ARGUMENT,n)}function rR(){return new Mn(nr.APP_DELETED,"The Firebase app was deleted.")}function UB(n){return new Mn(nr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var tr=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw VB(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(H){H.path_=decodeURIComponent(H.path)}let h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),T={bucket:1,path:3},N=t===nR?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",k=new RegExp(`^https?://${N}/${i}/${M}`,"i"),F=[{regex:a,indices:c,postModify:s},{regex:v,indices:T,postModify:l},{regex:k,indices:{bucket:1,path:2},postModify:l}];for(let H=0;H<F.length;H++){let X=F[H],$=X.regex.exec(e);if($){let w=$[X.indices.bucket],y=$[X.indices.path];y||(y=""),r=new n(w,y),X.postModify(r);break}}if(r==null)throw LB(e);return r}},G_=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function jB(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function h(...M){l||(l=!0,e.apply(null,M))}function p(M){i=setTimeout(()=>{i=null,n(v,c())},M)}function m(){s&&clearTimeout(s)}function v(M,...k){if(l){m();return}if(M){m(),h.call(null,M,...k);return}if(c()||o){m(),h.call(null,M,...k);return}r<64&&(r*=2);let F;a===1?(a=2,F=0):F=(r+Math.random())*1e3,p(F)}let T=!1;function N(M){T||(T=!0,m(),!l&&(i!==null?(M||(a=2),clearTimeout(i),p(0)):M||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,N(!0)},t),N}function BB(n){n(!1)}function $B(n){return n!==void 0}function JA(n,e,t,r){if(r<e)throw ZA(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ZA(`Invalid value for '${n}'. Expected ${t} or less.`)}function HB(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var W_=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(W_||{});function qB(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var K_=class{constructor(e,t,r,i,s,o,a,c,l,h,p,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,T)=>{this.resolve_=v,this.reject_=T,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Oo(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===W_.NO_ERROR,c=s.getStatus();if(!a||qB(c,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===W_.ABORT;r(!1,new Oo(!1,null,h));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Oo(l,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());$B(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=OB();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?rR():FB();o(c)}else{let c=kB();o(c)}};this.canceled_?t(!1,new Oo(!1,null,!0)):this.backoffId_=jB(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&BB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Oo=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function zB(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function GB(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function WB(n,e){e&&(n["X-Firebase-GMPID"]=e)}function KB(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function QB(n,e,t,r,i,s,o=!0){let a=HB(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return WB(l,e),zB(l,t),GB(l,s),KB(l,r),new K_(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function YB(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function ZB(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var hK=256*1024;var Q_=class n{constructor(e,t){this._service=e,t instanceof tr?this._location=t:this._location=tr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new tr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZB(this._location.path)}get storage(){return this._service}get parent(){let e=YB(this._location.path);if(e===null)return null;let t=new tr(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw UB(e)}};function XA(n,e){let t=e?.[NB];return t==null?null:tr.makeFromBucketSpec(t,n)}function JB(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:ld(i,n.app.options.projectId))}var Y_=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=nR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xB,this._maxUploadRetryTime=PB,this._requests=new Set,i!=null?this._bucket=tr.makeFromBucketSpec(i,this._host):this._bucket=XA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tr.makeFromBucketSpec(this._url,e):this._bucket=XA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return D(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return D(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Q_(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new G_(rR());{let o=QB(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return D(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},eR="@firebase/storage",tR="0.13.2";var iR="storage";function sR(n=Di(),e){n=xt(n);let r=nc(n,iR).getImmediate({identifier:e}),i=ud("storage");return i&&oR(r,...i),r}function oR(n,e,t,r={}){JB(n,e,t,r)}function XB(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Y_(t,r,i,e,Tr)}function e$(){En(new Ct(iR,XB,"PUBLIC").setMultipleInstances(!0)),xe(eR,tR,""),xe(eR,tR,"esm2017")}e$();var Bc=class{constructor(e){return e}},aR="storage",Z_=class{constructor(){return Ti(aR)}};var J_=new W("angularfire2.storage-instances");function t$(n,e){let t=rc(aR,n,e);return t&&new Bc(t)}function n$(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Bc(r)}}var r$={provide:Z_,deps:[[new at,J_]]},i$={provide:Bc,useFactory:t$,deps:[[new at,J_],Qn]};function cR(n,...e){return xe("angularfire",Sr.full,"gcs"),yn([i$,r$,{provide:J_,useFactory:n$(n),multi:!0,deps:[Ee,wt,Si,Ai,[new at,Xs],[new at,Ci],...e]}])}var uR=Pt(sR,!0);var lR={providers:[$b({eventCoalescing:!0}),QC(YA),BT(()=>$T({projectId:"feria-wow",appId:"1:649771887294:web:171704f2e4a7ff4d35ccef",storageBucket:"feria-wow.firebasestorage.app",apiKey:"AIzaSyCHJiHlDv1Fk2JS7_v6UwlzutaM9cmU-bE",authDomain:"feria-wow.firebaseapp.com",messagingSenderId:"649771887294",measurementId:"G-WM7LLK7RJ4"})),HA(()=>WA()),cR(()=>uR())]};var Qh=class n{title="feria-wow-passport";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bt({type:n,selectors:[["app-root"]],standalone:!0,features:[vn],decls:1,vars:0,template:function(t,r){t&1&&et(0,"router-outlet")},dependencies:[Mm]})};hC(Qh,lR).catch(n=>console.error(n));
